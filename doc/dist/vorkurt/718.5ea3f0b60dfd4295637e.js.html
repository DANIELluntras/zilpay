<!DOCTYPE html>
<html>
  <head>
    <title>718.5ea3f0b60dfd4295637e.js</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" media="all" href="../../doc-style.css" />
    <script src="../../doc-filelist.js"></script>
    <script>
      var relativeDir = "../../";
      var thisFile = "dist/vorkurt/718.5ea3f0b60dfd4295637e.js";
      var defaultSidebar = true;
    </script>
    <script src="../../doc-script.js"></script>
  </head>
  <body>
    <div id="sidebar_wrapper">
      <div id="sidebar_switch">
        <span class="tree">Files</span>
        <span class="headings">Headings</span>
      </div>
      <div id="tree"></div>
      <div id="headings"></div>
    </div>
    <div id="sidebar-toggle"></div>
    <div id="container">
      <div class="background highlight"></div>
      <table cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="docs">
              <h1>718.5ea3f0b60dfd4295637e.js</h1>
            </td>
            <td class="code highlight"></td>
          </tr>

          <tr>
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1" id="section-1"></a>
              </div>
            </td>
            <td class="code highlight">
              <pre
                class="javascript"
              ><span class="hljs-meta">"use strict"</span>;<span class="hljs-function">(<span class="hljs-params">self.webpackChunkvorkurt=self.webpackChunkvorkurt||[]</span>).<span class="hljs-params">push</span>(<span class="hljs-params">[[<span class="hljs-number">718</span>],{<span class="hljs-number">7718</span>:(Jd,sr,L</span>)=&gt;</span>{L.r(sr),L.d(sr,{<span class="hljs-attr">HeaderModule</span>:<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>ms});<span class="hljs-keyword">var</span> K=L(<span class="hljs-number">8583</span>),Bn=L(<span class="hljs-number">4419</span>),_=L(<span class="hljs-number">7716</span>),ne=L(<span class="hljs-number">7238</span>),rn=L(<span class="hljs-number">8002</span>),Qe=L(<span class="hljs-number">281</span>),qi=L(<span class="hljs-number">6215</span>),ie=L(<span class="hljs-number">9765</span>);<span class="hljs-keyword">let</span> Xe=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>._statePopUpLogin=<span class="hljs-keyword">new</span> qi.X(!<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>.statePopUp$=<span class="hljs-keyword">this</span>._statePopUpLogin.asObservable(),<span class="hljs-keyword">this</span>._coordinates=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.coordinates$=<span class="hljs-keyword">this</span>._coordinates.asObservable()}coordinates(l){<span class="hljs-keyword">this</span>._coordinates.next(l)}statePopLogin(l){<span class="hljs-keyword">this</span>._statePopUpLogin.next(l)}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275prov=_.Yz7({<span class="hljs-attr">token</span>:g,<span class="hljs-attr">factory</span>:g.\u0275fac,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),g})();<span class="hljs-keyword">var</span> rt=L(<span class="hljs-number">625</span>),rr=L(<span class="hljs-number">7636</span>),or=L(<span class="hljs-number">9335</span>),Fo=L(<span class="hljs-number">8403</span>),zi=L(<span class="hljs-number">1233</span>),et=L(<span class="hljs-number">2458</span>),Uo=L(<span class="hljs-number">6237</span>),lt=L(<span class="hljs-number">9238</span>);<span class="hljs-keyword">const</span> D=[<span class="hljs-string">"mat-button"</span>,<span class="hljs-string">""</span>],qn=[<span class="hljs-string">"*"</span>],Y=[<span class="hljs-string">"mat-button"</span>,<span class="hljs-string">"mat-flat-button"</span>,<span class="hljs-string">"mat-icon-button"</span>,<span class="hljs-string">"mat-raised-button"</span>,<span class="hljs-string">"mat-stroked-button"</span>,<span class="hljs-string">"mat-mini-fab"</span>,<span class="hljs-string">"mat-fab"</span>],ji=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,et.pj</span>)(<span class="hljs-params">(<span class="hljs-number">0</span>,et.Id</span>)(<span class="hljs-params">(<span class="hljs-number">0</span>,et.Kr</span>)(<span class="hljs-params">class{constructor(g</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_elementRef</span>=<span class="hljs-params">g</span>}})));<span class="hljs-params">let</span> <span class="hljs-params">ar</span>=(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ji</span></span>{<span class="hljs-keyword">constructor</span>(l,d,y){<span class="hljs-keyword">super</span>(l),<span class="hljs-keyword">this</span>._focusMonitor=d,<span class="hljs-keyword">this</span>._animationMode=y,<span class="hljs-keyword">this</span>.isRoundButton=<span class="hljs-keyword">this</span>._hasHostAttributes(<span class="hljs-string">"mat-fab"</span>,<span class="hljs-string">"mat-mini-fab"</span>),<span class="hljs-keyword">this</span>.isIconButton=<span class="hljs-keyword">this</span>._hasHostAttributes(<span class="hljs-string">"mat-icon-button"</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> b <span class="hljs-keyword">of</span> Y)<span class="hljs-keyword">this</span>._hasHostAttributes(b)&amp;&amp;<span class="hljs-keyword">this</span>._getHostElement().classList.add(b);l.nativeElement.classList.add(<span class="hljs-string">"mat-button-base"</span>),<span class="hljs-keyword">this</span>.isRoundButton&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.color=<span class="hljs-string">"accent"</span></span>)}<span class="hljs-params">ngAfterViewInit</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_focusMonitor</span>.<span class="hljs-params">monitor</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._elementRef,!<span class="hljs-number">0</span></span>)}<span class="hljs-params">ngOnDestroy</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_focusMonitor</span>.<span class="hljs-params">stopMonitoring</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._elementRef</span>)}<span class="hljs-params">focus</span>(<span class="hljs-params">l,d</span>){<span class="hljs-params">l</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_focusMonitor</span>.<span class="hljs-params">focusVia</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._getHostElement(</span>),<span class="hljs-params">l</span>,<span class="hljs-params">d</span>):<span class="hljs-params">this</span>.<span class="hljs-params">_getHostElement</span><span class="hljs-params">()</span>.<span class="hljs-params">focus</span>(<span class="hljs-params">d</span>)}<span class="hljs-params">_getHostElement</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_elementRef</span>.<span class="hljs-params">nativeElement</span>}<span class="hljs-params">_isRippleDisabled</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">disableRipple</span>||<span class="hljs-params">this</span>.<span class="hljs-params">disabled</span>}<span class="hljs-params">_hasHostAttributes</span>(<span class="hljs-params">...l</span>){<span class="hljs-params">return</span> <span class="hljs-params">l</span>.<span class="hljs-params">some</span>(<span class="hljs-params">d=&gt;<span class="hljs-keyword">this</span>._getHostElement(</span>).<span class="hljs-params">hasAttribute</span>(<span class="hljs-params">d</span>))}}<span class="hljs-params">return</span> <span class="hljs-params">g</span>.\<span class="hljs-params">u0275fac</span>=<span class="hljs-params">function</span>(<span class="hljs-params">l</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span>(<span class="hljs-params">l||g</span>)(<span class="hljs-params">_.Y36(_.SBq</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Y36</span>(<span class="hljs-params">lt.tE</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Y36</span>(<span class="hljs-params">Uo.Qb,<span class="hljs-number">8</span></span>))},<span class="hljs-params">g</span>.\<span class="hljs-params">u0275cmp</span>=<span class="hljs-params">_</span>.<span class="hljs-params">Xpm</span>(<span class="hljs-params">{type:g,selectors:[[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-button"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-raised-button"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-icon-button"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-fab"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-mini-fab"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-stroked-button"</span>,<span class="hljs-string">""</span>],[<span class="hljs-string">"button"</span>,<span class="hljs-string">"mat-flat-button"</span>,<span class="hljs-string">""</span>]],viewQuery:<span class="hljs-keyword">function</span>(l,d</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>&amp;l&amp;&amp;_.Gf(et.wG,<span class="hljs-number">5</span></span>),2&amp;<span class="hljs-params">l</span>){<span class="hljs-params">let</span> <span class="hljs-params">y</span>;<span class="hljs-params">_</span>.<span class="hljs-params">iGM</span>(<span class="hljs-params">y=_.CRH(</span>))&amp;&amp;(<span class="hljs-params">d.ripple=y.first</span>)}},<span class="hljs-params">hostAttrs</span>:[1,"<span class="hljs-params">mat</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">indicator</span>"],<span class="hljs-params">hostVars</span>:5,<span class="hljs-params">hostBindings</span>:<span class="hljs-params">function</span>(<span class="hljs-params">l,d</span>){2&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.uIk(<span class="hljs-string">"disabled"</span>,d.disabled||<span class="hljs-literal">null</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">ekj</span>(<span class="hljs-params"><span class="hljs-string">"_mat-animation-noopable"</span>,<span class="hljs-string">"NoopAnimations"</span>===d._animationMode</span>)(<span class="hljs-params"><span class="hljs-string">"mat-button-disabled"</span>,d.disabled</span>))},<span class="hljs-params">inputs</span>:{<span class="hljs-params">disabled</span>:"<span class="hljs-params">disabled</span>",<span class="hljs-params">disableRipple</span>:"<span class="hljs-params">disableRipple</span>",<span class="hljs-params">color</span>:"<span class="hljs-params">color</span>"},<span class="hljs-params">exportAs</span>:["<span class="hljs-params">matButton</span>"],<span class="hljs-params">features</span>:[<span class="hljs-params">_</span>.<span class="hljs-params">qOj</span>],<span class="hljs-params">attrs</span>:<span class="hljs-params">D</span>,<span class="hljs-params">ngContentSelectors</span>:<span class="hljs-params">qn</span>,<span class="hljs-params">decls</span>:4,<span class="hljs-params">vars</span>:5,<span class="hljs-params">consts</span>:[[1,"<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>"],["<span class="hljs-params">matRipple</span>","",1,"<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">ripple</span>",3,"<span class="hljs-params">matRippleDisabled</span>","<span class="hljs-params">matRippleCentered</span>","<span class="hljs-params">matRippleTrigger</span>"],[1,"<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>"]],<span class="hljs-params">template</span>:<span class="hljs-params">function</span>(<span class="hljs-params">l,d</span>){1&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.F$t(</span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-string">"span"</span>,<span class="hljs-number">0</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Hsn</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-string">"span"</span>,<span class="hljs-number">1</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">3</span>,<span class="hljs-string">"span"</span>,<span class="hljs-number">2</span></span>)),2&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.xp6(<span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">ekj</span>(<span class="hljs-params"><span class="hljs-string">"mat-button-ripple-round"</span>,d.isRoundButton||d.isIconButton</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"matRippleDisabled"</span>,d._isRippleDisabled(</span>))(<span class="hljs-params"><span class="hljs-string">"matRippleCentered"</span>,d.isIconButton</span>)(<span class="hljs-params"><span class="hljs-string">"matRippleTrigger"</span>,d._getHostElement(</span>)))},<span class="hljs-params">directives</span>:[<span class="hljs-params">et</span>.<span class="hljs-params">wG</span>],<span class="hljs-params">styles</span>:[".<span class="hljs-params">mat</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>:<span class="hljs-params">hover</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-button-disabled</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>:<span class="hljs-params">hover</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-button-disabled</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:.04}@<span class="hljs-params">media</span>(<span class="hljs-params">hover: none</span>){.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>:<span class="hljs-params">hover</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-button-disabled</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>:<span class="hljs-params">hover</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-button-disabled</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:0}}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>{<span class="hljs-params">box</span>-<span class="hljs-params">sizing</span>:<span class="hljs-params">border</span>-<span class="hljs-params">box</span>;<span class="hljs-params">position</span>:<span class="hljs-params">relative</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">moz</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">ms</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">cursor</span>:<span class="hljs-params">pointer</span>;<span class="hljs-params">outline</span>:<span class="hljs-params">none</span>;<span class="hljs-params">border</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">tap</span>-<span class="hljs-params">highlight</span>-<span class="hljs-params">color</span>:<span class="hljs-params">transparent</span>;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">white</span>-<span class="hljs-params">space</span>:<span class="hljs-params">nowrap</span>;<span class="hljs-params">text</span>-<span class="hljs-params">decoration</span>:<span class="hljs-params">none</span>;<span class="hljs-params">vertical</span>-<span class="hljs-params">align</span>:<span class="hljs-params">baseline</span>;<span class="hljs-params">text</span>-<span class="hljs-params">align</span>:<span class="hljs-params">center</span>;<span class="hljs-params">margin</span>:0;<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:64<span class="hljs-params">px</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:36<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0 16<span class="hljs-params">px</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:4<span class="hljs-params">px</span>;<span class="hljs-params">overflow</span>:<span class="hljs-params">visible</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>{<span class="hljs-params">cursor</span>:<span class="hljs-params">default</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:.12}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>{<span class="hljs-params">box</span>-<span class="hljs-params">sizing</span>:<span class="hljs-params">border</span>-<span class="hljs-params">box</span>;<span class="hljs-params">position</span>:<span class="hljs-params">relative</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">moz</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">ms</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">cursor</span>:<span class="hljs-params">pointer</span>;<span class="hljs-params">outline</span>:<span class="hljs-params">none</span>;<span class="hljs-params">border</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">tap</span>-<span class="hljs-params">highlight</span>-<span class="hljs-params">color</span>:<span class="hljs-params">transparent</span>;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">white</span>-<span class="hljs-params">space</span>:<span class="hljs-params">nowrap</span>;<span class="hljs-params">text</span>-<span class="hljs-params">decoration</span>:<span class="hljs-params">none</span>;<span class="hljs-params">vertical</span>-<span class="hljs-params">align</span>:<span class="hljs-params">baseline</span>;<span class="hljs-params">text</span>-<span class="hljs-params">align</span>:<span class="hljs-params">center</span>;<span class="hljs-params">margin</span>:0;<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:64<span class="hljs-params">px</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:36<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0 16<span class="hljs-params">px</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:4<span class="hljs-params">px</span>;<span class="hljs-params">overflow</span>:<span class="hljs-params">visible</span>;<span class="hljs-params">transform</span>:<span class="hljs-params">translate3d</span>(<span class="hljs-params"><span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span></span>);<span class="hljs-params">transition</span>:<span class="hljs-params">background</span> 400<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.25</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">1</span></span>),<span class="hljs-params">box</span>-<span class="hljs-params">shadow</span> 280<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span></span>)}.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>{<span class="hljs-params">cursor</span>:<span class="hljs-params">default</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:.12}.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">_mat</span>-<span class="hljs-params">animation</span>-<span class="hljs-params">noopable</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>{<span class="hljs-params">transition</span>:<span class="hljs-params">none</span>;<span class="hljs-params">animation</span>:<span class="hljs-params">none</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span>{<span class="hljs-params">border</span>:1<span class="hljs-params">px</span> <span class="hljs-params">solid</span> <span class="hljs-params">currentColor</span>;<span class="hljs-params">padding</span>:0 15<span class="hljs-params">px</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:34<span class="hljs-params">px</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">ripple</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">ripple</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">top</span>:-1<span class="hljs-params">px</span>;<span class="hljs-params">left</span>:-1<span class="hljs-params">px</span>;<span class="hljs-params">right</span>:-1<span class="hljs-params">px</span>;<span class="hljs-params">bottom</span>:-1<span class="hljs-params">px</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>{<span class="hljs-params">box</span>-<span class="hljs-params">sizing</span>:<span class="hljs-params">border</span>-<span class="hljs-params">box</span>;<span class="hljs-params">position</span>:<span class="hljs-params">relative</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">moz</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">ms</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">cursor</span>:<span class="hljs-params">pointer</span>;<span class="hljs-params">outline</span>:<span class="hljs-params">none</span>;<span class="hljs-params">border</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">tap</span>-<span class="hljs-params">highlight</span>-<span class="hljs-params">color</span>:<span class="hljs-params">transparent</span>;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">white</span>-<span class="hljs-params">space</span>:<span class="hljs-params">nowrap</span>;<span class="hljs-params">text</span>-<span class="hljs-params">decoration</span>:<span class="hljs-params">none</span>;<span class="hljs-params">vertical</span>-<span class="hljs-params">align</span>:<span class="hljs-params">baseline</span>;<span class="hljs-params">text</span>-<span class="hljs-params">align</span>:<span class="hljs-params">center</span>;<span class="hljs-params">margin</span>:0;<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:64<span class="hljs-params">px</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:36<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0 16<span class="hljs-params">px</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:4<span class="hljs-params">px</span>;<span class="hljs-params">overflow</span>:<span class="hljs-params">visible</span>;<span class="hljs-params">transform</span>:<span class="hljs-params">translate3d</span>(<span class="hljs-params"><span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span></span>);<span class="hljs-params">transition</span>:<span class="hljs-params">background</span> 400<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.25</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">1</span></span>),<span class="hljs-params">box</span>-<span class="hljs-params">shadow</span> 280<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span></span>);<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:0;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:50%;<span class="hljs-params">width</span>:56<span class="hljs-params">px</span>;<span class="hljs-params">height</span>:56<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0;<span class="hljs-params">flex</span>-<span class="hljs-params">shrink</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>{<span class="hljs-params">cursor</span>:<span class="hljs-params">default</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:.12}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">_mat</span>-<span class="hljs-params">animation</span>-<span class="hljs-params">noopable</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>{<span class="hljs-params">transition</span>:<span class="hljs-params">none</span>;<span class="hljs-params">animation</span>:<span class="hljs-params">none</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>{<span class="hljs-params">padding</span>:16<span class="hljs-params">px</span> 0;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:24<span class="hljs-params">px</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>{<span class="hljs-params">box</span>-<span class="hljs-params">sizing</span>:<span class="hljs-params">border</span>-<span class="hljs-params">box</span>;<span class="hljs-params">position</span>:<span class="hljs-params">relative</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">moz</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">ms</span>-<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">user</span>-<span class="hljs-params">select</span>:<span class="hljs-params">none</span>;<span class="hljs-params">cursor</span>:<span class="hljs-params">pointer</span>;<span class="hljs-params">outline</span>:<span class="hljs-params">none</span>;<span class="hljs-params">border</span>:<span class="hljs-params">none</span>;-<span class="hljs-params">webkit</span>-<span class="hljs-params">tap</span>-<span class="hljs-params">highlight</span>-<span class="hljs-params">color</span>:<span class="hljs-params">transparent</span>;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">white</span>-<span class="hljs-params">space</span>:<span class="hljs-params">nowrap</span>;<span class="hljs-params">text</span>-<span class="hljs-params">decoration</span>:<span class="hljs-params">none</span>;<span class="hljs-params">vertical</span>-<span class="hljs-params">align</span>:<span class="hljs-params">baseline</span>;<span class="hljs-params">text</span>-<span class="hljs-params">align</span>:<span class="hljs-params">center</span>;<span class="hljs-params">margin</span>:0;<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:64<span class="hljs-params">px</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:36<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0 16<span class="hljs-params">px</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:4<span class="hljs-params">px</span>;<span class="hljs-params">overflow</span>:<span class="hljs-params">visible</span>;<span class="hljs-params">transform</span>:<span class="hljs-params">translate3d</span>(<span class="hljs-params"><span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span></span>);<span class="hljs-params">transition</span>:<span class="hljs-params">background</span> 400<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.25</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">1</span></span>),<span class="hljs-params">box</span>-<span class="hljs-params">shadow</span> 280<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">1</span></span>);<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:0;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:50%;<span class="hljs-params">width</span>:40<span class="hljs-params">px</span>;<span class="hljs-params">height</span>:40<span class="hljs-params">px</span>;<span class="hljs-params">padding</span>:0;<span class="hljs-params">flex</span>-<span class="hljs-params">shrink</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">disabled</span>{<span class="hljs-params">cursor</span>:<span class="hljs-params">default</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:.12}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>::-<span class="hljs-params">moz</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">inner</span>{<span class="hljs-params">border</span>:0}.<span class="hljs-params">_mat</span>-<span class="hljs-params">animation</span>-<span class="hljs-params">noopable</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>{<span class="hljs-params">transition</span>:<span class="hljs-params">none</span>;<span class="hljs-params">animation</span>:<span class="hljs-params">none</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>{<span class="hljs-params">padding</span>:8<span class="hljs-params">px</span> 0;<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">block</span>;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:24<span class="hljs-params">px</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>{<span class="hljs-params">padding</span>:0;<span class="hljs-params">min</span>-<span class="hljs-params">width</span>:0;<span class="hljs-params">width</span>:40<span class="hljs-params">px</span>;<span class="hljs-params">height</span>:40<span class="hljs-params">px</span>;<span class="hljs-params">flex</span>-<span class="hljs-params">shrink</span>:0;<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:40<span class="hljs-params">px</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:50%}.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span> <span class="hljs-params">i</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>{<span class="hljs-params">line</span>-<span class="hljs-params">height</span>:24<span class="hljs-params">px</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">ripple</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">ripple</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">top</span>:0;<span class="hljs-params">left</span>:0;<span class="hljs-params">right</span>:0;<span class="hljs-params">bottom</span>:0;<span class="hljs-params">position</span>:<span class="hljs-params">absolute</span>;<span class="hljs-params">pointer</span>-<span class="hljs-params">events</span>:<span class="hljs-params">none</span>;<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:<span class="hljs-params">inherit</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">ripple</span>.<span class="hljs-params">mat</span>-<span class="hljs-params">ripple</span>:<span class="hljs-params">not</span>(<span class="hljs-params">:empty</span>){<span class="hljs-params">transform</span>:<span class="hljs-params">translateZ</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>)}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">opacity</span>:0;<span class="hljs-params">transition</span>:<span class="hljs-params">opacity</span> 200<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.35</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">1</span></span>),<span class="hljs-params">background</span>-<span class="hljs-params">color</span> 200<span class="hljs-params">ms</span> <span class="hljs-params">cubic</span>-<span class="hljs-params">bezier</span>(<span class="hljs-params"><span class="hljs-number">0.35</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">1</span></span>)}.<span class="hljs-params">_mat</span>-<span class="hljs-params">animation</span>-<span class="hljs-params">noopable</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">focus</span>-<span class="hljs-params">overlay</span>{<span class="hljs-params">transition</span>:<span class="hljs-params">none</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">ripple</span>-<span class="hljs-params">round</span>{<span class="hljs-params">border</span>-<span class="hljs-params">radius</span>:50%;<span class="hljs-params">z</span>-<span class="hljs-params">index</span>:1}.<span class="hljs-params">mat</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">stroked</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*,.<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">wrapper</span>&gt;*{<span class="hljs-params">vertical</span>-<span class="hljs-params">align</span>:<span class="hljs-params">middle</span>}.<span class="hljs-params">mat</span>-<span class="hljs-params">form</span>-<span class="hljs-params">field</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-form-field-appearance-legacy</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">form</span>-<span class="hljs-params">field</span>-<span class="hljs-params">prefix</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">mat</span>-<span class="hljs-params">form</span>-<span class="hljs-params">field</span>:<span class="hljs-params">not</span>(<span class="hljs-params">.mat-form-field-appearance-legacy</span>) .<span class="hljs-params">mat</span>-<span class="hljs-params">form</span>-<span class="hljs-params">field</span>-<span class="hljs-params">suffix</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>{<span class="hljs-params">display</span>:<span class="hljs-params">inline</span>-<span class="hljs-params">flex</span>;<span class="hljs-params">justify</span>-<span class="hljs-params">content</span>:<span class="hljs-params">center</span>;<span class="hljs-params">align</span>-<span class="hljs-params">items</span>:<span class="hljs-params">center</span>;<span class="hljs-params">font</span>-<span class="hljs-params">size</span>:<span class="hljs-params">inherit</span>;<span class="hljs-params">width</span>:2.5<span class="hljs-params">em</span>;<span class="hljs-params">height</span>:2.5<span class="hljs-params">em</span>}.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">raised</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">icon</span>-<span class="hljs-params">button</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">fab</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">mini</span>-<span class="hljs-params">fab</span>{<span class="hljs-params">outline</span>:<span class="hljs-params">solid</span> 1<span class="hljs-params">px</span>}.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">base</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">keyboard</span>-<span class="hljs-params">focused</span>,.<span class="hljs-params">cdk</span>-<span class="hljs-params">high</span>-<span class="hljs-params">contrast</span>-<span class="hljs-params">active</span> .<span class="hljs-params">mat</span>-<span class="hljs-params">button</span>-<span class="hljs-params">base</span>.<span class="hljs-params">cdk</span>-<span class="hljs-params">program</span>-<span class="hljs-params">focused</span>{<span class="hljs-params">outline</span>:<span class="hljs-params">solid</span> 3<span class="hljs-params">px</span>}\<span class="hljs-params">n</span>"],<span class="hljs-params">encapsulation</span>:2,<span class="hljs-params">changeDetection</span>:0}),<span class="hljs-params">g</span>})<span class="hljs-params">()</span>,<span class="hljs-params">Bo</span>=(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275mod=_.oAB({<span class="hljs-attr">type</span>:g}),g.\u0275inj=_.cJS({<span class="hljs-attr">imports</span>:[[et.si,et.BQ],et.BQ]}),g})();<span class="hljs-keyword">const</span> O=[<span class="hljs-string">"popUp"</span>];<span class="hljs-keyword">let</span> Hi=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l,d,y,b,E){<span class="hljs-keyword">this</span>._popState=l,<span class="hljs-keyword">this</span>._render=d,<span class="hljs-keyword">this</span>._authService=y,<span class="hljs-keyword">this</span>._userService=b,<span class="hljs-keyword">this</span>._spinnerService=E,<span class="hljs-keyword">this</span>.start=<span class="hljs-number">5e3</span>,<span class="hljs-keyword">this</span>.remaning=<span class="hljs-number">5e3</span>}ngOnInit(){<span class="hljs-keyword">this</span>.dataUser=<span class="hljs-keyword">this</span>._userService.getUserLoggedIn()}signOut(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._popState.statePopLogin(!<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>._spinnerService.setStateBehaviorSpinner(!<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>._authService.logout(),<span class="hljs-keyword">this</span>._spinnerService.setStateBehaviorSpinner(!<span class="hljs-number">1</span>),<span class="hljs-number">1</span>}pauseTimeout(){clearTimeout(<span class="hljs-keyword">this</span>.timerId),<span class="hljs-keyword">this</span>.remaning-=<span class="hljs-built_in">Date</span>.now()-<span class="hljs-keyword">this</span>.start,<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.timerId)}resumeTimeOut(){<span class="hljs-keyword">this</span>.start=<span class="hljs-built_in">Date</span>.now(),clearTimeout(<span class="hljs-keyword">this</span>.timerId),setTimeout(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">"resume"</span>),<span class="hljs-number">3e3</span>),<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.start)}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)(_.Y36(Xe),_.Y36(_.Qsj),_.Y36(or.e),_.Y36(Fo.K),_.Y36(zi.V))},g.\u0275cmp=_.Xpm({<span class="hljs-attr">type</span>:g,<span class="hljs-attr">selectors</span>:[[<span class="hljs-string">"elix-pop-up-login"</span>]],<span class="hljs-attr">viewQuery</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l,d</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>&amp;l&amp;&amp;_.Gf(O,<span class="hljs-number">5</span>),<span class="hljs-number">2</span>&amp;l){<span class="hljs-keyword">let</span> y;_.iGM(y=_.CRH())&amp;&amp;<span class="hljs-function">(<span class="hljs-params">d.popUp=y.first</span>)}},<span class="hljs-params">decls</span>:9,<span class="hljs-params">vars</span>:1,<span class="hljs-params">consts</span>:[[1,"<span class="hljs-params">border</span>-2","<span class="hljs-params">rounded</span>-2<span class="hljs-params">xl</span>","<span class="hljs-params">text</span>-<span class="hljs-params">white</span>","<span class="hljs-params">w</span>-44","<span class="hljs-params">elix__border</span>-<span class="hljs-params">color</span>","<span class="hljs-params">border</span>-<span class="hljs-params">solid</span>",3,"<span class="hljs-params">mouseleave</span>","<span class="hljs-params">mouseenter</span>"],["<span class="hljs-params">popUp</span>",""],[1,"<span class="hljs-params">truncate</span>"],[1,"<span class="hljs-params">flex</span>","<span class="hljs-params">justify</span>-<span class="hljs-params">center</span>"],["<span class="hljs-params">mat</span>-<span class="hljs-params">flat</span>-<span class="hljs-params">button</span>","",3,"<span class="hljs-params">click</span>"]],<span class="hljs-params">template</span>:<span class="hljs-params">function</span>(<span class="hljs-params">l,d</span>){1&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.TgZ(<span class="hljs-number">0</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">NdJ</span>(<span class="hljs-params"><span class="hljs-string">"mouseleave"</span>,<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">resumeTimeOut</span><span class="hljs-params">()</span>})(<span class="hljs-params"><span class="hljs-string">"mouseenter"</span>,<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">pauseTimeout</span><span class="hljs-params">()</span>}),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-string">"div"</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">3</span>,<span class="hljs-string">"div"</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">4</span>,<span class="hljs-string">"h1"</span>,<span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_uU</span>(<span class="hljs-params"><span class="hljs-number">5</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">6</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">3</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">7</span>,<span class="hljs-string">"button"</span>,<span class="hljs-number">4</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">NdJ</span>(<span class="hljs-params"><span class="hljs-string">"click"</span>,<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">signOut</span><span class="hljs-params">()</span>}),<span class="hljs-params">_</span>.<span class="hljs-params">_uU</span>(<span class="hljs-params"><span class="hljs-number">8</span>,<span class="hljs-string">"Sign Out"</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>),2&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.xp6(<span class="hljs-number">5</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">hij</span>(<span class="hljs-params"><span class="hljs-string">""</span>,d.dataUser.email||d.dataUser.user.email,<span class="hljs-string">" "</span></span>))},<span class="hljs-params">directives</span>:[<span class="hljs-params">ar</span>],<span class="hljs-params">styles</span>:[".<span class="hljs-params">elix__border</span>-<span class="hljs-params">color</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">border</span>-<span class="hljs-params">color</span>:#1<span class="hljs-params">ea7fd</span>;<span class="hljs-params">box</span>-<span class="hljs-params">shadow</span>:2<span class="hljs-params">px</span> 1<span class="hljs-params">px</span> 8<span class="hljs-params">px</span> #00<span class="hljs-params">f</span>,-8<span class="hljs-params">px</span> 0 8<span class="hljs-params">px</span>;<span class="hljs-params">position</span>:<span class="hljs-params">absolute</span>;<span class="hljs-params">z</span>-<span class="hljs-params">index</span>:100000000;<span class="hljs-params">height</span>:-<span class="hljs-params">webkit</span>-<span class="hljs-params">min</span>-<span class="hljs-params">content</span>;<span class="hljs-params">height</span>:<span class="hljs-params">min</span>-<span class="hljs-params">content</span>}<span class="hljs-params">h1</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">margin</span>:0;<span class="hljs-params">padding</span>:1<span class="hljs-params">em</span>}"]}),<span class="hljs-params">g</span>})<span class="hljs-params">()</span>,<span class="hljs-params">G</span>=(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l){<span class="hljs-keyword">this</span>._overlayRef=l}close(){<span class="hljs-keyword">this</span>._overlayRef.dispose(),<span class="hljs-keyword">this</span>._overlayRef.detach()}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)(_.LFG(rt.Iu))},g.\u0275prov=_.Yz7({<span class="hljs-attr">token</span>:g,<span class="hljs-attr">factory</span>:g.\u0275fac,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),g})();<span class="hljs-keyword">const</span> zn={<span class="hljs-attr">hasBackdrop</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">backdropClass</span>:<span class="hljs-string">"dark-backdrop"</span>,<span class="hljs-attr">panelClass</span>:<span class="hljs-string">"elixir-dialog-panel"</span>};<span class="hljs-keyword">let</span> Ki=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l){<span class="hljs-keyword">this</span>._overlay=l}open(l,d={}){<span class="hljs-keyword">const</span> y=<span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.assign({},zn),d),b=<span class="hljs-keyword">this</span>.createOverlay(y,l),E=<span class="hljs-keyword">new</span> G(b),x=<span class="hljs-keyword">new</span> rr.C5(Hi);<span class="hljs-keyword">return</span> b.attach(x),b.backdropClick().subscribe(<span class="hljs-function"><span class="hljs-params">N</span>=&gt;</span>E.close()),b.keydownEvents().subscribe(<span class="hljs-function"><span class="hljs-params">N</span>=&gt;</span><span class="hljs-built_in">console</span>.log(N)),E}createOverlay(l,d){<span class="hljs-keyword">const</span> y=<span class="hljs-keyword">this</span>.getOverlayConfig(l,d);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._overlay.create(y)}getOverlayConfig(l,d){<span class="hljs-keyword">const</span> y=<span class="hljs-keyword">this</span>._overlay.position().global().left(d.clientX<span class="hljs-number">-176</span>+<span class="hljs-string">"px"</span>).top(d.clientY+<span class="hljs-number">3</span>+<span class="hljs-string">"px"</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> rt.X_({<span class="hljs-attr">hasBackdrop</span>:l.hasBackdrop,<span class="hljs-attr">backdropClass</span>:l.backdropClass,<span class="hljs-attr">panelClass</span>:l.panelClass,<span class="hljs-attr">scrollStrategy</span>:<span class="hljs-keyword">this</span>._overlay.scrollStrategies.block(),<span class="hljs-attr">positionStrategy</span>:y})}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)(_.LFG(rt.aV))},g.\u0275prov=_.Yz7({<span class="hljs-attr">token</span>:g,<span class="hljs-attr">factory</span>:g.\u0275fac,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),g})(),on=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l,d){<span class="hljs-keyword">this</span>._elementRef=l,<span class="hljs-keyword">this</span>._renderer=d,<span class="hljs-keyword">this</span>.defaultColor=<span class="hljs-string">"transparent"</span>,<span class="hljs-keyword">this</span>.resizableGrabWidth=<span class="hljs-number">8</span>,<span class="hljs-keyword">this</span>.resizableMinWidth=<span class="hljs-number">10</span>,<span class="hljs-keyword">this</span>.dragging=!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> x=<span class="hljs-function"><span class="hljs-params">J</span>=&gt;</span>{<span class="hljs-keyword">const</span> je=<span class="hljs-built_in">Math</span>.max(<span class="hljs-keyword">this</span>.resizableMinWidth,J);l.nativeElement.style.width=je+<span class="hljs-string">"px"</span>};<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"mousemove"</span>,J=&gt;{!<span class="hljs-keyword">this</span>.dragging||<span class="hljs-function">(<span class="hljs-params">x(J.clientX+l.nativeElement.offsetLeft</span>),<span class="hljs-params">J</span>.<span class="hljs-params">stopPropagation</span><span class="hljs-params">()</span>)},!0),<span class="hljs-params">document</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"mouseup"</span>,J=&gt;{!<span class="hljs-keyword">this</span>.dragging||(<span class="hljs-built_in">document</span>.body.style.pointerEvents=<span class="hljs-string">"auto"</span>,<span class="hljs-keyword">this</span>.dragging=!<span class="hljs-number">1</span>,J.stopPropagation(</span>))},!0),<span class="hljs-params">l</span>.<span class="hljs-params">nativeElement</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"mousedown"</span>,J=&gt;{<span class="hljs-keyword">this</span>.inDragRegion(J</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.dragging=!<span class="hljs-number">0</span>,<span class="hljs-built_in">document</span>.body.style.pointerEvents=<span class="hljs-string">"none"</span>,J.stopPropagation(</span>))},!0),<span class="hljs-params">l</span>.<span class="hljs-params">nativeElement</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"mousemove"</span>,J=&gt;{l.nativeElement.style.cursor=<span class="hljs-keyword">this</span>.inDragRegion(J</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">dragging</span>?"<span class="hljs-params">col</span>-<span class="hljs-params">resize</span>":"<span class="hljs-params">default</span>"},!0)}<span class="hljs-params">ngOnInit</span><span class="hljs-params">()</span>{}<span class="hljs-params">mouseDown</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_renderer</span>.<span class="hljs-params">setStyle</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._elementRef.nativeElement,<span class="hljs-string">"background-color"</span>,<span class="hljs-keyword">this</span>.defaultColor</span>)}<span class="hljs-params">mouseUp</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_renderer</span>.<span class="hljs-params">setStyle</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._elementRef.nativeElement,<span class="hljs-string">"background-color"</span>,<span class="hljs-string">"transparent"</span></span>)}<span class="hljs-params">inDragRegion</span>(<span class="hljs-params">l</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_elementRef</span>.<span class="hljs-params">nativeElement</span>.<span class="hljs-params">clientWidth</span>-<span class="hljs-params">l</span>.<span class="hljs-params">clientX</span>+<span class="hljs-params">this</span>.<span class="hljs-params">_elementRef</span>.<span class="hljs-params">nativeElement</span>.<span class="hljs-params">offsetLeft</span>&lt;<span class="hljs-params">this</span>.<span class="hljs-params">resizableGrabWidth</span>}}<span class="hljs-params">return</span> <span class="hljs-params">g</span>.\<span class="hljs-params">u0275fac</span>=<span class="hljs-params">function</span>(<span class="hljs-params">l</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span>(<span class="hljs-params">l||g</span>)(<span class="hljs-params">_.Y36(_.SBq</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Y36</span>(<span class="hljs-params">_.Qsj</span>))},<span class="hljs-params">g</span>.\<span class="hljs-params">u0275dir</span>=<span class="hljs-params">_</span>.<span class="hljs-params">lG2</span>(<span class="hljs-params">{type:g,selectors:[[<span class="hljs-string">""</span>,<span class="hljs-string">"elixElixDrag"</span>,<span class="hljs-string">""</span>]],hostBindings:<span class="hljs-keyword">function</span>(l,d</span>){1&amp;<span class="hljs-params">l</span>&amp;&amp;<span class="hljs-params">_</span>.<span class="hljs-params">NdJ</span>(<span class="hljs-params"><span class="hljs-string">"mousedown"</span>,<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">mouseDown</span><span class="hljs-params">()</span>})(<span class="hljs-params"><span class="hljs-string">"mouseup"</span>,<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">mouseUp</span><span class="hljs-params">()</span>})},<span class="hljs-params">inputs</span>:{<span class="hljs-params">defaultColor</span>:"<span class="hljs-params">defaultColor</span>",<span class="hljs-params">resizableGrabWidth</span>:"<span class="hljs-params">resizableGrabWidth</span>",<span class="hljs-params">resizableMinWidth</span>:"<span class="hljs-params">resizableMinWidth</span>"}}),<span class="hljs-params">g</span>})<span class="hljs-params">()</span>;<span class="hljs-params">var</span> <span class="hljs-params">cr</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">6627</span></span>),<span class="hljs-params">Ot</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">3679</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">qo</span>=["<span class="hljs-params">pointIcon</span>"],<span class="hljs-params">zo</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>["<span class="hljs-params">account</span>/<span class="hljs-params">pull_request</span>"]},<span class="hljs-params">Gn</span>=[{<span class="hljs-params">path</span>:"",<span class="hljs-params">component</span>:(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l,d,y){<span class="hljs-keyword">this</span>._firebaseTry=l,<span class="hljs-keyword">this</span>._popUpState=d,<span class="hljs-keyword">this</span>._overlayPopUpService=y,<span class="hljs-keyword">this</span>.inputValue=<span class="hljs-string">""</span>,<span class="hljs-keyword">this</span>.color=<span class="hljs-string">"transparent"</span>,<span class="hljs-keyword">this</span>.onSayHello=<span class="hljs-keyword">new</span> _.vpe,<span class="hljs-keyword">this</span>.background=<span class="hljs-string">"transparent"</span>,<span class="hljs-keyword">this</span>._firebaseTry.setUrl(<span class="hljs-string">"/repository"</span>)}ngOnInit(){<span class="hljs-keyword">this</span>._firebaseTry.data.snapshotChanges().pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,rn.U</span>)(<span class="hljs-params">l=&gt;l.map(d=&gt;{<span class="hljs-keyword">let</span> y=d.payload.doc.data(</span>);<span class="hljs-params">return</span>{<span class="hljs-params">key</span>:<span class="hljs-params">d</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">doc</span>.<span class="hljs-params">id</span>,<span class="hljs-params">value</span>:<span class="hljs-params">y</span>[<span class="hljs-params">Object</span>.<span class="hljs-params">keys</span>(<span class="hljs-params">y</span>)[0]]}}))).<span class="hljs-params">subscribe</span>(<span class="hljs-params">l=&gt;<span class="hljs-built_in">console</span>.log(l</span>))}<span class="hljs-params">resizeData</span>(<span class="hljs-params">l,d</span>){<span class="hljs-params">this</span>.<span class="hljs-params">inputValue</span>=<span class="hljs-params">d</span>?" ":""}<span class="hljs-params">retriveCoordinates</span>(<span class="hljs-params">l</span>){<span class="hljs-params">this</span>.<span class="hljs-params">onSayHello</span>.<span class="hljs-params">emit</span>(<span class="hljs-params">l</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_popUpState</span>.<span class="hljs-params">statePopLogin</span>(<span class="hljs-params">!<span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_overlayPopUpService</span>.<span class="hljs-params">open</span>(<span class="hljs-params">l</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">g</span>.\<span class="hljs-params">u0275fac</span>=<span class="hljs-params">function</span>(<span class="hljs-params">l</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span>(<span class="hljs-params">l||g</span>)(<span class="hljs-params">_.Y36(Qe.M</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Y36</span>(<span class="hljs-params">Xe</span>),<span class="hljs-params">_</span>.<span class="hljs-params">Y36</span>(<span class="hljs-params">Ki</span>))},<span class="hljs-params">g</span>.\<span class="hljs-params">u0275cmp</span>=<span class="hljs-params">_</span>.<span class="hljs-params">Xpm</span>(<span class="hljs-params">{type:g,selectors:[[<span class="hljs-string">"elix-header"</span>]],viewQuery:<span class="hljs-keyword">function</span>(l,d</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>&amp;l&amp;&amp;_.Gf(qo,<span class="hljs-number">5</span></span>),2&amp;<span class="hljs-params">l</span>){<span class="hljs-params">let</span> <span class="hljs-params">y</span>;<span class="hljs-params">_</span>.<span class="hljs-params">iGM</span>(<span class="hljs-params">y=_.CRH(</span>))&amp;&amp;(<span class="hljs-params">d.pointIcon=y.first</span>)}},<span class="hljs-params">inputs</span>:{<span class="hljs-params">inputValue</span>:"<span class="hljs-params">inputValue</span>",<span class="hljs-params">name</span>:"<span class="hljs-params">name</span>",<span class="hljs-params">color</span>:"<span class="hljs-params">color</span>",<span class="hljs-params">background</span>:"<span class="hljs-params">background</span>"},<span class="hljs-params">outputs</span>:{<span class="hljs-params">onSayHello</span>:"<span class="hljs-params">onSayHello</span>"},<span class="hljs-params">decls</span>:18,<span class="hljs-params">vars</span>:15,<span class="hljs-params">consts</span>:[[1,"<span class="hljs-params">bg</span>-<span class="hljs-params">blue</span>-700",3,"<span class="hljs-params">ngClass</span>"],["<span class="hljs-params">elixElixDrag</span>","",1,"<span class="hljs-params">flex</span>","<span class="hljs-params">pl</span>-8","<span class="hljs-params">justify</span>-<span class="hljs-params">center</span>","<span class="hljs-params">items</span>-<span class="hljs-params">center</span>","<span class="hljs-params">h</span>-16"],[1,"<span class="hljs-params">w</span>-8","<span class="hljs-params">h</span>-8","<span class="hljs-params">mr</span>-4",3,"<span class="hljs-params">routerLink</span>"],[1,"<span class="hljs-params">iufce__icon</span>",3,"<span class="hljs-params">svgIcon</span>","<span class="hljs-params">ngClass</span>"],[1,"<span class="hljs-params">flex</span>","<span class="hljs-params">flex</span>-1","<span class="hljs-params">items</span>-<span class="hljs-params">center</span>"],["<span class="hljs-params">type</span>","<span class="hljs-params">text</span>",1,"<span class="hljs-params">w</span>-1/6","<span class="hljs-params">h</span>-7","<span class="hljs-params">text</span>-<span class="hljs-params">black</span>","<span class="hljs-params">pl</span>-3",3,"<span class="hljs-params">ngClass</span>","<span class="hljs-params">ngModel</span>","<span class="hljs-params">focus</span>","<span class="hljs-params">ngModelChange</span>","<span class="hljs-params">focusout</span>"],[1,"<span class="hljs-params">ml</span>-2"],[1,"<span class="hljs-params">text</span>-<span class="hljs-params">white</span>","<span class="hljs-params">text</span>-<span class="hljs-params">xs</span>",3,"<span class="hljs-params">routerLink</span>","<span class="hljs-params">ngClass</span>"],[1,"<span class="hljs-params">flex</span>","<span class="hljs-params">pr</span>-8"],[1,"<span class="hljs-params">w</span>-5","<span class="hljs-params">h</span>-5"],[1,"<span class="hljs-params">w</span>-5","<span class="hljs-params">h</span>-5","<span class="hljs-params">ml</span>-2"],["<span class="hljs-params">pointIcon</span>",""],[1,"<span class="hljs-params">iufce__icon</span>",3,"<span class="hljs-params">svgIcon</span>","<span class="hljs-params">ngClass</span>","<span class="hljs-params">click</span>"]],<span class="hljs-params">template</span>:<span class="hljs-params">function</span>(<span class="hljs-params">l,d</span>){1&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.TgZ(<span class="hljs-number">0</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">0</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">1</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">1</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">2</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">3</span>,<span class="hljs-string">"mat-icon"</span>,<span class="hljs-number">3</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">4</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">4</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">5</span>,<span class="hljs-string">"input"</span>,<span class="hljs-number">5</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">NdJ</span>(<span class="hljs-params"><span class="hljs-string">"focus"</span>,<span class="hljs-keyword">function</span>(b</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">resizeData</span>(<span class="hljs-params">b,!<span class="hljs-number">0</span></span>)})(<span class="hljs-params"><span class="hljs-string">"ngModelChange"</span>,<span class="hljs-keyword">function</span>(b</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">inputValue</span>=<span class="hljs-params">b</span>})(<span class="hljs-params"><span class="hljs-string">"focusout"</span>,<span class="hljs-keyword">function</span>(b</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">resizeData</span>(<span class="hljs-params">b,!<span class="hljs-number">1</span></span>)}),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">6</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">6</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">7</span>,<span class="hljs-string">"h1"</span>,<span class="hljs-number">7</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_uU</span>(<span class="hljs-params"><span class="hljs-number">8</span>,<span class="hljs-string">"Pull request"</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">9</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">8</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">10</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">9</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">11</span>,<span class="hljs-string">"mat-icon"</span>,<span class="hljs-number">3</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">12</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">10</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">13</span>,<span class="hljs-string">"mat-icon"</span>,<span class="hljs-number">3</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">14</span>,<span class="hljs-string">"div"</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">TgZ</span>(<span class="hljs-params"><span class="hljs-number">16</span>,<span class="hljs-string">"mat-icon"</span>,<span class="hljs-number">12</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">NdJ</span>(<span class="hljs-params"><span class="hljs-string">"click"</span>,<span class="hljs-keyword">function</span>(b</span>){<span class="hljs-params">return</span> <span class="hljs-params">d</span>.<span class="hljs-params">retriveCoordinates</span>(<span class="hljs-params">b</span>)}),<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">qZA</span><span class="hljs-params">()</span>,<span class="hljs-params">_</span>.<span class="hljs-params">_UZ</span>(<span class="hljs-params"><span class="hljs-number">17</span>,<span class="hljs-string">"router-outlet"</span></span>)),2&amp;<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params">_.Q6J(<span class="hljs-string">"ngClass"</span>,<span class="hljs-string">" vorkurt__background-thrid iufce__parrent-header background-"</span>+d.background</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"routerLink"</span>,<span class="hljs-string">"account"</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"svgIcon"</span>,<span class="hljs-string">"fa_brands:github"</span></span>)(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,<span class="hljs-string">"colorIcon-"</span>+d.color</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,d.inputValue?<span class="hljs-string">"iufce__expand-input"</span>:<span class="hljs-string">""</span></span>)(<span class="hljs-params"><span class="hljs-string">"ngModel"</span>,d.inputValue</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"routerLink"</span>,_.DdM(<span class="hljs-number">14</span>,zo</span>))(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,<span class="hljs-string">"colorIcon-"</span>+d.color</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">4</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"svgIcon"</span>,<span class="hljs-string">"fa_solid:bell"</span></span>)(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,<span class="hljs-string">"colorIcon-"</span>+d.color</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"svgIcon"</span>,<span class="hljs-string">"fa_solid:plus"</span></span>)(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,<span class="hljs-string">"colorIcon-"</span>+d.color</span>),<span class="hljs-params">_</span>.<span class="hljs-params">xp6</span>(<span class="hljs-params"><span class="hljs-number">3</span></span>),<span class="hljs-params">_</span>.<span class="hljs-params">Q6J</span>(<span class="hljs-params"><span class="hljs-string">"svgIcon"</span>,<span class="hljs-string">"fa_solid:user-circle"</span></span>)(<span class="hljs-params"><span class="hljs-string">"ngClass"</span>,<span class="hljs-string">"colorIcon-"</span>+d.color</span>))},<span class="hljs-params">directives</span>:[<span class="hljs-params">K</span>.<span class="hljs-params">mk</span>,<span class="hljs-params">on</span>,<span class="hljs-params">Bn</span>.<span class="hljs-params">rH</span>,<span class="hljs-params">cr</span>.<span class="hljs-params">Hw</span>,<span class="hljs-params">Ot</span>.<span class="hljs-params">Fj</span>,<span class="hljs-params">Ot</span>.<span class="hljs-params">JJ</span>,<span class="hljs-params">Ot</span>.<span class="hljs-params">On</span>,<span class="hljs-params">Bn</span>.<span class="hljs-params">lC</span>],<span class="hljs-params">styles</span>:[".<span class="hljs-params">iufce__icon</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">color</span>:#<span class="hljs-params">cdd9e5</span>;<span class="hljs-params">height</span>:<span class="hljs-params">inherit</span>;<span class="hljs-params">width</span>:<span class="hljs-params">inherit</span>}.<span class="hljs-params">iufce__expand</span>-<span class="hljs-params">input</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">width</span>:32.75<span class="hljs-params">rem</span>;<span class="hljs-params">transition</span>:<span class="hljs-params">all</span> .5<span class="hljs-params">s</span> <span class="hljs-params">ease</span>-<span class="hljs-params">in</span>-<span class="hljs-params">out</span>}.<span class="hljs-params">iufce__parrent</span>-<span class="hljs-params">header</span>.<span class="hljs-params">background</span>-<span class="hljs-params">dark</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">background</span>:#8<span class="hljs-params">F8F8F</span>}.<span class="hljs-params">iufce__parrent</span>-<span class="hljs-params">header</span>.<span class="hljs-params">background</span>-<span class="hljs-params">transparent</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">background</span>:#2<span class="hljs-params">d333b</span>}.<span class="hljs-params">iufce__parrent</span>-<span class="hljs-params">header</span>.<span class="hljs-params">background</span>-<span class="hljs-params">light</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">background</span>:#<span class="hljs-params">F6F6F6</span>}.<span class="hljs-params">colorIcon</span>-<span class="hljs-params">dark</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">color</span>:#<span class="hljs-params">d9e5ff</span>}.<span class="hljs-params">colorIcon</span>-<span class="hljs-params">transparent</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">color</span>:#92<span class="hljs-params">a2bd</span>}.<span class="hljs-params">colorIcon</span>-<span class="hljs-params">light</span>[<span class="hljs-params">_ngcontent</span>-%<span class="hljs-params">COMP</span>%]{<span class="hljs-params">color</span>:#8<span class="hljs-params">f8f8f</span>}"],<span class="hljs-params">data</span>:{<span class="hljs-params">animation</span>:[(<span class="hljs-params"><span class="hljs-number">0</span>,ne.X$</span>)(<span class="hljs-params"><span class="hljs-string">"openClose"</span>,[(<span class="hljs-number">0</span>,ne.SB</span>)(<span class="hljs-params"><span class="hljs-string">"open"</span>,(<span class="hljs-number">0</span>,ne.oB</span>)(<span class="hljs-params">{height:<span class="hljs-string">"200px"</span>,opacity:<span class="hljs-number">1</span>,backgroundColor:<span class="hljs-string">"yellow"</span>}</span>)),(<span class="hljs-params"><span class="hljs-number">0</span>,ne.SB</span>)(<span class="hljs-params"><span class="hljs-string">"closed"</span>,(<span class="hljs-number">0</span>,ne.oB</span>)(<span class="hljs-params">{height:<span class="hljs-string">"100px"</span>,opacity:<span class="hljs-number">.8</span>,backgroundColor:<span class="hljs-string">"#c6ecff"</span>}</span>)),(<span class="hljs-params"><span class="hljs-number">0</span>,ne.eR</span>)(<span class="hljs-params"><span class="hljs-string">"open =&gt; closed"</span>,[(<span class="hljs-number">0</span>,ne.jt</span>)(<span class="hljs-params"><span class="hljs-string">"1s"</span></span>)]),(<span class="hljs-params"><span class="hljs-number">0</span>,ne.eR</span>)(<span class="hljs-params"><span class="hljs-string">"closed =&gt; open"</span>,[(<span class="hljs-number">0</span>,ne.jt</span>)(<span class="hljs-params"><span class="hljs-string">"0.5s"</span></span>)])])]}}),<span class="hljs-params">g</span>})<span class="hljs-params">()</span>,<span class="hljs-params">children</span>:[{<span class="hljs-params">path</span>:"<span class="hljs-params">account</span>",<span class="hljs-params">loadChildren</span>:<span class="hljs-params">()</span>=&gt;</span>L.e(<span class="hljs-number">921</span>).then(L.bind(L,<span class="hljs-number">6921</span>)).then(<span class="hljs-function"><span class="hljs-params">g</span>=&gt;</span>g.AccountModule)},{<span class="hljs-attr">path</span>:<span class="hljs-string">"new"</span>,<span class="hljs-attr">loadChildren</span>:<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>L.e(<span class="hljs-number">482</span>).then(L.bind(L,<span class="hljs-number">8482</span>)).then(<span class="hljs-function"><span class="hljs-params">g</span>=&gt;</span>g.NewRepoModule)},{<span class="hljs-attr">path</span>:<span class="hljs-string">":id"</span>,<span class="hljs-attr">canActivate</span>:[L(<span class="hljs-number">5704</span>).e],<span class="hljs-attr">loadChildren</span>:<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>L.e(<span class="hljs-number">249</span>).then(L.bind(L,<span class="hljs-number">1249</span>)).then(<span class="hljs-function"><span class="hljs-params">g</span>=&gt;</span>g.RepositoryModule)}]}];<span class="hljs-keyword">let</span> Te=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275mod=_.oAB({<span class="hljs-attr">type</span>:g}),g.\u0275inj=_.cJS({<span class="hljs-attr">imports</span>:[[Bn.Bz.forChild(Gn)],Bn.Bz]}),g})();<span class="hljs-keyword">var</span> Ve=L(<span class="hljs-number">8697</span>),Ne=L(<span class="hljs-number">521</span>),ee=L(<span class="hljs-number">9490</span>),Ft=L(<span class="hljs-number">5319</span>),an=L(<span class="hljs-number">7574</span>),ur=L(<span class="hljs-number">3637</span>),lr=L(<span class="hljs-number">6561</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jn</span>(<span class="hljs-params">g</span>)</span>{<span class="hljs-keyword">const</span>{<span class="hljs-attr">subscriber</span>:m,<span class="hljs-attr">counter</span>:l,<span class="hljs-attr">period</span>:d}=g;m.next(l),<span class="hljs-keyword">this</span>.schedule({<span class="hljs-attr">subscriber</span>:m,<span class="hljs-attr">counter</span>:l+<span class="hljs-number">1</span>,<span class="hljs-attr">period</span>:d},d)}<span class="hljs-keyword">var</span> hr=L(<span class="hljs-number">1927</span>),xe=L(<span class="hljs-number">6682</span>),Be=L(<span class="hljs-number">6782</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hn</span>(<span class="hljs-params">g,m,l</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> d <span class="hljs-keyword">in</span> m)<span class="hljs-keyword">if</span>(m.hasOwnProperty(d)){<span class="hljs-keyword">const</span> y=m[d];y?g.setProperty(d,y,(<span class="hljs-literal">null</span>==l?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:l.has(d))?<span class="hljs-string">"important"</span>:<span class="hljs-string">""</span>):g.removeProperty(d)}<span class="hljs-keyword">return</span> g}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">It</span>(<span class="hljs-params">g,m</span>)</span>{<span class="hljs-keyword">const</span> l=m?<span class="hljs-string">""</span>:<span class="hljs-string">"none"</span>;Hn(g.style,{<span class="hljs-string">"touch-action"</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"none"</span>,<span class="hljs-string">"-webkit-user-drag"</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"none"</span>,<span class="hljs-string">"-webkit-tap-highlight-color"</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"transparent"</span>,<span class="hljs-string">"user-select"</span>:l,<span class="hljs-string">"-ms-user-select"</span>:l,<span class="hljs-string">"-webkit-user-select"</span>:l,<span class="hljs-string">"-moz-user-select"</span>:l})}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Kn</span>(<span class="hljs-params">g,m,l</span>)</span>{Hn(g.style,{<span class="hljs-attr">position</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"fixed"</span>,<span class="hljs-attr">top</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"0"</span>,<span class="hljs-attr">opacity</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"0"</span>,<span class="hljs-attr">left</span>:m?<span class="hljs-string">""</span>:<span class="hljs-string">"-999em"</span>},l)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$n</span>(<span class="hljs-params">g,m</span>)</span>{<span class="hljs-keyword">return</span> m&amp;&amp;<span class="hljs-string">"none"</span>!=m?g+<span class="hljs-string">" "</span>+m:g}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fr</span>(<span class="hljs-params">g</span>)</span>{<span class="hljs-keyword">const</span> m=g.toLowerCase().indexOf(<span class="hljs-string">"ms"</span>)&gt;<span class="hljs-number">-1</span>?<span class="hljs-number">1</span>:<span class="hljs-number">1e3</span>;<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(g)*m}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Zn</span>(<span class="hljs-params">g,m</span>)</span>{<span class="hljs-keyword">return</span> g.getPropertyValue(m).split(<span class="hljs-string">","</span>).map(<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>d.trim())}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ln</span>(<span class="hljs-params">g</span>)</span>{<span class="hljs-keyword">const</span> m=g.getBoundingClientRect();<span class="hljs-keyword">return</span>{<span class="hljs-attr">top</span>:m.top,<span class="hljs-attr">right</span>:m.right,<span class="hljs-attr">bottom</span>:m.bottom,<span class="hljs-attr">left</span>:m.left,<span class="hljs-attr">width</span>:m.width,<span class="hljs-attr">height</span>:m.height}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Qn</span>(<span class="hljs-params">g,m,l</span>)</span>{<span class="hljs-keyword">const</span>{<span class="hljs-attr">top</span>:d,<span class="hljs-attr">bottom</span>:y,<span class="hljs-attr">left</span>:b,<span class="hljs-attr">right</span>:E}=g;<span class="hljs-keyword">return</span> l&gt;=d&amp;&amp;l&lt;=y&amp;&amp;m&gt;=b&amp;&amp;m&lt;=E}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hn</span>(<span class="hljs-params">g,m,l</span>)</span>{g.top+=m,g.bottom=g.top+g.height,g.left+=l,g.right=g.left+g.width}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Qi</span>(<span class="hljs-params">g,m,l,d</span>)</span>{<span class="hljs-keyword">const</span>{<span class="hljs-attr">top</span>:y,<span class="hljs-attr">right</span>:b,<span class="hljs-attr">bottom</span>:E,<span class="hljs-attr">left</span>:x,<span class="hljs-attr">width</span>:N,<span class="hljs-attr">height</span>:q}=g,F=N*m,Z=q*m;<span class="hljs-keyword">return</span> d&gt;y-Z&amp;&amp;d&lt;E+Z&amp;&amp;l&gt;x-F&amp;&amp;l&lt;b+F}L(<span class="hljs-number">9761</span>),L(<span class="hljs-number">5257</span>),L(<span class="hljs-number">3342</span>),L(<span class="hljs-number">3190</span>),L(<span class="hljs-number">946</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">dn</span></span>{<span class="hljs-keyword">constructor</span>(m,l){<span class="hljs-keyword">this</span>._document=m,<span class="hljs-keyword">this</span>._viewportRuler=l,<span class="hljs-keyword">this</span>.positions=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>}clear(){<span class="hljs-keyword">this</span>.positions.clear()}cache(m){<span class="hljs-keyword">this</span>.clear(),<span class="hljs-keyword">this</span>.positions.set(<span class="hljs-keyword">this</span>._document,{<span class="hljs-attr">scrollPosition</span>:<span class="hljs-keyword">this</span>._viewportRuler.getViewportScrollPosition()}),m.forEach(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>{<span class="hljs-keyword">this</span>.positions.set(l,{<span class="hljs-attr">scrollPosition</span>:{<span class="hljs-attr">top</span>:l.scrollTop,<span class="hljs-attr">left</span>:l.scrollLeft},<span class="hljs-attr">clientRect</span>:ln(l)})})}handleScroll(m){<span class="hljs-keyword">const</span> l=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.sA</span>)(<span class="hljs-params">m</span>),<span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">positions</span>.<span class="hljs-params">get</span>(<span class="hljs-params">l</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!d</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">l</span>===<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>?<span class="hljs-params">l</span>.<span class="hljs-params">documentElement</span>:<span class="hljs-params">l</span>,<span class="hljs-params">b</span>=<span class="hljs-params">d</span>.<span class="hljs-params">scrollPosition</span>;<span class="hljs-params">let</span> <span class="hljs-params">E</span>,<span class="hljs-params">x</span>;<span class="hljs-params">if</span>(<span class="hljs-params">l===<span class="hljs-keyword">this</span>._document</span>){<span class="hljs-params">const</span> <span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_viewportRuler</span>.<span class="hljs-params">getViewportScrollPosition</span><span class="hljs-params">()</span>;<span class="hljs-params">E</span>=<span class="hljs-params">F</span>.<span class="hljs-params">top</span>,<span class="hljs-params">x</span>=<span class="hljs-params">F</span>.<span class="hljs-params">left</span>}<span class="hljs-params">else</span> <span class="hljs-params">E</span>=<span class="hljs-params">l</span>.<span class="hljs-params">scrollTop</span>,<span class="hljs-params">x</span>=<span class="hljs-params">l</span>.<span class="hljs-params">scrollLeft</span>;<span class="hljs-params">const</span> <span class="hljs-params">N</span>=<span class="hljs-params">b</span>.<span class="hljs-params">top</span>-<span class="hljs-params">E</span>,<span class="hljs-params">q</span>=<span class="hljs-params">b</span>.<span class="hljs-params">left</span>-<span class="hljs-params">x</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">positions</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(F,Z</span>)=&gt;</span>{F.clientRect&amp;&amp;l!==Z&amp;&amp;y.contains(Z)&amp;&amp;hn(F.clientRect,N,q)}),b.top=E,b.left=x,{<span class="hljs-attr">top</span>:N,<span class="hljs-attr">left</span>:q}}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Yn</span>(<span class="hljs-params">g</span>)</span>{<span class="hljs-keyword">const</span> m=g.cloneNode(!<span class="hljs-number">0</span>),l=m.querySelectorAll(<span class="hljs-string">"[id]"</span>),d=g.nodeName.toLowerCase();m.removeAttribute(<span class="hljs-string">"id"</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> y=<span class="hljs-number">0</span>;y&lt;l.length;y++)l[y].removeAttribute(<span class="hljs-string">"id"</span>);<span class="hljs-keyword">return</span><span class="hljs-string">"canvas"</span>===d?mr(g,m):<span class="hljs-function">(<span class="hljs-params"><span class="hljs-string">"input"</span>===d||<span class="hljs-string">"select"</span>===d||<span class="hljs-string">"textarea"</span>===d</span>)&amp;&amp;<span class="hljs-params">pr</span>(<span class="hljs-params">g,m</span>),<span class="hljs-params">Wn</span>(<span class="hljs-params"><span class="hljs-string">"canvas"</span>,g,m,mr</span>),<span class="hljs-params">Wn</span>(<span class="hljs-params"><span class="hljs-string">"input, textarea, select"</span>,g,m,pr</span>),<span class="hljs-params">m</span>}<span class="hljs-params">function</span> <span class="hljs-params">Wn</span>(<span class="hljs-params">g,m,l,d</span>){<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">m</span>.<span class="hljs-params">querySelectorAll</span>(<span class="hljs-params">g</span>);<span class="hljs-params">if</span>(<span class="hljs-params">y.length</span>){<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">l</span>.<span class="hljs-params">querySelectorAll</span>(<span class="hljs-params">g</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> E=<span class="hljs-number">0</span>;E&lt;y.length;E++</span>)<span class="hljs-params">d</span>(<span class="hljs-params">y[E],b[E]</span>)}}<span class="hljs-params">let</span> <span class="hljs-params">Yi</span>=0;<span class="hljs-params">function</span> <span class="hljs-params">pr</span>(<span class="hljs-params">g,m</span>){"<span class="hljs-params">file</span>"!==<span class="hljs-params">m</span>.<span class="hljs-params">type</span>&amp;&amp;(<span class="hljs-params">m.value=g.value</span>),"<span class="hljs-params">radio</span>"===<span class="hljs-params">m</span>.<span class="hljs-params">type</span>&amp;&amp;<span class="hljs-params">m</span>.<span class="hljs-params">name</span>&amp;&amp;(<span class="hljs-params">m.name=<span class="hljs-string">`mat-clone-<span class="hljs-subst">${m.name}</span>-<span class="hljs-subst">${Yi++}</span>`</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">mr</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">m</span>.<span class="hljs-params">getContext</span>(<span class="hljs-params"><span class="hljs-string">"2d"</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">l</span>)<span class="hljs-params">try</span>{<span class="hljs-params">l</span>.<span class="hljs-params">drawImage</span>(<span class="hljs-params">g,<span class="hljs-number">0</span>,<span class="hljs-number">0</span></span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">d</span>){}}<span class="hljs-params">const</span> <span class="hljs-params">Jn</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.i$</span>)(<span class="hljs-params">{passive:!<span class="hljs-number">0</span>}</span>),<span class="hljs-params">Wi</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.i$</span>)(<span class="hljs-params">{passive:!<span class="hljs-number">1</span>}</span>),<span class="hljs-params">Ji</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>(<span class="hljs-params">[<span class="hljs-string">"position"</span>]</span>);<span class="hljs-params">class</span> <span class="hljs-params">De</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">m,l,d,y,b,E</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_config</span>=<span class="hljs-params">l</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>=<span class="hljs-params">d</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>=<span class="hljs-params">y</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_viewportRuler</span>=<span class="hljs-params">b</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>=<span class="hljs-params">E</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>={<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0},<span class="hljs-params">this</span>.<span class="hljs-params">_activeTransform</span>={<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0},<span class="hljs-params">this</span>.<span class="hljs-params">_hasStartedDragging</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">_moveEvents</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pointerMoveSubscription</span>=<span class="hljs-params">Ft</span>.<span class="hljs-params">w</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pointerUpSubscription</span>=<span class="hljs-params">Ft</span>.<span class="hljs-params">w</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_scrollSubscription</span>=<span class="hljs-params">Ft</span>.<span class="hljs-params">w</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_resizeSubscription</span>=<span class="hljs-params">Ft</span>.<span class="hljs-params">w</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryElement</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_nativeInteractionsEnabled</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">_disabledHandles</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_direction</span>="<span class="hljs-params">ltr</span>",<span class="hljs-params">this</span>.<span class="hljs-params">dragStartDelay</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">_disabled</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">beforeStarted</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">started</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">released</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">ended</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">entered</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">exited</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">dropped</span>=<span class="hljs-params">new</span> <span class="hljs-params">ie</span>.<span class="hljs-params">xQ</span>,<span class="hljs-params">this</span>.<span class="hljs-params">moved</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_moveEvents</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pointerDown</span>=<span class="hljs-params">x</span>=&gt;</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.beforeStarted.next(),<span class="hljs-keyword">this</span>._handles.length){<span class="hljs-keyword">const</span> N=<span class="hljs-keyword">this</span>._handles.find(<span class="hljs-function"><span class="hljs-params">q</span>=&gt;</span>{<span class="hljs-keyword">const</span> F=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.sA</span>)(<span class="hljs-params">x</span>);<span class="hljs-params">return</span>!!<span class="hljs-params">F</span>&amp;&amp;(<span class="hljs-params">F===q||q.contains(F</span>))});<span class="hljs-params">N</span>&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">_disabledHandles</span>.<span class="hljs-params">has</span>(<span class="hljs-params">N</span>)&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">disabled</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_initializeDragSequence</span>(<span class="hljs-params">N,x</span>)}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">disabled</span>||<span class="hljs-params">this</span>.<span class="hljs-params">_initializeDragSequence</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement,x</span>)},<span class="hljs-params">this</span>.<span class="hljs-params">_pointerMove</span>=<span class="hljs-params">x</span>=&gt;</span>{<span class="hljs-keyword">const</span> N=<span class="hljs-keyword">this</span>._getPointerPositionOnPage(x);<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._hasStartedDragging){<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.abs(N.x-<span class="hljs-keyword">this</span>._pickupPositionOnPage.x)+<span class="hljs-built_in">Math</span>.abs(N.y-<span class="hljs-keyword">this</span>._pickupPositionOnPage.y)&gt;=<span class="hljs-keyword">this</span>._config.dragStartThreshold){<span class="hljs-keyword">const</span> je=<span class="hljs-built_in">Date</span>.now()&gt;=<span class="hljs-keyword">this</span>._dragStartTime+<span class="hljs-keyword">this</span>._getDragStartDelay(x),Ee=<span class="hljs-keyword">this</span>._dropContainer;<span class="hljs-keyword">if</span>(!je)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-keyword">this</span>._endDragSequence(x);<span class="hljs-function">(<span class="hljs-params">!Ee||!Ee.isDragging(</span>)&amp;&amp;!<span class="hljs-params">Ee</span>.<span class="hljs-params">isReceiving</span><span class="hljs-params">()</span>)&amp;&amp;(<span class="hljs-params">x.preventDefault(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_hasStartedDragging</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">run</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">this</span>._startDragSequence(x)))}<span class="hljs-keyword">return</span>}<span class="hljs-keyword">this</span>._boundaryElement&amp;&amp;<span class="hljs-function">(<span class="hljs-params">!<span class="hljs-keyword">this</span>._previewRect||!<span class="hljs-keyword">this</span>._previewRect.width&amp;&amp;!<span class="hljs-keyword">this</span>._previewRect.height</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._previewRect=(<span class="hljs-keyword">this</span>._preview||<span class="hljs-keyword">this</span>._rootElement</span>).<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>),<span class="hljs-params">x</span>.<span class="hljs-params">preventDefault</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">q</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_getConstrainedPointerPosition</span>(<span class="hljs-params">N</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._hasMoved=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>._lastKnownPointerPosition=N,<span class="hljs-keyword">this</span>._updatePointerDirectionDelta(q</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>)<span class="hljs-params">this</span>.<span class="hljs-params">_updateActiveDropContainer</span>(<span class="hljs-params">q,N</span>);<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_activeTransform</span>;<span class="hljs-params">F</span>.<span class="hljs-params">x</span>=<span class="hljs-params">q</span>.<span class="hljs-params">x</span>-<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>.<span class="hljs-params">x</span>+<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>.<span class="hljs-params">x</span>,<span class="hljs-params">F</span>.<span class="hljs-params">y</span>=<span class="hljs-params">q</span>.<span class="hljs-params">y</span>-<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>.<span class="hljs-params">y</span>+<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>.<span class="hljs-params">y</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_applyRootElementTransform</span>(<span class="hljs-params">F.x,F.y</span>),"<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">SVGElement</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">SVGElement</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>.<span class="hljs-params">setAttribute</span>(<span class="hljs-params"><span class="hljs-string">"transform"</span>,<span class="hljs-string">`translate(<span class="hljs-subst">${F.x}</span> <span class="hljs-subst">${F.y}</span>)`</span></span>)}<span class="hljs-params">this</span>.<span class="hljs-params">_moveEvents</span>.<span class="hljs-params">observers</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">run</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._moveEvents.next({<span class="hljs-attr">source</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">pointerPosition</span>:q,<span class="hljs-attr">event</span>:x,<span class="hljs-attr">distance</span>:<span class="hljs-keyword">this</span>._getDragDistance(q),<span class="hljs-attr">delta</span>:<span class="hljs-keyword">this</span>._pointerDirectionDelta})})},<span class="hljs-keyword">this</span>._pointerUp=<span class="hljs-function"><span class="hljs-params">x</span>=&gt;</span>{<span class="hljs-keyword">this</span>._endDragSequence(x)},<span class="hljs-keyword">this</span>.withRootElement(m).withParent(l.parentDragRef||<span class="hljs-literal">null</span>),<span class="hljs-keyword">this</span>._parentPositions=<span class="hljs-keyword">new</span> dn(d,b),E.registerDragItem(<span class="hljs-keyword">this</span>)}<span class="hljs-keyword">get</span> disabled(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._disabled||!<span class="hljs-function">(<span class="hljs-params">!<span class="hljs-keyword">this</span>._dropContainer||!<span class="hljs-keyword">this</span>._dropContainer.disabled</span>)}<span class="hljs-params">set</span> <span class="hljs-params">disabled</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,ee.Ig</span>)(<span class="hljs-params">m</span>);<span class="hljs-params">l</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_disabled</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._disabled=l,<span class="hljs-keyword">this</span>._toggleNativeDragInteractions(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">d=&gt;It(d,l</span>)))}<span class="hljs-params">getPlaceholderElement</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_placeholder</span>}<span class="hljs-params">getRootElement</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>}<span class="hljs-params">getVisibleElement</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>?<span class="hljs-params">this</span>.<span class="hljs-params">getPlaceholderElement</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">getRootElement</span><span class="hljs-params">()</span>}<span class="hljs-params">withHandles</span>(<span class="hljs-params">m</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>=<span class="hljs-params">m</span>.<span class="hljs-params">map</span>(<span class="hljs-params">d=&gt;(<span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params">d</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">d=&gt;It(d,<span class="hljs-keyword">this</span>.disabled</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_toggleNativeDragInteractions</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_disabledHandles</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">d=&gt;{<span class="hljs-keyword">this</span>._handles.indexOf(d</span>)&gt;-1&amp;&amp;<span class="hljs-params">l</span>.<span class="hljs-params">add</span>(<span class="hljs-params">d</span>)}),<span class="hljs-params">this</span>.<span class="hljs-params">_disabledHandles</span>=<span class="hljs-params">l</span>,<span class="hljs-params">this</span>}<span class="hljs-params">withPreviewTemplate</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_previewTemplate</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">withPlaceholderTemplate</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_placeholderTemplate</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">withRootElement</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params">m</span>);<span class="hljs-params">return</span> <span class="hljs-params">l</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement&amp;&amp;<span class="hljs-keyword">this</span>._removeRootElementListeners(<span class="hljs-keyword">this</span>._rootElement</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">runOutsideAngular</span>(<span class="hljs-params">(</span>)=&gt;</span>{l.addEventListener(<span class="hljs-string">"mousedown"</span>,<span class="hljs-keyword">this</span>._pointerDown,Wi),l.addEventListener(<span class="hljs-string">"touchstart"</span>,<span class="hljs-keyword">this</span>._pointerDown,Jn)}),<span class="hljs-keyword">this</span>._initialTransform=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>._rootElement=l),<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> SVGElement&amp;&amp;<span class="hljs-keyword">this</span>._rootElement <span class="hljs-keyword">instanceof</span> SVGElement&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._ownerSVGElement=<span class="hljs-keyword">this</span>._rootElement.ownerSVGElement</span>),<span class="hljs-params">this</span>}<span class="hljs-params">withBoundaryElement</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_boundaryElement</span>=<span class="hljs-params">m</span>?(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params">m</span>):<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_resizeSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">m</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._resizeSubscription=<span class="hljs-keyword">this</span>._viewportRuler.change(<span class="hljs-number">10</span></span>).<span class="hljs-params">subscribe</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">this</span>._containInsideBoundaryOnResize())),<span class="hljs-keyword">this</span>}withParent(m){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parentDragRef=m,<span class="hljs-keyword">this</span>}dispose(){<span class="hljs-keyword">this</span>._removeRootElementListeners(<span class="hljs-keyword">this</span>._rootElement),<span class="hljs-keyword">this</span>.isDragging()&amp;&amp;gt(<span class="hljs-keyword">this</span>._rootElement),gt(<span class="hljs-keyword">this</span>._anchor),<span class="hljs-keyword">this</span>._destroyPreview(),<span class="hljs-keyword">this</span>._destroyPlaceholder(),<span class="hljs-keyword">this</span>._dragDropRegistry.removeDragItem(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>._removeSubscriptions(),<span class="hljs-keyword">this</span>.beforeStarted.complete(),<span class="hljs-keyword">this</span>.started.complete(),<span class="hljs-keyword">this</span>.released.complete(),<span class="hljs-keyword">this</span>.ended.complete(),<span class="hljs-keyword">this</span>.entered.complete(),<span class="hljs-keyword">this</span>.exited.complete(),<span class="hljs-keyword">this</span>.dropped.complete(),<span class="hljs-keyword">this</span>._moveEvents.complete(),<span class="hljs-keyword">this</span>._handles=[],<span class="hljs-keyword">this</span>._disabledHandles.clear(),<span class="hljs-keyword">this</span>._dropContainer=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>._resizeSubscription.unsubscribe(),<span class="hljs-keyword">this</span>._parentPositions.clear(),<span class="hljs-keyword">this</span>._boundaryElement=<span class="hljs-keyword">this</span>._rootElement=<span class="hljs-keyword">this</span>._ownerSVGElement=<span class="hljs-keyword">this</span>._placeholderTemplate=<span class="hljs-keyword">this</span>._previewTemplate=<span class="hljs-keyword">this</span>._anchor=<span class="hljs-keyword">this</span>._parentDragRef=<span class="hljs-literal">null</span>}isDragging(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._hasStartedDragging&amp;&amp;<span class="hljs-keyword">this</span>._dragDropRegistry.isDragging(<span class="hljs-keyword">this</span>)}reset(){<span class="hljs-keyword">this</span>._rootElement.style.transform=<span class="hljs-keyword">this</span>._initialTransform||<span class="hljs-string">""</span>,<span class="hljs-keyword">this</span>._activeTransform={<span class="hljs-attr">x</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">0</span>},<span class="hljs-keyword">this</span>._passiveTransform={<span class="hljs-attr">x</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">0</span>}}disableHandle(m){!<span class="hljs-keyword">this</span>._disabledHandles.has(m)&amp;&amp;<span class="hljs-keyword">this</span>._handles.indexOf(m)&gt;<span class="hljs-number">-1</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._disabledHandles.add(m</span>),<span class="hljs-params">It</span>(<span class="hljs-params">m,!<span class="hljs-number">0</span></span>))}<span class="hljs-params">enableHandle</span>(<span class="hljs-params">m</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_disabledHandles</span>.<span class="hljs-params">has</span>(<span class="hljs-params">m</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._disabledHandles.<span class="hljs-keyword">delete</span>(m</span>),<span class="hljs-params">It</span>(<span class="hljs-params">m,<span class="hljs-keyword">this</span>.disabled</span>))}<span class="hljs-params">withDirection</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_direction</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">_withDropContainer</span>(<span class="hljs-params">m</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>=<span class="hljs-params">m</span>}<span class="hljs-params">getFreeDragPosition</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_activeTransform</span>:<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>;<span class="hljs-params">return</span>{<span class="hljs-params">x</span>:<span class="hljs-params">m</span>.<span class="hljs-params">x</span>,<span class="hljs-params">y</span>:<span class="hljs-params">m</span>.<span class="hljs-params">y</span>}}<span class="hljs-params">setFreeDragPosition</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_activeTransform</span>={<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0},<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>.<span class="hljs-params">x</span>=<span class="hljs-params">m</span>.<span class="hljs-params">x</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>.<span class="hljs-params">y</span>=<span class="hljs-params">m</span>.<span class="hljs-params">y</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>||<span class="hljs-params">this</span>.<span class="hljs-params">_applyRootElementTransform</span>(<span class="hljs-params">m.x,m.y</span>),<span class="hljs-params">this</span>}<span class="hljs-params">withPreviewContainer</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_previewContainer</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">_sortFromLastPointerPosition</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_lastKnownPointerPosition</span>;<span class="hljs-params">m</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_updateActiveDropContainer</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._getConstrainedPointerPosition(m</span>),<span class="hljs-params">m</span>)}<span class="hljs-params">_removeSubscriptions</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_pointerMoveSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pointerUpSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_scrollSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>}<span class="hljs-params">_destroyPreview</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>&amp;&amp;<span class="hljs-params">gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._preview</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_previewRef</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_previewRef</span>.<span class="hljs-params">destroy</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewRef</span>=<span class="hljs-params">null</span>}<span class="hljs-params">_destroyPlaceholder</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_placeholder</span>&amp;&amp;<span class="hljs-params">gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._placeholder</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_placeholderRef</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_placeholderRef</span>.<span class="hljs-params">destroy</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_placeholder</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_placeholderRef</span>=<span class="hljs-params">null</span>}<span class="hljs-params">_endDragSequence</span>(<span class="hljs-params">m</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dragDropRegistry.isDragging(<span class="hljs-keyword">this</span></span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._removeSubscriptions(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">stopDragging</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_toggleNativeDragInteractions</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement.style.webkitTapHighlightColor=<span class="hljs-keyword">this</span>._rootElementTapHighlight</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_hasStartedDragging</span>))<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.released.next({source:<span class="hljs-keyword">this</span>}</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>)<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>.<span class="hljs-params">_stopScrolling</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_animatePreviewToPlaceholder</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._cleanupDragArtifacts(m),<span class="hljs-keyword">this</span>._cleanupCachedDimensions(),<span class="hljs-keyword">this</span>._dragDropRegistry.stopDragging(<span class="hljs-keyword">this</span>)});<span class="hljs-keyword">else</span>{<span class="hljs-keyword">this</span>._passiveTransform.x=<span class="hljs-keyword">this</span>._activeTransform.x;<span class="hljs-keyword">const</span> l=<span class="hljs-keyword">this</span>._getPointerPositionOnPage(m);<span class="hljs-keyword">this</span>._passiveTransform.y=<span class="hljs-keyword">this</span>._activeTransform.y,<span class="hljs-keyword">this</span>._ngZone.run(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">this</span>.ended.next({<span class="hljs-attr">source</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">distance</span>:<span class="hljs-keyword">this</span>._getDragDistance(l),<span class="hljs-attr">dropPoint</span>:l})}),<span class="hljs-keyword">this</span>._cleanupCachedDimensions(),<span class="hljs-keyword">this</span>._dragDropRegistry.stopDragging(<span class="hljs-keyword">this</span>)}}_startDragSequence(m){fn(m)&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._lastTouchEventTime=<span class="hljs-built_in">Date</span>.now(</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_toggleNativeDragInteractions</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>;<span class="hljs-params">if</span>(<span class="hljs-params">l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>,<span class="hljs-params">y</span>=<span class="hljs-params">d</span>.<span class="hljs-params">parentNode</span>,<span class="hljs-params">b</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_placeholder</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_createPlaceholderElement</span><span class="hljs-params">()</span>,<span class="hljs-params">E</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_anchor</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_anchor</span>||<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>.<span class="hljs-params">createComment</span>(<span class="hljs-params"><span class="hljs-string">""</span></span>),<span class="hljs-params">x</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_getShadowRoot</span><span class="hljs-params">()</span>;<span class="hljs-params">y</span>.<span class="hljs-params">insertBefore</span>(<span class="hljs-params">E,d</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_initialTransform</span>=<span class="hljs-params">d</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>||"",<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_createPreviewElement</span><span class="hljs-params">()</span>,<span class="hljs-params">Kn</span>(<span class="hljs-params">d,!<span class="hljs-number">1</span>,Ji</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>.<span class="hljs-params">body</span>.<span class="hljs-params">appendChild</span>(<span class="hljs-params">y.replaceChild(b,d</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_getPreviewInsertionPoint</span>(<span class="hljs-params">y,x</span>).<span class="hljs-params">appendChild</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._preview</span>),<span class="hljs-params">this</span>.<span class="hljs-params">started</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{source:<span class="hljs-keyword">this</span>}</span>),<span class="hljs-params">l</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_initialContainer</span>=<span class="hljs-params">l</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_initialIndex</span>=<span class="hljs-params">l</span>.<span class="hljs-params">getItemIndex</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">started</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{source:<span class="hljs-keyword">this</span>}</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_initialContainer</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_initialIndex</span>=<span class="hljs-params">void</span> 0;<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">cache</span>(<span class="hljs-params">l?l.getScrollableParents(</span>):[])}<span class="hljs-params">_initializeDragSequence</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_parentDragRef</span>&amp;&amp;<span class="hljs-params">l</span>.<span class="hljs-params">stopPropagation</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>,<span class="hljs-params">y</span>=<span class="hljs-params">fn</span>(<span class="hljs-params">l</span>),<span class="hljs-params">b</span>=!<span class="hljs-params">y</span>&amp;&amp;0!==<span class="hljs-params">l</span>.<span class="hljs-params">button</span>,<span class="hljs-params">E</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>,<span class="hljs-params">x</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.sA</span>)(<span class="hljs-params">l</span>),<span class="hljs-params">N</span>=!<span class="hljs-params">y</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_lastTouchEventTime</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_lastTouchEventTime</span>+800&gt;<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>,<span class="hljs-params">q</span>=<span class="hljs-params">y</span>?(<span class="hljs-params"><span class="hljs-number">0</span>,lt.yG</span>)(<span class="hljs-params">l</span>):(<span class="hljs-params"><span class="hljs-number">0</span>,lt.X6</span>)(<span class="hljs-params">l</span>);<span class="hljs-params">if</span>(<span class="hljs-params">x&amp;&amp;x.draggable&amp;&amp;<span class="hljs-string">"mousedown"</span>===l.type&amp;&amp;l.preventDefault(</span>),<span class="hljs-params">d</span>||<span class="hljs-params">b</span>||<span class="hljs-params">N</span>||<span class="hljs-params">q</span>)<span class="hljs-params">return</span>;<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>.<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElementTapHighlight=E.style.webkitTapHighlightColor||<span class="hljs-string">""</span>,E.style.webkitTapHighlightColor=<span class="hljs-string">"transparent"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_hasStartedDragging</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_hasMoved</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">_removeSubscriptions</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pointerMoveSubscription</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">pointerMove</span>.<span class="hljs-params">subscribe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._pointerMove</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_pointerUpSubscription</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">pointerUp</span>.<span class="hljs-params">subscribe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._pointerUp</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_scrollSubscription</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">scrolled</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._getShadowRoot(</span>)).<span class="hljs-params">subscribe</span>(<span class="hljs-params">J=&gt;<span class="hljs-keyword">this</span>._updateOnScroll(J</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryElement</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._boundaryRect=ln(<span class="hljs-keyword">this</span>._boundaryElement</span>));<span class="hljs-params">const</span> <span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewTemplate</span>;<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionInElement</span>=<span class="hljs-params">F</span>&amp;&amp;<span class="hljs-params">F</span>.<span class="hljs-params">template</span>&amp;&amp;!<span class="hljs-params">F</span>.<span class="hljs-params">matchSize</span>?{<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0}:<span class="hljs-params">this</span>.<span class="hljs-params">_getPointerPositionInElement</span>(<span class="hljs-params">m,l</span>);<span class="hljs-params">const</span> <span class="hljs-params">Z</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_lastKnownPointerPosition</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_getPointerPositionOnPage</span>(<span class="hljs-params">l</span>);<span class="hljs-params">this</span>.<span class="hljs-params">_pointerDirectionDelta</span>={<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0},<span class="hljs-params">this</span>.<span class="hljs-params">_pointerPositionAtLastDirectionChange</span>={<span class="hljs-params">x</span>:<span class="hljs-params">Z</span>.<span class="hljs-params">x</span>,<span class="hljs-params">y</span>:<span class="hljs-params">Z</span>.<span class="hljs-params">y</span>},<span class="hljs-params">this</span>.<span class="hljs-params">_dragStartTime</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">startDragging</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,l</span>)}<span class="hljs-params">_cleanupDragArtifacts</span>(<span class="hljs-params">m</span>){<span class="hljs-params">Kn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement,!<span class="hljs-number">0</span>,Ji</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_anchor</span>.<span class="hljs-params">parentNode</span>.<span class="hljs-params">replaceChild</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement,<span class="hljs-keyword">this</span>._anchor</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_destroyPreview</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_destroyPlaceholder</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryRect</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewRect</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_initialTransform</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">run</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">const</span> l=<span class="hljs-keyword">this</span>._dropContainer,d=l.getItemIndex(<span class="hljs-keyword">this</span>),y=<span class="hljs-keyword">this</span>._getPointerPositionOnPage(m),b=<span class="hljs-keyword">this</span>._getDragDistance(y),E=l._isOverContainer(y.x,y.y);<span class="hljs-keyword">this</span>.ended.next({<span class="hljs-attr">source</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">distance</span>:b,<span class="hljs-attr">dropPoint</span>:y}),<span class="hljs-keyword">this</span>.dropped.next({<span class="hljs-attr">item</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">currentIndex</span>:d,<span class="hljs-attr">previousIndex</span>:<span class="hljs-keyword">this</span>._initialIndex,<span class="hljs-attr">container</span>:l,<span class="hljs-attr">previousContainer</span>:<span class="hljs-keyword">this</span>._initialContainer,<span class="hljs-attr">isPointerOverContainer</span>:E,<span class="hljs-attr">distance</span>:b,<span class="hljs-attr">dropPoint</span>:y}),l.drop(<span class="hljs-keyword">this</span>,d,<span class="hljs-keyword">this</span>._initialIndex,<span class="hljs-keyword">this</span>._initialContainer,E,b,y),<span class="hljs-keyword">this</span>._dropContainer=<span class="hljs-keyword">this</span>._initialContainer})}_updateActiveDropContainer({<span class="hljs-attr">x</span>:m,<span class="hljs-attr">y</span>:l},{<span class="hljs-attr">x</span>:d,y}){<span class="hljs-keyword">let</span> b=<span class="hljs-keyword">this</span>._initialContainer._getSiblingContainerFromPosition(<span class="hljs-keyword">this</span>,m,l);!b&amp;&amp;<span class="hljs-keyword">this</span>._dropContainer!==<span class="hljs-keyword">this</span>._initialContainer&amp;&amp;<span class="hljs-keyword">this</span>._initialContainer._isOverContainer(m,l)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">b=<span class="hljs-keyword">this</span>._initialContainer</span>),<span class="hljs-params">b</span>&amp;&amp;<span class="hljs-params">b</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">run</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.exited.next({<span class="hljs-attr">item</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">container</span>:<span class="hljs-keyword">this</span>._dropContainer}),<span class="hljs-keyword">this</span>._dropContainer.exit(<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>._dropContainer=b,<span class="hljs-keyword">this</span>._dropContainer.enter(<span class="hljs-keyword">this</span>,m,l,b===<span class="hljs-keyword">this</span>._initialContainer&amp;&amp;b.sortingDisabled?<span class="hljs-keyword">this</span>._initialIndex:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.entered.next({<span class="hljs-attr">item</span>:<span class="hljs-keyword">this</span>,<span class="hljs-attr">container</span>:b,<span class="hljs-attr">currentIndex</span>:b.getItemIndex(<span class="hljs-keyword">this</span>)})}),<span class="hljs-keyword">this</span>.isDragging()&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._dropContainer._startScrollingIfNecessary(d,y</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>.<span class="hljs-params">_sortItem</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,m,l,<span class="hljs-keyword">this</span>._pointerDirectionDelta</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_applyPreviewTransform</span>(<span class="hljs-params">m-<span class="hljs-keyword">this</span>._pickupPositionInElement.x,l-<span class="hljs-keyword">this</span>._pickupPositionInElement.y</span>))}<span class="hljs-params">_createPreviewElement</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewTemplate</span>,<span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">previewClass</span>,<span class="hljs-params">d</span>=<span class="hljs-params">m</span>?<span class="hljs-params">m</span>.<span class="hljs-params">template</span>:<span class="hljs-params">null</span>;<span class="hljs-params">let</span> <span class="hljs-params">y</span>;<span class="hljs-params">if</span>(<span class="hljs-params">d&amp;&amp;m</span>){<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">m</span>.<span class="hljs-params">matchSize</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>:<span class="hljs-params">null</span>,<span class="hljs-params">E</span>=<span class="hljs-params">m</span>.<span class="hljs-params">viewContainer</span>.<span class="hljs-params">createEmbeddedView</span>(<span class="hljs-params">d,m.context</span>);<span class="hljs-params">E</span>.<span class="hljs-params">detectChanges</span><span class="hljs-params">()</span>,<span class="hljs-params">y</span>=<span class="hljs-params">yr</span>(<span class="hljs-params">E,<span class="hljs-keyword">this</span>._document</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_previewRef</span>=<span class="hljs-params">E</span>,<span class="hljs-params">m</span>.<span class="hljs-params">matchSize</span>?<span class="hljs-params">pn</span>(<span class="hljs-params">y,b</span>):<span class="hljs-params">y</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">mt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._pickupPositionOnPage.x,<span class="hljs-keyword">this</span>._pickupPositionOnPage.y</span>)}<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>;<span class="hljs-params">y</span>=<span class="hljs-params">Yn</span>(<span class="hljs-params">b</span>),<span class="hljs-params">pn</span>(<span class="hljs-params">y,b.getBoundingClientRect(</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_initialTransform</span>&amp;&amp;(<span class="hljs-params">y.style.transform=<span class="hljs-keyword">this</span>._initialTransform</span>)}<span class="hljs-params">return</span> <span class="hljs-params">Hn</span>(<span class="hljs-params">y.style,{<span class="hljs-string">"pointer-events"</span>:<span class="hljs-string">"none"</span>,margin:<span class="hljs-string">"0"</span>,position:<span class="hljs-string">"fixed"</span>,top:<span class="hljs-string">"0"</span>,left:<span class="hljs-string">"0"</span>,<span class="hljs-string">"z-index"</span>:<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>._config.zIndex||<span class="hljs-number">1e3</span>}</span>`</span>},Ji</span>),<span class="hljs-params">It</span>(<span class="hljs-params">y,!<span class="hljs-number">1</span></span>),<span class="hljs-params">y</span>.<span class="hljs-params">classList</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-string">"cdk-drag-preview"</span></span>),<span class="hljs-params">y</span>.<span class="hljs-params">setAttribute</span>(<span class="hljs-params"><span class="hljs-string">"dir"</span>,<span class="hljs-keyword">this</span>._direction</span>),<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(l</span>)?<span class="hljs-params">l</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">b=&gt;y.classList.add(b</span>)):<span class="hljs-params">y</span>.<span class="hljs-params">classList</span>.<span class="hljs-params">add</span>(<span class="hljs-params">l</span>)),<span class="hljs-params">y</span>}<span class="hljs-params">_animatePreviewToPlaceholder</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>._hasMoved</span>)<span class="hljs-params">return</span> <span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_placeholder</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>;<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>.<span class="hljs-params">classList</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-string">"cdk-drag-animating"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_applyPreviewTransform</span>(<span class="hljs-params">m.left,m.top</span>);<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">function</span>(<span class="hljs-params">g</span>){<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">getComputedStyle</span>(<span class="hljs-params">g</span>),<span class="hljs-params">l</span>=<span class="hljs-params">Zn</span>(<span class="hljs-params">m,<span class="hljs-string">"transition-property"</span></span>),<span class="hljs-params">d</span>=<span class="hljs-params">l</span>.<span class="hljs-params">find</span>(<span class="hljs-params">x=&gt;<span class="hljs-string">"transform"</span>===x||<span class="hljs-string">"all"</span>===x</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!d</span>)<span class="hljs-params">return</span> 0;<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">l</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">d</span>),<span class="hljs-params">b</span>=<span class="hljs-params">Zn</span>(<span class="hljs-params">m,<span class="hljs-string">"transition-duration"</span></span>),<span class="hljs-params">E</span>=<span class="hljs-params">Zn</span>(<span class="hljs-params">m,<span class="hljs-string">"transition-delay"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">fr</span>(<span class="hljs-params">b[y]</span>)+<span class="hljs-params">fr</span>(<span class="hljs-params">E[y]</span>)}(<span class="hljs-params"><span class="hljs-keyword">this</span>._preview</span>);<span class="hljs-params">return</span> 0===<span class="hljs-params">l</span>?<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">runOutsideAngular</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">d</span>=&gt;</span>{<span class="hljs-keyword">const</span> y=<span class="hljs-function"><span class="hljs-params">E</span>=&gt;</span>{(!E||<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.sA</span>)(<span class="hljs-params">E</span>)===<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>&amp;&amp;"<span class="hljs-params">transform</span>"===<span class="hljs-params">E</span>.<span class="hljs-params">propertyName</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._preview.removeEventListener(<span class="hljs-string">"transitionend"</span>,y</span>),<span class="hljs-params">d</span><span class="hljs-params">()</span>,<span class="hljs-params">clearTimeout</span>(<span class="hljs-params">b</span>))},<span class="hljs-params">b</span>=<span class="hljs-params">setTimeout</span>(<span class="hljs-params">y,<span class="hljs-number">1.5</span>*l</span>);<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"transitionend"</span>,y</span>)}))}<span class="hljs-params">_createPlaceholderElement</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_placeholderTemplate</span>,<span class="hljs-params">l</span>=<span class="hljs-params">m</span>?<span class="hljs-params">m</span>.<span class="hljs-params">template</span>:<span class="hljs-params">null</span>;<span class="hljs-params">let</span> <span class="hljs-params">d</span>;<span class="hljs-params">return</span> <span class="hljs-params">l</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>._placeholderRef=m.viewContainer.createEmbeddedView(l,m.context</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_placeholderRef</span>.<span class="hljs-params">detectChanges</span><span class="hljs-params">()</span>,<span class="hljs-params">d</span>=<span class="hljs-params">yr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._placeholderRef,<span class="hljs-keyword">this</span>._document</span>)):<span class="hljs-params">d</span>=<span class="hljs-params">Yn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement</span>),<span class="hljs-params">d</span>.<span class="hljs-params">classList</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-string">"cdk-drag-placeholder"</span></span>),<span class="hljs-params">d</span>}<span class="hljs-params">_getPointerPositionInElement</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>,<span class="hljs-params">y</span>=<span class="hljs-params">m</span>===<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>?<span class="hljs-params">null</span>:<span class="hljs-params">m</span>,<span class="hljs-params">b</span>=<span class="hljs-params">y</span>?<span class="hljs-params">y</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>:<span class="hljs-params">d</span>,<span class="hljs-params">E</span>=<span class="hljs-params">fn</span>(<span class="hljs-params">l</span>)?<span class="hljs-params">l</span>.<span class="hljs-params">targetTouches</span>[0]:<span class="hljs-params">l</span>,<span class="hljs-params">x</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_getViewportScrollPosition</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span>{<span class="hljs-params">x</span>:<span class="hljs-params">b</span>.<span class="hljs-params">left</span>-<span class="hljs-params">d</span>.<span class="hljs-params">left</span>+(<span class="hljs-params">E.pageX-b.left-x.left</span>),<span class="hljs-params">y</span>:<span class="hljs-params">b</span>.<span class="hljs-params">top</span>-<span class="hljs-params">d</span>.<span class="hljs-params">top</span>+(<span class="hljs-params">E.pageY-b.top-x.top</span>)}}<span class="hljs-params">_getPointerPositionOnPage</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_getViewportScrollPosition</span><span class="hljs-params">()</span>,<span class="hljs-params">d</span>=<span class="hljs-params">fn</span>(<span class="hljs-params">m</span>)?<span class="hljs-params">m</span>.<span class="hljs-params">touches</span>[0]||<span class="hljs-params">m</span>.<span class="hljs-params">changedTouches</span>[0]||{<span class="hljs-params">pageX</span>:0,<span class="hljs-params">pageY</span>:0}:<span class="hljs-params">m</span>,<span class="hljs-params">y</span>=<span class="hljs-params">d</span>.<span class="hljs-params">pageX</span>-<span class="hljs-params">l</span>.<span class="hljs-params">left</span>,<span class="hljs-params">b</span>=<span class="hljs-params">d</span>.<span class="hljs-params">pageY</span>-<span class="hljs-params">l</span>.<span class="hljs-params">top</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._ownerSVGElement</span>){<span class="hljs-params">const</span> <span class="hljs-params">E</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_ownerSVGElement</span>.<span class="hljs-params">getScreenCTM</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params">E</span>){<span class="hljs-params">const</span> <span class="hljs-params">x</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_ownerSVGElement</span>.<span class="hljs-params">createSVGPoint</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">x</span>.<span class="hljs-params">x</span>=<span class="hljs-params">y</span>,<span class="hljs-params">x</span>.<span class="hljs-params">y</span>=<span class="hljs-params">b</span>,<span class="hljs-params">x</span>.<span class="hljs-params">matrixTransform</span>(<span class="hljs-params">E.inverse(</span>))}}<span class="hljs-params">return</span>{<span class="hljs-params">x</span>:<span class="hljs-params">y</span>,<span class="hljs-params">y</span>:<span class="hljs-params">b</span>}}<span class="hljs-params">_getConstrainedPointerPosition</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>.<span class="hljs-params">lockAxis</span>:<span class="hljs-params">null</span>;<span class="hljs-params">let</span>{<span class="hljs-params">x</span>:<span class="hljs-params">d</span>,<span class="hljs-params">y</span>}=<span class="hljs-params">this</span>.<span class="hljs-params">constrainPosition</span>?<span class="hljs-params">this</span>.<span class="hljs-params">constrainPosition</span>(<span class="hljs-params">m,<span class="hljs-keyword">this</span></span>):<span class="hljs-params">m</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"x"</span>===<span class="hljs-keyword">this</span>.lockAxis||<span class="hljs-string">"x"</span>===l?y=<span class="hljs-keyword">this</span>._pickupPositionOnPage.y:(<span class="hljs-string">"y"</span>===<span class="hljs-keyword">this</span>.lockAxis||<span class="hljs-string">"y"</span>===l</span>)&amp;&amp;(<span class="hljs-params">d=<span class="hljs-keyword">this</span>._pickupPositionOnPage.x</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryRect</span>){<span class="hljs-params">const</span>{<span class="hljs-params">x</span>:<span class="hljs-params">b</span>,<span class="hljs-params">y</span>:<span class="hljs-params">E</span>}=<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionInElement</span>,<span class="hljs-params">x</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryRect</span>,<span class="hljs-params">N</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewRect</span>,<span class="hljs-params">q</span>=<span class="hljs-params">x</span>.<span class="hljs-params">top</span>+<span class="hljs-params">E</span>,<span class="hljs-params">F</span>=<span class="hljs-params">x</span>.<span class="hljs-params">bottom</span>-(<span class="hljs-params">N.height-E</span>);<span class="hljs-params">d</span>=<span class="hljs-params">gr</span>(<span class="hljs-params">d,x.left+b,x.right-(N.width-b</span>)),<span class="hljs-params">y</span>=<span class="hljs-params">gr</span>(<span class="hljs-params">y,q,F</span>)}<span class="hljs-params">return</span>{<span class="hljs-params">x</span>:<span class="hljs-params">d</span>,<span class="hljs-params">y</span>}}<span class="hljs-params">_updatePointerDirectionDelta</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span>{<span class="hljs-params">x</span>:<span class="hljs-params">l</span>,<span class="hljs-params">y</span>:<span class="hljs-params">d</span>}=<span class="hljs-params">m</span>,<span class="hljs-params">y</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_pointerDirectionDelta</span>,<span class="hljs-params">b</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_pointerPositionAtLastDirectionChange</span>,<span class="hljs-params">E</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">abs</span>(<span class="hljs-params">l-b.x</span>),<span class="hljs-params">x</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">abs</span>(<span class="hljs-params">d-b.y</span>);<span class="hljs-params">return</span> <span class="hljs-params">E</span>&gt;<span class="hljs-params">this</span>.<span class="hljs-params">_config</span>.<span class="hljs-params">pointerDirectionChangeThreshold</span>&amp;&amp;(<span class="hljs-params">y.x=l&gt;b.x?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>,b.x=l</span>),<span class="hljs-params">x</span>&gt;<span class="hljs-params">this</span>.<span class="hljs-params">_config</span>.<span class="hljs-params">pointerDirectionChangeThreshold</span>&amp;&amp;(<span class="hljs-params">y.y=d&gt;b.y?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>,b.y=d</span>),<span class="hljs-params">y</span>}<span class="hljs-params">_toggleNativeDragInteractions</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>._rootElement||!<span class="hljs-keyword">this</span>._handles</span>)<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_handles</span>.<span class="hljs-params">length</span>&gt;0||!<span class="hljs-params">this</span>.<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>;<span class="hljs-params">m</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_nativeInteractionsEnabled</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._nativeInteractionsEnabled=m,It(<span class="hljs-keyword">this</span>._rootElement,m</span>))}<span class="hljs-params">_removeRootElementListeners</span>(<span class="hljs-params">m</span>){<span class="hljs-params">m</span>.<span class="hljs-params">removeEventListener</span>(<span class="hljs-params"><span class="hljs-string">"mousedown"</span>,<span class="hljs-keyword">this</span>._pointerDown,Wi</span>),<span class="hljs-params">m</span>.<span class="hljs-params">removeEventListener</span>(<span class="hljs-params"><span class="hljs-string">"touchstart"</span>,<span class="hljs-keyword">this</span>._pointerDown,Jn</span>)}<span class="hljs-params">_applyRootElementTransform</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">mt</span>(<span class="hljs-params">m,l</span>);<span class="hljs-params">null</span>==<span class="hljs-params">this</span>.<span class="hljs-params">_initialTransform</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._initialTransform=<span class="hljs-keyword">this</span>._rootElement.style.transform&amp;&amp;<span class="hljs-string">"none"</span>!=<span class="hljs-keyword">this</span>._rootElement.style.transform?<span class="hljs-keyword">this</span>._rootElement.style.transform:<span class="hljs-string">""</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">$n</span>(<span class="hljs-params">d,<span class="hljs-keyword">this</span>._initialTransform</span>)}<span class="hljs-params">_applyPreviewTransform</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">var</span> <span class="hljs-params">d</span>;<span class="hljs-params">const</span> <span class="hljs-params">y</span>=(<span class="hljs-params"><span class="hljs-literal">null</span>===(d=<span class="hljs-keyword">this</span>._previewTemplate</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">d</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">d</span>.<span class="hljs-params">template</span>)?<span class="hljs-params">void</span> 0:<span class="hljs-params">this</span>.<span class="hljs-params">_initialTransform</span>,<span class="hljs-params">b</span>=<span class="hljs-params">mt</span>(<span class="hljs-params">m,l</span>);<span class="hljs-params">this</span>.<span class="hljs-params">_preview</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">$n</span>(<span class="hljs-params">b,y</span>)}<span class="hljs-params">_getDragDistance</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>;<span class="hljs-params">return</span> <span class="hljs-params">l</span>?{<span class="hljs-params">x</span>:<span class="hljs-params">m</span>.<span class="hljs-params">x</span>-<span class="hljs-params">l</span>.<span class="hljs-params">x</span>,<span class="hljs-params">y</span>:<span class="hljs-params">m</span>.<span class="hljs-params">y</span>-<span class="hljs-params">l</span>.<span class="hljs-params">y</span>}:{<span class="hljs-params">x</span>:0,<span class="hljs-params">y</span>:0}}<span class="hljs-params">_cleanupCachedDimensions</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryRect</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewRect</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>}<span class="hljs-params">_containInsideBoundaryOnResize</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span>{<span class="hljs-params">x</span>:<span class="hljs-params">m</span>,<span class="hljs-params">y</span>:<span class="hljs-params">l</span>}=<span class="hljs-params">this</span>.<span class="hljs-params">_passiveTransform</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===m&amp;&amp;<span class="hljs-number">0</span>===l||<span class="hljs-keyword">this</span>.isDragging(</span>)||!<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryElement</span>)<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryElement</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>,<span class="hljs-params">y</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_rootElement</span>.<span class="hljs-params">getBoundingClientRect</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===d.width&amp;&amp;<span class="hljs-number">0</span>===d.height||<span class="hljs-number">0</span>===y.width&amp;&amp;<span class="hljs-number">0</span>===y.height</span>)<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">d</span>.<span class="hljs-params">left</span>-<span class="hljs-params">y</span>.<span class="hljs-params">left</span>,<span class="hljs-params">E</span>=<span class="hljs-params">y</span>.<span class="hljs-params">right</span>-<span class="hljs-params">d</span>.<span class="hljs-params">right</span>,<span class="hljs-params">x</span>=<span class="hljs-params">d</span>.<span class="hljs-params">top</span>-<span class="hljs-params">y</span>.<span class="hljs-params">top</span>,<span class="hljs-params">N</span>=<span class="hljs-params">y</span>.<span class="hljs-params">bottom</span>-<span class="hljs-params">d</span>.<span class="hljs-params">bottom</span>;<span class="hljs-params">d</span>.<span class="hljs-params">width</span>&gt;<span class="hljs-params">y</span>.<span class="hljs-params">width</span>?(<span class="hljs-params">b&gt;<span class="hljs-number">0</span>&amp;&amp;(m+=b</span>),<span class="hljs-params">E</span>&gt;0&amp;&amp;(<span class="hljs-params">m-=E</span>)):<span class="hljs-params">m</span>=0,<span class="hljs-params">d</span>.<span class="hljs-params">height</span>&gt;<span class="hljs-params">y</span>.<span class="hljs-params">height</span>?(<span class="hljs-params">x&gt;<span class="hljs-number">0</span>&amp;&amp;(l+=x</span>),<span class="hljs-params">N</span>&gt;0&amp;&amp;(<span class="hljs-params">l-=N</span>)):<span class="hljs-params">l</span>=0,(<span class="hljs-params">m!==<span class="hljs-keyword">this</span>._passiveTransform.x||l!==<span class="hljs-keyword">this</span>._passiveTransform.y</span>)&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">setFreeDragPosition</span>(<span class="hljs-params">{y:l,x:m}</span>)}<span class="hljs-params">_getDragStartDelay</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">dragStartDelay</span>;<span class="hljs-params">return</span>"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">l</span>?<span class="hljs-params">l</span>:<span class="hljs-params">fn</span>(<span class="hljs-params">m</span>)?<span class="hljs-params">l</span>.<span class="hljs-params">touch</span>:<span class="hljs-params">l</span>?<span class="hljs-params">l</span>.<span class="hljs-params">mouse</span>:0}<span class="hljs-params">_updateOnScroll</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">handleScroll</span>(<span class="hljs-params">m</span>);<span class="hljs-params">if</span>(<span class="hljs-params">l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.sA</span>)(<span class="hljs-params">m</span>);<span class="hljs-params">this</span>.<span class="hljs-params">_boundaryRect</span>&amp;&amp;(<span class="hljs-params">d===<span class="hljs-keyword">this</span>._document||d!==<span class="hljs-keyword">this</span>._boundaryElement&amp;&amp;d.contains(<span class="hljs-keyword">this</span>._boundaryElement</span>))&amp;&amp;<span class="hljs-params">hn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._boundaryRect,l.top,l.left</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>.<span class="hljs-params">x</span>+=<span class="hljs-params">l</span>.<span class="hljs-params">left</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_pickupPositionOnPage</span>.<span class="hljs-params">y</span>+=<span class="hljs-params">l</span>.<span class="hljs-params">top</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dropContainer</span>||(<span class="hljs-params"><span class="hljs-keyword">this</span>._activeTransform.x-=l.left,<span class="hljs-keyword">this</span>._activeTransform.y-=l.top,<span class="hljs-keyword">this</span>._applyRootElementTransform(<span class="hljs-keyword">this</span>._activeTransform.x,<span class="hljs-keyword">this</span>._activeTransform.y</span>))}}<span class="hljs-params">_getViewportScrollPosition</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">positions</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document</span>);<span class="hljs-params">return</span> <span class="hljs-params">m</span>?<span class="hljs-params">m</span>.<span class="hljs-params">scrollPosition</span>:<span class="hljs-params">this</span>.<span class="hljs-params">_viewportRuler</span>.<span class="hljs-params">getViewportScrollPosition</span><span class="hljs-params">()</span>}<span class="hljs-params">_getShadowRoot</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">void</span> 0===<span class="hljs-params">this</span>.<span class="hljs-params">_cachedShadowRoot</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._cachedShadowRoot=(<span class="hljs-number">0</span>,Ne.kV</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>._rootElement</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_cachedShadowRoot</span>}<span class="hljs-params">_getPreviewInsertionPoint</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_previewContainer</span>||"<span class="hljs-params">global</span>";<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"parent"</span>===d</span>)<span class="hljs-params">return</span> <span class="hljs-params">m</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"global"</span>===d</span>){<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>;<span class="hljs-params">return</span> <span class="hljs-params">l</span>||<span class="hljs-params">y</span>.<span class="hljs-params">fullscreenElement</span>||<span class="hljs-params">y</span>.<span class="hljs-params">webkitFullscreenElement</span>||<span class="hljs-params">y</span>.<span class="hljs-params">mozFullScreenElement</span>||<span class="hljs-params">y</span>.<span class="hljs-params">msFullscreenElement</span>||<span class="hljs-params">y</span>.<span class="hljs-params">body</span>}<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params">d</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">mt</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">return</span>`<span class="hljs-params">translate3d</span>(<span class="hljs-params">${<span class="hljs-built_in">Math</span>.round(g</span>)}<span class="hljs-params">px</span>, <span class="hljs-params">$</span>{<span class="hljs-params">Math</span>.<span class="hljs-params">round</span>(<span class="hljs-params">m</span>)}<span class="hljs-params">px</span>, 0)`}<span class="hljs-params">function</span> <span class="hljs-params">gr</span>(<span class="hljs-params">g,m,l</span>){<span class="hljs-params">return</span> <span class="hljs-params">Math</span>.<span class="hljs-params">max</span>(<span class="hljs-params">m,<span class="hljs-built_in">Math</span>.min(l,g</span>))}<span class="hljs-params">function</span> <span class="hljs-params">gt</span>(<span class="hljs-params">g</span>){<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">g</span>.<span class="hljs-params">parentNode</span>&amp;&amp;<span class="hljs-params">g</span>.<span class="hljs-params">parentNode</span>.<span class="hljs-params">removeChild</span>(<span class="hljs-params">g</span>)}<span class="hljs-params">function</span> <span class="hljs-params">fn</span>(<span class="hljs-params">g</span>){<span class="hljs-params">return</span>"<span class="hljs-params">t</span>"===<span class="hljs-params">g</span>.<span class="hljs-params">type</span>[0]}<span class="hljs-params">function</span> <span class="hljs-params">yr</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">g</span>.<span class="hljs-params">rootNodes</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>===l.length&amp;&amp;l[<span class="hljs-number">0</span>].nodeType===m.ELEMENT_NODE</span>)<span class="hljs-params">return</span> <span class="hljs-params">l</span>[0];<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">m</span>.<span class="hljs-params">createElement</span>(<span class="hljs-params"><span class="hljs-string">"div"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">l</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">y=&gt;d.appendChild(y</span>)),<span class="hljs-params">d</span>}<span class="hljs-params">function</span> <span class="hljs-params">pn</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">g</span>.<span class="hljs-params">style</span>.<span class="hljs-params">width</span>=`<span class="hljs-params">$</span>{<span class="hljs-params">m</span>.<span class="hljs-params">width</span>}<span class="hljs-params">px</span>`,<span class="hljs-params">g</span>.<span class="hljs-params">style</span>.<span class="hljs-params">height</span>=`<span class="hljs-params">$</span>{<span class="hljs-params">m</span>.<span class="hljs-params">height</span>}<span class="hljs-params">px</span>`,<span class="hljs-params">g</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">mt</span>(<span class="hljs-params">m.left,m.top</span>)}<span class="hljs-params">function</span> <span class="hljs-params">St</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">return</span> <span class="hljs-params">Math</span>.<span class="hljs-params">max</span>(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-built_in">Math</span>.min(m,g</span>))}<span class="hljs-params">class</span> <span class="hljs-params">wr</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">m,l,d,y,b</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>=<span class="hljs-params">l</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>=<span class="hljs-params">y</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_viewportRuler</span>=<span class="hljs-params">b</span>,<span class="hljs-params">this</span>.<span class="hljs-params">disabled</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">sortingDisabled</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">autoScrollDisabled</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">autoScrollStep</span>=2,<span class="hljs-params">this</span>.<span class="hljs-params">enterPredicate</span>=<span class="hljs-params">()</span>=&gt;</span>!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.sortPredicate=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.beforeStarted=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.entered=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.exited=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.dropped=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.sorted=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>._isDragging=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>._itemPositions=[],<span class="hljs-keyword">this</span>._previousSwap={<span class="hljs-attr">drag</span>:<span class="hljs-literal">null</span>,<span class="hljs-attr">delta</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">overlaps</span>:!<span class="hljs-number">1</span>},<span class="hljs-keyword">this</span>._draggables=[],<span class="hljs-keyword">this</span>._siblings=[],<span class="hljs-keyword">this</span>._orientation=<span class="hljs-string">"vertical"</span>,<span class="hljs-keyword">this</span>._activeSiblings=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,<span class="hljs-keyword">this</span>._direction=<span class="hljs-string">"ltr"</span>,<span class="hljs-keyword">this</span>._viewportScrollSubscription=Ft.w.EMPTY,<span class="hljs-keyword">this</span>._verticalScrollDirection=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>._horizontalScrollDirection=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>._stopScrollTimers=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>._cachedShadowRoot=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>._startScrollInterval=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">this</span>._stopScrolling(),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">g=<span class="hljs-number">0</span>,m=ur.P</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">!(<span class="hljs-number">0</span>,lr.k</span>)(<span class="hljs-params">g</span>)||<span class="hljs-params">g</span>&lt;0)&amp;&amp;(<span class="hljs-params">g=<span class="hljs-number">0</span></span>),(<span class="hljs-params">!m||<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> m.schedule</span>)&amp;&amp;(<span class="hljs-params">m=ur.P</span>),<span class="hljs-params">new</span> <span class="hljs-params">an</span>.<span class="hljs-params">y</span>(<span class="hljs-params">l=&gt;(l.add(m.schedule(jn,g,{subscriber:l,counter:<span class="hljs-number">0</span>,period:g}</span>)),<span class="hljs-params">l</span>))}(<span class="hljs-params"><span class="hljs-number">0</span>,hr.Z</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,Be.R</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>._stopScrollTimers</span>)).<span class="hljs-params">subscribe</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">const</span> E=<span class="hljs-keyword">this</span>._scrollNode,x=<span class="hljs-keyword">this</span>.autoScrollStep;<span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>._verticalScrollDirection?ts(E,-x):<span class="hljs-number">2</span>===<span class="hljs-keyword">this</span>._verticalScrollDirection&amp;&amp;ts(E,x),<span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>._horizontalScrollDirection?ns(E,-x):<span class="hljs-number">2</span>===<span class="hljs-keyword">this</span>._horizontalScrollDirection&amp;&amp;ns(E,x)})},<span class="hljs-keyword">this</span>.element=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params">m</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>=<span class="hljs-params">d</span>,<span class="hljs-params">this</span>.<span class="hljs-params">withScrollableParents</span>(<span class="hljs-params">[<span class="hljs-keyword">this</span>.element]</span>),<span class="hljs-params">l</span>.<span class="hljs-params">registerDropContainer</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>=<span class="hljs-params">new</span> <span class="hljs-params">dn</span>(<span class="hljs-params">d,b</span>)}<span class="hljs-params">dispose</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_stopScrolling</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_stopScrollTimers</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_viewportScrollSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">beforeStarted</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">entered</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">exited</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">dropped</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">sorted</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_activeSiblings</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_scrollNode</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">removeDropContainer</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_isDragging</span>}<span class="hljs-params">start</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_draggingStarted</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_notifyReceivingSiblings</span><span class="hljs-params">()</span>}<span class="hljs-params">enter</span>(<span class="hljs-params">m,l,d,y</span>){<span class="hljs-params">let</span> <span class="hljs-params">b</span>;<span class="hljs-params">this</span>.<span class="hljs-params">_draggingStarted</span><span class="hljs-params">()</span>,<span class="hljs-params">null</span>==<span class="hljs-params">y</span>?(<span class="hljs-params">b=<span class="hljs-keyword">this</span>.sortingDisabled?<span class="hljs-keyword">this</span>._draggables.indexOf(m</span>):-1,-1===<span class="hljs-params">b</span>&amp;&amp;(<span class="hljs-params">b=<span class="hljs-keyword">this</span>._getItemIndexFromPointerPosition(m,l,d</span>))):<span class="hljs-params">b</span>=<span class="hljs-params">y</span>;<span class="hljs-params">const</span> <span class="hljs-params">E</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_activeDraggables</span>,<span class="hljs-params">x</span>=<span class="hljs-params">E</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">m</span>),<span class="hljs-params">N</span>=<span class="hljs-params">m</span>.<span class="hljs-params">getPlaceholderElement</span><span class="hljs-params">()</span>;<span class="hljs-params">let</span> <span class="hljs-params">q</span>=<span class="hljs-params">E</span>[<span class="hljs-params">b</span>];<span class="hljs-params">if</span>(<span class="hljs-params">q===m&amp;&amp;(q=E[b+<span class="hljs-number">1</span>]</span>),<span class="hljs-params">x</span>&gt;-1&amp;&amp;<span class="hljs-params">E</span>.<span class="hljs-params">splice</span>(<span class="hljs-params">x,<span class="hljs-number">1</span></span>),<span class="hljs-params">q</span>&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">isDragging</span>(<span class="hljs-params">q</span>)){<span class="hljs-params">const</span> <span class="hljs-params">F</span>=<span class="hljs-params">q</span>.<span class="hljs-params">getRootElement</span><span class="hljs-params">()</span>;<span class="hljs-params">F</span>.<span class="hljs-params">parentElement</span>.<span class="hljs-params">insertBefore</span>(<span class="hljs-params">N,F</span>),<span class="hljs-params">E</span>.<span class="hljs-params">splice</span>(<span class="hljs-params">b,<span class="hljs-number">0</span>,m</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._shouldEnterAsFirstChild(l,d</span>)){<span class="hljs-params">const</span> <span class="hljs-params">F</span>=<span class="hljs-params">E</span>[0].<span class="hljs-params">getRootElement</span><span class="hljs-params">()</span>;<span class="hljs-params">F</span>.<span class="hljs-params">parentNode</span>.<span class="hljs-params">insertBefore</span>(<span class="hljs-params">N,F</span>),<span class="hljs-params">E</span>.<span class="hljs-params">unshift</span>(<span class="hljs-params">m</span>)}<span class="hljs-params">else</span>(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>).<span class="hljs-params">appendChild</span>(<span class="hljs-params">N</span>),<span class="hljs-params">E</span>.<span class="hljs-params">push</span>(<span class="hljs-params">m</span>);<span class="hljs-params">N</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">_cacheItemPositions</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_cacheParentPositions</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_notifyReceivingSiblings</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">entered</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{item:m,container:<span class="hljs-keyword">this</span>,currentIndex:<span class="hljs-keyword">this</span>.getItemIndex(m</span>)})}<span class="hljs-params">exit</span>(<span class="hljs-params">m</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_reset</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">exited</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{item:m,container:<span class="hljs-keyword">this</span>}</span>)}<span class="hljs-params">drop</span>(<span class="hljs-params">m,l,d,y,b,E,x</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_reset</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">dropped</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{item:m,currentIndex:l,previousIndex:d,container:<span class="hljs-keyword">this</span>,previousContainer:y,isPointerOverContainer:b,distance:E,dropPoint:x}</span>)}<span class="hljs-params">withItems</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_draggables</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_draggables</span>=<span class="hljs-params">m</span>,<span class="hljs-params">m</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">d=&gt;d._withDropContainer(<span class="hljs-keyword">this</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">isDragging</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">l.filter(y=&gt;y.isDragging(</span>)).<span class="hljs-params">every</span>(<span class="hljs-params">y=&gt;<span class="hljs-number">-1</span>===m.indexOf(y</span>))?<span class="hljs-params">this</span>.<span class="hljs-params">_reset</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">_cacheItems</span><span class="hljs-params">()</span>),<span class="hljs-params">this</span>}<span class="hljs-params">withDirection</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_direction</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">connectedTo</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_siblings</span>=<span class="hljs-params">m</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>}<span class="hljs-params">withOrientation</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>=<span class="hljs-params">m</span>,<span class="hljs-params">this</span>}<span class="hljs-params">withScrollableParents</span>(<span class="hljs-params">m</span>){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_scrollableElements</span>=-1===<span class="hljs-params">m</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">l</span>)?[<span class="hljs-params">l</span>,...<span class="hljs-params">m</span>]:<span class="hljs-params">m</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>}<span class="hljs-params">getScrollableParents</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_scrollableElements</span>}<span class="hljs-params">getItemIndex</span>(<span class="hljs-params">m</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_isDragging</span>?<span class="hljs-params">es</span>(<span class="hljs-params"><span class="hljs-string">"horizontal"</span>===<span class="hljs-keyword">this</span>._orientation&amp;&amp;<span class="hljs-string">"rtl"</span>===<span class="hljs-keyword">this</span>._direction?<span class="hljs-keyword">this</span>._itemPositions.slice(</span>).<span class="hljs-params">reverse</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">_itemPositions</span>,<span class="hljs-params">d</span>=&gt;</span>d.drag===m):<span class="hljs-keyword">this</span>._draggables.indexOf(m)}isReceiving(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._activeSiblings.size&gt;<span class="hljs-number">0</span>}_sortItem(m,l,d,y){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.sortingDisabled||!<span class="hljs-keyword">this</span>._clientRect||!Qi(<span class="hljs-keyword">this</span>._clientRect,<span class="hljs-number">.05</span>,l,d))<span class="hljs-keyword">return</span>;<span class="hljs-keyword">const</span> b=<span class="hljs-keyword">this</span>._itemPositions,E=<span class="hljs-keyword">this</span>._getItemIndexFromPointerPosition(m,l,d,y);<span class="hljs-keyword">if</span>(<span class="hljs-number">-1</span>===E&amp;&amp;b.length&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">const</span> x=<span class="hljs-string">"horizontal"</span>===<span class="hljs-keyword">this</span>._orientation,N=es(b,me=&gt;me.drag===m),q=b[E],Z=q.clientRect,J=N&gt;E?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>,je=<span class="hljs-keyword">this</span>._getItemOffsetPx(b[N].clientRect,Z,J),Ee=<span class="hljs-keyword">this</span>._getSiblingOffsetPx(N,b,J),yt=b.slice();<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">function</span>(g,m,l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">St</span>(<span class="hljs-params">m,g.length<span class="hljs-number">-1</span></span>),<span class="hljs-params">y</span>=<span class="hljs-params">St</span>(<span class="hljs-params">l,g.length<span class="hljs-number">-1</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">d===y</span>)<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">g</span>[<span class="hljs-params">d</span>],<span class="hljs-params">E</span>=<span class="hljs-params">y</span>&lt;<span class="hljs-params">d</span>?-1:1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> x=d;x!==y;x+=E</span>)<span class="hljs-params">g</span>[<span class="hljs-params">x</span>]=<span class="hljs-params">g</span>[<span class="hljs-params">x</span>+<span class="hljs-params">E</span>];<span class="hljs-params">g</span>[<span class="hljs-params">y</span>]=<span class="hljs-params">b</span>})(<span class="hljs-params">b,N,E</span>),<span class="hljs-params">this</span>.<span class="hljs-params">sorted</span>.<span class="hljs-params">next</span>(<span class="hljs-params">{previousIndex:N,currentIndex:E,container:<span class="hljs-keyword">this</span>,item:m}</span>),<span class="hljs-params">b</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(me,Fr</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(yt[Fr]===me)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">const</span> Ur=me.drag===m,ht=Ur?je:Ee,ot=Ur?m.getPlaceholderElement():me.drag.getRootElement();me.offset+=ht,x?<span class="hljs-function">(<span class="hljs-params">ot.style.transform=$n(<span class="hljs-string">`translate3d(<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(me.offset)}</span>px, 0, 0)`</span>,me.initialTransform</span>),<span class="hljs-params">hn</span>(<span class="hljs-params">me.clientRect,<span class="hljs-number">0</span>,ht</span>)):(<span class="hljs-params">ot.style.transform=$n(<span class="hljs-string">`translate3d(0, <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(me.offset)}</span>px, 0)`</span>,me.initialTransform</span>),<span class="hljs-params">hn</span>(<span class="hljs-params">me.clientRect,ht,<span class="hljs-number">0</span></span>))}),<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">overlaps</span>=<span class="hljs-params">Qn</span>(<span class="hljs-params">Z,l,d</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">drag</span>=<span class="hljs-params">q</span>.<span class="hljs-params">drag</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">delta</span>=<span class="hljs-params">x</span>?<span class="hljs-params">y</span>.<span class="hljs-params">x</span>:<span class="hljs-params">y</span>.<span class="hljs-params">y</span>}<span class="hljs-params">_startScrollingIfNecessary</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.autoScrollDisabled</span>)<span class="hljs-params">return</span>;<span class="hljs-params">let</span> <span class="hljs-params">d</span>,<span class="hljs-params">y</span>=0,<span class="hljs-params">b</span>=0;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._parentPositions.positions.forEach((E,x</span>)=&gt;</span>{x===<span class="hljs-keyword">this</span>._document||!E.clientRect||d||Qi(E.clientRect,<span class="hljs-number">.05</span>,m,l)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">[y,b]=<span class="hljs-keyword">function</span>(g,m,l,d</span>){<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">ti</span>(<span class="hljs-params">m,d</span>),<span class="hljs-params">b</span>=<span class="hljs-params">is</span>(<span class="hljs-params">m,l</span>);<span class="hljs-params">let</span> <span class="hljs-params">E</span>=0,<span class="hljs-params">x</span>=0;<span class="hljs-params">if</span>(<span class="hljs-params">y</span>){<span class="hljs-params">const</span> <span class="hljs-params">N</span>=<span class="hljs-params">g</span>.<span class="hljs-params">scrollTop</span>;1===<span class="hljs-params">y</span>?<span class="hljs-params">N</span>&gt;0&amp;&amp;(<span class="hljs-params">E=<span class="hljs-number">1</span></span>):<span class="hljs-params">g</span>.<span class="hljs-params">scrollHeight</span>-<span class="hljs-params">N</span>&gt;<span class="hljs-params">g</span>.<span class="hljs-params">clientHeight</span>&amp;&amp;(<span class="hljs-params">E=<span class="hljs-number">2</span></span>)}<span class="hljs-params">if</span>(<span class="hljs-params">b</span>){<span class="hljs-params">const</span> <span class="hljs-params">N</span>=<span class="hljs-params">g</span>.<span class="hljs-params">scrollLeft</span>;1===<span class="hljs-params">b</span>?<span class="hljs-params">N</span>&gt;0&amp;&amp;(<span class="hljs-params">x=<span class="hljs-number">1</span></span>):<span class="hljs-params">g</span>.<span class="hljs-params">scrollWidth</span>-<span class="hljs-params">N</span>&gt;<span class="hljs-params">g</span>.<span class="hljs-params">clientWidth</span>&amp;&amp;(<span class="hljs-params">x=<span class="hljs-number">2</span></span>)}<span class="hljs-params">return</span>[<span class="hljs-params">E</span>,<span class="hljs-params">x</span>]}(<span class="hljs-params">x,E.clientRect,m,l</span>),(<span class="hljs-params">y||b</span>)&amp;&amp;(<span class="hljs-params">d=x</span>))}),!<span class="hljs-params">y</span>&amp;&amp;!<span class="hljs-params">b</span>){<span class="hljs-params">const</span>{<span class="hljs-params">width</span>:<span class="hljs-params">E</span>,<span class="hljs-params">height</span>:<span class="hljs-params">x</span>}=<span class="hljs-params">this</span>.<span class="hljs-params">_viewportRuler</span>.<span class="hljs-params">getViewportSize</span><span class="hljs-params">()</span>,<span class="hljs-params">N</span>={<span class="hljs-params">width</span>:<span class="hljs-params">E</span>,<span class="hljs-params">height</span>:<span class="hljs-params">x</span>,<span class="hljs-params">top</span>:0,<span class="hljs-params">right</span>:<span class="hljs-params">E</span>,<span class="hljs-params">bottom</span>:<span class="hljs-params">x</span>,<span class="hljs-params">left</span>:0};<span class="hljs-params">y</span>=<span class="hljs-params">ti</span>(<span class="hljs-params">N,l</span>),<span class="hljs-params">b</span>=<span class="hljs-params">is</span>(<span class="hljs-params">N,m</span>),<span class="hljs-params">d</span>=<span class="hljs-params">window</span>}<span class="hljs-params">d</span>&amp;&amp;(<span class="hljs-params">y!==<span class="hljs-keyword">this</span>._verticalScrollDirection||b!==<span class="hljs-keyword">this</span>._horizontalScrollDirection||d!==<span class="hljs-keyword">this</span>._scrollNode</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._verticalScrollDirection=y,<span class="hljs-keyword">this</span>._horizontalScrollDirection=b,<span class="hljs-keyword">this</span>._scrollNode=d,(y||b</span>)&amp;&amp;<span class="hljs-params">d</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">runOutsideAngular</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._startScrollInterval</span>):<span class="hljs-params">this</span>.<span class="hljs-params">_stopScrolling</span><span class="hljs-params">()</span>)}<span class="hljs-params">_stopScrolling</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_stopScrollTimers</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>}<span class="hljs-params">_draggingStarted</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>).<span class="hljs-params">style</span>;<span class="hljs-params">this</span>.<span class="hljs-params">beforeStarted</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_isDragging</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">_initialScrollSnap</span>=<span class="hljs-params">m</span>.<span class="hljs-params">msScrollSnapType</span>||<span class="hljs-params">m</span>.<span class="hljs-params">scrollSnapType</span>||"",<span class="hljs-params">m</span>.<span class="hljs-params">scrollSnapType</span>=<span class="hljs-params">m</span>.<span class="hljs-params">msScrollSnapType</span>="<span class="hljs-params">none</span>",<span class="hljs-params">this</span>.<span class="hljs-params">_cacheItems</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_viewportScrollSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_listenToScrollEvents</span><span class="hljs-params">()</span>}<span class="hljs-params">_cacheParentPositions</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>);<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">cache</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._scrollableElements</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_clientRect</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">positions</span>.<span class="hljs-params">get</span>(<span class="hljs-params">m</span>).<span class="hljs-params">clientRect</span>}<span class="hljs-params">_cacheItemPositions</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>="<span class="hljs-params">horizontal</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>;<span class="hljs-params">this</span>.<span class="hljs-params">_itemPositions</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_activeDraggables</span>.<span class="hljs-params">map</span>(<span class="hljs-params">l=&gt;{<span class="hljs-keyword">const</span> d=l.getVisibleElement(</span>);<span class="hljs-params">return</span>{<span class="hljs-params">drag</span>:<span class="hljs-params">l</span>,<span class="hljs-params">offset</span>:0,<span class="hljs-params">initialTransform</span>:<span class="hljs-params">d</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>||"",<span class="hljs-params">clientRect</span>:<span class="hljs-params">ln</span>(<span class="hljs-params">d</span>)}}).<span class="hljs-params">sort</span>(<span class="hljs-params">(l,d</span>)=&gt;</span>m?l.clientRect.left-d.clientRect.left:l.clientRect.top-d.clientRect.top)}_reset(){<span class="hljs-keyword">this</span>._isDragging=!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> m=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>).<span class="hljs-params">style</span>;<span class="hljs-params">m</span>.<span class="hljs-params">scrollSnapType</span>=<span class="hljs-params">m</span>.<span class="hljs-params">msScrollSnapType</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_initialScrollSnap</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_activeDraggables</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">l=&gt;{<span class="hljs-keyword">var</span> d;<span class="hljs-keyword">const</span> y=l.getRootElement(</span>);<span class="hljs-params">if</span>(<span class="hljs-params">y</span>){<span class="hljs-params">const</span> <span class="hljs-params">b</span>=<span class="hljs-params">null</span>===(<span class="hljs-params">d=<span class="hljs-keyword">this</span>._itemPositions.find(E=&gt;E.drag===l</span>))||<span class="hljs-params">void</span> 0===<span class="hljs-params">d</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">d</span>.<span class="hljs-params">initialTransform</span>;<span class="hljs-params">y</span>.<span class="hljs-params">style</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">b</span>||""}}),<span class="hljs-params">this</span>.<span class="hljs-params">_siblings</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">l=&gt;l._stopReceiving(<span class="hljs-keyword">this</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_activeDraggables</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">_itemPositions</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">drag</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">delta</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">_previousSwap</span>.<span class="hljs-params">overlaps</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">_stopScrolling</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_viewportScrollSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>}<span class="hljs-params">_getSiblingOffsetPx</span>(<span class="hljs-params">m,l,d</span>){<span class="hljs-params">const</span> <span class="hljs-params">y</span>="<span class="hljs-params">horizontal</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>,<span class="hljs-params">b</span>=<span class="hljs-params">l</span>[<span class="hljs-params">m</span>].<span class="hljs-params">clientRect</span>,<span class="hljs-params">E</span>=<span class="hljs-params">l</span>[<span class="hljs-params">m</span>+-1*<span class="hljs-params">d</span>];<span class="hljs-params">let</span> <span class="hljs-params">x</span>=<span class="hljs-params">b</span>[<span class="hljs-params">y</span>?"<span class="hljs-params">width</span>":"<span class="hljs-params">height</span>"]*<span class="hljs-params">d</span>;<span class="hljs-params">if</span>(<span class="hljs-params">E</span>){<span class="hljs-params">const</span> <span class="hljs-params">N</span>=<span class="hljs-params">y</span>?"<span class="hljs-params">left</span>":"<span class="hljs-params">top</span>",<span class="hljs-params">q</span>=<span class="hljs-params">y</span>?"<span class="hljs-params">right</span>":"<span class="hljs-params">bottom</span>";-1===<span class="hljs-params">d</span>?<span class="hljs-params">x</span>-=<span class="hljs-params">E</span>.<span class="hljs-params">clientRect</span>[<span class="hljs-params">N</span>]-<span class="hljs-params">b</span>[<span class="hljs-params">q</span>]:<span class="hljs-params">x</span>+=<span class="hljs-params">b</span>[<span class="hljs-params">N</span>]-<span class="hljs-params">E</span>.<span class="hljs-params">clientRect</span>[<span class="hljs-params">q</span>]}<span class="hljs-params">return</span> <span class="hljs-params">x</span>}<span class="hljs-params">_getItemOffsetPx</span>(<span class="hljs-params">m,l,d</span>){<span class="hljs-params">const</span> <span class="hljs-params">y</span>="<span class="hljs-params">horizontal</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>;<span class="hljs-params">let</span> <span class="hljs-params">b</span>=<span class="hljs-params">y</span>?<span class="hljs-params">l</span>.<span class="hljs-params">left</span>-<span class="hljs-params">m</span>.<span class="hljs-params">left</span>:<span class="hljs-params">l</span>.<span class="hljs-params">top</span>-<span class="hljs-params">m</span>.<span class="hljs-params">top</span>;<span class="hljs-params">return</span>-1===<span class="hljs-params">d</span>&amp;&amp;(<span class="hljs-params">b+=y?l.width-m.width:l.height-m.height</span>),<span class="hljs-params">b</span>}<span class="hljs-params">_shouldEnterAsFirstChild</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>._activeDraggables.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_itemPositions</span>,<span class="hljs-params">y</span>="<span class="hljs-params">horizontal</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>;<span class="hljs-params">if</span>(<span class="hljs-params">d[<span class="hljs-number">0</span>].drag!==<span class="hljs-keyword">this</span>._activeDraggables[<span class="hljs-number">0</span>]</span>){<span class="hljs-params">const</span> <span class="hljs-params">E</span>=<span class="hljs-params">d</span>[<span class="hljs-params">d</span>.<span class="hljs-params">length</span>-1].<span class="hljs-params">clientRect</span>;<span class="hljs-params">return</span> <span class="hljs-params">y</span>?<span class="hljs-params">m</span>&gt;=<span class="hljs-params">E</span>.<span class="hljs-params">right</span>:<span class="hljs-params">l</span>&gt;=<span class="hljs-params">E</span>.<span class="hljs-params">bottom</span>}{<span class="hljs-params">const</span> <span class="hljs-params">E</span>=<span class="hljs-params">d</span>[0].<span class="hljs-params">clientRect</span>;<span class="hljs-params">return</span> <span class="hljs-params">y</span>?<span class="hljs-params">m</span>&lt;=<span class="hljs-params">E</span>.<span class="hljs-params">left</span>:<span class="hljs-params">l</span>&lt;=<span class="hljs-params">E</span>.<span class="hljs-params">top</span>}}<span class="hljs-params">_getItemIndexFromPointerPosition</span>(<span class="hljs-params">m,l,d,y</span>){<span class="hljs-params">const</span> <span class="hljs-params">b</span>="<span class="hljs-params">horizontal</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">_orientation</span>,<span class="hljs-params">E</span>=<span class="hljs-params">es</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._itemPositions,({drag:x,clientRect:N},q,F</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(x===m)<span class="hljs-keyword">return</span> F.length&lt;<span class="hljs-number">2</span>;<span class="hljs-keyword">if</span>(y){<span class="hljs-keyword">const</span> Z=b?y.x:y.y;<span class="hljs-keyword">if</span>(x===<span class="hljs-keyword">this</span>._previousSwap.drag&amp;&amp;<span class="hljs-keyword">this</span>._previousSwap.overlaps&amp;&amp;Z===<span class="hljs-keyword">this</span>._previousSwap.delta)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span> b?l&gt;=<span class="hljs-built_in">Math</span>.floor(N.left)&amp;&amp;l&lt;<span class="hljs-built_in">Math</span>.floor(N.right):d&gt;=<span class="hljs-built_in">Math</span>.floor(N.top)&amp;&amp;d&lt;<span class="hljs-built_in">Math</span>.floor(N.bottom)});<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>!==E&amp;&amp;<span class="hljs-keyword">this</span>.sortPredicate(E,m,<span class="hljs-keyword">this</span>)?E:<span class="hljs-number">-1</span>}_cacheItems(){<span class="hljs-keyword">this</span>._activeDraggables=<span class="hljs-keyword">this</span>._draggables.slice(),<span class="hljs-keyword">this</span>._cacheItemPositions(),<span class="hljs-keyword">this</span>._cacheParentPositions()}_isOverContainer(m,l){<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>._clientRect&amp;&amp;Qn(<span class="hljs-keyword">this</span>._clientRect,m,l)}_getSiblingContainerFromPosition(m,l,d){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._siblings.find(<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>y._canReceive(m,l,d))}_canReceive(m,l,d){<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._clientRect||!Qn(<span class="hljs-keyword">this</span>._clientRect,l,d)||!<span class="hljs-keyword">this</span>.enterPredicate(m,<span class="hljs-keyword">this</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> y=<span class="hljs-keyword">this</span>._getShadowRoot().elementFromPoint(l,d);<span class="hljs-keyword">if</span>(!y)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> b=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>);<span class="hljs-params">return</span> <span class="hljs-params">y</span>===<span class="hljs-params">b</span>||<span class="hljs-params">b</span>.<span class="hljs-params">contains</span>(<span class="hljs-params">y</span>)}<span class="hljs-params">_startReceiving</span>(<span class="hljs-params">m,l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_activeSiblings</span>;!<span class="hljs-params">d</span>.<span class="hljs-params">has</span>(<span class="hljs-params">m</span>)&amp;&amp;<span class="hljs-params">l</span>.<span class="hljs-params">every</span>(<span class="hljs-params">y=&gt;<span class="hljs-keyword">this</span>.enterPredicate(y,<span class="hljs-keyword">this</span></span>)||<span class="hljs-params">this</span>.<span class="hljs-params">_draggables</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">y</span>)&gt;-1)&amp;&amp;(<span class="hljs-params">d.add(m</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_cacheParentPositions</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_listenToScrollEvents</span><span class="hljs-params">()</span>)}<span class="hljs-params">_stopReceiving</span>(<span class="hljs-params">m</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_activeSiblings</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">m</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_viewportScrollSubscription</span>.<span class="hljs-params">unsubscribe</span><span class="hljs-params">()</span>}<span class="hljs-params">_listenToScrollEvents</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">_viewportScrollSubscription</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_dragDropRegistry</span>.<span class="hljs-params">scrolled</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._getShadowRoot(</span>)).<span class="hljs-params">subscribe</span>(<span class="hljs-params">m=&gt;{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.isDragging(</span>)){<span class="hljs-params">const</span> <span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_parentPositions</span>.<span class="hljs-params">handleScroll</span>(<span class="hljs-params">m</span>);<span class="hljs-params">l</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._itemPositions.forEach(({clientRect:d}</span>)=&gt;</span>{hn(d,l.top,l.left)}),<span class="hljs-keyword">this</span>._itemPositions.forEach(<span class="hljs-function">(<span class="hljs-params">{drag:d}</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._dragDropRegistry.isDragging(d)&amp;&amp;d._sortFromLastPointerPosition()}))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.isReceiving()&amp;&amp;<span class="hljs-keyword">this</span>._cacheParentPositions()})}_getShadowRoot(){<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._cachedShadowRoot){<span class="hljs-keyword">const</span> m=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.kV</span>)(<span class="hljs-params">(<span class="hljs-number">0</span>,ee.fI</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.element</span>));<span class="hljs-params">this</span>.<span class="hljs-params">_cachedShadowRoot</span>=<span class="hljs-params">m</span>||<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_cachedShadowRoot</span>}<span class="hljs-params">_notifyReceivingSiblings</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_activeDraggables</span>.<span class="hljs-params">filter</span>(<span class="hljs-params">l=&gt;l.isDragging(</span>));<span class="hljs-params">this</span>.<span class="hljs-params">_siblings</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">l=&gt;l._startReceiving(<span class="hljs-keyword">this</span>,m</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">es</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> l=<span class="hljs-number">0</span>;l&lt;g.length;l++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">m(g[l],l,g</span>))<span class="hljs-params">return</span> <span class="hljs-params">l</span>;<span class="hljs-params">return</span>-1}<span class="hljs-params">function</span> <span class="hljs-params">ts</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">g</span>===<span class="hljs-params">window</span>?<span class="hljs-params">g</span>.<span class="hljs-params">scrollBy</span>(<span class="hljs-params"><span class="hljs-number">0</span>,m</span>):<span class="hljs-params">g</span>.<span class="hljs-params">scrollTop</span>+=<span class="hljs-params">m</span>}<span class="hljs-params">function</span> <span class="hljs-params">ns</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">g</span>===<span class="hljs-params">window</span>?<span class="hljs-params">g</span>.<span class="hljs-params">scrollBy</span>(<span class="hljs-params">m,<span class="hljs-number">0</span></span>):<span class="hljs-params">g</span>.<span class="hljs-params">scrollLeft</span>+=<span class="hljs-params">m</span>}<span class="hljs-params">function</span> <span class="hljs-params">ti</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">const</span>{<span class="hljs-params">top</span>:<span class="hljs-params">l</span>,<span class="hljs-params">bottom</span>:<span class="hljs-params">d</span>,<span class="hljs-params">height</span>:<span class="hljs-params">y</span>}=<span class="hljs-params">g</span>,<span class="hljs-params">b</span>=.05*<span class="hljs-params">y</span>;<span class="hljs-params">return</span> <span class="hljs-params">m</span>&gt;=<span class="hljs-params">l</span>-<span class="hljs-params">b</span>&amp;&amp;<span class="hljs-params">m</span>&lt;=<span class="hljs-params">l</span>+<span class="hljs-params">b</span>?1:<span class="hljs-params">m</span>&gt;=<span class="hljs-params">d</span>-<span class="hljs-params">b</span>&amp;&amp;<span class="hljs-params">m</span>&lt;=<span class="hljs-params">d</span>+<span class="hljs-params">b</span>?2:0}<span class="hljs-params">function</span> <span class="hljs-params">is</span>(<span class="hljs-params">g,m</span>){<span class="hljs-params">const</span>{<span class="hljs-params">left</span>:<span class="hljs-params">l</span>,<span class="hljs-params">right</span>:<span class="hljs-params">d</span>,<span class="hljs-params">width</span>:<span class="hljs-params">y</span>}=<span class="hljs-params">g</span>,<span class="hljs-params">b</span>=.05*<span class="hljs-params">y</span>;<span class="hljs-params">return</span> <span class="hljs-params">m</span>&gt;=<span class="hljs-params">l</span>-<span class="hljs-params">b</span>&amp;&amp;<span class="hljs-params">m</span>&lt;=<span class="hljs-params">l</span>+<span class="hljs-params">b</span>?1:<span class="hljs-params">m</span>&gt;=<span class="hljs-params">d</span>-<span class="hljs-params">b</span>&amp;&amp;<span class="hljs-params">m</span>&lt;=<span class="hljs-params">d</span>+<span class="hljs-params">b</span>?2:0}<span class="hljs-params">const</span> <span class="hljs-params">Vt</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Ne.i$</span>)(<span class="hljs-params">{passive:!<span class="hljs-number">1</span>,capture:!<span class="hljs-number">0</span>}</span>);<span class="hljs-params">let</span> <span class="hljs-params">ni</span>=(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l,d){<span class="hljs-keyword">this</span>._ngZone=l,<span class="hljs-keyword">this</span>._dropInstances=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,<span class="hljs-keyword">this</span>._dragInstances=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,<span class="hljs-keyword">this</span>._activeDragInstances=[],<span class="hljs-keyword">this</span>._globalListeners=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>,<span class="hljs-keyword">this</span>._draggingPredicate=<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>y.isDragging(),<span class="hljs-keyword">this</span>.pointerMove=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.pointerUp=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>.scroll=<span class="hljs-keyword">new</span> ie.xQ,<span class="hljs-keyword">this</span>._preventDefaultWhileDragging=<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>{<span class="hljs-keyword">this</span>._activeDragInstances.length&gt;<span class="hljs-number">0</span>&amp;&amp;y.preventDefault()},<span class="hljs-keyword">this</span>._persistentTouchmoveListener=<span class="hljs-function"><span class="hljs-params">y</span>=&gt;</span>{<span class="hljs-keyword">this</span>._activeDragInstances.length&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._activeDragInstances.some(<span class="hljs-keyword">this</span>._draggingPredicate</span>)&amp;&amp;<span class="hljs-params">y</span>.<span class="hljs-params">preventDefault</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">pointerMove</span>.<span class="hljs-params">next</span>(<span class="hljs-params">y</span>))},<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>=<span class="hljs-params">d</span>}<span class="hljs-params">registerDropContainer</span>(<span class="hljs-params">l</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_dropInstances</span>.<span class="hljs-params">has</span>(<span class="hljs-params">l</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">_dropInstances</span>.<span class="hljs-params">add</span>(<span class="hljs-params">l</span>)}<span class="hljs-params">registerDragItem</span>(<span class="hljs-params">l</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_dragInstances</span>.<span class="hljs-params">add</span>(<span class="hljs-params">l</span>),1===<span class="hljs-params">this</span>.<span class="hljs-params">_dragInstances</span>.<span class="hljs-params">size</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">runOutsideAngular</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._document.addEventListener(<span class="hljs-string">"touchmove"</span>,<span class="hljs-keyword">this</span>._persistentTouchmoveListener,Vt)})}removeDropContainer(l){<span class="hljs-keyword">this</span>._dropInstances.delete(l)}removeDragItem(l){<span class="hljs-keyword">this</span>._dragInstances.delete(l),<span class="hljs-keyword">this</span>.stopDragging(l),<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>._dragInstances.size&amp;&amp;<span class="hljs-keyword">this</span>._document.removeEventListener(<span class="hljs-string">"touchmove"</span>,<span class="hljs-keyword">this</span>._persistentTouchmoveListener,Vt)}startDragging(l,d){<span class="hljs-keyword">if</span>(!<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._activeDragInstances.indexOf(l</span>)&gt;-1)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._activeDragInstances.push(l</span>),1===<span class="hljs-params">this</span>.<span class="hljs-params">_activeDragInstances</span>.<span class="hljs-params">length</span>)){<span class="hljs-params">const</span> <span class="hljs-params">y</span>=<span class="hljs-params">d</span>.<span class="hljs-params">type</span>.<span class="hljs-params">startsWith</span>(<span class="hljs-params"><span class="hljs-string">"touch"</span></span>);<span class="hljs-params">this</span>.<span class="hljs-params">_globalListeners</span>.<span class="hljs-params">set</span>(<span class="hljs-params">y?<span class="hljs-string">"touchend"</span>:<span class="hljs-string">"mouseup"</span>,{handler:b=&gt;<span class="hljs-keyword">this</span>.pointerUp.next(b</span>),<span class="hljs-params">options</span>:!0}).<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"scroll"</span>,{handler:b=&gt;<span class="hljs-keyword">this</span>.scroll.next(b</span>),<span class="hljs-params">options</span>:!0}).<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"selectstart"</span>,{handler:<span class="hljs-keyword">this</span>._preventDefaultWhileDragging,options:Vt}</span>),<span class="hljs-params">y</span>||<span class="hljs-params">this</span>.<span class="hljs-params">_globalListeners</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"mousemove"</span>,{handler:b=&gt;<span class="hljs-keyword">this</span>.pointerMove.next(b</span>),<span class="hljs-params">options</span>:<span class="hljs-params">Vt</span>}),<span class="hljs-params">this</span>.<span class="hljs-params">_ngZone</span>.<span class="hljs-params">runOutsideAngular</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._globalListeners.forEach(<span class="hljs-function">(<span class="hljs-params">b,E</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._document.addEventListener(E,b.handler,b.options)})})}}stopDragging(l){<span class="hljs-keyword">const</span> d=<span class="hljs-keyword">this</span>._activeDragInstances.indexOf(l);d&gt;<span class="hljs-number">-1</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._activeDragInstances.splice(d,<span class="hljs-number">1</span></span>),0===<span class="hljs-params">this</span>.<span class="hljs-params">_activeDragInstances</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_clearGlobalListeners</span><span class="hljs-params">()</span>)}<span class="hljs-params">isDragging</span>(<span class="hljs-params">l</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_activeDragInstances</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">l</span>)&gt;-1}<span class="hljs-params">scrolled</span>(<span class="hljs-params">l</span>){<span class="hljs-params">const</span> <span class="hljs-params">d</span>=[<span class="hljs-params">this</span>.<span class="hljs-params">scroll</span>];<span class="hljs-params">return</span> <span class="hljs-params">l</span>&amp;&amp;<span class="hljs-params">l</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>&amp;&amp;<span class="hljs-params">d</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> an.y(y=&gt;<span class="hljs-keyword">this</span>._ngZone.runOutsideAngular((</span>)=&gt;</span>{<span class="hljs-keyword">const</span> E=<span class="hljs-function"><span class="hljs-params">x</span>=&gt;</span>{<span class="hljs-keyword">this</span>._activeDragInstances.length&amp;&amp;y.next(x)};<span class="hljs-keyword">return</span> l.addEventListener(<span class="hljs-string">"scroll"</span>,E,!<span class="hljs-number">0</span>),()=&gt;{l.removeEventListener(<span class="hljs-string">"scroll"</span>,E,!<span class="hljs-number">0</span>)}}))),(<span class="hljs-number">0</span>,xe.T)(...d)}ngOnDestroy(){<span class="hljs-keyword">this</span>._dragInstances.forEach(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span><span class="hljs-keyword">this</span>.removeDragItem(l)),<span class="hljs-keyword">this</span>._dropInstances.forEach(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span><span class="hljs-keyword">this</span>.removeDropContainer(l)),<span class="hljs-keyword">this</span>._clearGlobalListeners(),<span class="hljs-keyword">this</span>.pointerMove.complete(),<span class="hljs-keyword">this</span>.pointerUp.complete()}_clearGlobalListeners(){<span class="hljs-keyword">this</span>._globalListeners.forEach(<span class="hljs-function">(<span class="hljs-params">l,d</span>)=&gt;</span>{<span class="hljs-keyword">this</span>._document.removeEventListener(d,l.handler,l.options)}),<span class="hljs-keyword">this</span>._globalListeners.clear()}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)(_.LFG(_.R0b),_.LFG(K.K0))},g.\u0275prov=_.Yz7({<span class="hljs-attr">factory</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> g(_.LFG(_.R0b),_.LFG(K.K0))},<span class="hljs-attr">token</span>:g,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),g})();<span class="hljs-keyword">const</span> ss={<span class="hljs-attr">dragStartThreshold</span>:<span class="hljs-number">5</span>,<span class="hljs-attr">pointerDirectionChangeThreshold</span>:<span class="hljs-number">5</span>};<span class="hljs-keyword">let</span> ce=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{<span class="hljs-keyword">constructor</span>(l,d,y,b){<span class="hljs-keyword">this</span>._document=l,<span class="hljs-keyword">this</span>._ngZone=d,<span class="hljs-keyword">this</span>._viewportRuler=y,<span class="hljs-keyword">this</span>._dragDropRegistry=b}createDrag(l,d=ss){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> De(l,d,<span class="hljs-keyword">this</span>._document,<span class="hljs-keyword">this</span>._ngZone,<span class="hljs-keyword">this</span>._viewportRuler,<span class="hljs-keyword">this</span>._dragDropRegistry)}createDropList(l){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> wr(l,<span class="hljs-keyword">this</span>._dragDropRegistry,<span class="hljs-keyword">this</span>._document,<span class="hljs-keyword">this</span>._ngZone,<span class="hljs-keyword">this</span>._viewportRuler)}}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)(_.LFG(K.K0),_.LFG(_.R0b),_.LFG(Ve.rL),_.LFG(ni))},g.\u0275prov=_.Yz7({<span class="hljs-attr">factory</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> g(_.LFG(K.K0),_.LFG(_.R0b),_.LFG(Ve.rL),_.LFG(ni))},<span class="hljs-attr">token</span>:g,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),g})(),Zo=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275mod=_.oAB({<span class="hljs-attr">type</span>:g}),g.\u0275inj=_.cJS({<span class="hljs-attr">providers</span>:[ce],<span class="hljs-attr">imports</span>:[Ve.ZD]}),g})();<span class="hljs-keyword">var</span> gn=L(<span class="hljs-number">4466</span>);L(<span class="hljs-number">6461</span>),L(<span class="hljs-number">9112</span>),L(<span class="hljs-number">8071</span>),L(<span class="hljs-number">3653</span>),L(<span class="hljs-number">4395</span>);<span class="hljs-keyword">const</span> vn={<span class="hljs-attr">provide</span>:<span class="hljs-keyword">new</span> _.OlP(<span class="hljs-string">"mat-tooltip-scroll-strategy"</span>),<span class="hljs-attr">deps</span>:[rt.aV],<span class="hljs-attr">useFactory</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">g</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>g.scrollStrategies.reposition({<span class="hljs-attr">scrollThrottle</span>:<span class="hljs-number">20</span>})}};<span class="hljs-keyword">let</span> Wo=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275mod=_.oAB({<span class="hljs-attr">type</span>:g}),g.\u0275inj=_.cJS({<span class="hljs-attr">providers</span>:[vn],<span class="hljs-attr">imports</span>:[[lt.rt,K.ez,rt.U8,et.BQ],et.BQ,Ve.ZD]}),g})(),ms=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">g</span></span>{}<span class="hljs-keyword">return</span> g.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(l||g)},g.\u0275mod=_.oAB({<span class="hljs-attr">type</span>:g}),g.\u0275inj=_.cJS({<span class="hljs-attr">imports</span>:[[rt.U8,cr.Ps,Ot.u5,K.ez,Te,Zo,gn.m,Bo,Wo]]}),g})()},<span class="hljs-number">281</span>:<span class="hljs-function">(<span class="hljs-params">Jd,sr,L</span>)=&gt;</span>{L.d(sr,{<span class="hljs-attr">M</span>:<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>py});<span class="hljs-keyword">var</span> K=L(<span class="hljs-number">7716</span>),Bn=L(<span class="hljs-number">3637</span>),_=L(<span class="hljs-number">7574</span>),ne=L(<span class="hljs-number">4402</span>),rn=L(<span class="hljs-number">5917</span>),Qe=L(<span class="hljs-number">9126</span>),qi=L(<span class="hljs-number">9761</span>),ie=L(<span class="hljs-number">9328</span>),Xe=L(<span class="hljs-number">8002</span>),rt=L(<span class="hljs-number">2145</span>),rr=L(<span class="hljs-number">7519</span>),or=L(<span class="hljs-number">5435</span>),Fo=L(<span class="hljs-number">6136</span>),zi=L(<span class="hljs-number">8939</span>),et=L(<span class="hljs-number">8583</span>),lt=<span class="hljs-function">(<span class="hljs-params">L(<span class="hljs-number">9083</span></span>),<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">4486</span></span>)),<span class="hljs-params">D</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">8239</span></span>),<span class="hljs-params">qn</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">5452</span></span>),<span class="hljs-params">Gi</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">6034</span></span>),<span class="hljs-params">Et</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">300</span></span>),<span class="hljs-params">Y</span>=<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">4685</span></span>),<span class="hljs-params">ji</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>(<span class="hljs-params">ji=<span class="hljs-built_in">Object</span>.setPrototypeOf||{__proto__:[]}<span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>&amp;&amp;<span class="hljs-keyword">function</span>(s,o</span>){<span class="hljs-params">s</span>.<span class="hljs-params">__proto__</span>=<span class="hljs-params">o</span>}||<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a <span class="hljs-keyword">in</span> o</span>)<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,a</span>)&amp;&amp;(<span class="hljs-params">s[a]=o[a]</span>)})(<span class="hljs-params">r,i</span>)};<span class="hljs-params">function</span> <span class="hljs-params">Vo</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>="<span class="hljs-params">function</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">Symbol</span>&amp;&amp;<span class="hljs-params">Symbol</span>.<span class="hljs-params">iterator</span>,<span class="hljs-params">s</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">i</span>],<span class="hljs-params">o</span>=0;<span class="hljs-params">if</span>(<span class="hljs-params">s</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">r&amp;&amp;<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> r.length</span>)<span class="hljs-params">return</span>{<span class="hljs-params">next</span>:<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">o</span>&gt;=<span class="hljs-params">r</span>.<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params">r=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),{<span class="hljs-params">value</span>:<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">o</span>++],<span class="hljs-params">done</span>:!<span class="hljs-params">r</span>}}};<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">TypeError</span>(<span class="hljs-params">i?<span class="hljs-string">"Object is not iterable."</span>:<span class="hljs-string">"Symbol.iterator is not defined."</span></span>)}<span class="hljs-params">var</span> <span class="hljs-params">O</span>,<span class="hljs-params">Bo</span>="<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">globalThis</span>?<span class="hljs-params">globalThis</span>:"<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">window</span>?<span class="hljs-params">window</span>:"<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">global</span>?<span class="hljs-params">global</span>:"<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">self</span>?<span class="hljs-params">self</span>:{},<span class="hljs-params">Hi</span>=<span class="hljs-params">Hi</span>||{},<span class="hljs-params">G</span>=<span class="hljs-params">Bo</span>||<span class="hljs-params">self</span>;<span class="hljs-params">function</span> <span class="hljs-params">zn</span><span class="hljs-params">()</span>{}<span class="hljs-params">function</span> <span class="hljs-params">Ki</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>;<span class="hljs-params">return</span>"<span class="hljs-params">array</span>"==(<span class="hljs-params">i=<span class="hljs-string">"object"</span>!=i?i:r?<span class="hljs-built_in">Array</span>.isArray(r</span>)?"<span class="hljs-params">array</span>":<span class="hljs-params">i</span>:"<span class="hljs-params">null</span>")||"<span class="hljs-params">object</span>"==<span class="hljs-params">i</span>&amp;&amp;"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>.<span class="hljs-params">length</span>}<span class="hljs-params">function</span> <span class="hljs-params">on</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>;<span class="hljs-params">return</span>"<span class="hljs-params">object</span>"==<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">null</span>!=<span class="hljs-params">r</span>||"<span class="hljs-params">function</span>"==<span class="hljs-params">i</span>}<span class="hljs-params">var</span> <span class="hljs-params">Ot</span>="<span class="hljs-params">closure_uid_</span>"+(<span class="hljs-params"><span class="hljs-number">1e9</span>*<span class="hljs-built_in">Math</span>.random(</span>)&gt;&gt;&gt;0),<span class="hljs-params">qo</span>=0;<span class="hljs-params">function</span> <span class="hljs-params">zo</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">call</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">r.bind,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Go</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!r</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">2</span>&lt;<span class="hljs-built_in">arguments</span>.length</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">slice</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">slice</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-built_in">arguments</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">unshift</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">a,o</span>),<span class="hljs-params">r</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">i,a</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">i,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">function</span> <span class="hljs-params">be</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span>(<span class="hljs-params">be=<span class="hljs-built_in">Function</span>.prototype.bind&amp;&amp;<span class="hljs-number">-1</span>!=<span class="hljs-built_in">Function</span>.prototype.bind.toString(</span>).<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"native code"</span></span>)?<span class="hljs-params">zo</span>:<span class="hljs-params">Go</span>).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Gn</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">slice</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">push</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">o,<span class="hljs-built_in">arguments</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,o</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Te</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">function</span> <span class="hljs-params">s</span><span class="hljs-params">()</span>{}<span class="hljs-params">s</span>.<span class="hljs-params">prototype</span>=<span class="hljs-params">i</span>.<span class="hljs-params">prototype</span>,<span class="hljs-params">r</span>.<span class="hljs-params">Z</span>=<span class="hljs-params">i</span>.<span class="hljs-params">prototype</span>,<span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>=<span class="hljs-params">new</span> <span class="hljs-params">s</span>,<span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">constructor</span>=<span class="hljs-params">r</span>,<span class="hljs-params">r</span>.<span class="hljs-params">Vb</span>=<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> u=<span class="hljs-built_in">Array</span>(<span class="hljs-built_in">arguments</span>.length<span class="hljs-number">-2</span></span>),<span class="hljs-params">h</span>=2;<span class="hljs-params">h</span>&lt;<span class="hljs-params">arguments</span>.<span class="hljs-params">length</span>;<span class="hljs-params">h</span>++)<span class="hljs-params">u</span>[<span class="hljs-params">h</span>-2]=<span class="hljs-params">arguments</span>[<span class="hljs-params">h</span>];<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">prototype</span>[<span class="hljs-params">a</span>].<span class="hljs-params">apply</span>(<span class="hljs-params">o,u</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Ve</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">o</span>}<span class="hljs-params">var</span> <span class="hljs-params">ee</span>={};<span class="hljs-params">Ve</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">s</span>=!1,<span class="hljs-params">Ve</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">na</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.s&amp;&amp;(<span class="hljs-keyword">this</span>.s=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.M(</span>),0)){<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,Ot</span>)&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">Ot</span>]||(<span class="hljs-params">r[Ot]=++qo</span>)}(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">delete</span> <span class="hljs-params">ee</span>[<span class="hljs-params">r</span>]}},<span class="hljs-params">Ve</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.o</span>)<span class="hljs-params">for</span>(<span class="hljs-params">;<span class="hljs-keyword">this</span>.o.length;</span>)<span class="hljs-params">this</span>.<span class="hljs-params">o</span>.<span class="hljs-params">shift</span><span class="hljs-params">()</span><span class="hljs-params">()</span>};<span class="hljs-params">var</span> <span class="hljs-params">Ft</span>=<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">indexOf</span>?<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">indexOf</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,i,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>)}:<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">return</span>"<span class="hljs-params">string</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">i</span>||1!=<span class="hljs-params">i</span>.<span class="hljs-params">length</span>?-1:<span class="hljs-params">r</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">i,<span class="hljs-number">0</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=<span class="hljs-number">0</span>;s&lt;r.length;s++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">in</span> r&amp;&amp;r[s]===i</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>;<span class="hljs-params">return</span>-1},<span class="hljs-params">an</span>=<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">forEach</span>?<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">forEach</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,i,s</span>)}:<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> o=r.length,a=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r?r.split(<span class="hljs-string">""</span></span>):<span class="hljs-params">r</span>,<span class="hljs-params">c</span>=0;<span class="hljs-params">c</span>&lt;<span class="hljs-params">o</span>;<span class="hljs-params">c</span>++)<span class="hljs-params">c</span> <span class="hljs-params">in</span> <span class="hljs-params">a</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">call</span>(<span class="hljs-params">s,a[c],c,r</span>)};<span class="hljs-params">function</span> <span class="hljs-params">lr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">concat</span>.<span class="hljs-params">apply</span>(<span class="hljs-params">[],<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">$i</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">length</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>&lt;i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=<span class="hljs-built_in">Array</span>(i</span>),<span class="hljs-params">o</span>=0;<span class="hljs-params">o</span>&lt;<span class="hljs-params">i</span>;<span class="hljs-params">o</span>++)<span class="hljs-params">s</span>[<span class="hljs-params">o</span>]=<span class="hljs-params">r</span>[<span class="hljs-params">o</span>];<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">return</span>[]}<span class="hljs-params">function</span> <span class="hljs-params">jn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>/^[\<span class="hljs-params">s</span>\<span class="hljs-params">xa0</span>]*<span class="hljs-params">$</span>/.<span class="hljs-params">test</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">var</span> <span class="hljs-params">pe</span>,<span class="hljs-params">hr</span>=<span class="hljs-params">String</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">trim</span>?<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">trim</span><span class="hljs-params">()</span>}:<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>/^[\<span class="hljs-params">s</span>\<span class="hljs-params">xa0</span>]*(<span class="hljs-params">[\s\S]*?</span>)[\<span class="hljs-params">s</span>\<span class="hljs-params">xa0</span>]*<span class="hljs-params">$</span>/.<span class="hljs-params">exec</span>(<span class="hljs-params">r</span>)[1]};<span class="hljs-params">function</span> <span class="hljs-params">xe</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>-1!=<span class="hljs-params">r</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Be</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>&lt;<span class="hljs-params">i</span>?-1:<span class="hljs-params">r</span>&gt;<span class="hljs-params">i</span>?1:0}<span class="hljs-params">e</span>:{<span class="hljs-params">var</span> <span class="hljs-params">cn</span>=<span class="hljs-params">G</span>.<span class="hljs-params">navigator</span>;<span class="hljs-params">if</span>(<span class="hljs-params">cn</span>){<span class="hljs-params">var</span> <span class="hljs-params">dr</span>=<span class="hljs-params">cn</span>.<span class="hljs-params">userAgent</span>;<span class="hljs-params">if</span>(<span class="hljs-params">dr</span>){<span class="hljs-params">pe</span>=<span class="hljs-params">dr</span>;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}}<span class="hljs-params">pe</span>=""}<span class="hljs-params">function</span> <span class="hljs-params">Zi</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">i</span>.<span class="hljs-params">call</span>(<span class="hljs-params">s,r[o],o,r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">un</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>={};<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">i</span>[<span class="hljs-params">s</span>]=<span class="hljs-params">r</span>[<span class="hljs-params">s</span>];<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">var</span> <span class="hljs-params">Hn</span>="<span class="hljs-params">constructor</span> <span class="hljs-params">hasOwnProperty</span> <span class="hljs-params">isPrototypeOf</span> <span class="hljs-params">propertyIsEnumerable</span> <span class="hljs-params">toLocaleString</span> <span class="hljs-params">toString</span> <span class="hljs-params">valueOf</span>".<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">" "</span></span>);<span class="hljs-params">function</span> <span class="hljs-params">It</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s,o,a=<span class="hljs-number">1</span>;a&lt;<span class="hljs-built_in">arguments</span>.length;a++</span>){<span class="hljs-params">for</span>(<span class="hljs-params">s <span class="hljs-keyword">in</span> o=<span class="hljs-built_in">arguments</span>[a]</span>)<span class="hljs-params">r</span>[<span class="hljs-params">s</span>]=<span class="hljs-params">o</span>[<span class="hljs-params">s</span>];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;Hn.length;c++</span>)<span class="hljs-params">s</span>=<span class="hljs-params">Hn</span>[<span class="hljs-params">c</span>],<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,s</span>)&amp;&amp;(<span class="hljs-params">r[s]=o[s]</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Kn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Kn</span>[" "](<span class="hljs-params">r</span>),<span class="hljs-params">r</span>}<span class="hljs-params">Kn</span>[" "]=<span class="hljs-params">zn</span>;<span class="hljs-params">var</span> <span class="hljs-params">dn</span>,<span class="hljs-params">r</span>,<span class="hljs-params">fr</span>=<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Opera"</span></span>),<span class="hljs-params">Ut</span>=<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Trident"</span></span>)||<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"MSIE"</span></span>),<span class="hljs-params">Zn</span>=<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Edge"</span></span>),<span class="hljs-params">ln</span>=<span class="hljs-params">Zn</span>||<span class="hljs-params">Ut</span>,<span class="hljs-params">Qn</span>=<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Gecko"</span></span>)&amp;&amp;!(<span class="hljs-params">xe(pe.toLowerCase(</span>),"<span class="hljs-params">webkit</span>")&amp;&amp;!<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Edge"</span></span>))&amp;&amp;!(<span class="hljs-params">xe(pe,<span class="hljs-string">"Trident"</span></span>)||<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"MSIE"</span></span>))&amp;&amp;!<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Edge"</span></span>),<span class="hljs-params">hn</span>=<span class="hljs-params">xe</span>(<span class="hljs-params">pe.toLowerCase(</span>),"<span class="hljs-params">webkit</span>")&amp;&amp;!<span class="hljs-params">xe</span>(<span class="hljs-params">pe,<span class="hljs-string">"Edge"</span></span>);<span class="hljs-params">function</span> <span class="hljs-params">Qi</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">G</span>.<span class="hljs-params">document</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>?<span class="hljs-params">r</span>.<span class="hljs-params">documentMode</span>:<span class="hljs-params">void</span> 0}<span class="hljs-params">e</span>:{<span class="hljs-params">var</span> <span class="hljs-params">Yn</span>="",<span class="hljs-params">Wn</span>=(<span class="hljs-params">r=pe,Qn?<span class="hljs-regexp">/rv:([^\);]+)(\)|;)/</span>.exec(r</span>):<span class="hljs-params">Zn</span>?/<span class="hljs-params">Edge</span>\/(<span class="hljs-params">[\d\.]+</span>)/.<span class="hljs-params">exec</span>(<span class="hljs-params">r</span>):<span class="hljs-params">Ut</span>?/\<span class="hljs-params">b</span>(<span class="hljs-params">?:MSIE|rv</span>)[: ](<span class="hljs-params">[^\</span>);]+)(<span class="hljs-params">\</span>)|;)/.<span class="hljs-params">exec</span>(<span class="hljs-params">r</span>):<span class="hljs-params">hn</span>?/<span class="hljs-params">WebKit</span>\/(<span class="hljs-params">\S+</span>)/.<span class="hljs-params">exec</span>(<span class="hljs-params">r</span>):<span class="hljs-params">fr</span>?/(<span class="hljs-params">?:Version</span>)[ \/]?(<span class="hljs-params">\S+</span>)/.<span class="hljs-params">exec</span>(<span class="hljs-params">r</span>):<span class="hljs-params">void</span> 0);<span class="hljs-params">if</span>(<span class="hljs-params">Wn&amp;&amp;(Yn=Wn?Wn[<span class="hljs-number">1</span>]:<span class="hljs-string">""</span></span>),<span class="hljs-params">Ut</span>){<span class="hljs-params">var</span> <span class="hljs-params">Yi</span>=<span class="hljs-params">Qi</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=Yi&amp;&amp;Yi&gt;<span class="hljs-built_in">parseFloat</span>(Yn</span>)){<span class="hljs-params">dn</span>=<span class="hljs-params">String</span>(<span class="hljs-params">Yi</span>);<span class="hljs-params">break</span> <span class="hljs-params">e</span>}}<span class="hljs-params">dn</span>=<span class="hljs-params">Yn</span>}<span class="hljs-params">var</span> <span class="hljs-params">pr</span>={};<span class="hljs-params">function</span> <span class="hljs-params">mr</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">i</span>=<span class="hljs-params">pr</span>,<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">i,<span class="hljs-number">9</span></span>)?<span class="hljs-params">i</span>[9]:<span class="hljs-params">i</span>[9]=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>,i=hr(<span class="hljs-built_in">String</span>(dn</span>)).<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>),<span class="hljs-params">s</span>=<span class="hljs-params">hr</span>(<span class="hljs-params"><span class="hljs-string">"9"</span></span>).<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>),<span class="hljs-params">o</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">max</span>(<span class="hljs-params">i.length,s.length</span>),<span class="hljs-params">a</span>=0;0==<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">a</span>&lt;<span class="hljs-params">o</span>;<span class="hljs-params">a</span>++){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>[<span class="hljs-params">a</span>]||"",<span class="hljs-params">u</span>=<span class="hljs-params">s</span>[<span class="hljs-params">a</span>]||"";<span class="hljs-params">do</span>{<span class="hljs-params">if</span>(<span class="hljs-params">c=<span class="hljs-regexp">/(\d*)(\D*)(.*)/</span>.exec(c</span>)||["","","",""],<span class="hljs-params">u</span>=/(<span class="hljs-params">\d*</span>)(<span class="hljs-params">\D*</span>)(<span class="hljs-params">.*</span>)/.<span class="hljs-params">exec</span>(<span class="hljs-params">u</span>)||["","","",""],0==<span class="hljs-params">c</span>[0].<span class="hljs-params">length</span>&amp;&amp;0==<span class="hljs-params">u</span>[0].<span class="hljs-params">length</span>)<span class="hljs-params">break</span>;<span class="hljs-params">r</span>=<span class="hljs-params">Be</span>(<span class="hljs-params"><span class="hljs-number">0</span>==c[<span class="hljs-number">1</span>].length?<span class="hljs-number">0</span>:<span class="hljs-built_in">parseInt</span>(c[<span class="hljs-number">1</span>],<span class="hljs-number">10</span></span>),0==<span class="hljs-params">u</span>[1].<span class="hljs-params">length</span>?0:<span class="hljs-params">parseInt</span>(<span class="hljs-params">u[<span class="hljs-number">1</span>],<span class="hljs-number">10</span></span>))||<span class="hljs-params">Be</span>(<span class="hljs-params"><span class="hljs-number">0</span>==c[<span class="hljs-number">2</span>].length,<span class="hljs-number">0</span>==u[<span class="hljs-number">2</span>].length</span>)||<span class="hljs-params">Be</span>(<span class="hljs-params">c[<span class="hljs-number">2</span>],u[<span class="hljs-number">2</span>]</span>),<span class="hljs-params">c</span>=<span class="hljs-params">c</span>[3],<span class="hljs-params">u</span>=<span class="hljs-params">u</span>[3]}<span class="hljs-params">while</span>(<span class="hljs-params"><span class="hljs-number">0</span>==r</span>)}<span class="hljs-params">return</span> 0&lt;=<span class="hljs-params">r</span>}<span class="hljs-params">()</span>;<span class="hljs-params">var</span> <span class="hljs-params">i</span>}<span class="hljs-params">var</span> <span class="hljs-params">jo</span>=<span class="hljs-params">G</span>.<span class="hljs-params">document</span>&amp;&amp;<span class="hljs-params">Ut</span>&amp;&amp;(<span class="hljs-params">Qi(</span>)||<span class="hljs-params">parseInt</span>(<span class="hljs-params">dn,<span class="hljs-number">10</span></span>))||<span class="hljs-params">void</span> 0,<span class="hljs-params">Ji</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!G.addEventListener||!<span class="hljs-built_in">Object</span>.defineProperty</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">var</span> <span class="hljs-params">r</span>=!1,<span class="hljs-params">i</span>=<span class="hljs-params">Object</span>.<span class="hljs-params">defineProperty</span>(<span class="hljs-params">{},<span class="hljs-string">"passive"</span>,{get:<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">r</span>=!0}});<span class="hljs-params">try</span>{<span class="hljs-params">G</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"test"</span>,zn,i</span>),<span class="hljs-params">G</span>.<span class="hljs-params">removeEventListener</span>(<span class="hljs-params"><span class="hljs-string">"test"</span>,zn,i</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){}<span class="hljs-params">return</span> <span class="hljs-params">r</span>}<span class="hljs-params">()</span>;<span class="hljs-params">function</span> <span class="hljs-params">De</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">target</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">defaultPrevented</span>=!1}<span class="hljs-params">function</span> <span class="hljs-params">mt</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">De.call(<span class="hljs-keyword">this</span>,r?r.type:<span class="hljs-string">""</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">relatedTarget</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">target</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">button</span>=<span class="hljs-params">this</span>.<span class="hljs-params">screenY</span>=<span class="hljs-params">this</span>.<span class="hljs-params">screenX</span>=<span class="hljs-params">this</span>.<span class="hljs-params">clientY</span>=<span class="hljs-params">this</span>.<span class="hljs-params">clientX</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">metaKey</span>=<span class="hljs-params">this</span>.<span class="hljs-params">shiftKey</span>=<span class="hljs-params">this</span>.<span class="hljs-params">altKey</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ctrlKey</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">pointerId</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">pointerType</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">r</span>.<span class="hljs-params">type</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">changedTouches</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">changedTouches</span>.<span class="hljs-params">length</span>?<span class="hljs-params">r</span>.<span class="hljs-params">changedTouches</span>[0]:<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.target=r.target||r.srcElement,<span class="hljs-keyword">this</span>.g=i,i=r.relatedTarget</span>){<span class="hljs-params">if</span>(<span class="hljs-params">Qn</span>){<span class="hljs-params">e</span>:{<span class="hljs-params">try</span>{<span class="hljs-params">Kn</span>(<span class="hljs-params">i.nodeName</span>);<span class="hljs-params">var</span> <span class="hljs-params">a</span>=!0;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">c</span>){}<span class="hljs-params">a</span>=!1}<span class="hljs-params">a</span>||(<span class="hljs-params">i=<span class="hljs-literal">null</span></span>)}}<span class="hljs-params">else</span>"<span class="hljs-params">mouseover</span>"==<span class="hljs-params">s</span>?<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">fromElement</span>:"<span class="hljs-params">mouseout</span>"==<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">i=r.toElement</span>);<span class="hljs-params">this</span>.<span class="hljs-params">relatedTarget</span>=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>.clientX=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==o.clientX?o.clientX:o.pageX,<span class="hljs-keyword">this</span>.clientY=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==o.clientY?o.clientY:o.pageY,<span class="hljs-keyword">this</span>.screenX=o.screenX||<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.screenY=o.screenY||<span class="hljs-number">0</span></span>):(<span class="hljs-params"><span class="hljs-keyword">this</span>.clientX=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==r.clientX?r.clientX:r.pageX,<span class="hljs-keyword">this</span>.clientY=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==r.clientY?r.clientY:r.pageY,<span class="hljs-keyword">this</span>.screenX=r.screenX||<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.screenY=r.screenY||<span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">button</span>=<span class="hljs-params">r</span>.<span class="hljs-params">button</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">r</span>.<span class="hljs-params">key</span>||"",<span class="hljs-params">this</span>.<span class="hljs-params">ctrlKey</span>=<span class="hljs-params">r</span>.<span class="hljs-params">ctrlKey</span>,<span class="hljs-params">this</span>.<span class="hljs-params">altKey</span>=<span class="hljs-params">r</span>.<span class="hljs-params">altKey</span>,<span class="hljs-params">this</span>.<span class="hljs-params">shiftKey</span>=<span class="hljs-params">r</span>.<span class="hljs-params">shiftKey</span>,<span class="hljs-params">this</span>.<span class="hljs-params">metaKey</span>=<span class="hljs-params">r</span>.<span class="hljs-params">metaKey</span>,<span class="hljs-params">this</span>.<span class="hljs-params">pointerId</span>=<span class="hljs-params">r</span>.<span class="hljs-params">pointerId</span>||0,<span class="hljs-params">this</span>.<span class="hljs-params">pointerType</span>="<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>.<span class="hljs-params">pointerType</span>?<span class="hljs-params">r</span>.<span class="hljs-params">pointerType</span>:<span class="hljs-params">gr</span>[<span class="hljs-params">r</span>.<span class="hljs-params">pointerType</span>]||"",<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=<span class="hljs-params">r</span>.<span class="hljs-params">state</span>,<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">r</span>,<span class="hljs-params">r</span>.<span class="hljs-params">defaultPrevented</span>&amp;&amp;<span class="hljs-params">mt</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">h</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}}<span class="hljs-params">De</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">h</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">defaultPrevented</span>=!0},<span class="hljs-params">Te</span>(<span class="hljs-params">mt,De</span>);<span class="hljs-params">var</span> <span class="hljs-params">gr</span>={2:"<span class="hljs-params">touch</span>",3:"<span class="hljs-params">pen</span>",4:"<span class="hljs-params">mouse</span>"};<span class="hljs-params">mt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">h</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">mt</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">h</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">this</span>.<span class="hljs-params">i</span>;<span class="hljs-params">r</span>.<span class="hljs-params">preventDefault</span>?<span class="hljs-params">r</span>.<span class="hljs-params">preventDefault</span><span class="hljs-params">()</span>:<span class="hljs-params">r</span>.<span class="hljs-params">returnValue</span>=!1};<span class="hljs-params">var</span> <span class="hljs-params">gt</span>="<span class="hljs-params">closure_listenable_</span>"+(<span class="hljs-params"><span class="hljs-number">1e6</span>*<span class="hljs-built_in">Math</span>.random(</span>)|0),<span class="hljs-params">fn</span>=0;<span class="hljs-params">function</span> <span class="hljs-params">yr</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">listener</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">proxy</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">src</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">capture</span>=!!<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">ia</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=++<span class="hljs-params">fn</span>,<span class="hljs-params">this</span>.<span class="hljs-params">ca</span>=<span class="hljs-params">this</span>.<span class="hljs-params">fa</span>=!1}<span class="hljs-params">function</span> <span class="hljs-params">pn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">ca</span>=!0,<span class="hljs-params">r</span>.<span class="hljs-params">listener</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">proxy</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">src</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">ia</span>=<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">Xn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">src</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>={},<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=0}<span class="hljs-params">function</span> <span class="hljs-params">_r</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">type</span>;<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">in</span> r.g</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">g</span>[<span class="hljs-params">s</span>],<span class="hljs-params">a</span>=<span class="hljs-params">Ft</span>(<span class="hljs-params">o,i</span>);(<span class="hljs-params">c=<span class="hljs-number">0</span>&lt;=a</span>)&amp;&amp;<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">splice</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,a,<span class="hljs-number">1</span></span>),<span class="hljs-params">c</span>&amp;&amp;(<span class="hljs-params">pn(i</span>),0==<span class="hljs-params">r</span>.<span class="hljs-params">g</span>[<span class="hljs-params">s</span>].<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">delete</span> r.g[s],r.h--</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">vr</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=<span class="hljs-number">0</span>;a&lt;r.length;++a</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>[<span class="hljs-params">a</span>];<span class="hljs-params">if</span>(<span class="hljs-params">!c.ca&amp;&amp;c.listener==i&amp;&amp;c.capture==!!s&amp;&amp;c.ia==o</span>)<span class="hljs-params">return</span> <span class="hljs-params">a</span>}<span class="hljs-params">return</span>-1}<span class="hljs-params">Xn</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">add</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>.<span class="hljs-params">toString</span><span class="hljs-params">()</span>;(<span class="hljs-params">r=<span class="hljs-keyword">this</span>.g[c]</span>)||(<span class="hljs-params">r=<span class="hljs-keyword">this</span>.g[c]=[],<span class="hljs-keyword">this</span>.h++</span>);<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">vr</span>(<span class="hljs-params">r,i,o,a</span>);<span class="hljs-params">return</span>-1&lt;<span class="hljs-params">u</span>?(<span class="hljs-params">i=r[u],s||(i.fa=!<span class="hljs-number">1</span></span>)):(<span class="hljs-params">(i=<span class="hljs-keyword">new</span> yr(i,<span class="hljs-keyword">this</span>.src,c,!!o,a</span>)).<span class="hljs-params">fa</span>=<span class="hljs-params">s</span>,<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>)),<span class="hljs-params">i</span>};<span class="hljs-params">var</span> <span class="hljs-params">St</span>="<span class="hljs-params">closure_lm_</span>"+(<span class="hljs-params"><span class="hljs-number">1e6</span>*<span class="hljs-built_in">Math</span>.random(</span>)|0),<span class="hljs-params">ei</span>={};<span class="hljs-params">function</span> <span class="hljs-params">Xi</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params">o&amp;&amp;o.once</span>)<span class="hljs-params">return</span> <span class="hljs-params">ts</span>(<span class="hljs-params">r,i,s,o,a</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(i</span>)){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;i.length;c++</span>)<span class="hljs-params">Xi</span>(<span class="hljs-params">r,i[c],s,o,a</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">return</span> <span class="hljs-params">s</span>=<span class="hljs-params">ss</span>(<span class="hljs-params">s</span>),<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">gt</span>]?<span class="hljs-params">r</span>.<span class="hljs-params">N</span>(<span class="hljs-params">i,s,on(o</span>)?!!<span class="hljs-params">o</span>.<span class="hljs-params">capture</span>:!!<span class="hljs-params">o</span>,<span class="hljs-params">a</span>):<span class="hljs-params">wr</span>(<span class="hljs-params">r,i,s,!<span class="hljs-number">1</span>,o,a</span>)}<span class="hljs-params">function</span> <span class="hljs-params">wr</span>(<span class="hljs-params">r,i,s,o,a,c</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!i</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Invalid event type"</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">on</span>(<span class="hljs-params">a</span>)?!!<span class="hljs-params">a</span>.<span class="hljs-params">capture</span>:!!<span class="hljs-params">a</span>,<span class="hljs-params">h</span>=<span class="hljs-params">Vt</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">h||(r[St]=h=<span class="hljs-keyword">new</span> Xn(r</span>)),(<span class="hljs-params">s=h.add(i,s,o,u,c</span>)).<span class="hljs-params">proxy</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params">o=<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">Ho</span>;<span class="hljs-params">return</span> <span class="hljs-params">function</span> <span class="hljs-params">r</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r.src,r.listener,s</span>)}}<span class="hljs-params">()</span>,<span class="hljs-params">s</span>.<span class="hljs-params">proxy</span>=<span class="hljs-params">o</span>,<span class="hljs-params">o</span>.<span class="hljs-params">src</span>=<span class="hljs-params">r</span>,<span class="hljs-params">o</span>.<span class="hljs-params">listener</span>=<span class="hljs-params">s</span>,<span class="hljs-params">r</span>.<span class="hljs-params">addEventListener</span>)<span class="hljs-params">Ji</span>||(<span class="hljs-params">a=u</span>),<span class="hljs-params">void</span> 0===<span class="hljs-params">a</span>&amp;&amp;(<span class="hljs-params">a=!<span class="hljs-number">1</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params">i.toString(</span>),<span class="hljs-params">o</span>,<span class="hljs-params">a</span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">r.attachEvent</span>)<span class="hljs-params">r</span>.<span class="hljs-params">attachEvent</span>(<span class="hljs-params">is(i.toString(</span>)),<span class="hljs-params">o</span>);<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!r.addListener||!r.removeListener</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"addEventListener and attachEvent are unavailable."</span></span>);<span class="hljs-params">r</span>.<span class="hljs-params">addListener</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">function</span> <span class="hljs-params">ts</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(i</span>)){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;i.length;c++</span>)<span class="hljs-params">ts</span>(<span class="hljs-params">r,i[c],s,o,a</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">return</span> <span class="hljs-params">s</span>=<span class="hljs-params">ss</span>(<span class="hljs-params">s</span>),<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">gt</span>]?<span class="hljs-params">r</span>.<span class="hljs-params">O</span>(<span class="hljs-params">i,s,on(o</span>)?!!<span class="hljs-params">o</span>.<span class="hljs-params">capture</span>:!!<span class="hljs-params">o</span>,<span class="hljs-params">a</span>):<span class="hljs-params">wr</span>(<span class="hljs-params">r,i,s,!<span class="hljs-number">0</span>,o,a</span>)}<span class="hljs-params">function</span> <span class="hljs-params">ns</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(i</span>))<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;i.length;c++</span>)<span class="hljs-params">ns</span>(<span class="hljs-params">r,i[c],s,o,a</span>);<span class="hljs-params">else</span> <span class="hljs-params">o</span>=<span class="hljs-params">on</span>(<span class="hljs-params">o</span>)?!!<span class="hljs-params">o</span>.<span class="hljs-params">capture</span>:!!<span class="hljs-params">o</span>,<span class="hljs-params">s</span>=<span class="hljs-params">ss</span>(<span class="hljs-params">s</span>),<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>[<span class="hljs-params">gt</span>]?(<span class="hljs-params">r=r.i,(i=<span class="hljs-built_in">String</span>(i</span>).<span class="hljs-params">toString</span><span class="hljs-params">()</span>)<span class="hljs-params">in</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;-1&lt;(<span class="hljs-params">s=vr(c=r.g[i],s,o,a</span>))&amp;&amp;(<span class="hljs-params">pn(c[s]</span>),<span class="hljs-params">Array</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">splice</span>.<span class="hljs-params">call</span>(<span class="hljs-params">c,s,<span class="hljs-number">1</span></span>),0==<span class="hljs-params">c</span>.<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">delete</span> r.g[i],r.h--</span>))):<span class="hljs-params">r</span>&amp;&amp;(<span class="hljs-params">r=Vt(r</span>))&amp;&amp;(<span class="hljs-params">i=r.g[i.toString(</span>)],<span class="hljs-params">r</span>=-1,<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">r=vr(i,s,o,a</span>)),(<span class="hljs-params">s=<span class="hljs-number">-1</span>&lt;r?i[r]:<span class="hljs-literal">null</span></span>)&amp;&amp;<span class="hljs-params">ti</span>(<span class="hljs-params">s</span>))}<span class="hljs-params">function</span> <span class="hljs-params">ti</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"number"</span>!=<span class="hljs-keyword">typeof</span> r&amp;&amp;r&amp;&amp;!r.ca</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">src</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i&amp;&amp;i[gt]</span>)<span class="hljs-params">_r</span>(<span class="hljs-params">i.i,r</span>);<span class="hljs-params">else</span>{<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">type</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">proxy</span>;<span class="hljs-params">i</span>.<span class="hljs-params">removeEventListener</span>?<span class="hljs-params">i</span>.<span class="hljs-params">removeEventListener</span>(<span class="hljs-params">s,o,r.capture</span>):<span class="hljs-params">i</span>.<span class="hljs-params">detachEvent</span>?<span class="hljs-params">i</span>.<span class="hljs-params">detachEvent</span>(<span class="hljs-params">is(s</span>),<span class="hljs-params">o</span>):<span class="hljs-params">i</span>.<span class="hljs-params">addListener</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">removeListener</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">removeListener</span>(<span class="hljs-params">o</span>),(<span class="hljs-params">s=Vt(i</span>))?(<span class="hljs-params">_r(s,r</span>),0==<span class="hljs-params">s</span>.<span class="hljs-params">h</span>&amp;&amp;(<span class="hljs-params">s.src=<span class="hljs-literal">null</span>,i[St]=<span class="hljs-literal">null</span></span>)):<span class="hljs-params">pn</span>(<span class="hljs-params">r</span>)}}}<span class="hljs-params">function</span> <span class="hljs-params">is</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span> <span class="hljs-params">in</span> <span class="hljs-params">ei</span>?<span class="hljs-params">ei</span>[<span class="hljs-params">r</span>]:<span class="hljs-params">ei</span>[<span class="hljs-params">r</span>]="<span class="hljs-params">on</span>"+<span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">Ho</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.ca</span>)<span class="hljs-params">r</span>=!0;<span class="hljs-params">else</span>{<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">mt</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">listener</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">ia</span>||<span class="hljs-params">r</span>.<span class="hljs-params">src</span>;<span class="hljs-params">r</span>.<span class="hljs-params">fa</span>&amp;&amp;<span class="hljs-params">ti</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>=<span class="hljs-params">s</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,i</span>)}<span class="hljs-params">return</span> <span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">Vt</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>(<span class="hljs-params">r=r[St]</span>)<span class="hljs-params">instanceof</span> <span class="hljs-params">Xn</span>?<span class="hljs-params">r</span>:<span class="hljs-params">null</span>}<span class="hljs-params">var</span> <span class="hljs-params">ni</span>="<span class="hljs-params">__closure_events_fn_</span>"+(<span class="hljs-params"><span class="hljs-number">1e9</span>*<span class="hljs-built_in">Math</span>.random(</span>)&gt;&gt;&gt;0);<span class="hljs-params">function</span> <span class="hljs-params">ss</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">function</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">r</span>:(<span class="hljs-params">r[ni]||(r[ni]=<span class="hljs-keyword">function</span>(i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">handleEvent</span>(<span class="hljs-params">i</span>)}),<span class="hljs-params">r</span>[<span class="hljs-params">ni</span>])}<span class="hljs-params">function</span> <span class="hljs-params">ce</span><span class="hljs-params">()</span>{<span class="hljs-params">Ve</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">Xn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">P</span>=<span class="hljs-params">this</span>,<span class="hljs-params">this</span>.<span class="hljs-params">I</span>=<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">fe</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">I</span>;<span class="hljs-params">if</span>(<span class="hljs-params">o</span>)<span class="hljs-params">for</span>(<span class="hljs-params">s=[];o;o=o.I</span>)<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">o</span>);<span class="hljs-params">if</span>(<span class="hljs-params">r=r.P,o=i.type||i,<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> i</span>)<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">De</span>(<span class="hljs-params">i,r</span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">i <span class="hljs-keyword">instanceof</span> De</span>)<span class="hljs-params">i</span>.<span class="hljs-params">target</span>=<span class="hljs-params">i</span>.<span class="hljs-params">target</span>||<span class="hljs-params">r</span>;<span class="hljs-params">else</span>{<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">i</span>;<span class="hljs-params">It</span>(<span class="hljs-params">i=<span class="hljs-keyword">new</span> De(o,r</span>),<span class="hljs-params">a</span>)}<span class="hljs-params">if</span>(<span class="hljs-params">a=!<span class="hljs-number">0</span>,s</span>)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=s.length<span class="hljs-number">-1</span>;<span class="hljs-number">0</span>&lt;=c;c--</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">i</span>.<span class="hljs-params">g</span>=<span class="hljs-params">s</span>[<span class="hljs-params">c</span>];<span class="hljs-params">a</span>=<span class="hljs-params">Bt</span>(<span class="hljs-params">u,o,!<span class="hljs-number">0</span>,i</span>)&amp;&amp;<span class="hljs-params">a</span>}<span class="hljs-params">if</span>(<span class="hljs-params">a=Bt(u=i.g=r,o,!<span class="hljs-number">0</span>,i</span>)&amp;&amp;<span class="hljs-params">a</span>,<span class="hljs-params">a</span>=<span class="hljs-params">Bt</span>(<span class="hljs-params">u,o,!<span class="hljs-number">1</span>,i</span>)&amp;&amp;<span class="hljs-params">a</span>,<span class="hljs-params">s</span>)<span class="hljs-params">for</span>(<span class="hljs-params">c=<span class="hljs-number">0</span>;c&lt;s.length;c++</span>)<span class="hljs-params">a</span>=<span class="hljs-params">Bt</span>(<span class="hljs-params">u=i.g=s[c],o,!<span class="hljs-number">1</span>,i</span>)&amp;&amp;<span class="hljs-params">a</span>}<span class="hljs-params">function</span> <span class="hljs-params">Bt</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!(i=r.i.g[<span class="hljs-built_in">String</span>(i</span>)]))<span class="hljs-params">return</span>!0;<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">concat</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=!<span class="hljs-number">0</span>,c=<span class="hljs-number">0</span>;c&lt;i.length;++c</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">i</span>[<span class="hljs-params">c</span>];<span class="hljs-params">if</span>(<span class="hljs-params">u&amp;&amp;!u.ca&amp;&amp;u.capture==s</span>){<span class="hljs-params">var</span> <span class="hljs-params">h</span>=<span class="hljs-params">u</span>.<span class="hljs-params">listener</span>,<span class="hljs-params">f</span>=<span class="hljs-params">u</span>.<span class="hljs-params">ia</span>||<span class="hljs-params">u</span>.<span class="hljs-params">src</span>;<span class="hljs-params">u</span>.<span class="hljs-params">fa</span>&amp;&amp;<span class="hljs-params">_r</span>(<span class="hljs-params">r.i,u</span>),<span class="hljs-params">a</span>=!1!==<span class="hljs-params">h</span>.<span class="hljs-params">call</span>(<span class="hljs-params">f,o</span>)&amp;&amp;<span class="hljs-params">a</span>}}<span class="hljs-params">return</span> <span class="hljs-params">a</span>&amp;&amp;!<span class="hljs-params">o</span>.<span class="hljs-params">defaultPrevented</span>}<span class="hljs-params">Te</span>(<span class="hljs-params">ce,Ve</span>),<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>[<span class="hljs-params">gt</span>]=!0,<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">removeEventListener</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">ns</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r,i,s,o</span>)},<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">ce.Z.M.call(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>,<span class="hljs-params">r</span>=<span class="hljs-params">this</span>.<span class="hljs-params">i</span>;<span class="hljs-params">for</span>(<span class="hljs-params">i <span class="hljs-keyword">in</span> r.g</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=r.g[i],o=<span class="hljs-number">0</span>;o&lt;s.length;o++</span>)<span class="hljs-params">pn</span>(<span class="hljs-params">s[o]</span>);<span class="hljs-params">delete</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>[<span class="hljs-params">i</span>],<span class="hljs-params">r</span>.<span class="hljs-params">h</span>--}}<span class="hljs-params">this</span>.<span class="hljs-params">I</span>=<span class="hljs-params">null</span>},<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">N</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">i</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(r</span>),<span class="hljs-params">i</span>,!1,<span class="hljs-params">s</span>,<span class="hljs-params">o</span>)},<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">O</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">i</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(r</span>),<span class="hljs-params">i</span>,!0,<span class="hljs-params">s</span>,<span class="hljs-params">o</span>)};<span class="hljs-params">var</span> <span class="hljs-params">br</span>=<span class="hljs-params">G</span>.<span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>;<span class="hljs-params">function</span> <span class="hljs-params">Tr</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">$o</span>,<span class="hljs-params">i</span>=<span class="hljs-params">null</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">i=r.g,r.g=r.g.next,r.g||(r.h=<span class="hljs-literal">null</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">next</span>=<span class="hljs-params">null</span>),<span class="hljs-params">i</span>}<span class="hljs-params">var</span> <span class="hljs-params">mn</span>,<span class="hljs-params">pu</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">function</span> <span class="hljs-params">r</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>}<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">add</span>=<span class="hljs-params">function</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">Er</span>.<span class="hljs-params">get</span><span class="hljs-params">()</span>;<span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>?<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">next</span>=<span class="hljs-params">o</span>:<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">o</span>},<span class="hljs-params">r</span>}<span class="hljs-params">()</span>,<span class="hljs-params">Er</span>=<span class="hljs-params">new</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">function</span> <span class="hljs-params">r</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>}<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">get</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>;<span class="hljs-params">return</span> 0&lt;<span class="hljs-params">this</span>.<span class="hljs-params">h</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>.h--,<span class="hljs-keyword">this</span>.g=(i=<span class="hljs-keyword">this</span>.g</span>).<span class="hljs-params">next</span>,<span class="hljs-params">i</span>.<span class="hljs-params">next</span>=<span class="hljs-params">null</span>):<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">i</span><span class="hljs-params">()</span>,<span class="hljs-params">i</span>},<span class="hljs-params">r</span>}<span class="hljs-params">()</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ir</span>},<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>}),<span class="hljs-params">Ir</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">function</span> <span class="hljs-params">r</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">next</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>}<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">set</span>=<span class="hljs-params">function</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">next</span>=<span class="hljs-params">null</span>},<span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">reset</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">next</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>},<span class="hljs-params">r</span>}<span class="hljs-params">()</span>;<span class="hljs-params">function</span> <span class="hljs-params">Ko</span>(<span class="hljs-params">r</span>){<span class="hljs-params">G</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">throw</span> <span class="hljs-params">r</span>},0)}<span class="hljs-params">function</span> <span class="hljs-params">Sr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">mn</span>||<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">G</span>.<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>);<span class="hljs-params">mn</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">r</span>.<span class="hljs-params">then</span>(<span class="hljs-params">xr</span>)}}<span class="hljs-params">()</span>,<span class="hljs-params">ii</span>||(<span class="hljs-params">mn(</span>),<span class="hljs-params">ii</span>=!0),<span class="hljs-params">$o</span>.<span class="hljs-params">add</span>(<span class="hljs-params">r,i</span>)}<span class="hljs-params">var</span> <span class="hljs-params">ii</span>=!1,<span class="hljs-params">$o</span>=<span class="hljs-params">new</span> <span class="hljs-params">pu</span>;<span class="hljs-params">function</span> <span class="hljs-params">xr</span><span class="hljs-params">()</span>{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r;r=Tr(</span>);){<span class="hljs-params">try</span>{<span class="hljs-params">r</span>.<span class="hljs-params">h</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r.g</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">Ko</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">Er</span>;<span class="hljs-params">i</span>.<span class="hljs-params">j</span>(<span class="hljs-params">r</span>),100&gt;<span class="hljs-params">i</span>.<span class="hljs-params">h</span>&amp;&amp;(<span class="hljs-params">i.h++,r.next=i.g,i.g=r</span>)}<span class="hljs-params">ii</span>=!1}<span class="hljs-params">function</span> <span class="hljs-params">rs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">ce</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">r</span>||1,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">i</span>||<span class="hljs-params">G</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">be</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.kb,<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">os</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">da</span>=!1,<span class="hljs-params">r</span>.<span class="hljs-params">S</span>&amp;&amp;(<span class="hljs-params">r.g.clearTimeout(r.S</span>),<span class="hljs-params">r</span>.<span class="hljs-params">S</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Dr</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">r=be(r,s</span>));<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!r||<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> r.handleEvent</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Invalid listener argument"</span></span>);<span class="hljs-params">r</span>=<span class="hljs-params">be</span>(<span class="hljs-params">r.handleEvent,r</span>)}<span class="hljs-params">return</span> 2147483647&lt;<span class="hljs-params">Number</span>(<span class="hljs-params">i</span>)?-1:<span class="hljs-params">G</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params">r,i||<span class="hljs-number">0</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">as</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">Dr</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">r.i=!<span class="hljs-number">1</span>,<span class="hljs-keyword">as</span>(r</span>))},<span class="hljs-params">r</span>.<span class="hljs-params">j</span>);<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">h</span>;<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">m</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,i</span>)}<span class="hljs-params">Te</span>(<span class="hljs-params">rs,ce</span>),(<span class="hljs-params">O=rs.prototype</span>).<span class="hljs-params">da</span>=!1,<span class="hljs-params">O</span>.<span class="hljs-params">S</span>=<span class="hljs-params">null</span>,<span class="hljs-params">O</span>.<span class="hljs-params">kb</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.da</span>){<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>-<span class="hljs-params">this</span>.<span class="hljs-params">l</span>;0&lt;<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>&lt;.8*<span class="hljs-params">this</span>.<span class="hljs-params">h</span>?<span class="hljs-params">this</span>.<span class="hljs-params">S</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.h-r</span>):(<span class="hljs-params"><span class="hljs-keyword">this</span>.S&amp;&amp;(<span class="hljs-keyword">this</span>.g.clearTimeout(<span class="hljs-keyword">this</span>.S</span>),<span class="hljs-params">this</span>.<span class="hljs-params">S</span>=<span class="hljs-params">null</span>),<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-string">"tick"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">da</span>&amp;&amp;(<span class="hljs-params">os(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>))}},<span class="hljs-params">O</span>.<span class="hljs-params">start</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">da</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">S</span>||(<span class="hljs-params"><span class="hljs-keyword">this</span>.S=<span class="hljs-keyword">this</span>.g.setTimeout(<span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.h</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>)},<span class="hljs-params">O</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">rs</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">M</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">os</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">delete</span> <span class="hljs-params">this</span>.<span class="hljs-params">g</span>};<span class="hljs-params">var</span> <span class="hljs-params">Zo</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">function</span> <span class="hljs-params">i</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">r</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)||<span class="hljs-params">this</span>;<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">m</span>=<span class="hljs-params">s</span>,<span class="hljs-params">a</span>.<span class="hljs-params">j</span>=<span class="hljs-params">o</span>,<span class="hljs-params">a</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>,<span class="hljs-params">a</span>.<span class="hljs-params">i</span>=!1,<span class="hljs-params">a</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">a</span>}<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> i&amp;&amp;<span class="hljs-literal">null</span>!==i</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">TypeError</span>(<span class="hljs-params"><span class="hljs-string">"Class extends value "</span>+<span class="hljs-built_in">String</span>(i</span>)+" <span class="hljs-params">is</span> <span class="hljs-params">not</span> <span class="hljs-params">a</span> <span class="hljs-params">constructor</span> <span class="hljs-params">or</span> <span class="hljs-params">null</span>");<span class="hljs-params">function</span> <span class="hljs-params">s</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">constructor</span>=<span class="hljs-params">r</span>}<span class="hljs-params">ji</span>(<span class="hljs-params">r,i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>=<span class="hljs-params">null</span>===<span class="hljs-params">i</span>?<span class="hljs-params">Object</span>.<span class="hljs-params">create</span>(<span class="hljs-params">i</span>):(<span class="hljs-params">s.prototype=i.prototype,<span class="hljs-keyword">new</span> s</span>)}(<span class="hljs-params">i,r</span>),<span class="hljs-params">i</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">l</span>=<span class="hljs-params">function</span>(<span class="hljs-params">s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">arguments</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>?<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=!0:<span class="hljs-params">as</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">i</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">r</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(<span class="hljs-keyword">this</span>.g</span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>)},<span class="hljs-params">i</span>}(<span class="hljs-params">Ve</span>);<span class="hljs-params">function</span> <span class="hljs-params">gn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Ve</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>={}}<span class="hljs-params">Te</span>(<span class="hljs-params">gn,Ve</span>);<span class="hljs-params">var</span> <span class="hljs-params">cs</span>=[];<span class="hljs-params">function</span> <span class="hljs-params">Cr</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">Array</span>.<span class="hljs-params">isArray</span>(<span class="hljs-params">s</span>)||(<span class="hljs-params">s&amp;&amp;(cs[<span class="hljs-number">0</span>]=s.toString(</span>)),<span class="hljs-params">s</span>=<span class="hljs-params">cs</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=<span class="hljs-number">0</span>;a&lt;s.length;a++</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">Xi</span>(<span class="hljs-params">i,s[a],o||r.handleEvent,!<span class="hljs-number">1</span>,r.h||r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!c</span>)<span class="hljs-params">break</span>;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>[<span class="hljs-params">c</span>.<span class="hljs-params">key</span>]=<span class="hljs-params">c</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Rr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Zi</span>(<span class="hljs-params">r.g,<span class="hljs-keyword">function</span>(i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">hasOwnProperty</span>(<span class="hljs-params">s</span>)&amp;&amp;<span class="hljs-params">ti</span>(<span class="hljs-params">i</span>)},<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">g</span>={}}<span class="hljs-params">function</span> <span class="hljs-params">si</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=!0}<span class="hljs-params">function</span> <span class="hljs-params">xt</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">r</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span>"<span class="hljs-params">XMLHTTP</span> <span class="hljs-params">TEXT</span> (<span class="hljs-params"><span class="hljs-string">"+i+"</span></span>): "+<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!r.g</span>)<span class="hljs-params">return</span> <span class="hljs-params">i</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!i</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">try</span>{<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">JSON</span>.<span class="hljs-params">parse</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">s</span>)<span class="hljs-params">for</span>(<span class="hljs-params">r=<span class="hljs-number">0</span>;r&lt;s.length;r++</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(s[r]</span>)){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>[<span class="hljs-params">r</span>];<span class="hljs-params">if</span>(<span class="hljs-params">!(<span class="hljs-number">2</span>&gt;o.length</span>)){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>[1];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(a</span>)&amp;&amp;!(<span class="hljs-params"><span class="hljs-number">1</span>&gt;a.length</span>)){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>[0];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"noop"</span>!=c&amp;&amp;<span class="hljs-string">"stop"</span>!=c&amp;&amp;<span class="hljs-string">"close"</span>!=c</span>)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> u=<span class="hljs-number">1</span>;u&lt;a.length;u++</span>)<span class="hljs-params">a</span>[<span class="hljs-params">u</span>]=""}}}<span class="hljs-params">return</span> <span class="hljs-params">br</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">h</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>}}(<span class="hljs-params">r,s</span>)+(<span class="hljs-params">o?<span class="hljs-string">" "</span>+o:<span class="hljs-string">""</span></span>)})}<span class="hljs-params">gn</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">gn</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">M</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">Rr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">gn</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">handleEvent</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"EventHandler.handleEvent not implemented"</span></span>)},<span class="hljs-params">si</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">Aa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=!1},<span class="hljs-params">si</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">info</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{};<span class="hljs-params">var</span> <span class="hljs-params">Dt</span>={},<span class="hljs-params">kr</span>=<span class="hljs-params">null</span>;<span class="hljs-params">function</span> <span class="hljs-params">ri</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">kr</span>=<span class="hljs-params">kr</span>||<span class="hljs-params">new</span> <span class="hljs-params">ce</span>}<span class="hljs-params">function</span> <span class="hljs-params">us</span>(<span class="hljs-params">r</span>){<span class="hljs-params">De</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,Dt.Ma,r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">yn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">ri</span><span class="hljs-params">()</span>;<span class="hljs-params">fe</span>(<span class="hljs-params">i,<span class="hljs-keyword">new</span> us(i,r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Pr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">De</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,Dt.STAT_EVENT,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">stat</span>=<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Le</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">ri</span><span class="hljs-params">()</span>;<span class="hljs-params">fe</span>(<span class="hljs-params">i,<span class="hljs-keyword">new</span> Pr(i,r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Yo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">De</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,Dt.Na,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">size</span>=<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">zt</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Fn must not be null and must be a function"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">G</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">r</span><span class="hljs-params">()</span>},<span class="hljs-params">i</span>)}<span class="hljs-params">Dt</span>.<span class="hljs-params">Ma</span>="<span class="hljs-params">serverreachability</span>",<span class="hljs-params">Te</span>(<span class="hljs-params">us,De</span>),<span class="hljs-params">Dt</span>.<span class="hljs-params">STAT_EVENT</span>="<span class="hljs-params">statevent</span>",<span class="hljs-params">Te</span>(<span class="hljs-params">Pr,De</span>),<span class="hljs-params">Dt</span>.<span class="hljs-params">Na</span>="<span class="hljs-params">timingevent</span>",<span class="hljs-params">Te</span>(<span class="hljs-params">Yo,De</span>);<span class="hljs-params">var</span> <span class="hljs-params">_n</span>={<span class="hljs-params">NO_ERROR</span>:0,<span class="hljs-params">lb</span>:1,<span class="hljs-params">yb</span>:2,<span class="hljs-params">xb</span>:3,<span class="hljs-params">sb</span>:4,<span class="hljs-params">wb</span>:5,<span class="hljs-params">zb</span>:6,<span class="hljs-params">Ja</span>:7,<span class="hljs-params">TIMEOUT</span>:8,<span class="hljs-params">Cb</span>:9},<span class="hljs-params">Nr</span>={<span class="hljs-params">qb</span>:"<span class="hljs-params">complete</span>",<span class="hljs-params">Mb</span>:"<span class="hljs-params">success</span>",<span class="hljs-params">Ka</span>:"<span class="hljs-params">error</span>",<span class="hljs-params">Ja</span>:"<span class="hljs-params">abort</span>",<span class="hljs-params">Eb</span>:"<span class="hljs-params">ready</span>",<span class="hljs-params">Fb</span>:"<span class="hljs-params">readystatechange</span>",<span class="hljs-params">TIMEOUT</span>:"<span class="hljs-params">timeout</span>",<span class="hljs-params">Ab</span>:"<span class="hljs-params">incrementaldata</span>",<span class="hljs-params">Db</span>:"<span class="hljs-params">progress</span>",<span class="hljs-params">tb</span>:"<span class="hljs-params">downloadprogress</span>",<span class="hljs-params">Ub</span>:"<span class="hljs-params">uploadprogress</span>"};<span class="hljs-params">function</span> <span class="hljs-params">Lr</span><span class="hljs-params">()</span>{}<span class="hljs-params">function</span> <span class="hljs-params">Mr</span><span class="hljs-params">()</span>{}<span class="hljs-params">Lr</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>;<span class="hljs-params">var</span> <span class="hljs-params">fs</span>,<span class="hljs-params">vn</span>={<span class="hljs-params">OPEN</span>:"<span class="hljs-params">a</span>",<span class="hljs-params">pb</span>:"<span class="hljs-params">b</span>",<span class="hljs-params">Ka</span>:"<span class="hljs-params">c</span>",<span class="hljs-params">Bb</span>:"<span class="hljs-params">d</span>"};<span class="hljs-params">function</span> <span class="hljs-params">hs</span><span class="hljs-params">()</span>{<span class="hljs-params">De</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-string">"d"</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">ds</span><span class="hljs-params">()</span>{<span class="hljs-params">De</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-string">"c"</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">ps</span><span class="hljs-params">()</span>{}<span class="hljs-params">function</span> <span class="hljs-params">wn</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">X</span>=<span class="hljs-params">o</span>||1,<span class="hljs-params">this</span>.<span class="hljs-params">V</span>=<span class="hljs-params">new</span> <span class="hljs-params">gn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">P</span>=<span class="hljs-params">Wo</span>,<span class="hljs-params">this</span>.<span class="hljs-params">W</span>=<span class="hljs-params">new</span> <span class="hljs-params">rs</span>(<span class="hljs-params">r=ln?<span class="hljs-number">125</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">H</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">this</span>.<span class="hljs-params">K</span>=<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Y</span>=<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">u</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=-1,<span class="hljs-params">this</span>.<span class="hljs-params">I</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">O</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">L</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">aa</span>=<span class="hljs-params">this</span>.<span class="hljs-params">J</span>=<span class="hljs-params">this</span>.<span class="hljs-params">$</span>=<span class="hljs-params">this</span>.<span class="hljs-params">U</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">Or</span>}<span class="hljs-params">function</span> <span class="hljs-params">Or</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=!1}<span class="hljs-params">Te</span>(<span class="hljs-params">hs,De</span>),<span class="hljs-params">Te</span>(<span class="hljs-params">ds,De</span>),<span class="hljs-params">Te</span>(<span class="hljs-params">ps,Lr</span>),<span class="hljs-params">ps</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">g</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">XMLHttpRequest</span>},<span class="hljs-params">ps</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">i</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>{}},<span class="hljs-params">fs</span>=<span class="hljs-params">new</span> <span class="hljs-params">ps</span>;<span class="hljs-params">var</span> <span class="hljs-params">Wo</span>=45<span class="hljs-params">e3</span>,<span class="hljs-params">ms</span>={},<span class="hljs-params">g</span>={};<span class="hljs-params">function</span> <span class="hljs-params">m</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span>.<span class="hljs-params">K</span>=1,<span class="hljs-params">r</span>.<span class="hljs-params">v</span>=<span class="hljs-params">zr</span>(<span class="hljs-params">ot(i</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">s</span>=<span class="hljs-params">s</span>,<span class="hljs-params">r</span>.<span class="hljs-params">U</span>=!0,<span class="hljs-params">l</span>(<span class="hljs-params">r,<span class="hljs-literal">null</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">l</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">F</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>,<span class="hljs-params">E</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">A</span>=<span class="hljs-params">ot</span>(<span class="hljs-params">r.v</span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">A</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">X</span>;<span class="hljs-params">Array</span>.<span class="hljs-params">isArray</span>(<span class="hljs-params">o</span>)||(<span class="hljs-params">o=[<span class="hljs-built_in">String</span>(o</span>)]),<span class="hljs-params">bu</span>(<span class="hljs-params">s.h,<span class="hljs-string">"t"</span>,o</span>),<span class="hljs-params">r</span>.<span class="hljs-params">C</span>=0,<span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">H</span>,<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">Or</span>,<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">ju</span>(<span class="hljs-params">r.l,s?i:<span class="hljs-literal">null</span>,!r.s</span>),0&lt;<span class="hljs-params">r</span>.<span class="hljs-params">O</span>&amp;&amp;(<span class="hljs-params">r.L=<span class="hljs-keyword">new</span> Zo(be(r.Ia,r,r.g</span>),<span class="hljs-params">r</span>.<span class="hljs-params">O</span>)),<span class="hljs-params">Cr</span>(<span class="hljs-params">r.V,r.g,<span class="hljs-string">"readystatechange"</span>,r.gb</span>),<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">H</span>?<span class="hljs-params">un</span>(<span class="hljs-params">r.H</span>):{},<span class="hljs-params">r</span>.<span class="hljs-params">s</span>?(<span class="hljs-params">r.u||(r.u=<span class="hljs-string">"POST"</span></span>),<span class="hljs-params">i</span>["<span class="hljs-params">Content</span>-<span class="hljs-params">Type</span>"]="<span class="hljs-params">application</span>/<span class="hljs-params">x</span>-<span class="hljs-params">www</span>-<span class="hljs-params">form</span>-<span class="hljs-params">urlencoded</span>",<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ea</span>(<span class="hljs-params">r.A,r.u,r.s,i</span>)):(<span class="hljs-params">r.u=<span class="hljs-string">"GET"</span>,r.g.ea(r.A,r.u,<span class="hljs-literal">null</span>,i</span>)),<span class="hljs-params">yn</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>),<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o,a,c</span>){<span class="hljs-params">r</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.g</span>)<span class="hljs-params">if</span>(<span class="hljs-params">c</span>)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> u=<span class="hljs-string">""</span>,h=c.split(<span class="hljs-string">"&amp;"</span></span>),<span class="hljs-params">f</span>=0;<span class="hljs-params">f</span>&lt;<span class="hljs-params">h</span>.<span class="hljs-params">length</span>;<span class="hljs-params">f</span>++){<span class="hljs-params">var</span> <span class="hljs-params">v</span>=<span class="hljs-params">h</span>[<span class="hljs-params">f</span>].<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"="</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>&lt;v.length</span>){<span class="hljs-params">var</span> <span class="hljs-params">w</span>=<span class="hljs-params">v</span>[0];<span class="hljs-params">v</span>=<span class="hljs-params">v</span>[1];<span class="hljs-params">var</span> <span class="hljs-params">T</span>=<span class="hljs-params">w</span>.<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"_"</span></span>);<span class="hljs-params">u</span>=2&lt;=<span class="hljs-params">T</span>.<span class="hljs-params">length</span>&amp;&amp;"<span class="hljs-params">type</span>"==<span class="hljs-params">T</span>[1]?<span class="hljs-params">u</span>+(<span class="hljs-params">w+<span class="hljs-string">"="</span></span>)+<span class="hljs-params">v</span>+"&amp;":<span class="hljs-params">u</span>+(<span class="hljs-params">w+<span class="hljs-string">"=redacted&amp;"</span></span>)}}<span class="hljs-params">else</span> <span class="hljs-params">u</span>=<span class="hljs-params">null</span>;<span class="hljs-params">else</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>;<span class="hljs-params">return</span>"<span class="hljs-params">XMLHTTP</span> <span class="hljs-params">REQ</span> (<span class="hljs-params"><span class="hljs-string">"+o+"</span></span>) [<span class="hljs-params">attempt</span> "+<span class="hljs-params">a</span>+"]: "+<span class="hljs-params">i</span>+"\<span class="hljs-params">n</span>"+<span class="hljs-params">s</span>+"\<span class="hljs-params">n</span>"+<span class="hljs-params">u</span>})}(<span class="hljs-params">r.j,r.u,r.A,r.m,r.X,r.s</span>)}<span class="hljs-params">function</span> <span class="hljs-params">d</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;"<span class="hljs-params">GET</span>"==<span class="hljs-params">r</span>.<span class="hljs-params">u</span>&amp;&amp;2!=<span class="hljs-params">r</span>.<span class="hljs-params">K</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">Ba</span>}<span class="hljs-params">function</span> <span class="hljs-params">y</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a,o=!<span class="hljs-number">0</span>;!r.I&amp;&amp;r.C&lt;s.length;</span>){<span class="hljs-params">if</span>(<span class="hljs-params">(a=b(r,s</span>))==<span class="hljs-params">g</span>){4==<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">r.o=<span class="hljs-number">4</span>,Le(<span class="hljs-number">14</span></span>),<span class="hljs-params">o</span>=!1),<span class="hljs-params">xt</span>(<span class="hljs-params">r.j,r.m,<span class="hljs-literal">null</span>,<span class="hljs-string">"[Incomplete Response]"</span></span>);<span class="hljs-params">break</span>}<span class="hljs-params">if</span>(<span class="hljs-params">a==ms</span>){<span class="hljs-params">r</span>.<span class="hljs-params">o</span>=4,<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">15</span></span>),<span class="hljs-params">xt</span>(<span class="hljs-params">r.j,r.m,s,<span class="hljs-string">"[Invalid Chunk]"</span></span>),<span class="hljs-params">o</span>=!1;<span class="hljs-params">break</span>}<span class="hljs-params">xt</span>(<span class="hljs-params">r.j,r.m,a,<span class="hljs-literal">null</span></span>),<span class="hljs-params">Z</span>(<span class="hljs-params">r,a</span>)}<span class="hljs-params">d</span>(<span class="hljs-params">r</span>)&amp;&amp;<span class="hljs-params">a</span>!=<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">a</span>!=<span class="hljs-params">ms</span>&amp;&amp;(<span class="hljs-params">r.h.g=<span class="hljs-string">""</span>,r.C=<span class="hljs-number">0</span></span>),4!=<span class="hljs-params">i</span>||0!=<span class="hljs-params">s</span>.<span class="hljs-params">length</span>||<span class="hljs-params">r</span>.<span class="hljs-params">h</span>.<span class="hljs-params">h</span>||(<span class="hljs-params">r.o=<span class="hljs-number">1</span>,Le(<span class="hljs-number">16</span></span>),<span class="hljs-params">o</span>=!1),<span class="hljs-params">r</span>.<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">o</span>,<span class="hljs-params">o</span>?0&lt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>&amp;&amp;!<span class="hljs-params">r</span>.<span class="hljs-params">aa</span>&amp;&amp;(<span class="hljs-params">r.aa=!<span class="hljs-number">0</span>,(i=r.l</span>).<span class="hljs-params">g</span>==<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">$</span>&amp;&amp;!<span class="hljs-params">i</span>.<span class="hljs-params">L</span>&amp;&amp;(<span class="hljs-params">i.h.info(<span class="hljs-string">"Great, no buffering proxy detected. Bytes received: "</span>+s.length</span>),<span class="hljs-params">oa</span>(<span class="hljs-params">i</span>),<span class="hljs-params">i</span>.<span class="hljs-params">L</span>=!0,<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">11</span></span>))):(<span class="hljs-params">xt(r.j,r.m,s,<span class="hljs-string">"[Invalid Chunked Response]"</span></span>),<span class="hljs-params">F</span>(<span class="hljs-params">r</span>),<span class="hljs-params">q</span>(<span class="hljs-params">r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">b</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">C</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"\n"</span>,s</span>);<span class="hljs-params">return</span>-1==<span class="hljs-params">o</span>?<span class="hljs-params">g</span>:(<span class="hljs-params">s=<span class="hljs-built_in">Number</span>(i.substring(s,o</span>)),<span class="hljs-params">isNaN</span>(<span class="hljs-params">s</span>)?<span class="hljs-params">ms</span>:(<span class="hljs-params">o+=<span class="hljs-number">1</span></span>)+<span class="hljs-params">s</span>&gt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>?<span class="hljs-params">g</span>:(<span class="hljs-params">i=i.substr(o,s</span>),<span class="hljs-params">r</span>.<span class="hljs-params">C</span>=<span class="hljs-params">o</span>+<span class="hljs-params">s</span>,<span class="hljs-params">i</span>))}<span class="hljs-params">function</span> <span class="hljs-params">E</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Y</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>+<span class="hljs-params">r</span>.<span class="hljs-params">P</span>,<span class="hljs-params">x</span>(<span class="hljs-params">r,r.P</span>)}<span class="hljs-params">function</span> <span class="hljs-params">x</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=r.B</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"WatchDog timer not null"</span></span>);<span class="hljs-params">r</span>.<span class="hljs-params">B</span>=<span class="hljs-params">zt</span>(<span class="hljs-params">be(r.eb,r</span>),<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">N</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(r.B</span>),<span class="hljs-params">r</span>.<span class="hljs-params">B</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">q</span>(<span class="hljs-params">r</span>){0==<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">G</span>||<span class="hljs-params">r</span>.<span class="hljs-params">I</span>||<span class="hljs-params">Bu</span>(<span class="hljs-params">r.l,r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">F</span>(<span class="hljs-params">r</span>){<span class="hljs-params">N</span>(<span class="hljs-params">r</span>);<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">L</span>;<span class="hljs-params">i</span>&amp;&amp;"<span class="hljs-params">function</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">i</span>.<span class="hljs-params">na</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">na</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>.<span class="hljs-params">L</span>=<span class="hljs-params">null</span>,<span class="hljs-params">os</span>(<span class="hljs-params">r.W</span>),<span class="hljs-params">Rr</span>(<span class="hljs-params">r.V</span>),<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">i=r.g,r.g=<span class="hljs-literal">null</span>,i.abort(</span>),<span class="hljs-params">i</span>.<span class="hljs-params">na</span><span class="hljs-params">()</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Z</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">l</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!=s.G&amp;&amp;(s.g==r||Jo(s.i,r</span>)))<span class="hljs-params">if</span>(<span class="hljs-params">s.I=r.N,!r.J&amp;&amp;Jo(s.i,r</span>)&amp;&amp;3==<span class="hljs-params">s</span>.<span class="hljs-params">G</span>){<span class="hljs-params">try</span>{<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Ca</span>.<span class="hljs-params">g</span>.<span class="hljs-params">parse</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">j</span>){<span class="hljs-params">o</span>=<span class="hljs-params">null</span>}<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Array</span>.isArray(o</span>)&amp;&amp;3==<span class="hljs-params">o</span>.<span class="hljs-params">length</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>==a[<span class="hljs-number">0</span>]</span>)<span class="hljs-params">e</span>:<span class="hljs-params">if</span>(<span class="hljs-params">s.u</span>)<span class="hljs-params">s</span>.<span class="hljs-params">ta</span>=<span class="hljs-params">a</span>[1],0&lt;<span class="hljs-params">s</span>.<span class="hljs-params">ta</span>-<span class="hljs-params">s</span>.<span class="hljs-params">U</span>&amp;&amp;37500&gt;<span class="hljs-params">a</span>[2]&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">N</span>&amp;&amp;0==<span class="hljs-params">s</span>.<span class="hljs-params">A</span>&amp;&amp;!<span class="hljs-params">s</span>.<span class="hljs-params">v</span>&amp;&amp;(<span class="hljs-params">s.v=zt(be(s.ab,s</span>),6<span class="hljs-params">e3</span>));<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">s.g</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!(s.g.F+<span class="hljs-number">3e3</span>&lt;r.F</span>))<span class="hljs-params">break</span> <span class="hljs-params">e</span>;<span class="hljs-params">Zr</span>(<span class="hljs-params">s</span>),<span class="hljs-params">Kr</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">ra</span>(<span class="hljs-params">s</span>),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">18</span></span>)}<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>&gt;=Iu(s.i</span>)&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">ka</span>){<span class="hljs-params">try</span>{<span class="hljs-params">s</span>.<span class="hljs-params">ka</span><span class="hljs-params">()</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">j</span>){}<span class="hljs-params">s</span>.<span class="hljs-params">ka</span>=<span class="hljs-params">void</span> 0}}<span class="hljs-params">else</span> <span class="hljs-params">bn</span>(<span class="hljs-params">s,<span class="hljs-number">11</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">(r.J||s.g==r</span>)&amp;&amp;<span class="hljs-params">Zr</span>(<span class="hljs-params">s</span>),!<span class="hljs-params">jn</span>(<span class="hljs-params">i</span>))<span class="hljs-params">for</span>(<span class="hljs-params">a=s.Ca.g.parse(i</span>),<span class="hljs-params">i</span>=0;<span class="hljs-params">i</span>&lt;<span class="hljs-params">a</span>.<span class="hljs-params">length</span>;<span class="hljs-params">i</span>++){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>[<span class="hljs-params">i</span>];<span class="hljs-params">if</span>(<span class="hljs-params">s.U=c[<span class="hljs-number">0</span>],c=c[<span class="hljs-number">1</span>],<span class="hljs-number">2</span>==s.G</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"c"</span>==c[<span class="hljs-number">0</span>]</span>){<span class="hljs-params">s</span>.<span class="hljs-params">J</span>=<span class="hljs-params">c</span>[1],<span class="hljs-params">s</span>.<span class="hljs-params">la</span>=<span class="hljs-params">c</span>[2];<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>[3];<span class="hljs-params">null</span>!=<span class="hljs-params">u</span>&amp;&amp;(<span class="hljs-params">s.ma=u,s.h.info(<span class="hljs-string">"VER="</span>+s.ma</span>));<span class="hljs-params">var</span> <span class="hljs-params">h</span>=<span class="hljs-params">c</span>[4];<span class="hljs-params">null</span>!=<span class="hljs-params">h</span>&amp;&amp;(<span class="hljs-params">s.za=h,s.h.info(<span class="hljs-string">"SVER="</span>+s.za</span>));<span class="hljs-params">var</span> <span class="hljs-params">f</span>=<span class="hljs-params">c</span>[5];<span class="hljs-params">null</span>!=<span class="hljs-params">f</span>&amp;&amp;"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">f</span>&amp;&amp;0&lt;<span class="hljs-params">f</span>&amp;&amp;(<span class="hljs-params">s.K=o=<span class="hljs-number">1.5</span>*f,s.h.info(<span class="hljs-string">"backChannelRequestTimeoutMs_="</span>+o</span>)),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>;<span class="hljs-params">var</span> <span class="hljs-params">v</span>=<span class="hljs-params">r</span>.<span class="hljs-params">g</span>;<span class="hljs-params">if</span>(<span class="hljs-params">v</span>){<span class="hljs-params">var</span> <span class="hljs-params">w</span>=<span class="hljs-params">v</span>.<span class="hljs-params">g</span>?<span class="hljs-params">v</span>.<span class="hljs-params">g</span>.<span class="hljs-params">getResponseHeader</span>(<span class="hljs-params"><span class="hljs-string">"X-Client-Wire-Protocol"</span></span>):<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params">w</span>){<span class="hljs-params">var</span> <span class="hljs-params">T</span>=<span class="hljs-params">o</span>.<span class="hljs-params">i</span>;!<span class="hljs-params">T</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">xe(w,<span class="hljs-string">"spdy"</span></span>)||<span class="hljs-params">xe</span>(<span class="hljs-params">w,<span class="hljs-string">"quic"</span></span>)||<span class="hljs-params">xe</span>(<span class="hljs-params">w,<span class="hljs-string">"h2"</span></span>))&amp;&amp;(<span class="hljs-params">T.j=T.l,T.g=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>,T.h&amp;&amp;(Xo(T,T.h</span>),<span class="hljs-params">T</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>))}<span class="hljs-params">if</span>(<span class="hljs-params">o.D</span>){<span class="hljs-params">var</span> <span class="hljs-params">S</span>=<span class="hljs-params">v</span>.<span class="hljs-params">g</span>?<span class="hljs-params">v</span>.<span class="hljs-params">g</span>.<span class="hljs-params">getResponseHeader</span>(<span class="hljs-params"><span class="hljs-string">"X-HTTP-Session-Id"</span></span>):<span class="hljs-params">null</span>;<span class="hljs-params">S</span>&amp;&amp;(<span class="hljs-params">o.sa=S,oe(o.F,o.D,S</span>))}}<span class="hljs-params">s</span>.<span class="hljs-params">G</span>=3,<span class="hljs-params">s</span>.<span class="hljs-params">j</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">j</span>.<span class="hljs-params">xa</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>.<span class="hljs-params">$</span>&amp;&amp;(<span class="hljs-params">s.O=<span class="hljs-built_in">Date</span>.now(</span>)-<span class="hljs-params">r</span>.<span class="hljs-params">F</span>,<span class="hljs-params">s</span>.<span class="hljs-params">h</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-string">"Handshake RTT: "</span>+s.O+<span class="hljs-string">"ms"</span></span>));<span class="hljs-params">var</span> <span class="hljs-params">C</span>=<span class="hljs-params">r</span>;<span class="hljs-params">if</span>(<span class="hljs-params">(o=s</span>).<span class="hljs-params">oa</span>=<span class="hljs-params">Gu</span>(<span class="hljs-params">o,o.H?o.la:<span class="hljs-literal">null</span>,o.W</span>),<span class="hljs-params">C</span>.<span class="hljs-params">J</span>){<span class="hljs-params">Su</span>(<span class="hljs-params">o.i,C</span>);<span class="hljs-params">var</span> <span class="hljs-params">P</span>=<span class="hljs-params">C</span>,<span class="hljs-params">B</span>=<span class="hljs-params">o</span>.<span class="hljs-params">K</span>;<span class="hljs-params">B</span>&amp;&amp;<span class="hljs-params">P</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params">B</span>),<span class="hljs-params">P</span>.<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params">N(P</span>),<span class="hljs-params">E</span>(<span class="hljs-params">P</span>)),<span class="hljs-params">o</span>.<span class="hljs-params">g</span>=<span class="hljs-params">C</span>}<span class="hljs-params">else</span> <span class="hljs-params">Uu</span>(<span class="hljs-params">o</span>);0&lt;<span class="hljs-params">s</span>.<span class="hljs-params">l</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">$r</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">else</span>"<span class="hljs-params">stop</span>"!=<span class="hljs-params">c</span>[0]&amp;&amp;"<span class="hljs-params">close</span>"!=<span class="hljs-params">c</span>[0]||<span class="hljs-params">bn</span>(<span class="hljs-params">s,<span class="hljs-number">7</span></span>);<span class="hljs-params">else</span> 3==<span class="hljs-params">s</span>.<span class="hljs-params">G</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-string">"stop"</span>==c[<span class="hljs-number">0</span>]||<span class="hljs-string">"close"</span>==c[<span class="hljs-number">0</span>]?<span class="hljs-string">"stop"</span>==c[<span class="hljs-number">0</span>]?bn(s,<span class="hljs-number">7</span></span>):<span class="hljs-params">ia</span>(<span class="hljs-params">s</span>):"<span class="hljs-params">noop</span>"!=<span class="hljs-params">c</span>[0]&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">j</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">j</span>.<span class="hljs-params">wa</span>(<span class="hljs-params">c</span>),<span class="hljs-params">s</span>.<span class="hljs-params">A</span>=0)}<span class="hljs-params">yn</span>(<span class="hljs-params"><span class="hljs-number">4</span></span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">j</span>){}}<span class="hljs-params">function</span> <span class="hljs-params">je</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.forEach&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> r.forEach</span>)<span class="hljs-params">r</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">i,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">Ki(r</span>)||"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>)<span class="hljs-params">an</span>(<span class="hljs-params">r,i,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>);<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">r.T&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> r.T</span>)<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">T</span><span class="hljs-params">()</span>;<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">r.R&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> r.R</span>)<span class="hljs-params">s</span>=<span class="hljs-params">void</span> 0;<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">Ki(r</span>)||"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>){<span class="hljs-params">s</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> o=r.length,a=<span class="hljs-number">0</span>;a&lt;o;a++</span>)<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">else</span> <span class="hljs-params">for</span>(<span class="hljs-params">a <span class="hljs-keyword">in</span> s=[],o=<span class="hljs-number">0</span>,r</span>)<span class="hljs-params">s</span>[<span class="hljs-params">o</span>++]=<span class="hljs-params">a</span>;<span class="hljs-params">a</span>=(<span class="hljs-params">o=<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.R&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> r.R</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">R</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">""</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">Ki(r</span>)){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> i=[],s=r.length,o=<span class="hljs-number">0</span>;o&lt;s;o++</span>)<span class="hljs-params">i</span>.<span class="hljs-params">push</span>(<span class="hljs-params">r[o]</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">for</span>(<span class="hljs-params">o <span class="hljs-keyword">in</span> i=[],s=<span class="hljs-number">0</span>,r</span>)<span class="hljs-params">i</span>[<span class="hljs-params">s</span>++]=<span class="hljs-params">r</span>[<span class="hljs-params">o</span>];<span class="hljs-params">return</span> <span class="hljs-params">i</span>}(<span class="hljs-params">r</span>)).<span class="hljs-params">length</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;a;c++</span>)<span class="hljs-params">i</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,o[c],s&amp;&amp;s[c],r</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Ee</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>={},<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=0;<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">arguments</span>.<span class="hljs-params">length</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>&lt;s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s%<span class="hljs-number">2</span></span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Uneven number of arguments"</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> o=<span class="hljs-number">0</span>;o&lt;s;o+=<span class="hljs-number">2</span></span>)<span class="hljs-params">this</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-built_in">arguments</span>[o],<span class="hljs-built_in">arguments</span>[o+<span class="hljs-number">1</span>]</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">r</span>)<span class="hljs-params">if</span>(<span class="hljs-params">r <span class="hljs-keyword">instanceof</span> Ee</span>)<span class="hljs-params">for</span>(<span class="hljs-params">s=r.T(</span>),<span class="hljs-params">o</span>=0;<span class="hljs-params">o</span>&lt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>;<span class="hljs-params">o</span>++)<span class="hljs-params">this</span>.<span class="hljs-params">set</span>(<span class="hljs-params">s[o],r.get(s[o]</span>));<span class="hljs-params">else</span> <span class="hljs-params">for</span>(<span class="hljs-params">o <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">this</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o,r[o]</span>)}<span class="hljs-params">function</span> <span class="hljs-params">yt</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.i!=r.g.length</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,s=<span class="hljs-number">0</span>;i&lt;r.g.length;</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">g</span>[<span class="hljs-params">i</span>];<span class="hljs-params">me</span>(<span class="hljs-params">r.h,o</span>)&amp;&amp;(<span class="hljs-params">r.g[s++]=o</span>),<span class="hljs-params">i</span>++}<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">length</span>=<span class="hljs-params">s</span>}<span class="hljs-params">if</span>(<span class="hljs-params">r.i!=r.g.length</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>={};<span class="hljs-params">for</span>(<span class="hljs-params">s=i=<span class="hljs-number">0</span>;i&lt;r.g.length;</span>)<span class="hljs-params">me</span>(<span class="hljs-params">a,o=r.g[i]</span>)||(<span class="hljs-params">r.g[s++]=o,a[o]=<span class="hljs-number">1</span></span>),<span class="hljs-params">i</span>++;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">length</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">function</span> <span class="hljs-params">me</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,i</span>)}(<span class="hljs-params">O=wn.prototype</span>).<span class="hljs-params">setTimeout</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">P</span>=<span class="hljs-params">r</span>},<span class="hljs-params">O</span>.<span class="hljs-params">gb</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">r</span>.<span class="hljs-params">target</span>;<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">L</span>;<span class="hljs-params">i</span>&amp;&amp;3==<span class="hljs-params">Ct</span>(<span class="hljs-params">r</span>)?<span class="hljs-params">i</span>.<span class="hljs-params">l</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">Ia</span>(<span class="hljs-params">r</span>)},<span class="hljs-params">O</span>.<span class="hljs-params">Ia</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">try</span>{<span class="hljs-params">if</span>(<span class="hljs-params">r==<span class="hljs-keyword">this</span>.g</span>)<span class="hljs-params">e</span>:{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">Ct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>),<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">Da</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ba</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!(<span class="hljs-number">3</span>&gt;i</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-number">3</span>!=i||ln||<span class="hljs-keyword">this</span>.g&amp;&amp;(<span class="hljs-keyword">this</span>.h.h||<span class="hljs-keyword">this</span>.g.ga(</span>)||<span class="hljs-params">Nu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>)))){<span class="hljs-params">this</span>.<span class="hljs-params">I</span>||4!=<span class="hljs-params">i</span>||7==<span class="hljs-params">s</span>||<span class="hljs-params">yn</span>(<span class="hljs-params"><span class="hljs-number">8</span>==s||<span class="hljs-number">0</span>&gt;=o?<span class="hljs-number">3</span>:<span class="hljs-number">2</span></span>),<span class="hljs-params">N</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ba</span><span class="hljs-params">()</span>;<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">a</span>;<span class="hljs-params">t</span>:<span class="hljs-params">if</span>(<span class="hljs-params">d(<span class="hljs-keyword">this</span></span>)){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">Nu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>);<span class="hljs-params">r</span>="";<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>.<span class="hljs-params">length</span>,<span class="hljs-params">h</span>=4==<span class="hljs-params">Ct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.h.i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> TextDecoder</span>){<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">q</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">f</span>="";<span class="hljs-params">break</span> <span class="hljs-params">t</span>}<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">G</span>.<span class="hljs-params">TextDecoder</span>}<span class="hljs-params">for</span>(<span class="hljs-params">s=<span class="hljs-number">0</span>;s&lt;u;s++</span>)<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">h</span>=!0,<span class="hljs-params">r</span>+=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">i</span>.<span class="hljs-params">decode</span>(<span class="hljs-params">c[s],{stream:h&amp;&amp;s==u<span class="hljs-number">-1</span>}</span>);<span class="hljs-params">c</span>.<span class="hljs-params">splice</span>(<span class="hljs-params"><span class="hljs-number">0</span>,u</span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">g</span>+=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=0,<span class="hljs-params">f</span>=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">g</span>}<span class="hljs-params">else</span> <span class="hljs-params">f</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ga</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i=<span class="hljs-number">200</span>==a,<span class="hljs-keyword">function</span>(r,i,s,o,a,c,u</span>){<span class="hljs-params">r</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span>"<span class="hljs-params">XMLHTTP</span> <span class="hljs-params">RESP</span> (<span class="hljs-params"><span class="hljs-string">"+o+"</span></span>) [ <span class="hljs-params">attempt</span> "+<span class="hljs-params">a</span>+"]: "+<span class="hljs-params">i</span>+"\<span class="hljs-params">n</span>"+<span class="hljs-params">s</span>+"\<span class="hljs-params">n</span>"+<span class="hljs-params">c</span>+" "+<span class="hljs-params">u</span>})}(<span class="hljs-params"><span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.u,<span class="hljs-keyword">this</span>.A,<span class="hljs-keyword">this</span>.m,<span class="hljs-keyword">this</span>.X,i,a</span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.$&amp;&amp;!<span class="hljs-keyword">this</span>.J</span>){<span class="hljs-params">t</span>:{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>){<span class="hljs-params">var</span> <span class="hljs-params">v</span>,<span class="hljs-params">w</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>;<span class="hljs-params">if</span>(<span class="hljs-params">(v=w.g?w.g.getResponseHeader(<span class="hljs-string">"X-HTTP-Initial-Response"</span></span>):<span class="hljs-params">null</span>)&amp;&amp;!<span class="hljs-params">jn</span>(<span class="hljs-params">v</span>)){<span class="hljs-params">var</span> <span class="hljs-params">T</span>=<span class="hljs-params">v</span>;<span class="hljs-params">break</span> <span class="hljs-params">t</span>}}<span class="hljs-params">T</span>=<span class="hljs-params">null</span>}<span class="hljs-params">if</span>(<span class="hljs-params">!(a=T</span>)){<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=3,<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">12</span></span>),<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">q</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">xt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.m,a,<span class="hljs-string">"Initial handshake response via X-HTTP-Initial-Response"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">J</span>=!0,<span class="hljs-params">Z</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,a</span>)}<span class="hljs-params">this</span>.<span class="hljs-params">U</span>?(<span class="hljs-params">y(<span class="hljs-keyword">this</span>,i,f</span>),<span class="hljs-params">ln</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">i</span>&amp;&amp;3==<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">Cr(<span class="hljs-keyword">this</span>.V,<span class="hljs-keyword">this</span>.W,<span class="hljs-string">"tick"</span>,<span class="hljs-keyword">this</span>.fb</span>),<span class="hljs-params">this</span>.<span class="hljs-params">W</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>)):(<span class="hljs-params">xt(<span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.m,f,<span class="hljs-literal">null</span></span>),<span class="hljs-params">Z</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,f</span>)),4==<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">I</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-number">4</span>==i?Bu(<span class="hljs-keyword">this</span>.l,<span class="hljs-keyword">this</span></span>):(<span class="hljs-params"><span class="hljs-keyword">this</span>.i=!<span class="hljs-number">1</span>,E(<span class="hljs-keyword">this</span></span>)))}<span class="hljs-params">else</span> 400==<span class="hljs-params">a</span>&amp;&amp;0&lt;<span class="hljs-params">f</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"Unknown SID"</span></span>)?(<span class="hljs-params"><span class="hljs-keyword">this</span>.o=<span class="hljs-number">3</span>,Le(<span class="hljs-number">12</span></span>)):(<span class="hljs-params"><span class="hljs-keyword">this</span>.o=<span class="hljs-number">0</span>,Le(<span class="hljs-number">13</span></span>)),<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">q</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}}}<span class="hljs-params">catch</span>(<span class="hljs-params">S</span>){}},<span class="hljs-params">O</span>.<span class="hljs-params">fb</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>){<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">Ct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>),<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ga</span><span class="hljs-params">()</span>;<span class="hljs-params">this</span>.<span class="hljs-params">C</span>&lt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params">N(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">y</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r,i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>&amp;&amp;4!=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">E</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))}},<span class="hljs-params">O</span>.<span class="hljs-params">cancel</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">I</span>=!0,<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">O</span>.<span class="hljs-params">eb</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=<span class="hljs-params">null</span>;<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>;0&lt;=<span class="hljs-params">r</span>-<span class="hljs-params">this</span>.<span class="hljs-params">Y</span>?(<span class="hljs-params"><span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span>"<span class="hljs-params">TIMEOUT</span>: "+<span class="hljs-params">i</span>})}(<span class="hljs-params"><span class="hljs-keyword">this</span>.j,<span class="hljs-keyword">this</span>.A</span>),2!=<span class="hljs-params">this</span>.<span class="hljs-params">K</span>&amp;&amp;(<span class="hljs-params">yn(<span class="hljs-number">3</span></span>),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">17</span></span>)),<span class="hljs-params">F</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=2,<span class="hljs-params">q</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)):<span class="hljs-params">x</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.Y-r</span>)},(<span class="hljs-params">O=Ee.prototype</span>).<span class="hljs-params">R</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">yt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r=[],i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.g.length;i++</span>)<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.h[<span class="hljs-keyword">this</span>.g[i]]</span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>},<span class="hljs-params">O</span>.<span class="hljs-params">T</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">yt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">concat</span><span class="hljs-params">()</span>},<span class="hljs-params">O</span>.<span class="hljs-params">get</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">me</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.h,r</span>)?<span class="hljs-params">this</span>.<span class="hljs-params">h</span>[<span class="hljs-params">r</span>]:<span class="hljs-params">i</span>},<span class="hljs-params">O</span>.<span class="hljs-params">set</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">me</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.h,r</span>)||(<span class="hljs-params"><span class="hljs-keyword">this</span>.i++,<span class="hljs-keyword">this</span>.g.push(r</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>[<span class="hljs-params">r</span>]=<span class="hljs-params">i</span>},<span class="hljs-params">O</span>.<span class="hljs-params">forEach</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=<span class="hljs-keyword">this</span>.T(</span>),<span class="hljs-params">o</span>=0;<span class="hljs-params">o</span>&lt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>;<span class="hljs-params">o</span>++){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>[<span class="hljs-params">o</span>],<span class="hljs-params">c</span>=<span class="hljs-params">this</span>.<span class="hljs-params">get</span>(<span class="hljs-params">a</span>);<span class="hljs-params">r</span>.<span class="hljs-params">call</span>(<span class="hljs-params">i,c,a,<span class="hljs-keyword">this</span></span>)}};<span class="hljs-params">var</span> <span class="hljs-params">Fr</span>=/^(<span class="hljs-params">?:([^:<span class="hljs-regexp">/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/</span>;<span class="hljs-keyword">function</span> ht(r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i=<span class="hljs-keyword">this</span>.s=<span class="hljs-keyword">this</span>.j=<span class="hljs-string">""</span>,<span class="hljs-keyword">this</span>.m=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.o=<span class="hljs-keyword">this</span>.l=<span class="hljs-string">""</span>,<span class="hljs-keyword">this</span>.g=!<span class="hljs-number">1</span>,r <span class="hljs-keyword">instanceof</span> ht</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">void</span> 0!==<span class="hljs-params">i</span>?<span class="hljs-params">i</span>:<span class="hljs-params">r</span>.<span class="hljs-params">g</span>,<span class="hljs-params">Vr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r.j</span>),<span class="hljs-params">this</span>.<span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">s</span>,<span class="hljs-params">Br</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r.i</span>),<span class="hljs-params">qr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r.m</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">r</span>.<span class="hljs-params">l</span>,<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">h</span>;<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">_s</span>;<span class="hljs-params">s</span>.<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">i</span>,<span class="hljs-params">i</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">s.g=<span class="hljs-keyword">new</span> Ee(i.g</span>),<span class="hljs-params">s</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>.<span class="hljs-params">h</span>),<span class="hljs-params">yu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">o</span>}<span class="hljs-params">else</span> <span class="hljs-params">r</span>&amp;&amp;(<span class="hljs-params">s=<span class="hljs-built_in">String</span>(r</span>).<span class="hljs-params">match</span>(<span class="hljs-params">Fr</span>))?(<span class="hljs-params"><span class="hljs-keyword">this</span>.g=!!i,Vr(<span class="hljs-keyword">this</span>,s[<span class="hljs-number">1</span>]||<span class="hljs-string">""</span>,!<span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">s</span>=<span class="hljs-params">gs</span>(<span class="hljs-params">s[<span class="hljs-number">2</span>]||<span class="hljs-string">""</span></span>),<span class="hljs-params">Br</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,s[<span class="hljs-number">3</span>]||<span class="hljs-string">""</span>,!<span class="hljs-number">0</span></span>),<span class="hljs-params">qr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,s[<span class="hljs-number">4</span>]</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">gs</span>(<span class="hljs-params">s[<span class="hljs-number">5</span>]||<span class="hljs-string">""</span>,!<span class="hljs-number">0</span></span>),<span class="hljs-params">yu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,s[<span class="hljs-number">6</span>]||<span class="hljs-string">""</span>,!<span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">gs</span>(<span class="hljs-params">s[<span class="hljs-number">7</span>]||<span class="hljs-string">""</span></span>)):(<span class="hljs-params"><span class="hljs-keyword">this</span>.g=!!i,<span class="hljs-keyword">this</span>.h=<span class="hljs-keyword">new</span> _s(<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.g</span>))}<span class="hljs-params">function</span> <span class="hljs-params">ot</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ht</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Vr</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span>.<span class="hljs-params">j</span>=<span class="hljs-params">s</span>?<span class="hljs-params">gs</span>(<span class="hljs-params">i,!<span class="hljs-number">0</span></span>):<span class="hljs-params">i</span>,<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">r.j=r.j.replace(<span class="hljs-regexp">/:$/</span>,<span class="hljs-string">""</span></span>))}<span class="hljs-params">function</span> <span class="hljs-params">Br</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span>.<span class="hljs-params">i</span>=<span class="hljs-params">s</span>?<span class="hljs-params">gs</span>(<span class="hljs-params">i,!<span class="hljs-number">0</span></span>):<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">qr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i=<span class="hljs-built_in">Number</span>(i</span>),<span class="hljs-params">isNaN</span>(<span class="hljs-params">i</span>)||0&gt;<span class="hljs-params">i</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Bad port number "</span>+i</span>);<span class="hljs-params">r</span>.<span class="hljs-params">m</span>=<span class="hljs-params">i</span>}<span class="hljs-params">else</span> <span class="hljs-params">r</span>.<span class="hljs-params">m</span>=<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">yu</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">_s</span>?(<span class="hljs-params">r.h=i,<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">i</span>&amp;&amp;!<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">Gt(r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">i</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(s,o</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">toLowerCase</span><span class="hljs-params">()</span>;<span class="hljs-params">o</span>!=<span class="hljs-params">a</span>&amp;&amp;(<span class="hljs-params">vu(<span class="hljs-keyword">this</span>,o</span>),<span class="hljs-params">bu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,a,s</span>))},<span class="hljs-params">r</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">j</span>=<span class="hljs-params">i</span>}(<span class="hljs-params">r.h,r.g</span>)):(<span class="hljs-params">s||(i=ys(i,rf</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">_s</span>(<span class="hljs-params">i,r.g</span>))}<span class="hljs-params">function</span> <span class="hljs-params">oe</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span>.<span class="hljs-params">h</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">function</span> <span class="hljs-params">zr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">oe</span>(<span class="hljs-params">r,<span class="hljs-string">"zx"</span>,<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">2147483648</span>*<span class="hljs-built_in">Math</span>.random(</span>)).<span class="hljs-params">toString</span>(<span class="hljs-params"><span class="hljs-number">36</span></span>)+<span class="hljs-params">Math</span>.<span class="hljs-params">abs</span>(<span class="hljs-params"><span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">2147483648</span>*<span class="hljs-built_in">Math</span>.random(</span>))^<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>).<span class="hljs-params">toString</span>(<span class="hljs-params"><span class="hljs-number">36</span></span>)),<span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">gs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>?<span class="hljs-params">i</span>?<span class="hljs-params">decodeURI</span>(<span class="hljs-params">r.replace(<span class="hljs-regexp">/%25/g</span>,<span class="hljs-string">"%2525"</span></span>)):<span class="hljs-params">decodeURIComponent</span>(<span class="hljs-params">r</span>):""}<span class="hljs-params">function</span> <span class="hljs-params">ys</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span>"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?(<span class="hljs-params">r=<span class="hljs-built_in">encodeURI</span>(r</span>).<span class="hljs-params">replace</span>(<span class="hljs-params">i,tf</span>),<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">r=r.replace(<span class="hljs-regexp">/%25([0-9a-fA-F]{2})/g</span>,<span class="hljs-string">"%$1"</span></span>)),<span class="hljs-params">r</span>):<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">tf</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"%"+(<span class="hljs-params">(r=r.charCodeAt(<span class="hljs-number">0</span></span>))&gt;&gt;4&amp;15).<span class="hljs-params">toString</span>(<span class="hljs-params"><span class="hljs-number">16</span></span>)+(<span class="hljs-params"><span class="hljs-number">15</span>&amp;r</span>).<span class="hljs-params">toString</span>(<span class="hljs-params"><span class="hljs-number">16</span></span>)}<span class="hljs-params">ht</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">toString</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">r</span>=[],<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">j</span>;<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">ys(i,_u,!<span class="hljs-number">0</span></span>),":");<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">i</span>;<span class="hljs-params">return</span>(<span class="hljs-params">s||<span class="hljs-string">"file"</span>==i</span>)&amp;&amp;(<span class="hljs-params">r.push(<span class="hljs-string">"//"</span></span>),(<span class="hljs-params">i=<span class="hljs-keyword">this</span>.s</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">ys(i,_u,!<span class="hljs-number">0</span></span>),"@"),<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">String</span>(s</span>)).<span class="hljs-params">replace</span>(<span class="hljs-params"><span class="hljs-regexp">/%25([0-9a-fA-F]{2})/g</span>,<span class="hljs-string">"%$1"</span></span>)),<span class="hljs-params">null</span>!=(<span class="hljs-params">s=<span class="hljs-keyword">this</span>.m</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">":"</span>,<span class="hljs-built_in">String</span>(s</span>))),(<span class="hljs-params">s=<span class="hljs-keyword">this</span>.l</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.i&amp;&amp;<span class="hljs-string">"/"</span>!=s.charAt(<span class="hljs-number">0</span></span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">ys(s,<span class="hljs-string">"/"</span>==s.charAt(<span class="hljs-number">0</span></span>)?<span class="hljs-params">sf</span>:<span class="hljs-params">nf</span>,!0))),(<span class="hljs-params">s=<span class="hljs-keyword">this</span>.h.toString(</span>))&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">"?"</span>,s</span>),(<span class="hljs-params">s=<span class="hljs-keyword">this</span>.o</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">"#"</span>,ys(s,<span class="hljs-keyword">of</span></span>)),<span class="hljs-params">r</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">""</span></span>)};<span class="hljs-params">var</span> <span class="hljs-params">_u</span>=/[#\/\?@]/<span class="hljs-params">g</span>,<span class="hljs-params">nf</span>=/[#\?:]/<span class="hljs-params">g</span>,<span class="hljs-params">sf</span>=/[#\?]/<span class="hljs-params">g</span>,<span class="hljs-params">rf</span>=/[#\?@]/<span class="hljs-params">g</span>,<span class="hljs-params">of</span>=/#/<span class="hljs-params">g</span>;<span class="hljs-params">function</span> <span class="hljs-params">_s</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">r</span>||<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=!!<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Gt</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>||(<span class="hljs-params">r.g=<span class="hljs-keyword">new</span> Ee,r.h=<span class="hljs-number">0</span>,r.i&amp;&amp;<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">r</span>.<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"&amp;"</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=<span class="hljs-number">0</span>;s&lt;r.length;s++</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>[<span class="hljs-params">s</span>].<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"="</span></span>),<span class="hljs-params">a</span>=<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>&lt;=o</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>[<span class="hljs-params">s</span>].<span class="hljs-params">substring</span>(<span class="hljs-params"><span class="hljs-number">0</span>,o</span>);<span class="hljs-params">a</span>=<span class="hljs-params">r</span>[<span class="hljs-params">s</span>].<span class="hljs-params">substring</span>(<span class="hljs-params">o+<span class="hljs-number">1</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>[<span class="hljs-params">s</span>];<span class="hljs-params">i</span>(<span class="hljs-params">c,a?<span class="hljs-built_in">decodeURIComponent</span>(a.replace(<span class="hljs-regexp">/\+/g</span>,<span class="hljs-string">" "</span></span>)):"")}}}(<span class="hljs-params">r.i,<span class="hljs-keyword">function</span>(i,s</span>){<span class="hljs-params">r</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-built_in">decodeURIComponent</span>(i.replace(<span class="hljs-regexp">/\+/g</span>,<span class="hljs-string">" "</span></span>)),<span class="hljs-params">s</span>)}))}<span class="hljs-params">function</span> <span class="hljs-params">vu</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">Gt</span>(<span class="hljs-params">r</span>),<span class="hljs-params">i</span>=<span class="hljs-params">oi</span>(<span class="hljs-params">r,i</span>),<span class="hljs-params">me</span>(<span class="hljs-params">r.g.h,i</span>)&amp;&amp;(<span class="hljs-params">r.i=<span class="hljs-literal">null</span>,r.h-=r.g.get(i</span>).<span class="hljs-params">length</span>,<span class="hljs-params">me</span>(<span class="hljs-params">(r=r.g</span>).<span class="hljs-params">h</span>,<span class="hljs-params">i</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">delete</span> r.h[i],r.i--,r.g.length&gt;<span class="hljs-number">2</span>*r.i&amp;&amp;yt(r</span>)))}<span class="hljs-params">function</span> <span class="hljs-params">wu</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Gt</span>(<span class="hljs-params">r</span>),<span class="hljs-params">i</span>=<span class="hljs-params">oi</span>(<span class="hljs-params">r,i</span>),<span class="hljs-params">me</span>(<span class="hljs-params">r.g.h,i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">bu</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">vu</span>(<span class="hljs-params">r,i</span>),0&lt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params">r.i=<span class="hljs-literal">null</span>,r.g.set(oi(r,i</span>),<span class="hljs-params">$i</span>(<span class="hljs-params">s</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">h</span>+=<span class="hljs-params">s</span>.<span class="hljs-params">length</span>)}<span class="hljs-params">function</span> <span class="hljs-params">oi</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>=<span class="hljs-params">String</span>(<span class="hljs-params">i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">i=i.toLowerCase(</span>)),<span class="hljs-params">i</span>}(<span class="hljs-params">O=_s.prototype</span>).<span class="hljs-params">add</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">Gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>=<span class="hljs-params">oi</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r</span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">get</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>||<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">set</span>(<span class="hljs-params">r,s=[]</span>),<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>+=1,<span class="hljs-params">this</span>},<span class="hljs-params">O</span>.<span class="hljs-params">forEach</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">Gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(s,o</span>){<span class="hljs-params">an</span>(<span class="hljs-params">s,<span class="hljs-keyword">function</span>(a</span>){<span class="hljs-params">r</span>.<span class="hljs-params">call</span>(<span class="hljs-params">i,a,o,<span class="hljs-keyword">this</span></span>)},<span class="hljs-params">this</span>)},<span class="hljs-params">this</span>)},<span class="hljs-params">O</span>.<span class="hljs-params">T</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">Gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r=<span class="hljs-keyword">this</span>.g.R(</span>),<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">T</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>=[],<span class="hljs-params">o</span>=0;<span class="hljs-params">o</span>&lt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>;<span class="hljs-params">o</span>++)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=r[o],c=<span class="hljs-number">0</span>;c&lt;a.length;c++</span>)<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i[o]</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>},<span class="hljs-params">O</span>.<span class="hljs-params">R</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">wu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r</span>)&amp;&amp;(<span class="hljs-params">i=lr(i,<span class="hljs-keyword">this</span>.g.get(oi(<span class="hljs-keyword">this</span>,r</span>))));<span class="hljs-params">else</span>{<span class="hljs-params">r</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">R</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=<span class="hljs-number">0</span>;s&lt;r.length;s++</span>)<span class="hljs-params">i</span>=<span class="hljs-params">lr</span>(<span class="hljs-params">i,r[s]</span>)}<span class="hljs-params">return</span> <span class="hljs-params">i</span>},<span class="hljs-params">O</span>.<span class="hljs-params">set</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Gt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">null</span>,<span class="hljs-params">wu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,r=oi(<span class="hljs-keyword">this</span>,r</span>))&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.h-=<span class="hljs-keyword">this</span>.g.get(r</span>).<span class="hljs-params">length</span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">set</span>(<span class="hljs-params">r,[i]</span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>+=1,<span class="hljs-params">this</span>},<span class="hljs-params">O</span>.<span class="hljs-params">get</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>&amp;&amp;0&lt;(<span class="hljs-params">r=<span class="hljs-keyword">this</span>.R(r</span>)).<span class="hljs-params">length</span>?<span class="hljs-params">String</span>(<span class="hljs-params">r[<span class="hljs-number">0</span>]</span>):<span class="hljs-params">i</span>},<span class="hljs-params">O</span>.<span class="hljs-params">toString</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i</span>)<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">i</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.g</span>)<span class="hljs-params">return</span>"";<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r=[],i=<span class="hljs-keyword">this</span>.g.T(</span>),<span class="hljs-params">s</span>=0;<span class="hljs-params">s</span>&lt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>;<span class="hljs-params">s</span>++){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>[<span class="hljs-params">s</span>],<span class="hljs-params">a</span>=<span class="hljs-params">encodeURIComponent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(o</span>));<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">R</span>(<span class="hljs-params">o</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>;c&lt;o.length;c++</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>;""!==<span class="hljs-params">o</span>[<span class="hljs-params">c</span>]&amp;&amp;(<span class="hljs-params">u+=<span class="hljs-string">"="</span>+<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">String</span>(o[c]</span>))),<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">u</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"&amp;"</span></span>)};<span class="hljs-params">var</span> <span class="hljs-params">cf</span>=<span class="hljs-params">function</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">s</span>};<span class="hljs-params">function</span> <span class="hljs-params">Tu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">r</span>||<span class="hljs-params">uf</span>,<span class="hljs-params">r</span>=<span class="hljs-params">G</span>.<span class="hljs-params">PerformanceNavigationTiming</span>?0&lt;(<span class="hljs-params">r=G.performance.getEntriesByType(<span class="hljs-string">"navigation"</span></span>)).<span class="hljs-params">length</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-string">"hq"</span>==r[<span class="hljs-number">0</span>].nextHopProtocol||<span class="hljs-string">"h2"</span>==r[<span class="hljs-number">0</span>].nextHopProtocol</span>):!!(<span class="hljs-params">G.g&amp;&amp;G.g.Ea&amp;&amp;G.g.Ea(</span>)&amp;&amp;<span class="hljs-params">G</span>.<span class="hljs-params">g</span>.<span class="hljs-params">Ea</span><span class="hljs-params">()</span>.<span class="hljs-params">Zb</span>),<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">r</span>?<span class="hljs-params">this</span>.<span class="hljs-params">l</span>:1,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,1&lt;<span class="hljs-params">this</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=[]}<span class="hljs-params">var</span> <span class="hljs-params">uf</span>=10;<span class="hljs-params">function</span> <span class="hljs-params">Eu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>.<span class="hljs-params">h</span>||!!<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">size</span>&gt;=<span class="hljs-params">r</span>.<span class="hljs-params">j</span>}<span class="hljs-params">function</span> <span class="hljs-params">Iu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">h</span>?1:<span class="hljs-params">r</span>.<span class="hljs-params">g</span>?<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">size</span>:0}<span class="hljs-params">function</span> <span class="hljs-params">Jo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">h</span>?<span class="hljs-params">r</span>.<span class="hljs-params">h</span>==<span class="hljs-params">i</span>:!!<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Xo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>?<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">add</span>(<span class="hljs-params">i</span>):<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Su</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">h</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">h</span>==<span class="hljs-params">i</span>?<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>:<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">xu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>,<span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=r.h</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">i</span>.<span class="hljs-params">concat</span>(<span class="hljs-params">r.h.D</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=r.g&amp;&amp;<span class="hljs-number">0</span>!==r.g.size</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">i</span>;<span class="hljs-params">try</span>{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=Vo(r.g.values(</span>)),<span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;!<span class="hljs-params">c</span>.<span class="hljs-params">done</span>;<span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>)<span class="hljs-params">o</span>=<span class="hljs-params">o</span>.<span class="hljs-params">concat</span>(<span class="hljs-params">c.value.D</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">h</span>){<span class="hljs-params">i</span>={<span class="hljs-params">error</span>:<span class="hljs-params">h</span>}}<span class="hljs-params">finally</span>{<span class="hljs-params">try</span>{<span class="hljs-params">c</span>&amp;&amp;!<span class="hljs-params">c</span>.<span class="hljs-params">done</span>&amp;&amp;(<span class="hljs-params">s=a.<span class="hljs-keyword">return</span></span>)&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">call</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">finally</span>{<span class="hljs-params">if</span>(<span class="hljs-params">i</span>)<span class="hljs-params">throw</span> <span class="hljs-params">i</span>.<span class="hljs-params">error</span>}}<span class="hljs-params">return</span> <span class="hljs-params">o</span>}<span class="hljs-params">return</span> <span class="hljs-params">$i</span>(<span class="hljs-params">r.i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">ea</span><span class="hljs-params">()</span>{}<span class="hljs-params">function</span> <span class="hljs-params">lf</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">new</span> <span class="hljs-params">ea</span>}<span class="hljs-params">function</span> <span class="hljs-params">hf</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>||"";<span class="hljs-params">try</span>{<span class="hljs-params">je</span>(<span class="hljs-params">r,<span class="hljs-keyword">function</span>(a,c</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>;<span class="hljs-params">on</span>(<span class="hljs-params">a</span>)&amp;&amp;(<span class="hljs-params">u=br(a</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">push</span>(<span class="hljs-params">o+c+<span class="hljs-string">"="</span>+<span class="hljs-built_in">encodeURIComponent</span>(u</span>))})}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">throw</span> <span class="hljs-params">i</span>.<span class="hljs-params">push</span>(<span class="hljs-params">o+<span class="hljs-string">"type="</span>+<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-string">"_badmap"</span></span>)),<span class="hljs-params">a</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Gr</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">try</span>{<span class="hljs-params">i</span>.<span class="hljs-params">onload</span>=<span class="hljs-params">null</span>,<span class="hljs-params">i</span>.<span class="hljs-params">onerror</span>=<span class="hljs-params">null</span>,<span class="hljs-params">i</span>.<span class="hljs-params">onabort</span>=<span class="hljs-params">null</span>,<span class="hljs-params">i</span>.<span class="hljs-params">ontimeout</span>=<span class="hljs-params">null</span>,<span class="hljs-params">a</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">c</span>){}}<span class="hljs-params">function</span> <span class="hljs-params">vs</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">r</span>.<span class="hljs-params">$b</span>||<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">r</span>.<span class="hljs-params">ib</span>||!1}<span class="hljs-params">function</span> <span class="hljs-params">jr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">ce</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">u</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>=<span class="hljs-params">ta</span>,<span class="hljs-params">this</span>.<span class="hljs-params">status</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">responseType</span>=<span class="hljs-params">this</span>.<span class="hljs-params">responseText</span>=<span class="hljs-params">this</span>.<span class="hljs-params">response</span>=<span class="hljs-params">this</span>.<span class="hljs-params">statusText</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">onreadystatechange</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">new</span> <span class="hljs-params">Headers</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>="<span class="hljs-params">GET</span>",<span class="hljs-params">this</span>.<span class="hljs-params">B</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">null</span>}<span class="hljs-params">Tu</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">cancel</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">r</span>,<span class="hljs-params">i</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i=xu(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>)<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">null</span>;<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g&amp;&amp;<span class="hljs-number">0</span>!==<span class="hljs-keyword">this</span>.g.size</span>){<span class="hljs-params">try</span>{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s=Vo(<span class="hljs-keyword">this</span>.g.values(</span>)),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;!<span class="hljs-params">o</span>.<span class="hljs-params">done</span>;<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>)<span class="hljs-params">o</span>.<span class="hljs-params">value</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">c</span>){<span class="hljs-params">r</span>={<span class="hljs-params">error</span>:<span class="hljs-params">c</span>}}<span class="hljs-params">finally</span>{<span class="hljs-params">try</span>{<span class="hljs-params">o</span>&amp;&amp;!<span class="hljs-params">o</span>.<span class="hljs-params">done</span>&amp;&amp;(<span class="hljs-params">i=s.<span class="hljs-keyword">return</span></span>)&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">call</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">finally</span>{<span class="hljs-params">if</span>(<span class="hljs-params">r</span>)<span class="hljs-params">throw</span> <span class="hljs-params">r</span>.<span class="hljs-params">error</span>}}<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>}},<span class="hljs-params">ea</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">stringify</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">G</span>.<span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>(<span class="hljs-params">r,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>)},<span class="hljs-params">ea</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">parse</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">G</span>.<span class="hljs-params">JSON</span>.<span class="hljs-params">parse</span>(<span class="hljs-params">r,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>)},<span class="hljs-params">Te</span>(<span class="hljs-params">vs,Lr</span>),<span class="hljs-params">vs</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">g</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">jr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.l,<span class="hljs-keyword">this</span>.j</span>)},<span class="hljs-params">vs</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">i</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">r</span>}}(<span class="hljs-params">{}</span>),<span class="hljs-params">Te</span>(<span class="hljs-params">jr,ce</span>);<span class="hljs-params">var</span> <span class="hljs-params">ta</span>=0;<span class="hljs-params">function</span> <span class="hljs-params">Du</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">j</span>.<span class="hljs-params">read</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">r.Sa.bind(r</span>)).<span class="hljs-params">catch</span>(<span class="hljs-params">r.ha.bind(r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">ws</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">readyState</span>=4,<span class="hljs-params">r</span>.<span class="hljs-params">l</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">j</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">A</span>=<span class="hljs-params">null</span>,<span class="hljs-params">bs</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">bs</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">onreadystatechange</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">onreadystatechange</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r</span>)}(<span class="hljs-params">O=jr.prototype</span>).<span class="hljs-params">open</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.readyState!=ta</span>)<span class="hljs-params">throw</span> <span class="hljs-params">this</span>.<span class="hljs-params">abort</span><span class="hljs-params">()</span>,<span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Error reopening a connection"</span></span>);<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>=1,<span class="hljs-params">bs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">O</span>.<span class="hljs-params">send</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>!=<span class="hljs-keyword">this</span>.readyState</span>)<span class="hljs-params">throw</span> <span class="hljs-params">this</span>.<span class="hljs-params">abort</span><span class="hljs-params">()</span>,<span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"need to call open() first. "</span></span>);<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=!0;<span class="hljs-params">var</span> <span class="hljs-params">i</span>={<span class="hljs-params">headers</span>:<span class="hljs-params">this</span>.<span class="hljs-params">v</span>,<span class="hljs-params">method</span>:<span class="hljs-params">this</span>.<span class="hljs-params">C</span>,<span class="hljs-params">credentials</span>:<span class="hljs-params">this</span>.<span class="hljs-params">m</span>,<span class="hljs-params">cache</span>:<span class="hljs-params">void</span> 0};<span class="hljs-params">r</span>&amp;&amp;(<span class="hljs-params">i.body=r</span>),(<span class="hljs-params"><span class="hljs-keyword">this</span>.D||G</span>).<span class="hljs-params">fetch</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Request(<span class="hljs-keyword">this</span>.B,i</span>)).<span class="hljs-params">then</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Va.bind(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">ha</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">abort</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">response</span>=<span class="hljs-params">this</span>.<span class="hljs-params">responseText</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">new</span> <span class="hljs-params">Headers</span>,<span class="hljs-params">this</span>.<span class="hljs-params">status</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">j</span>.<span class="hljs-params">cancel</span>(<span class="hljs-params"><span class="hljs-string">"Request was aborted."</span></span>),1&lt;=<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;4!=<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g=!<span class="hljs-number">1</span>,ws(<span class="hljs-keyword">this</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>=<span class="hljs-params">ta</span>},<span class="hljs-params">O</span>.<span class="hljs-params">Va</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g&amp;&amp;(<span class="hljs-keyword">this</span>.l=r,<span class="hljs-keyword">this</span>.h||(<span class="hljs-keyword">this</span>.status=<span class="hljs-keyword">this</span>.l.status,<span class="hljs-keyword">this</span>.statusText=<span class="hljs-keyword">this</span>.l.statusText,<span class="hljs-keyword">this</span>.h=r.headers,<span class="hljs-keyword">this</span>.readyState=<span class="hljs-number">2</span>,bs(<span class="hljs-keyword">this</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.readyState=<span class="hljs-number">3</span>,bs(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>)))<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"arraybuffer"</span>===<span class="hljs-keyword">this</span>.responseType</span>)<span class="hljs-params">r</span>.<span class="hljs-params">arrayBuffer</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Ta.bind(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">ha</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>));<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==G.ReadableStream&amp;&amp;<span class="hljs-string">"body"</span><span class="hljs-keyword">in</span> r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.j=r.body.getReader(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">u</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.responseType</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">'responseType must be empty for "streamBinaryChunks" mode responses.'</span></span>);<span class="hljs-params">this</span>.<span class="hljs-params">response</span>=[]}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">response</span>=<span class="hljs-params">this</span>.<span class="hljs-params">responseText</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">new</span> <span class="hljs-params">TextDecoder</span>;<span class="hljs-params">Du</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">r</span>.<span class="hljs-params">text</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Ua.bind(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">ha</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">Sa</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.u&amp;&amp;r.value</span>)<span class="hljs-params">this</span>.<span class="hljs-params">response</span>.<span class="hljs-params">push</span>(<span class="hljs-params">r.value</span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.u</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">value</span>?<span class="hljs-params">r</span>.<span class="hljs-params">value</span>:<span class="hljs-params">new</span> <span class="hljs-params">Uint8Array</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>);(<span class="hljs-params">i=<span class="hljs-keyword">this</span>.A.decode(i,{stream:!r.done}</span>))&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.response=<span class="hljs-keyword">this</span>.responseText+=i</span>)}<span class="hljs-params">r</span>.<span class="hljs-params">done</span>?<span class="hljs-params">ws</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>):<span class="hljs-params">bs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),3==<span class="hljs-params">this</span>.<span class="hljs-params">readyState</span>&amp;&amp;<span class="hljs-params">Du</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}},<span class="hljs-params">O</span>.<span class="hljs-params">Ua</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.response=<span class="hljs-keyword">this</span>.responseText=r,ws(<span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">Ta</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.response=r,ws(<span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">ha</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">ws</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">O</span>.<span class="hljs-params">setRequestHeader</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">v</span>.<span class="hljs-params">append</span>(<span class="hljs-params">r,i</span>)},<span class="hljs-params">O</span>.<span class="hljs-params">getResponseHeader</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">h</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">get</span>(<span class="hljs-params">r.toLowerCase(</span>))||""},<span class="hljs-params">O</span>.<span class="hljs-params">getAllResponseHeaders</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.h</span>)<span class="hljs-params">return</span>"";<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> r=[],i=<span class="hljs-keyword">this</span>.h.entries(</span>),<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;!<span class="hljs-params">s</span>.<span class="hljs-params">done</span>;)<span class="hljs-params">r</span>.<span class="hljs-params">push</span>(<span class="hljs-params">(s=s.value</span>)[0]+": "+<span class="hljs-params">s</span>[1]),<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"\r\n"</span></span>)},<span class="hljs-params">Object</span>.<span class="hljs-params">defineProperty</span>(<span class="hljs-params">jr.prototype,<span class="hljs-string">"withCredentials"</span>,{get:<span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">return</span>"<span class="hljs-params">include</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">m</span>},<span class="hljs-params">set</span>:<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">r</span>?"<span class="hljs-params">include</span>":"<span class="hljs-params">same</span>-<span class="hljs-params">origin</span>"}});<span class="hljs-params">var</span> <span class="hljs-params">ff</span>=<span class="hljs-params">G</span>.<span class="hljs-params">JSON</span>.<span class="hljs-params">parse</span>;<span class="hljs-params">function</span> <span class="hljs-params">ge</span>(<span class="hljs-params">r</span>){<span class="hljs-params">ce</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">headers</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ee</span>,<span class="hljs-params">this</span>.<span class="hljs-params">u</span>=<span class="hljs-params">r</span>||<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">H</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">J</span>=<span class="hljs-params">Cu</span>,<span class="hljs-params">this</span>.<span class="hljs-params">K</span>=<span class="hljs-params">this</span>.<span class="hljs-params">L</span>=!1}<span class="hljs-params">Te</span>(<span class="hljs-params">ge,ce</span>);<span class="hljs-params">var</span> <span class="hljs-params">Cu</span>="",<span class="hljs-params">pf</span>=/^<span class="hljs-params">https</span>?<span class="hljs-params">$</span>/<span class="hljs-params">i</span>,<span class="hljs-params">mf</span>=["<span class="hljs-params">POST</span>","<span class="hljs-params">PUT</span>"];<span class="hljs-params">function</span> <span class="hljs-params">yf</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">content</span>-<span class="hljs-params">type</span>"==<span class="hljs-params">r</span>.<span class="hljs-params">toLowerCase</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">Ru</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=!1,<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">r.l=!<span class="hljs-number">0</span>,r.g.abort(</span>),<span class="hljs-params">r</span>.<span class="hljs-params">l</span>=!1),<span class="hljs-params">r</span>.<span class="hljs-params">j</span>=<span class="hljs-params">i</span>,<span class="hljs-params">r</span>.<span class="hljs-params">m</span>=5,<span class="hljs-params">Au</span>(<span class="hljs-params">r</span>),<span class="hljs-params">Hr</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Au</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">D</span>||(<span class="hljs-params">r.D=!<span class="hljs-number">0</span>,fe(r,<span class="hljs-string">"complete"</span></span>),<span class="hljs-params">fe</span>(<span class="hljs-params">r,<span class="hljs-string">"error"</span></span>))}<span class="hljs-params">function</span> <span class="hljs-params">ku</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.h&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==Hi&amp;&amp;(!r.C[<span class="hljs-number">1</span>]||<span class="hljs-number">4</span>!=Ct(r</span>)||2!=<span class="hljs-params">r</span>.<span class="hljs-params">ba</span><span class="hljs-params">()</span>))<span class="hljs-params">if</span>(<span class="hljs-params">r.v&amp;&amp;<span class="hljs-number">4</span>==Ct(r</span>))<span class="hljs-params">Dr</span>(<span class="hljs-params">r.Fa,<span class="hljs-number">0</span>,r</span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">fe(r,<span class="hljs-string">"readystatechange"</span></span>),4==<span class="hljs-params">Ct</span>(<span class="hljs-params">r</span>)){<span class="hljs-params">r</span>.<span class="hljs-params">h</span>=!1;<span class="hljs-params">try</span>{<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">ba</span><span class="hljs-params">()</span>;<span class="hljs-params">e</span>:<span class="hljs-params">switch</span>(<span class="hljs-params">i</span>){<span class="hljs-params">case</span> 200:<span class="hljs-params">case</span> 201:<span class="hljs-params">case</span> 202:<span class="hljs-params">case</span> 204:<span class="hljs-params">case</span> 206:<span class="hljs-params">case</span> 304:<span class="hljs-params">case</span> 1223:<span class="hljs-params">var</span> <span class="hljs-params">s</span>=!0;<span class="hljs-params">break</span> <span class="hljs-params">e</span>;<span class="hljs-params">default</span>:<span class="hljs-params">s</span>=!1}<span class="hljs-params">if</span>(<span class="hljs-params">!(o=s</span>)){<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">if</span>(<span class="hljs-params">a=<span class="hljs-number">0</span>===i</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">String</span>(<span class="hljs-params">r.H</span>).<span class="hljs-params">match</span>(<span class="hljs-params">Fr</span>)[1]||<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!c&amp;&amp;G.self&amp;&amp;G.self.location</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">G</span>.<span class="hljs-params">self</span>.<span class="hljs-params">location</span>.<span class="hljs-params">protocol</span>;<span class="hljs-params">c</span>=<span class="hljs-params">u</span>.<span class="hljs-params">substr</span>(<span class="hljs-params"><span class="hljs-number">0</span>,u.length<span class="hljs-number">-1</span></span>)}<span class="hljs-params">a</span>=!<span class="hljs-params">pf</span>.<span class="hljs-params">test</span>(<span class="hljs-params">c?c.toLowerCase(</span>):"")}<span class="hljs-params">o</span>=<span class="hljs-params">a</span>}<span class="hljs-params">if</span>(<span class="hljs-params">o</span>)<span class="hljs-params">fe</span>(<span class="hljs-params">r,<span class="hljs-string">"complete"</span></span>),<span class="hljs-params">fe</span>(<span class="hljs-params">r,<span class="hljs-string">"success"</span></span>);<span class="hljs-params">else</span>{<span class="hljs-params">r</span>.<span class="hljs-params">m</span>=6;<span class="hljs-params">try</span>{<span class="hljs-params">var</span> <span class="hljs-params">h</span>=2&lt;<span class="hljs-params">Ct</span>(<span class="hljs-params">r</span>)?<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">statusText</span>:""}<span class="hljs-params">catch</span>(<span class="hljs-params">f</span>){<span class="hljs-params">h</span>=""}<span class="hljs-params">r</span>.<span class="hljs-params">j</span>=<span class="hljs-params">h</span>+" ["+<span class="hljs-params">r</span>.<span class="hljs-params">ba</span><span class="hljs-params">()</span>+"]",<span class="hljs-params">Au</span>(<span class="hljs-params">r</span>)}}<span class="hljs-params">finally</span>{<span class="hljs-params">Hr</span>(<span class="hljs-params">r</span>)}}}<span class="hljs-params">function</span> <span class="hljs-params">Hr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.g</span>){<span class="hljs-params">Pu</span>(<span class="hljs-params">r</span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">g</span>,<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">C</span>[0]?<span class="hljs-params">zn</span>:<span class="hljs-params">null</span>;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>,<span class="hljs-params">r</span>.<span class="hljs-params">C</span>=<span class="hljs-params">null</span>,<span class="hljs-params">i</span>||<span class="hljs-params">fe</span>(<span class="hljs-params">r,<span class="hljs-string">"ready"</span></span>);<span class="hljs-params">try</span>{<span class="hljs-params">s</span>.<span class="hljs-params">onreadystatechange</span>=<span class="hljs-params">o</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){}}}<span class="hljs-params">function</span> <span class="hljs-params">Pu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">K</span>&amp;&amp;(<span class="hljs-params">r.g.ontimeout=<span class="hljs-literal">null</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">A</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(r.A</span>),<span class="hljs-params">r</span>.<span class="hljs-params">A</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ct</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>?<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">readyState</span>:0}<span class="hljs-params">function</span> <span class="hljs-params">Nu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">try</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!r.g</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"response"</span><span class="hljs-keyword">in</span> r.g</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">response</span>;<span class="hljs-params">switch</span>(<span class="hljs-params">r.J</span>){<span class="hljs-params">case</span> <span class="hljs-params">Cu</span>:<span class="hljs-params">case</span>"<span class="hljs-params">text</span>":<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">responseText</span>;<span class="hljs-params">case</span>"<span class="hljs-params">arraybuffer</span>":<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"mozResponseArrayBuffer"</span><span class="hljs-keyword">in</span> r.g</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">mozResponseArrayBuffer</span>}<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>}}<span class="hljs-params">function</span> <span class="hljs-params">na</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">e</span>:{<span class="hljs-params">for</span>(<span class="hljs-params">o <span class="hljs-keyword">in</span> s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=!1;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">o</span>=!0}<span class="hljs-params">o</span>||(<span class="hljs-params">s=<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>="";<span class="hljs-params">return</span> <span class="hljs-params">Zi</span>(<span class="hljs-params">r,<span class="hljs-keyword">function</span>(s,o</span>){<span class="hljs-params">i</span>+=<span class="hljs-params">o</span>,<span class="hljs-params">i</span>+=":",<span class="hljs-params">i</span>+=<span class="hljs-params">s</span>,<span class="hljs-params">i</span>+="\<span class="hljs-params">r</span>\<span class="hljs-params">n</span>"}),<span class="hljs-params">i</span>}(<span class="hljs-params">s</span>),"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">null</span>!=<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">encodeURIComponent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>(s</span>)):<span class="hljs-params">oe</span>(<span class="hljs-params">r,i,s</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Ts</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">internalChannelParams</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">internalChannelParams</span>[<span class="hljs-params">r</span>]||<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Lu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">za</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">si</span>,<span class="hljs-params">this</span>.<span class="hljs-params">la</span>=<span class="hljs-params">this</span>.<span class="hljs-params">oa</span>=<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=<span class="hljs-params">this</span>.<span class="hljs-params">W</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">sa</span>=<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=<span class="hljs-params">this</span>.<span class="hljs-params">aa</span>=<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">P</span>=<span class="hljs-params">this</span>.<span class="hljs-params">s</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Za</span>=<span class="hljs-params">this</span>.<span class="hljs-params">V</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">Xa</span>=<span class="hljs-params">Ts</span>(<span class="hljs-params"><span class="hljs-string">"failFast"</span>,!<span class="hljs-number">1</span>,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">this</span>.<span class="hljs-params">u</span>=<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">X</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">I</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ta</span>=<span class="hljs-params">this</span>.<span class="hljs-params">U</span>=-1,<span class="hljs-params">this</span>.<span class="hljs-params">Y</span>=<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">Pa</span>=<span class="hljs-params">Ts</span>(<span class="hljs-params"><span class="hljs-string">"baseRetryDelayMs"</span>,<span class="hljs-number">5e3</span>,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">$a</span>=<span class="hljs-params">Ts</span>(<span class="hljs-params"><span class="hljs-string">"retryDelaySeedMs"</span>,<span class="hljs-number">1e4</span>,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ya</span>=<span class="hljs-params">Ts</span>(<span class="hljs-params"><span class="hljs-string">"forwardChannelMaxRetries"</span>,<span class="hljs-number">2</span>,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">ra</span>=<span class="hljs-params">Ts</span>(<span class="hljs-params"><span class="hljs-string">"forwardChannelRequestTimeoutMs"</span>,<span class="hljs-number">2e4</span>,r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">qa</span>=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">xmlHttpFactory</span>||<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">Ba</span>=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Yb</span>||!1,<span class="hljs-params">this</span>.<span class="hljs-params">K</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">H</span>=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">supportsCrossDomainXhr</span>||!1,<span class="hljs-params">this</span>.<span class="hljs-params">J</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">Tu</span>(<span class="hljs-params">r&amp;&amp;r.concurrentRequestLimit</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ca</span>=<span class="hljs-params">new</span> <span class="hljs-params">lf</span>,<span class="hljs-params">this</span>.<span class="hljs-params">ja</span>=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">fastHandshake</span>||!1,<span class="hljs-params">this</span>.<span class="hljs-params">Ra</span>=<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Wb</span>||!1,<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Aa</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">Aa</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">forceLongPolling</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.X=!<span class="hljs-number">1</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">$</span>=!<span class="hljs-params">this</span>.<span class="hljs-params">ja</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">X</span>&amp;&amp;<span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">detectBufferingProxy</span>||!1,<span class="hljs-params">this</span>.<span class="hljs-params">ka</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">O</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">L</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Wa</span>=!<span class="hljs-params">r</span>||!1!==<span class="hljs-params">r</span>.<span class="hljs-params">Xb</span>}<span class="hljs-params">function</span> <span class="hljs-params">ia</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">Mu(r</span>),3==<span class="hljs-params">r</span>.<span class="hljs-params">G</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">V</span>++,<span class="hljs-params">s</span>=<span class="hljs-params">ot</span>(<span class="hljs-params">r.F</span>);<span class="hljs-params">oe</span>(<span class="hljs-params">s,<span class="hljs-string">"SID"</span>,r.J</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">s,<span class="hljs-string">"RID"</span>,i</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">s,<span class="hljs-string">"TYPE"</span>,<span class="hljs-string">"terminate"</span></span>),<span class="hljs-params">Es</span>(<span class="hljs-params">r,s</span>),(<span class="hljs-params">i=<span class="hljs-keyword">new</span> wn(r,r.h,i,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>)).<span class="hljs-params">K</span>=2,<span class="hljs-params">i</span>.<span class="hljs-params">v</span>=<span class="hljs-params">zr</span>(<span class="hljs-params">ot(s</span>)),<span class="hljs-params">s</span>=!1,<span class="hljs-params">G</span>.<span class="hljs-params">navigator</span>&amp;&amp;<span class="hljs-params">G</span>.<span class="hljs-params">navigator</span>.<span class="hljs-params">sendBeacon</span>&amp;&amp;(<span class="hljs-params">s=G.navigator.sendBeacon(i.v.toString(</span>),"")),!<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">G</span>.<span class="hljs-params">Image</span>&amp;&amp;(<span class="hljs-params">(<span class="hljs-keyword">new</span> Image</span>).<span class="hljs-params">src</span>=<span class="hljs-params">i</span>.<span class="hljs-params">v</span>,<span class="hljs-params">s</span>=!0),<span class="hljs-params">s</span>||(<span class="hljs-params">i.g=ju(i.l,<span class="hljs-literal">null</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">g</span>.<span class="hljs-params">ea</span>(<span class="hljs-params">i.v</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">F</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>,<span class="hljs-params">E</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">zu</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Kr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params">oa(r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Mu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Kr</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">u</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(r.u</span>),<span class="hljs-params">r</span>.<span class="hljs-params">u</span>=<span class="hljs-params">null</span>),<span class="hljs-params">Zr</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">i</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>.<span class="hljs-params">m</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> r.m&amp;&amp;G.clearTimeout(r.m</span>),<span class="hljs-params">r</span>.<span class="hljs-params">m</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">sa</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> cf(r.Za++,i</span>)),3==<span class="hljs-params">r</span>.<span class="hljs-params">G</span>&amp;&amp;<span class="hljs-params">$r</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">$r</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Eu</span>(<span class="hljs-params">r.i</span>)||<span class="hljs-params">r</span>.<span class="hljs-params">m</span>||(<span class="hljs-params">r.m=!<span class="hljs-number">0</span>,Sr(r.Ha,r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">C</span>=0)}<span class="hljs-params">function</span> <span class="hljs-params">Ou</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>;<span class="hljs-params">s</span>=<span class="hljs-params">i</span>?<span class="hljs-params">i</span>.<span class="hljs-params">m</span>:<span class="hljs-params">r</span>.<span class="hljs-params">V</span>++;<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">ot</span>(<span class="hljs-params">r.F</span>);<span class="hljs-params">oe</span>(<span class="hljs-params">o,<span class="hljs-string">"SID"</span>,r.J</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">o,<span class="hljs-string">"RID"</span>,s</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">o,<span class="hljs-string">"AID"</span>,r.U</span>),<span class="hljs-params">Es</span>(<span class="hljs-params">r,o</span>),<span class="hljs-params">r</span>.<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">na</span>(<span class="hljs-params">o,r.o,r.s</span>),<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">wn</span>(<span class="hljs-params">r,r.h,s,r.C+<span class="hljs-number">1</span></span>),<span class="hljs-params">null</span>===<span class="hljs-params">r</span>.<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params">s.H=r.s</span>),<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">r.l=i.D.concat(r.l</span>)),<span class="hljs-params">i</span>=<span class="hljs-params">Fu</span>(<span class="hljs-params">r,s,<span class="hljs-number">1e3</span></span>),<span class="hljs-params">s</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params"><span class="hljs-built_in">Math</span>.round(<span class="hljs-number">.5</span>*r.ra</span>)+<span class="hljs-params">Math</span>.<span class="hljs-params">round</span>(<span class="hljs-params"><span class="hljs-number">.5</span>*r.ra*<span class="hljs-built_in">Math</span>.random(</span>))),<span class="hljs-params">Xo</span>(<span class="hljs-params">r.i,s</span>),<span class="hljs-params">m</span>(<span class="hljs-params">s,o,i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Es</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;<span class="hljs-params">je</span>(<span class="hljs-params">{},<span class="hljs-keyword">function</span>(s,o</span>){<span class="hljs-params">oe</span>(<span class="hljs-params">i,o,s</span>)})}<span class="hljs-params">function</span> <span class="hljs-params">Fu</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">s</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">min</span>(<span class="hljs-params">r.l.length,s</span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">j</span>?<span class="hljs-params">be</span>(<span class="hljs-params">r.j.Oa,r.j,r</span>):<span class="hljs-params">null</span>;<span class="hljs-params">e</span>:<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> a=r.l,c=<span class="hljs-number">-1</span>;;</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=["<span class="hljs-params">count</span>="+<span class="hljs-params">s</span>];-1==<span class="hljs-params">c</span>?0&lt;<span class="hljs-params">s</span>?<span class="hljs-params">u</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">"ofs="</span>+(c=a[<span class="hljs-number">0</span>].h</span>)):<span class="hljs-params">c</span>=0:<span class="hljs-params">u</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-string">"ofs="</span>+c</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> h=!<span class="hljs-number">0</span>,f=<span class="hljs-number">0</span>;f&lt;s;f++</span>){<span class="hljs-params">var</span> <span class="hljs-params">v</span>=<span class="hljs-params">a</span>[<span class="hljs-params">f</span>].<span class="hljs-params">h</span>,<span class="hljs-params">w</span>=<span class="hljs-params">a</span>[<span class="hljs-params">f</span>].<span class="hljs-params">g</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>&gt;(v-=c</span>))<span class="hljs-params">c</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">max</span>(<span class="hljs-params"><span class="hljs-number">0</span>,a[f].h<span class="hljs-number">-100</span></span>),<span class="hljs-params">h</span>=!1;<span class="hljs-params">else</span> <span class="hljs-params">try</span>{<span class="hljs-params">hf</span>(<span class="hljs-params">w,u,<span class="hljs-string">"req"</span>+v+<span class="hljs-string">"_"</span></span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">T</span>){<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">o</span>(<span class="hljs-params">w</span>)}}<span class="hljs-params">if</span>(<span class="hljs-params">h</span>){<span class="hljs-params">o</span>=<span class="hljs-params">u</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"&amp;"</span></span>);<span class="hljs-params">break</span> <span class="hljs-params">e</span>}}<span class="hljs-params">return</span> <span class="hljs-params">r</span>=<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">splice</span>(<span class="hljs-params"><span class="hljs-number">0</span>,s</span>),<span class="hljs-params">i</span>.<span class="hljs-params">D</span>=<span class="hljs-params">r</span>,<span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">Uu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>||<span class="hljs-params">r</span>.<span class="hljs-params">u</span>||(<span class="hljs-params">r.Y=<span class="hljs-number">1</span>,Sr(r.Ga,r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">A</span>=0)}<span class="hljs-params">function</span> <span class="hljs-params">ra</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!(<span class="hljs-params">r.g||r.u||<span class="hljs-number">3</span>&lt;=r.A||(r.Y++,r.u=zt(be(r.Ga,r</span>),<span class="hljs-params">qu</span>(<span class="hljs-params">r,r.A</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">A</span>++,0))}<span class="hljs-params">function</span> <span class="hljs-params">oa</span>(<span class="hljs-params">r</span>){<span class="hljs-params">null</span>!=<span class="hljs-params">r</span>.<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(r.B</span>),<span class="hljs-params">r</span>.<span class="hljs-params">B</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Vu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">new</span> <span class="hljs-params">wn</span>(<span class="hljs-params">r,r.h,<span class="hljs-string">"rpc"</span>,r.Y</span>),<span class="hljs-params">null</span>===<span class="hljs-params">r</span>.<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params">r.g.H=r.s</span>),<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">O</span>=0;<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">ot</span>(<span class="hljs-params">r.oa</span>);<span class="hljs-params">oe</span>(<span class="hljs-params">i,<span class="hljs-string">"RID"</span>,<span class="hljs-string">"rpc"</span></span>),<span class="hljs-params">oe</span>(<span class="hljs-params">i,<span class="hljs-string">"SID"</span>,r.J</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">i,<span class="hljs-string">"CI"</span>,r.N?<span class="hljs-string">"0"</span>:<span class="hljs-string">"1"</span></span>),<span class="hljs-params">oe</span>(<span class="hljs-params">i,<span class="hljs-string">"AID"</span>,r.U</span>),<span class="hljs-params">Es</span>(<span class="hljs-params">r,i</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">i,<span class="hljs-string">"TYPE"</span>,<span class="hljs-string">"xmlhttp"</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">na</span>(<span class="hljs-params">i,r.o,r.s</span>),<span class="hljs-params">r</span>.<span class="hljs-params">K</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">g</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params">r.K</span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">g</span>;<span class="hljs-params">r</span>=<span class="hljs-params">r</span>.<span class="hljs-params">la</span>,<span class="hljs-params">s</span>.<span class="hljs-params">K</span>=1,<span class="hljs-params">s</span>.<span class="hljs-params">v</span>=<span class="hljs-params">zr</span>(<span class="hljs-params">ot(i</span>)),<span class="hljs-params">s</span>.<span class="hljs-params">s</span>=<span class="hljs-params">null</span>,<span class="hljs-params">s</span>.<span class="hljs-params">U</span>=!0,<span class="hljs-params">l</span>(<span class="hljs-params">s,r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Zr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">null</span>!=<span class="hljs-params">r</span>.<span class="hljs-params">v</span>&amp;&amp;(<span class="hljs-params">G.clearTimeout(r.v</span>),<span class="hljs-params">r</span>.<span class="hljs-params">v</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Bu</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params">r.g==i</span>){<span class="hljs-params">Zr</span>(<span class="hljs-params">r</span>),<span class="hljs-params">oa</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">g</span>=<span class="hljs-params">null</span>;<span class="hljs-params">var</span> <span class="hljs-params">o</span>=2}<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!Jo(r.i,i</span>))<span class="hljs-params">return</span>;<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">D</span>,<span class="hljs-params">Su</span>(<span class="hljs-params">r.i,i</span>),<span class="hljs-params">o</span>=1}<span class="hljs-params">if</span>(<span class="hljs-params">r.I=i.N,<span class="hljs-number">0</span>!=r.G</span>)<span class="hljs-params">if</span>(<span class="hljs-params">i.i</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">1</span>==o</span>){<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">s</span>?<span class="hljs-params">i</span>.<span class="hljs-params">s</span>.<span class="hljs-params">length</span>:0,<span class="hljs-params">i</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>-<span class="hljs-params">i</span>.<span class="hljs-params">F</span>;<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">r</span>.<span class="hljs-params">C</span>;<span class="hljs-params">fe</span>(<span class="hljs-params">o=ri(</span>),<span class="hljs-params">new</span> <span class="hljs-params">Yo</span>(<span class="hljs-params">o,s,i,a</span>)),<span class="hljs-params">$r</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">else</span> <span class="hljs-params">Uu</span>(<span class="hljs-params">r</span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">3</span>==(a=i.o</span>)||0==<span class="hljs-params">a</span>&amp;&amp;0&lt;<span class="hljs-params">r</span>.<span class="hljs-params">I</span>||!(<span class="hljs-params"><span class="hljs-number">1</span>==o&amp;&amp;<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">return</span>!(<span class="hljs-params">Iu(r.i</span>)&gt;=<span class="hljs-params">r</span>.<span class="hljs-params">i</span>.<span class="hljs-params">j</span>-(<span class="hljs-params">r.m?<span class="hljs-number">1</span>:<span class="hljs-number">0</span></span>)||(<span class="hljs-params">r.m?(r.l=i.D.concat(r.l</span>),0):1==<span class="hljs-params">r</span>.<span class="hljs-params">G</span>||2==<span class="hljs-params">r</span>.<span class="hljs-params">G</span>||<span class="hljs-params">r</span>.<span class="hljs-params">C</span>&gt;=(<span class="hljs-params">r.Xa?<span class="hljs-number">0</span>:r.Ya</span>)||(<span class="hljs-params">r.m=zt(be(r.Ha,r,i</span>),<span class="hljs-params">qu</span>(<span class="hljs-params">r,r.C</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">C</span>++,0)))}(<span class="hljs-params">r,i</span>)||2==<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">ra</span>(<span class="hljs-params">r</span>)))<span class="hljs-params">switch</span>(<span class="hljs-params">s&amp;&amp;<span class="hljs-number">0</span>&lt;s.length&amp;&amp;(i=r.i,i.i=i.i.concat(s</span>)),<span class="hljs-params">a</span>){<span class="hljs-params">case</span> 1:<span class="hljs-params">bn</span>(<span class="hljs-params">r,<span class="hljs-number">5</span></span>);<span class="hljs-params">break</span>;<span class="hljs-params">case</span> 4:<span class="hljs-params">bn</span>(<span class="hljs-params">r,<span class="hljs-number">10</span></span>);<span class="hljs-params">break</span>;<span class="hljs-params">case</span> 3:<span class="hljs-params">bn</span>(<span class="hljs-params">r,<span class="hljs-number">6</span></span>);<span class="hljs-params">break</span>;<span class="hljs-params">default</span>:<span class="hljs-params">bn</span>(<span class="hljs-params">r,<span class="hljs-number">2</span></span>)}}<span class="hljs-params">function</span> <span class="hljs-params">qu</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Pa</span>+<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params"><span class="hljs-built_in">Math</span>.random(</span>)*<span class="hljs-params">r</span>.<span class="hljs-params">$a</span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">j</span>||(<span class="hljs-params">s*=<span class="hljs-number">2</span></span>),<span class="hljs-params">s</span>*<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">bn</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.h.info(<span class="hljs-string">"Error code "</span>+i</span>),2==<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">null</span>;<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">s=<span class="hljs-literal">null</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">be</span>(<span class="hljs-params">r.jb,r</span>);<span class="hljs-params">s</span>||(<span class="hljs-params">s=<span class="hljs-keyword">new</span> ht(<span class="hljs-string">"//www.google.com/images/cleardot.gif"</span></span>),<span class="hljs-params">G</span>.<span class="hljs-params">location</span>&amp;&amp;"<span class="hljs-params">http</span>"==<span class="hljs-params">G</span>.<span class="hljs-params">location</span>.<span class="hljs-params">protocol</span>||<span class="hljs-params">Vr</span>(<span class="hljs-params">s,<span class="hljs-string">"https"</span></span>),<span class="hljs-params">zr</span>(<span class="hljs-params">s</span>)),<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">si</span>;<span class="hljs-params">if</span>(<span class="hljs-params">G.Image</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Image</span>;<span class="hljs-params">o</span>.<span class="hljs-params">onload</span>=<span class="hljs-params">Gn</span>(<span class="hljs-params">Gr,s,o,<span class="hljs-string">"TestLoadImage: loaded"</span>,!<span class="hljs-number">0</span>,i</span>),<span class="hljs-params">o</span>.<span class="hljs-params">onerror</span>=<span class="hljs-params">Gn</span>(<span class="hljs-params">Gr,s,o,<span class="hljs-string">"TestLoadImage: error"</span>,!<span class="hljs-number">1</span>,i</span>),<span class="hljs-params">o</span>.<span class="hljs-params">onabort</span>=<span class="hljs-params">Gn</span>(<span class="hljs-params">Gr,s,o,<span class="hljs-string">"TestLoadImage: abort"</span>,!<span class="hljs-number">1</span>,i</span>),<span class="hljs-params">o</span>.<span class="hljs-params">ontimeout</span>=<span class="hljs-params">Gn</span>(<span class="hljs-params">Gr,s,o,<span class="hljs-string">"TestLoadImage: timeout"</span>,!<span class="hljs-number">1</span>,i</span>),<span class="hljs-params">G</span>.<span class="hljs-params">setTimeout</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">o</span>.<span class="hljs-params">ontimeout</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">ontimeout</span><span class="hljs-params">()</span>},1<span class="hljs-params">e4</span>),<span class="hljs-params">o</span>.<span class="hljs-params">src</span>=<span class="hljs-params">r</span>}<span class="hljs-params">else</span> <span class="hljs-params">i</span>(<span class="hljs-params">!<span class="hljs-number">1</span></span>)}(<span class="hljs-params">s.toString(</span>),<span class="hljs-params">o</span>)}<span class="hljs-params">else</span> <span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>);<span class="hljs-params">r</span>.<span class="hljs-params">G</span>=0,<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">j</span>.<span class="hljs-params">va</span>(<span class="hljs-params">i</span>),<span class="hljs-params">zu</span>(<span class="hljs-params">r</span>),<span class="hljs-params">Mu</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">zu</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">G</span>=0,<span class="hljs-params">r</span>.<span class="hljs-params">I</span>=-1,<span class="hljs-params">r</span>.<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">(<span class="hljs-number">0</span>!=xu(r.i</span>).<span class="hljs-params">length</span>||0!=<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">length</span>)&amp;&amp;(<span class="hljs-params">r.i.i.length=<span class="hljs-number">0</span>,$i(r.l</span>),<span class="hljs-params">r</span>.<span class="hljs-params">l</span>.<span class="hljs-params">length</span>=0),<span class="hljs-params">r</span>.<span class="hljs-params">j</span>.<span class="hljs-params">ua</span><span class="hljs-params">()</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Gu</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">ht</span>?<span class="hljs-params">ot</span>(<span class="hljs-params">r</span>):<span class="hljs-params">new</span> <span class="hljs-params">ht</span>(<span class="hljs-params">r,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>)}(<span class="hljs-params">s</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">""</span>!=o.i</span>)<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">Br</span>(<span class="hljs-params">o,i+<span class="hljs-string">"."</span>+o.i</span>),<span class="hljs-params">qr</span>(<span class="hljs-params">o,o.m</span>);<span class="hljs-params">else</span>{<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">G</span>.<span class="hljs-params">location</span>;<span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">ht</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">Vr</span>(<span class="hljs-params">a,r</span>),<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">Br</span>(<span class="hljs-params">a,i</span>),<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">qr</span>(<span class="hljs-params">a,s</span>),<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params">a.l=o</span>),<span class="hljs-params">a</span>}(<span class="hljs-params">a.protocol,i?i+<span class="hljs-string">"."</span>+a.hostname:a.hostname,+a.port,s</span>)}<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">aa</span>&amp;&amp;<span class="hljs-params">Zi</span>(<span class="hljs-params">r.aa,<span class="hljs-keyword">function</span>(c,u</span>){<span class="hljs-params">oe</span>(<span class="hljs-params">o,u,c</span>)}),<span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">sa</span>,(<span class="hljs-params">i=r.D</span>)&amp;&amp;<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">oe</span>(<span class="hljs-params">o,i,s</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">o,<span class="hljs-string">"VER"</span>,r.ma</span>),<span class="hljs-params">Es</span>(<span class="hljs-params">r,o</span>),<span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">ju</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i&amp;&amp;!r.H</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Can't create secondary domain capable XhrIo object."</span></span>);<span class="hljs-params">return</span>(<span class="hljs-params">i=<span class="hljs-keyword">new</span> ge(s&amp;&amp;r.Ba&amp;&amp;!r.qa?<span class="hljs-keyword">new</span> vs({ib:!<span class="hljs-number">0</span>}</span>):<span class="hljs-params">r</span>.<span class="hljs-params">qa</span>)).<span class="hljs-params">L</span>=<span class="hljs-params">r</span>.<span class="hljs-params">H</span>,<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Hu</span><span class="hljs-params">()</span>{}<span class="hljs-params">function</span> <span class="hljs-params">Qr</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">Ut&amp;&amp;!(<span class="hljs-number">10</span>&lt;=<span class="hljs-built_in">Number</span>(jo</span>)))<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Environmental error: no available transport."</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">tt</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">ce</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">new</span> <span class="hljs-params">Lu</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">messageUrlParams</span>||<span class="hljs-params">null</span>,<span class="hljs-params">r</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">messageHeaders</span>||<span class="hljs-params">null</span>,<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">clientProtocolHeaderRequired</span>&amp;&amp;(<span class="hljs-params">r?r[<span class="hljs-string">"X-Client-Protocol"</span>]=<span class="hljs-string">"webchannel"</span>:r={<span class="hljs-string">"X-Client-Protocol"</span>:<span class="hljs-string">"webchannel"</span>}</span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">s</span>=<span class="hljs-params">r</span>,<span class="hljs-params">r</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">initMessageHeaders</span>||<span class="hljs-params">null</span>,<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">messageContentType</span>&amp;&amp;(<span class="hljs-params">r?r[<span class="hljs-string">"X-WebChannel-Content-Type"</span>]=i.messageContentType:r={<span class="hljs-string">"X-WebChannel-Content-Type"</span>:i.messageContentType}</span>),<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">ya</span>&amp;&amp;(<span class="hljs-params">r?r[<span class="hljs-string">"X-WebChannel-Client-Profile"</span>]=i.ya:r={<span class="hljs-string">"X-WebChannel-Client-Profile"</span>:i.ya}</span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">P</span>=<span class="hljs-params">r</span>,(<span class="hljs-params">r=i&amp;&amp;i.httpHeadersOverwriteParam</span>)&amp;&amp;!<span class="hljs-params">jn</span>(<span class="hljs-params">r</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.o=r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">supportsCrossDomainXhr</span>||!1,<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">sendRawJson</span>||!1,(<span class="hljs-params">i=i&amp;&amp;i.httpSessionIdParam</span>)&amp;&amp;!<span class="hljs-params">jn</span>(<span class="hljs-params">i</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.D=i,<span class="hljs-literal">null</span>!==(r=<span class="hljs-keyword">this</span>.h</span>)&amp;&amp;<span class="hljs-params">i</span> <span class="hljs-params">in</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">i</span> <span class="hljs-params">in</span>(<span class="hljs-params">r=<span class="hljs-keyword">this</span>.h</span>)&amp;&amp;<span class="hljs-params">delete</span> <span class="hljs-params">r</span>[<span class="hljs-params">i</span>]),<span class="hljs-params">this</span>.<span class="hljs-params">j</span>=<span class="hljs-params">new</span> <span class="hljs-params">ai</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ku</span>(<span class="hljs-params">r</span>){<span class="hljs-params">hs</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">__sm__</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i</span>){<span class="hljs-params">e</span>:{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> s <span class="hljs-keyword">in</span> i</span>){<span class="hljs-params">r</span>=<span class="hljs-params">s</span>;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">r</span>=<span class="hljs-params">void</span> 0}(<span class="hljs-params"><span class="hljs-keyword">this</span>.i=r</span>)&amp;&amp;(<span class="hljs-params">r=<span class="hljs-keyword">this</span>.i,i=<span class="hljs-literal">null</span>!==i&amp;&amp;r <span class="hljs-keyword">in</span> i?i[r]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">data</span>=<span class="hljs-params">i</span>}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>=<span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">$u</span><span class="hljs-params">()</span>{<span class="hljs-params">ds</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">status</span>=1}<span class="hljs-params">function</span> <span class="hljs-params">ai</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">r</span>}(<span class="hljs-params">O=ge.prototype</span>).<span class="hljs-params">ea</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>)<span class="hljs-params">throw</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"[goog.net.XhrIo] Object is active with another request="</span>+<span class="hljs-keyword">this</span>.H+<span class="hljs-string">"; newUri="</span>+r</span>);<span class="hljs-params">i</span>=<span class="hljs-params">i</span>?<span class="hljs-params">i</span>.<span class="hljs-params">toUpperCase</span><span class="hljs-params">()</span>:"<span class="hljs-params">GET</span>",<span class="hljs-params">this</span>.<span class="hljs-params">H</span>=<span class="hljs-params">r</span>,<span class="hljs-params">this</span>.<span class="hljs-params">j</span>="",<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>=<span class="hljs-params">this</span>.<span class="hljs-params">u</span>?<span class="hljs-params">this</span>.<span class="hljs-params">u</span>.<span class="hljs-params">g</span><span class="hljs-params">()</span>:<span class="hljs-params">fs</span>.<span class="hljs-params">g</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">h</span>||(<span class="hljs-params">r.h=r.i(</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>.u?<span class="hljs-keyword">this</span>.u:fs</span>),<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">onreadystatechange</span>=<span class="hljs-params">be</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Fa,<span class="hljs-keyword">this</span></span>);<span class="hljs-params">try</span>{<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">open</span>(<span class="hljs-params">i,<span class="hljs-built_in">String</span>(r</span>),!0),<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=!1}<span class="hljs-params">catch</span>(<span class="hljs-params">c</span>){<span class="hljs-params">return</span> <span class="hljs-params">void</span> <span class="hljs-params">Ru</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,c</span>)}<span class="hljs-params">r</span>=<span class="hljs-params">s</span>||"";<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ee</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.headers</span>);<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">je</span>(<span class="hljs-params">o,<span class="hljs-keyword">function</span>(c,u</span>){<span class="hljs-params">a</span>.<span class="hljs-params">set</span>(<span class="hljs-params">u,c</span>)}),<span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">e</span>:{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> i=yf,s=r.length,o=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r?r.split(<span class="hljs-string">""</span></span>):<span class="hljs-params">r</span>,<span class="hljs-params">a</span>=0;<span class="hljs-params">a</span>&lt;<span class="hljs-params">s</span>;<span class="hljs-params">a</span>++)<span class="hljs-params">if</span>(<span class="hljs-params">a <span class="hljs-keyword">in</span> o&amp;&amp;i.call(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,o[a],a,r</span>)){<span class="hljs-params">i</span>=<span class="hljs-params">a</span>;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">i</span>=-1}<span class="hljs-params">return</span> 0&gt;<span class="hljs-params">i</span>?<span class="hljs-params">null</span>:"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">r</span>.<span class="hljs-params">charAt</span>(<span class="hljs-params">i</span>):<span class="hljs-params">r</span>[<span class="hljs-params">i</span>]}(<span class="hljs-params">a.T(</span>)),<span class="hljs-params">s</span>=<span class="hljs-params">G</span>.<span class="hljs-params">FormData</span>&amp;&amp;<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">G</span>.<span class="hljs-params">FormData</span>,!(<span class="hljs-params"><span class="hljs-number">0</span>&lt;=Ft(mf,i</span>))||<span class="hljs-params">o</span>||<span class="hljs-params">s</span>||<span class="hljs-params">a</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Content-Type"</span>,<span class="hljs-string">"application/x-www-form-urlencoded;charset=utf-8"</span></span>),<span class="hljs-params">a</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(c,u</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">setRequestHeader</span>(<span class="hljs-params">u,c</span>)},<span class="hljs-params">this</span>),<span class="hljs-params">this</span>.<span class="hljs-params">J</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.responseType=<span class="hljs-keyword">this</span>.J</span>),"<span class="hljs-params">withCredentials</span>"<span class="hljs-params">in</span> <span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">withCredentials</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">L</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.withCredentials=<span class="hljs-keyword">this</span>.L</span>);<span class="hljs-params">try</span>{<span class="hljs-params">Pu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),0&lt;<span class="hljs-params">this</span>.<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params">(<span class="hljs-keyword">this</span>.K=<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ut</span>&amp;&amp;<span class="hljs-params">mr</span><span class="hljs-params">()</span>&amp;&amp;"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>.<span class="hljs-params">timeout</span>&amp;&amp;<span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">ontimeout</span>}(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>))?(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.timeout=<span class="hljs-keyword">this</span>.B,<span class="hljs-keyword">this</span>.g.ontimeout=be(<span class="hljs-keyword">this</span>.pa,<span class="hljs-keyword">this</span></span>)):<span class="hljs-params">this</span>.<span class="hljs-params">A</span>=<span class="hljs-params">Dr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.pa,<span class="hljs-keyword">this</span>.B,<span class="hljs-keyword">this</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">send</span>(<span class="hljs-params">r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">v</span>=!1}<span class="hljs-params">catch</span>(<span class="hljs-params">c</span>){<span class="hljs-params">Ru</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,c</span>)}},<span class="hljs-params">O</span>.<span class="hljs-params">pa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">void</span> 0!==<span class="hljs-params">Hi</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.j=<span class="hljs-string">"Timed out after "</span>+<span class="hljs-keyword">this</span>.B+<span class="hljs-string">"ms, aborting"</span>,<span class="hljs-keyword">this</span>.m=<span class="hljs-number">8</span>,fe(<span class="hljs-keyword">this</span>,<span class="hljs-string">"timeout"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">abort</span>(<span class="hljs-params"><span class="hljs-number">8</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">abort</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">h</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.h=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.l=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.g.abort(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">r</span>||7,<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-string">"complete"</span></span>),<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-string">"abort"</span></span>),<span class="hljs-params">Hr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.h&amp;&amp;(<span class="hljs-keyword">this</span>.h=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.l=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.g.abort(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=!1),<span class="hljs-params">Hr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,!<span class="hljs-number">0</span></span>)),<span class="hljs-params">ge</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">M</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">O</span>.<span class="hljs-params">Fa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">s</span>||(<span class="hljs-params"><span class="hljs-keyword">this</span>.F||<span class="hljs-keyword">this</span>.v||<span class="hljs-keyword">this</span>.l?ku(<span class="hljs-keyword">this</span></span>):<span class="hljs-params">this</span>.<span class="hljs-params">cb</span><span class="hljs-params">()</span>)},<span class="hljs-params">O</span>.<span class="hljs-params">cb</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">ku</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">O</span>.<span class="hljs-params">ba</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">try</span>{<span class="hljs-params">return</span> 2&lt;<span class="hljs-params">Ct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)?<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">status</span>:-1}<span class="hljs-params">catch</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>-1}},<span class="hljs-params">O</span>.<span class="hljs-params">ga</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">g</span>?<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">responseText</span>:""}<span class="hljs-params">catch</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>""}},<span class="hljs-params">O</span>.<span class="hljs-params">Qa</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">responseText</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>&amp;&amp;0==<span class="hljs-params">i</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">r</span>)&amp;&amp;(<span class="hljs-params">i=i.substring(r.length</span>)),<span class="hljs-params">ff</span>(<span class="hljs-params">i</span>)}},<span class="hljs-params">O</span>.<span class="hljs-params">Da</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">m</span>},<span class="hljs-params">O</span>.<span class="hljs-params">La</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">this</span>.<span class="hljs-params">j</span>?<span class="hljs-params">this</span>.<span class="hljs-params">j</span>:<span class="hljs-params">String</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.j</span>)},(<span class="hljs-params">O=Lu.prototype</span>).<span class="hljs-params">ma</span>=8,<span class="hljs-params">O</span>.<span class="hljs-params">G</span>=1,<span class="hljs-params">O</span>.<span class="hljs-params">hb</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">try</span>{<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-string">"Origin Trials invoked: "</span>+r</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">i</span>){}},<span class="hljs-params">O</span>.<span class="hljs-params">Ha</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.m</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.m=<span class="hljs-literal">null</span>,<span class="hljs-number">1</span>==<span class="hljs-keyword">this</span>.G</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!r</span>){<span class="hljs-params">this</span>.<span class="hljs-params">V</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params"><span class="hljs-number">1e5</span>*<span class="hljs-built_in">Math</span>.random(</span>)),<span class="hljs-params">r</span>=<span class="hljs-params">this</span>.<span class="hljs-params">V</span>++;<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">wn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-keyword">this</span>.h,r,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.P&amp;&amp;(s?It(s=un(s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">P</span>):<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">P</span>),<span class="hljs-params">null</span>===<span class="hljs-params">this</span>.<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params">i.H=s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">ja</span>)<span class="hljs-params">e</span>:{<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> o=<span class="hljs-number">0</span>,a=<span class="hljs-number">0</span>;a&lt;<span class="hljs-keyword">this</span>.l.length;a++</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">this</span>.<span class="hljs-params">l</span>[<span class="hljs-params">a</span>];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===(c=<span class="hljs-string">"__data__"</span><span class="hljs-keyword">in</span> c.g&amp;&amp;<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span>(c=c.g.__data__</span>)?<span class="hljs-params">c</span>.<span class="hljs-params">length</span>:<span class="hljs-params">void</span> 0))<span class="hljs-params">break</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">4096</span>&lt;(o+=c</span>)){<span class="hljs-params">o</span>=<span class="hljs-params">a</span>;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">4096</span>===o||a===<span class="hljs-keyword">this</span>.l.length<span class="hljs-number">-1</span></span>){<span class="hljs-params">o</span>=<span class="hljs-params">a</span>+1;<span class="hljs-params">break</span> <span class="hljs-params">e</span>}}<span class="hljs-params">o</span>=1<span class="hljs-params">e3</span>}<span class="hljs-params">else</span> <span class="hljs-params">o</span>=1<span class="hljs-params">e3</span>;<span class="hljs-params">o</span>=<span class="hljs-params">Fu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,i,o</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">a=ot(<span class="hljs-keyword">this</span>.F</span>),"<span class="hljs-params">RID</span>",<span class="hljs-params">r</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">a,<span class="hljs-string">"CVER"</span>,<span class="hljs-number">22</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">D</span>&amp;&amp;<span class="hljs-params">oe</span>(<span class="hljs-params">a,<span class="hljs-string">"X-HTTP-Session-Id"</span>,<span class="hljs-keyword">this</span>.D</span>),<span class="hljs-params">Es</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,a</span>),<span class="hljs-params">this</span>.<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">na</span>(<span class="hljs-params">a,<span class="hljs-keyword">this</span>.o,s</span>),<span class="hljs-params">Xo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i,i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ra</span>&amp;&amp;<span class="hljs-params">oe</span>(<span class="hljs-params">a,<span class="hljs-string">"TYPE"</span>,<span class="hljs-string">"init"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">ja</span>?(<span class="hljs-params">oe(a,<span class="hljs-string">"$req"</span>,o</span>),<span class="hljs-params">oe</span>(<span class="hljs-params">a,<span class="hljs-string">"SID"</span>,<span class="hljs-string">"null"</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">$</span>=!0,<span class="hljs-params">m</span>(<span class="hljs-params">i,a,<span class="hljs-literal">null</span></span>)):<span class="hljs-params">m</span>(<span class="hljs-params">i,a,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">G</span>=2}}<span class="hljs-params">else</span> 3==<span class="hljs-params">this</span>.<span class="hljs-params">G</span>&amp;&amp;(<span class="hljs-params">r?Ou(<span class="hljs-keyword">this</span>,r</span>):0==<span class="hljs-params">this</span>.<span class="hljs-params">l</span>.<span class="hljs-params">length</span>||<span class="hljs-params">Eu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.i</span>)||<span class="hljs-params">Ou</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">Ga</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.u=<span class="hljs-literal">null</span>,Vu(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">$</span>&amp;&amp;!(<span class="hljs-params"><span class="hljs-keyword">this</span>.L||<span class="hljs-literal">null</span>==<span class="hljs-keyword">this</span>.g||<span class="hljs-number">0</span>&gt;=<span class="hljs-keyword">this</span>.O</span>)){<span class="hljs-params">var</span> <span class="hljs-params">r</span>=2*<span class="hljs-params">this</span>.<span class="hljs-params">O</span>;<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-string">"BP detection timer enabled: "</span>+r</span>),<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=<span class="hljs-params">zt</span>(<span class="hljs-params">be(<span class="hljs-keyword">this</span>.bb,<span class="hljs-keyword">this</span></span>),<span class="hljs-params">r</span>)}},<span class="hljs-params">O</span>.<span class="hljs-params">bb</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.B=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.h.info(<span class="hljs-string">"BP detection timeout reached."</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">info</span>(<span class="hljs-params"><span class="hljs-string">"Buffering proxy detected and switch to long-polling!"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">L</span>=!0,<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">10</span></span>),<span class="hljs-params">Kr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">Vu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">ab</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">null</span>!=<span class="hljs-params">this</span>.<span class="hljs-params">v</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.v=<span class="hljs-literal">null</span>,Kr(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">ra</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">19</span></span>))},<span class="hljs-params">O</span>.<span class="hljs-params">jb</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>.h.info(<span class="hljs-string">"Successfully pinged google.com"</span></span>),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">2</span></span>)):(<span class="hljs-params"><span class="hljs-keyword">this</span>.h.info(<span class="hljs-string">"Failed to ping google.com"</span></span>),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>))},(<span class="hljs-params">O=Hu.prototype</span>).<span class="hljs-params">xa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{},<span class="hljs-params">O</span>.<span class="hljs-params">wa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{},<span class="hljs-params">O</span>.<span class="hljs-params">va</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{},<span class="hljs-params">O</span>.<span class="hljs-params">ua</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{},<span class="hljs-params">O</span>.<span class="hljs-params">Oa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{},<span class="hljs-params">Qr</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">g</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">tt</span>(<span class="hljs-params">r,i</span>)},<span class="hljs-params">Te</span>(<span class="hljs-params">tt,ce</span>),<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">m</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">j</span>=<span class="hljs-params">this</span>.<span class="hljs-params">j</span>,<span class="hljs-params">this</span>.<span class="hljs-params">A</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.g.H=!<span class="hljs-number">0</span></span>);<span class="hljs-params">var</span> <span class="hljs-params">r</span>=<span class="hljs-params">this</span>.<span class="hljs-params">g</span>,<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">l</span>,<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>||<span class="hljs-params">void</span> 0;<span class="hljs-params">r</span>.<span class="hljs-params">Wa</span>&amp;&amp;(<span class="hljs-params">r.h.info(<span class="hljs-string">"Origin Trials enabled."</span></span>),<span class="hljs-params">Sr</span>(<span class="hljs-params">be(r.hb,r,i</span>))),<span class="hljs-params">Le</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">W</span>=<span class="hljs-params">i</span>,<span class="hljs-params">r</span>.<span class="hljs-params">aa</span>=<span class="hljs-params">s</span>||{},<span class="hljs-params">r</span>.<span class="hljs-params">N</span>=<span class="hljs-params">r</span>.<span class="hljs-params">X</span>,<span class="hljs-params">r</span>.<span class="hljs-params">F</span>=<span class="hljs-params">Gu</span>(<span class="hljs-params">r,<span class="hljs-literal">null</span>,r.W</span>),<span class="hljs-params">$r</span>(<span class="hljs-params">r</span>)},<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">close</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">ia</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>)},<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">u</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>={};<span class="hljs-params">i</span>.<span class="hljs-params">__data__</span>=<span class="hljs-params">r</span>,<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,i</span>)}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">v</span>?(<span class="hljs-params">(i={}</span>).<span class="hljs-params">__data__</span>=<span class="hljs-params">br</span>(<span class="hljs-params">r</span>),<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,i</span>)):<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,r</span>)},<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">M</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">g</span>.<span class="hljs-params">j</span>=<span class="hljs-params">null</span>,<span class="hljs-params">delete</span> <span class="hljs-params">this</span>.<span class="hljs-params">j</span>,<span class="hljs-params">ia</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g</span>),<span class="hljs-params">delete</span> <span class="hljs-params">this</span>.<span class="hljs-params">g</span>,<span class="hljs-params">tt</span>.<span class="hljs-params">Z</span>.<span class="hljs-params">M</span>.<span class="hljs-params">call</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)},<span class="hljs-params">Te</span>(<span class="hljs-params">Ku,hs</span>),<span class="hljs-params">Te</span>(<span class="hljs-params">$u,ds</span>),<span class="hljs-params">Te</span>(<span class="hljs-params">ai,Hu</span>),<span class="hljs-params">ai</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">xa</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,<span class="hljs-string">"a"</span></span>)},<span class="hljs-params">ai</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">wa</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,<span class="hljs-keyword">new</span> Ku(r</span>))},<span class="hljs-params">ai</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">va</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,<span class="hljs-keyword">new</span> $u(r</span>))},<span class="hljs-params">ai</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">ua</span>=<span class="hljs-params">function</span><span class="hljs-params">()</span>{<span class="hljs-params">fe</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.g,<span class="hljs-string">"b"</span></span>)},<span class="hljs-params">Qr</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">createWebChannel</span>=<span class="hljs-params">Qr</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">g</span>,<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">send</span>=<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">u</span>,<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">open</span>=<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">m</span>,<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">close</span>=<span class="hljs-params">tt</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">close</span>,<span class="hljs-params">_n</span>.<span class="hljs-params">NO_ERROR</span>=0,<span class="hljs-params">_n</span>.<span class="hljs-params">TIMEOUT</span>=8,<span class="hljs-params">_n</span>.<span class="hljs-params">HTTP_ERROR</span>=6,<span class="hljs-params">Nr</span>.<span class="hljs-params">COMPLETE</span>="<span class="hljs-params">complete</span>",<span class="hljs-params">Mr</span>.<span class="hljs-params">EventType</span>=<span class="hljs-params">vn</span>,<span class="hljs-params">vn</span>.<span class="hljs-params">OPEN</span>="<span class="hljs-params">a</span>",<span class="hljs-params">vn</span>.<span class="hljs-params">CLOSE</span>="<span class="hljs-params">b</span>",<span class="hljs-params">vn</span>.<span class="hljs-params">ERROR</span>="<span class="hljs-params">c</span>",<span class="hljs-params">vn</span>.<span class="hljs-params">MESSAGE</span>="<span class="hljs-params">d</span>",<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">listen</span>=<span class="hljs-params">ce</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">N</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">listenOnce</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">O</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">getLastError</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">La</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">getLastErrorCode</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">Da</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">getStatus</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">ba</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">getResponseJson</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">Qa</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">getResponseText</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">ga</span>,<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">send</span>=<span class="hljs-params">ge</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">ea</span>;<span class="hljs-params">var</span> <span class="hljs-params">Yr</span>=<span class="hljs-params">_n</span>,<span class="hljs-params">Yu</span>=<span class="hljs-params">Nr</span>,<span class="hljs-params">Wu</span>=<span class="hljs-params">Dt</span>,<span class="hljs-params">aa_PROXY</span>=10,<span class="hljs-params">aa_NOPROXY</span>=11,<span class="hljs-params">Ju</span>=<span class="hljs-params">vs</span>,<span class="hljs-params">Is</span>=<span class="hljs-params">Mr</span>,<span class="hljs-params">Xu</span>=<span class="hljs-params">ge</span>;<span class="hljs-params">class</span> <span class="hljs-params">Me</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">uid</span>=<span class="hljs-params">i</span>}<span class="hljs-params">isAuthenticated</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">null</span>!=<span class="hljs-params">this</span>.<span class="hljs-params">uid</span>}<span class="hljs-params">toKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">isAuthenticated</span><span class="hljs-params">()</span>?"<span class="hljs-params">uid</span>:"+<span class="hljs-params">this</span>.<span class="hljs-params">uid</span>:"<span class="hljs-params">anonymous</span>-<span class="hljs-params">user</span>"}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">uid</span>===<span class="hljs-params">this</span>.<span class="hljs-params">uid</span>}}<span class="hljs-params">Me</span>.<span class="hljs-params">UNAUTHENTICATED</span>=<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params"><span class="hljs-literal">null</span></span>),<span class="hljs-params">Me</span>.<span class="hljs-params">GOOGLE_CREDENTIALS</span>=<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params"><span class="hljs-string">"google-credentials-uid"</span></span>),<span class="hljs-params">Me</span>.<span class="hljs-params">FIRST_PARTY</span>=<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params"><span class="hljs-string">"first-party-uid"</span></span>),<span class="hljs-params">Me</span>.<span class="hljs-params">MOCK_USER</span>=<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params"><span class="hljs-string">"mock-user"</span></span>);<span class="hljs-params">let</span> <span class="hljs-params">ci</span>="9.0.1";<span class="hljs-params">const</span> <span class="hljs-params">jt</span>=<span class="hljs-params">new</span> <span class="hljs-params">Et</span>.<span class="hljs-params">Yd</span>(<span class="hljs-params"><span class="hljs-string">"@firebase/firestore"</span></span>);<span class="hljs-params">function</span> <span class="hljs-params">ca</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">jt</span>.<span class="hljs-params">logLevel</span>}<span class="hljs-params">function</span> <span class="hljs-params">k</span>(<span class="hljs-params">r,...i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">jt.logLevel&lt;=Et.<span class="hljs-keyword">in</span>.DEBUG</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">map</span>(<span class="hljs-params">ua</span>);<span class="hljs-params">jt</span>.<span class="hljs-params">debug</span>(<span class="hljs-params"><span class="hljs-string">`Firestore (<span class="hljs-subst">${ci}</span>): <span class="hljs-subst">${r}</span>`</span>,...s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">ye</span>(<span class="hljs-params">r,...i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">jt.logLevel&lt;=Et.<span class="hljs-keyword">in</span>.ERROR</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">map</span>(<span class="hljs-params">ua</span>);<span class="hljs-params">jt</span>.<span class="hljs-params">error</span>(<span class="hljs-params"><span class="hljs-string">`Firestore (<span class="hljs-subst">${ci}</span>): <span class="hljs-subst">${r}</span>`</span>,...s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Ss</span>(<span class="hljs-params">r,...i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">jt.logLevel&lt;=Et.<span class="hljs-keyword">in</span>.WARN</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">map</span>(<span class="hljs-params">ua</span>);<span class="hljs-params">jt</span>.<span class="hljs-params">warn</span>(<span class="hljs-params"><span class="hljs-string">`Firestore (<span class="hljs-subst">${ci}</span>): <span class="hljs-subst">${r}</span>`</span>,...s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">ua</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">return</span> <span class="hljs-params">r</span>;<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>}}<span class="hljs-params">function</span> <span class="hljs-params">V</span>(<span class="hljs-params">r=<span class="hljs-string">"Unexpected state"</span></span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=`<span class="hljs-params">FIRESTORE</span> (<span class="hljs-params">${ci}</span>) <span class="hljs-params">INTERNAL</span> <span class="hljs-params">ASSERTION</span> <span class="hljs-params">FAILED</span>: `+<span class="hljs-params">r</span>;<span class="hljs-params">throw</span> <span class="hljs-params">ye</span>(<span class="hljs-params">i</span>),<span class="hljs-params">new</span> <span class="hljs-params">Error</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">z</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>||<span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">M</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>}<span class="hljs-params">const</span> <span class="hljs-params">I</span>={<span class="hljs-params">OK</span>:"<span class="hljs-params">ok</span>",<span class="hljs-params">CANCELLED</span>:"<span class="hljs-params">cancelled</span>",<span class="hljs-params">UNKNOWN</span>:"<span class="hljs-params">unknown</span>",<span class="hljs-params">INVALID_ARGUMENT</span>:"<span class="hljs-params">invalid</span>-<span class="hljs-params">argument</span>",<span class="hljs-params">DEADLINE_EXCEEDED</span>:"<span class="hljs-params">deadline</span>-<span class="hljs-params">exceeded</span>",<span class="hljs-params">NOT_FOUND</span>:"<span class="hljs-params">not</span>-<span class="hljs-params">found</span>",<span class="hljs-params">ALREADY_EXISTS</span>:"<span class="hljs-params">already</span>-<span class="hljs-params">exists</span>",<span class="hljs-params">PERMISSION_DENIED</span>:"<span class="hljs-params">permission</span>-<span class="hljs-params">denied</span>",<span class="hljs-params">UNAUTHENTICATED</span>:"<span class="hljs-params">unauthenticated</span>",<span class="hljs-params">RESOURCE_EXHAUSTED</span>:"<span class="hljs-params">resource</span>-<span class="hljs-params">exhausted</span>",<span class="hljs-params">FAILED_PRECONDITION</span>:"<span class="hljs-params">failed</span>-<span class="hljs-params">precondition</span>",<span class="hljs-params">ABORTED</span>:"<span class="hljs-params">aborted</span>",<span class="hljs-params">OUT_OF_RANGE</span>:"<span class="hljs-params">out</span>-<span class="hljs-params">of</span>-<span class="hljs-params">range</span>",<span class="hljs-params">UNIMPLEMENTED</span>:"<span class="hljs-params">unimplemented</span>",<span class="hljs-params">INTERNAL</span>:"<span class="hljs-params">internal</span>",<span class="hljs-params">UNAVAILABLE</span>:"<span class="hljs-params">unavailable</span>",<span class="hljs-params">DATA_LOSS</span>:"<span class="hljs-params">data</span>-<span class="hljs-params">loss</span>"};<span class="hljs-params">class</span> <span class="hljs-params">A</span> <span class="hljs-params">extends</span> <span class="hljs-params">Error</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">code</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">message</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">name</span>="<span class="hljs-params">FirebaseError</span>",<span class="hljs-params">this</span>.<span class="hljs-params">toString</span>=<span class="hljs-params">()</span>=&gt;</span><span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>: [code=<span class="hljs-subst">${<span class="hljs-keyword">this</span>.code}</span>]: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.message}</span>`</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ce</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>.promise=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">i,s</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.resolve=i,<span class="hljs-keyword">this</span>.reject=s})}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">el</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.user=s,<span class="hljs-keyword">this</span>.type=<span class="hljs-string">"OAuth"</span>,<span class="hljs-keyword">this</span>.authHeaders={},<span class="hljs-keyword">this</span>.authHeaders.Authorization=<span class="hljs-string">`Bearer <span class="hljs-subst">${i}</span>`</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tf</span></span>{getToken(){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">null</span>)}invalidateToken(){}start(i,s){i.enqueueRetryable(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>s(Me.UNAUTHENTICATED))}shutdown(){}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ef</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.token=i,<span class="hljs-keyword">this</span>.changeListener=<span class="hljs-literal">null</span>}getToken(){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-keyword">this</span>.token)}invalidateToken(){}start(i,s){<span class="hljs-keyword">this</span>.changeListener=s,i.enqueueRetryable(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>s(<span class="hljs-keyword">this</span>.token.user))}shutdown(){<span class="hljs-keyword">this</span>.changeListener=<span class="hljs-literal">null</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">If</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.t=i,<span class="hljs-keyword">this</span>.currentUser=Me.UNAUTHENTICATED,<span class="hljs-keyword">this</span>.i=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.forceRefresh=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.auth=<span class="hljs-literal">null</span>}start(i,s){<span class="hljs-keyword">var</span> o=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">let</span> a=<span class="hljs-keyword">this</span>.i;<span class="hljs-keyword">const</span> c=<span class="hljs-function"><span class="hljs-params">f</span>=&gt;</span><span class="hljs-keyword">this</span>.i!==a?<span class="hljs-function">(<span class="hljs-params">a=<span class="hljs-keyword">this</span>.i,s(f</span>)):<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>;<span class="hljs-params">let</span> <span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">this</span>.<span class="hljs-params">o</span>=<span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">this</span>.i++,<span class="hljs-keyword">this</span>.currentUser=<span class="hljs-keyword">this</span>.u(),u.resolve(),u=<span class="hljs-keyword">new</span> Ce,i.enqueueRetryable(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>c(<span class="hljs-keyword">this</span>.currentUser))};<span class="hljs-keyword">const</span> h=<span class="hljs-function"><span class="hljs-params">f</span>=&gt;</span>{i.enqueueRetryable(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"FirebaseCredentialsProvider"</span>,<span class="hljs-string">"Auth detected"</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">auth</span>=<span class="hljs-params">f</span>,<span class="hljs-params">o</span>.<span class="hljs-params">auth</span>.<span class="hljs-params">addAuthTokenListener</span>(<span class="hljs-params">o.o</span>),<span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">promise</span>,<span class="hljs-params">yield</span> <span class="hljs-params">c</span>(<span class="hljs-params">o.currentUser</span>)}))};<span class="hljs-params">this</span>.<span class="hljs-params">t</span>.<span class="hljs-params">onInit</span>(<span class="hljs-params">f=&gt;h(f</span>)),<span class="hljs-params">setTimeout</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.auth){<span class="hljs-keyword">const</span> f=<span class="hljs-keyword">this</span>.t.getImmediate({<span class="hljs-attr">optional</span>:!<span class="hljs-number">0</span>});f?h(f):<span class="hljs-function">(<span class="hljs-params">k(<span class="hljs-string">"FirebaseCredentialsProvider"</span>,<span class="hljs-string">"Auth not yet detected"</span></span>),<span class="hljs-params">u</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>,<span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>)}},0),<span class="hljs-params">i</span>.<span class="hljs-params">enqueueRetryable</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){0===<span class="hljs-params">o</span>.<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> u.promise,<span class="hljs-keyword">yield</span> c(o.currentUser</span>))}))}<span class="hljs-params">getToken</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">i</span>,<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">forceRefresh</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">forceRefresh</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>?<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>.<span class="hljs-params">getToken</span>(<span class="hljs-params">s</span>).<span class="hljs-params">then</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">this</span>.i!==i?(k(<span class="hljs-string">"FirebaseCredentialsProvider"</span>,<span class="hljs-string">"getToken aborted due to token change."</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">getToken</span><span class="hljs-params">()</span>):<span class="hljs-params">o</span>?(<span class="hljs-params">z(<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> o.accessToken</span>),<span class="hljs-params">new</span> <span class="hljs-params">el</span>(<span class="hljs-params">o.accessToken,<span class="hljs-keyword">this</span>.currentUser</span>)):<span class="hljs-params">null</span>):<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-literal">null</span></span>)}<span class="hljs-params">invalidateToken</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">forceRefresh</span>=!0}<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>.<span class="hljs-params">removeAuthTokenListener</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.o</span>)}<span class="hljs-params">u</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">auth</span>.<span class="hljs-params">getUid</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===i||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> i</span>),<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params">i</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Sf</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>="<span class="hljs-params">FirstParty</span>",<span class="hljs-params">this</span>.<span class="hljs-params">user</span>=<span class="hljs-params">Me</span>.<span class="hljs-params">FIRST_PARTY</span>}<span class="hljs-params">get</span> <span class="hljs-params">authHeaders</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>={"<span class="hljs-params">X</span>-<span class="hljs-params">Goog</span>-<span class="hljs-params">AuthUser</span>":<span class="hljs-params">this</span>.<span class="hljs-params">l</span>},<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">h</span>.<span class="hljs-params">auth</span>.<span class="hljs-params">getAuthHeaderValueForFirstParty</span>(<span class="hljs-params">[]</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">i.Authorization=s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">m</span>&amp;&amp;(<span class="hljs-params">i[<span class="hljs-string">"X-Goog-Iam-Authorization-Token"</span>]=<span class="hljs-keyword">this</span>.m</span>),<span class="hljs-params">i</span>}}<span class="hljs-params">class</span> <span class="hljs-params">xf</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">h</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">l</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">m</span>=<span class="hljs-params">o</span>}<span class="hljs-params">getToken</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Sf(<span class="hljs-keyword">this</span>.h,<span class="hljs-keyword">this</span>.l,<span class="hljs-keyword">this</span>.m</span>))}<span class="hljs-params">start</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">i</span>.<span class="hljs-params">enqueueRetryable</span>(<span class="hljs-params">(</span>)=&gt;</span>s(Me.FIRST_PARTY))}shutdown(){}invalidateToken(){}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">nt</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.previousValue=i,s&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s.sequenceNumberHandler=o=&gt;<span class="hljs-keyword">this</span>.g(o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">p</span>=<span class="hljs-params">o</span>=&gt;</span>s.writeSequenceNumber(o))}g(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.previousValue=<span class="hljs-built_in">Math</span>.max(i,<span class="hljs-keyword">this</span>.previousValue),<span class="hljs-keyword">this</span>.previousValue}next(){<span class="hljs-keyword">const</span> i=++<span class="hljs-keyword">this</span>.previousValue;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.p&amp;&amp;<span class="hljs-keyword">this</span>.p(i),i}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Df</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> self&amp;&amp;<span class="hljs-function">(<span class="hljs-params">self.crypto||self.msCrypto</span>),<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Uint8Array</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">i&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> i.getRandomValues</span>)<span class="hljs-params">i</span>.<span class="hljs-params">getRandomValues</span>(<span class="hljs-params">s</span>);<span class="hljs-params">else</span> <span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> o=<span class="hljs-number">0</span>;o&lt;r;o++</span>)<span class="hljs-params">s</span>[<span class="hljs-params">o</span>]=<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params"><span class="hljs-number">256</span>*<span class="hljs-built_in">Math</span>.random(</span>));<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">nt</span>.<span class="hljs-params">T</span>=-1;<span class="hljs-params">class</span> <span class="hljs-params">tl</span>{<span class="hljs-params">static</span> <span class="hljs-params">I</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>="<span class="hljs-params">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789</span>",<span class="hljs-params">s</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params"><span class="hljs-number">256</span><span class="hljs-regexp">/i.length)*i.length;let o="";for(;o.length&lt;20;){const a=Df(40);for(let c=0;c&lt;a.length;++c)o.length&lt;20&amp;&amp;a[c]&lt;s&amp;&amp;(o+=i.charAt(a[c]%i.length))}return o}}function $(r,i){return r&lt;i?-1:r&gt;i?1:0}function ui(r,i,s){return r.length===i.length&amp;&amp;r.every((o,a)=&gt;s(o,i[a]))}function nl(r){return r+"\0"}class Re{constructor(i,s){if(this.seconds=i,this.nanoseconds=s,s&lt;0)throw new A(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s&gt;=1e9)throw new A(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(i&lt;-62135596800)throw new A(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i&gt;=253402300800)throw new A(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}static now(){return Re.fromMillis(Date.now())}static fromDate(i){return Re.fromMillis(i.getTime())}static fromMillis(i){const s=Math.floor(i/</span><span class="hljs-number">1e3</span></span>),<span class="hljs-params">o</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params"><span class="hljs-number">1e6</span>*(i<span class="hljs-number">-1e3</span>*s</span>));<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Re</span>(<span class="hljs-params">s,o</span>)}<span class="hljs-params">toDate</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Date</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.toMillis(</span>))}<span class="hljs-params">toMillis</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 1<span class="hljs-params">e3</span>*<span class="hljs-params">this</span>.<span class="hljs-params">seconds</span>+<span class="hljs-params">this</span>.<span class="hljs-params">nanoseconds</span>/1<span class="hljs-params">e6</span>}<span class="hljs-params">_compareTo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">seconds</span>===<span class="hljs-params">i</span>.<span class="hljs-params">seconds</span>?<span class="hljs-params">$</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.nanoseconds,i.nanoseconds</span>):<span class="hljs-params">$</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.seconds,i.seconds</span>)}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">seconds</span>===<span class="hljs-params">this</span>.<span class="hljs-params">seconds</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">nanoseconds</span>===<span class="hljs-params">this</span>.<span class="hljs-params">nanoseconds</span>}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>"<span class="hljs-params">Timestamp</span>(<span class="hljs-params">seconds=<span class="hljs-string">"+this.seconds+"</span>, nanoseconds=<span class="hljs-string">"+this.nanoseconds+"</span></span>)"}<span class="hljs-params">toJSON</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>{<span class="hljs-params">seconds</span>:<span class="hljs-params">this</span>.<span class="hljs-params">seconds</span>,<span class="hljs-params">nanoseconds</span>:<span class="hljs-params">this</span>.<span class="hljs-params">nanoseconds</span>}}<span class="hljs-params">valueOf</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">String</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.seconds- <span class="hljs-number">-62135596800</span></span>).<span class="hljs-params">padStart</span>(<span class="hljs-params"><span class="hljs-number">12</span>,<span class="hljs-string">"0"</span></span>)+"."+<span class="hljs-params">String</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.nanoseconds</span>).<span class="hljs-params">padStart</span>(<span class="hljs-params"><span class="hljs-number">9</span>,<span class="hljs-string">"0"</span></span>)}}<span class="hljs-params">class</span> <span class="hljs-params">H</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>=<span class="hljs-params">i</span>}<span class="hljs-params">static</span> <span class="hljs-params">fromTimestamp</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">H</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">min</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">H</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Re(<span class="hljs-number">0</span>,<span class="hljs-number">0</span></span>))}<span class="hljs-params">compareTo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>.<span class="hljs-params">_compareTo</span>(<span class="hljs-params">i.timestamp</span>)}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.timestamp</span>)}<span class="hljs-params">toMicroseconds</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 1<span class="hljs-params">e6</span>*<span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>.<span class="hljs-params">seconds</span>+<span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>.<span class="hljs-params">nanoseconds</span>/1<span class="hljs-params">e3</span>}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>"<span class="hljs-params">SnapshotVersion</span>(<span class="hljs-params"><span class="hljs-string">"+this.timestamp.toString()+"</span></span>)"}<span class="hljs-params">toTimestamp</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">timestamp</span>}}<span class="hljs-params">function</span> <span class="hljs-params">il</span>(<span class="hljs-params">r</span>){<span class="hljs-params">let</span> <span class="hljs-params">i</span>=0;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,s</span>)&amp;&amp;<span class="hljs-params">i</span>++;<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Tn</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>.<span class="hljs-params">hasOwnProperty</span>.<span class="hljs-params">call</span>(<span class="hljs-params">r,s</span>)&amp;&amp;<span class="hljs-params">i</span>(<span class="hljs-params">s,r[s]</span>)}<span class="hljs-params">function</span> <span class="hljs-params">sl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i <span class="hljs-keyword">in</span> r</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(r,i</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}<span class="hljs-params">class</span> <span class="hljs-params">xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">void</span> 0===<span class="hljs-params">s</span>?<span class="hljs-params">s</span>=0:<span class="hljs-params">s</span>&gt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">V</span><span class="hljs-params">()</span>,<span class="hljs-params">void</span> 0===<span class="hljs-params">o</span>?<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">length</span>-<span class="hljs-params">s</span>:<span class="hljs-params">o</span>&gt;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>-<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">V</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">segments</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">offset</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">len</span>=<span class="hljs-params">o</span>}<span class="hljs-params">get</span> <span class="hljs-params">length</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">len</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> 0===<span class="hljs-params">xs</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,i</span>)}<span class="hljs-params">child</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">segments</span>.<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.offset,<span class="hljs-keyword">this</span>.limit(</span>));<span class="hljs-params">return</span> <span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">xs</span>?<span class="hljs-params">i</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{s.push(o</span>)}):<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">construct</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">limit</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">offset</span>+<span class="hljs-params">this</span>.<span class="hljs-params">length</span>}<span class="hljs-params">popFirst</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">construct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.segments,<span class="hljs-keyword">this</span>.offset+(i=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===i?<span class="hljs-number">1</span>:i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">length</span>-<span class="hljs-params">i</span>)}<span class="hljs-params">popLast</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">construct</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.segments,<span class="hljs-keyword">this</span>.offset,<span class="hljs-keyword">this</span>.length<span class="hljs-number">-1</span></span>)}<span class="hljs-params">firstSegment</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">segments</span>[<span class="hljs-params">this</span>.<span class="hljs-params">offset</span>]}<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.length<span class="hljs-number">-1</span></span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">segments</span>[<span class="hljs-params">this</span>.<span class="hljs-params">offset</span>+<span class="hljs-params">i</span>]}<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 0===<span class="hljs-params">this</span>.<span class="hljs-params">length</span>}<span class="hljs-params">isPrefixOf</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.length&lt;<span class="hljs-keyword">this</span>.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;<span class="hljs-keyword">this</span>.length;s++</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.get(s</span>)!==<span class="hljs-params">i</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}<span class="hljs-params">isImmediateParentOf</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.length+<span class="hljs-number">1</span>!==i.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;<span class="hljs-keyword">this</span>.length;s++</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.get(s</span>)!==<span class="hljs-params">i</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}<span class="hljs-params">forEach</span>(<span class="hljs-params">i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> s=<span class="hljs-keyword">this</span>.offset,o=<span class="hljs-keyword">this</span>.limit(</span>);<span class="hljs-params">s</span>&lt;<span class="hljs-params">o</span>;<span class="hljs-params">s</span>++)<span class="hljs-params">i</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.segments[s]</span>)}<span class="hljs-params">toArray</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">segments</span>.<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.offset,<span class="hljs-keyword">this</span>.limit(</span>))}<span class="hljs-params">static</span> <span class="hljs-params">comparator</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">Math</span>.<span class="hljs-params">min</span>(<span class="hljs-params">i.length,s.length</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;o;a++</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>.<span class="hljs-params">get</span>(<span class="hljs-params">a</span>),<span class="hljs-params">u</span>=<span class="hljs-params">s</span>.<span class="hljs-params">get</span>(<span class="hljs-params">a</span>);<span class="hljs-params">if</span>(<span class="hljs-params">c&lt;u</span>)<span class="hljs-params">return</span>-1;<span class="hljs-params">if</span>(<span class="hljs-params">c&gt;u</span>)<span class="hljs-params">return</span> 1}<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">length</span>&lt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>?-1:<span class="hljs-params">i</span>.<span class="hljs-params">length</span>&gt;<span class="hljs-params">s</span>.<span class="hljs-params">length</span>?1:0}}<span class="hljs-params">class</span> <span class="hljs-params">X</span> <span class="hljs-params">extends</span> <span class="hljs-params">xs</span>{<span class="hljs-params">construct</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">X</span>(<span class="hljs-params">i,s,o</span>)}<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">toArray</span><span class="hljs-params">()</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>}<span class="hljs-params">static</span> <span class="hljs-params">fromString</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">o.indexOf(<span class="hljs-string">"//"</span></span>)&gt;=0)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid segment (<span class="hljs-subst">${o}</span>). Paths must not contain // in them.`</span></span>);<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">...o.split(<span class="hljs-string">"/"</span></span>).<span class="hljs-params">filter</span>(<span class="hljs-params">a=&gt;a.length&gt;<span class="hljs-number">0</span></span>))}<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">X</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">static</span> <span class="hljs-params">emptyPath</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">X</span>(<span class="hljs-params">[]</span>)}}<span class="hljs-params">const</span> <span class="hljs-params">Cf</span>=/^[<span class="hljs-params">_a</span>-<span class="hljs-params">zA</span>-<span class="hljs-params">Z</span>][<span class="hljs-params">_a</span>-<span class="hljs-params">zA</span>-<span class="hljs-params">Z0</span>-9]*<span class="hljs-params">$</span>/;<span class="hljs-params">class</span> <span class="hljs-params">Oe</span> <span class="hljs-params">extends</span> <span class="hljs-params">xs</span>{<span class="hljs-params">construct</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Oe</span>(<span class="hljs-params">i,s,o</span>)}<span class="hljs-params">static</span> <span class="hljs-params">isValidIdentifier</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Cf</span>.<span class="hljs-params">test</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">toArray</span><span class="hljs-params">()</span>.<span class="hljs-params">map</span>(<span class="hljs-params">i=&gt;(i=i.replace(<span class="hljs-regexp">/\\/g</span>,<span class="hljs-string">"\\\\"</span></span>).<span class="hljs-params">replace</span>(<span class="hljs-params"><span class="hljs-regexp">/`/g</span>,<span class="hljs-string">"\\`"</span></span>),<span class="hljs-params">Oe</span>.<span class="hljs-params">isValidIdentifier</span>(<span class="hljs-params">i</span>)||(<span class="hljs-params">i=<span class="hljs-string">"`"</span>+i+<span class="hljs-string">"`"</span></span>),<span class="hljs-params">i</span>)).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>)}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>}<span class="hljs-params">isKeyField</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 1===<span class="hljs-params">this</span>.<span class="hljs-params">length</span>&amp;&amp;"<span class="hljs-params">__name__</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>)}<span class="hljs-params">static</span> <span class="hljs-params">keyField</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Oe</span>(<span class="hljs-params">[<span class="hljs-string">"__name__"</span>]</span>)}<span class="hljs-params">static</span> <span class="hljs-params">fromServerFormat</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=[];<span class="hljs-params">let</span> <span class="hljs-params">o</span>="",<span class="hljs-params">a</span>=0;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===o.length)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid field path (<span class="hljs-subst">${i}</span>). Paths must not be empty, begin with '.', end with '.', or contain '..'`</span>);s.push(o),o=<span class="hljs-string">""</span>};<span class="hljs-keyword">let</span> u=!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(;a&lt;i.length;){<span class="hljs-keyword">const</span> h=i[a];<span class="hljs-keyword">if</span>(<span class="hljs-string">"\\"</span>===h){<span class="hljs-keyword">if</span>(a+<span class="hljs-number">1</span>===i.length)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">"Path has trailing escape character: "</span>+i);<span class="hljs-keyword">const</span> f=i[a+<span class="hljs-number">1</span>];<span class="hljs-keyword">if</span>(<span class="hljs-string">"\\"</span>!==f&amp;&amp;<span class="hljs-string">"."</span>!==f&amp;&amp;<span class="hljs-string">"`"</span>!==f)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">"Path has invalid escape sequence: "</span>+i);o+=f,a+=<span class="hljs-number">2</span>}<span class="hljs-keyword">else</span><span class="hljs-string">"`"</span>===h?<span class="hljs-function">(<span class="hljs-params">u=!u,a++</span>):"."!==<span class="hljs-params">h</span>||<span class="hljs-params">u</span>?(<span class="hljs-params">o+=h,a++</span>):(<span class="hljs-params">c(</span>),<span class="hljs-params">a</span>++)}<span class="hljs-params">if</span>(<span class="hljs-params">c(</span>),<span class="hljs-params">u</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Unterminated ` in path: "</span>+i</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Oe</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">static</span> <span class="hljs-params">emptyPath</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Oe</span>(<span class="hljs-params">[]</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">li</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">fields</span>=<span class="hljs-params">i</span>,<span class="hljs-params">i</span>.<span class="hljs-params">sort</span>(<span class="hljs-params">Oe.comparator</span>)}<span class="hljs-params">covers</span>(<span class="hljs-params">i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.fields</span>)<span class="hljs-params">if</span>(<span class="hljs-params">s.isPrefixOf(i</span>))<span class="hljs-params">return</span>!0;<span class="hljs-params">return</span>!1}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">ui</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.fields,i.fields,(s,o</span>)=&gt;</span>s.isEqual(o))}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ae</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.binaryString=i}<span class="hljs-keyword">static</span> fromBase64String(i){<span class="hljs-keyword">const</span> s=atob(i);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Ae(s)}<span class="hljs-keyword">static</span> fromUint8Array(i){<span class="hljs-keyword">const</span> s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-keyword">let</span> a=<span class="hljs-string">""</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;o.length;++c)a+=<span class="hljs-built_in">String</span>.fromCharCode(o[c]);<span class="hljs-keyword">return</span> a}(i);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Ae(s)}toBase64(){<span class="hljs-keyword">return</span> btoa(<span class="hljs-keyword">this</span>.binaryString)}toUint8Array(){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(i.length);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> o=<span class="hljs-number">0</span>;o&lt;i.length;o++)s[o]=i.charCodeAt(o);<span class="hljs-keyword">return</span> s}(<span class="hljs-keyword">this</span>.binaryString)}approximateByteSize(){<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*<span class="hljs-keyword">this</span>.binaryString.length}compareTo(i){<span class="hljs-keyword">return</span> $(<span class="hljs-keyword">this</span>.binaryString,i.binaryString)}isEqual(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.binaryString===i.binaryString}}Ae.EMPTY_BYTE_STRING=<span class="hljs-keyword">new</span> Ae(<span class="hljs-string">""</span>);<span class="hljs-keyword">const</span> Af=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-regexp">/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ht</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(z(!!r),<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r){<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> s=Af.exec(r);<span class="hljs-keyword">if</span>(z(!!s),s[<span class="hljs-number">1</span>]){<span class="hljs-keyword">let</span> a=s[<span class="hljs-number">1</span>];a=<span class="hljs-function">(<span class="hljs-params">a+<span class="hljs-string">"000000000"</span></span>).<span class="hljs-params">substr</span>(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">9</span></span>),<span class="hljs-params">i</span>=<span class="hljs-params">Number</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Date</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span>{<span class="hljs-params">seconds</span>:<span class="hljs-params">Math</span>.<span class="hljs-params">floor</span>(<span class="hljs-params">o.getTime(</span>)/1<span class="hljs-params">e3</span>),<span class="hljs-params">nanos</span>:<span class="hljs-params">i</span>}}<span class="hljs-params">return</span>{<span class="hljs-params">seconds</span>:<span class="hljs-params">_e</span>(<span class="hljs-params">r.seconds</span>),<span class="hljs-params">nanos</span>:<span class="hljs-params">_e</span>(<span class="hljs-params">r.nanos</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">_e</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">r</span>:"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">Number</span>(<span class="hljs-params">r</span>):0}<span class="hljs-params">function</span> <span class="hljs-params">hi</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>?<span class="hljs-params">Ae</span>.<span class="hljs-params">fromBase64String</span>(<span class="hljs-params">r</span>):<span class="hljs-params">Ae</span>.<span class="hljs-params">fromUint8Array</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">la</span>(<span class="hljs-params">r</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>,<span class="hljs-params">s</span>;<span class="hljs-params">return</span>"<span class="hljs-params">server_timestamp</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>===(s=((<span class="hljs-literal">null</span>===(i=<span class="hljs-literal">null</span>==r?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:r.mapValue</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">i</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">i</span>.<span class="hljs-params">fields</span>)||{}).<span class="hljs-params">__type__</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">s</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">s</span>.<span class="hljs-params">stringValue</span>)}<span class="hljs-params">function</span> <span class="hljs-params">rl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>.<span class="hljs-params">__previous_value__</span>;<span class="hljs-params">return</span> <span class="hljs-params">la</span>(<span class="hljs-params">i</span>)?<span class="hljs-params">rl</span>(<span class="hljs-params">i</span>):<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Ds</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">r.mapValue.fields.__local_write_time__.timestampValue</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Re</span>(<span class="hljs-params">i.seconds,i.nanos</span>)}<span class="hljs-params">function</span> <span class="hljs-params">En</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>==<span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">Wr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> 0===<span class="hljs-params">r</span>&amp;&amp;1/<span class="hljs-params">r</span>==-1/0}<span class="hljs-params">function</span> <span class="hljs-params">ol</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">number</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">Number</span>.<span class="hljs-params">isInteger</span>(<span class="hljs-params">r</span>)&amp;&amp;!<span class="hljs-params">Wr</span>(<span class="hljs-params">r</span>)&amp;&amp;<span class="hljs-params">r</span>&lt;=<span class="hljs-params">Number</span>.<span class="hljs-params">MAX_SAFE_INTEGER</span>&amp;&amp;<span class="hljs-params">r</span>&gt;=<span class="hljs-params">Number</span>.<span class="hljs-params">MIN_SAFE_INTEGER</span>}<span class="hljs-params">class</span> <span class="hljs-params">U</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">path</span>=<span class="hljs-params">i</span>}<span class="hljs-params">static</span> <span class="hljs-params">fromPath</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">X.fromString(i</span>))}<span class="hljs-params">static</span> <span class="hljs-params">fromName</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">X.fromString(i</span>).<span class="hljs-params">popFirst</span>(<span class="hljs-params"><span class="hljs-number">5</span></span>))}<span class="hljs-params">hasCollectionId</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">path</span>.<span class="hljs-params">length</span>&gt;=2&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">path</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.path.length<span class="hljs-number">-2</span></span>)===<span class="hljs-params">i</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">i</span>&amp;&amp;0===<span class="hljs-params">X</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.path,i.path</span>)}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">path</span>.<span class="hljs-params">toString</span><span class="hljs-params">()</span>}<span class="hljs-params">static</span> <span class="hljs-params">comparator</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">X</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params">i.path,s.path</span>)}<span class="hljs-params">static</span> <span class="hljs-params">isDocumentKey</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">length</span>%2==0}<span class="hljs-params">static</span> <span class="hljs-params">fromSegments</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> X(i.slice(</span>)))}}<span class="hljs-params">function</span> <span class="hljs-params">In</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">nullValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?0:"<span class="hljs-params">booleanValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?1:"<span class="hljs-params">integerValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>||"<span class="hljs-params">doubleValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?2:"<span class="hljs-params">timestampValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?3:"<span class="hljs-params">stringValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?5:"<span class="hljs-params">bytesValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?6:"<span class="hljs-params">referenceValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?7:"<span class="hljs-params">geoPointValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?8:"<span class="hljs-params">arrayValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?9:"<span class="hljs-params">mapValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">la</span>(<span class="hljs-params">r</span>)?4:10:<span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">_t</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">In</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">s!==In(i</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">switch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">case</span> 0:<span class="hljs-params">return</span>!0;<span class="hljs-params">case</span> 1:<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">booleanValue</span>===<span class="hljs-params">i</span>.<span class="hljs-params">booleanValue</span>;<span class="hljs-params">case</span> 4:<span class="hljs-params">return</span> <span class="hljs-params">Ds</span>(<span class="hljs-params">r</span>).<span class="hljs-params">isEqual</span>(<span class="hljs-params">Ds(i</span>));<span class="hljs-params">case</span> 3:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> o.timestampValue&amp;&amp;<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> a.timestampValue&amp;&amp;o.timestampValue.length===a.timestampValue.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">timestampValue</span>===<span class="hljs-params">a</span>.<span class="hljs-params">timestampValue</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">o.timestampValue</span>),<span class="hljs-params">u</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">a.timestampValue</span>);<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">seconds</span>===<span class="hljs-params">u</span>.<span class="hljs-params">seconds</span>&amp;&amp;<span class="hljs-params">c</span>.<span class="hljs-params">nanos</span>===<span class="hljs-params">u</span>.<span class="hljs-params">nanos</span>}(<span class="hljs-params">r,i</span>);<span class="hljs-params">case</span> 5:<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">stringValue</span>===<span class="hljs-params">i</span>.<span class="hljs-params">stringValue</span>;<span class="hljs-params">case</span> 6:<span class="hljs-params">return</span> <span class="hljs-params">a</span>=<span class="hljs-params">i</span>,<span class="hljs-params">hi</span>(<span class="hljs-params">r.bytesValue</span>).<span class="hljs-params">isEqual</span>(<span class="hljs-params">hi(a.bytesValue</span>));<span class="hljs-params">case</span> 7:<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">referenceValue</span>===<span class="hljs-params">i</span>.<span class="hljs-params">referenceValue</span>;<span class="hljs-params">case</span> 8:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">return</span> <span class="hljs-params">_e</span>(<span class="hljs-params">o.geoPointValue.latitude</span>)===<span class="hljs-params">_e</span>(<span class="hljs-params">a.geoPointValue.latitude</span>)&amp;&amp;<span class="hljs-params">_e</span>(<span class="hljs-params">o.geoPointValue.longitude</span>)===<span class="hljs-params">_e</span>(<span class="hljs-params">a.geoPointValue.longitude</span>)}(<span class="hljs-params">r,i</span>);<span class="hljs-params">case</span> 2:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"integerValue"</span><span class="hljs-keyword">in</span> o&amp;&amp;<span class="hljs-string">"integerValue"</span><span class="hljs-keyword">in</span> a</span>)<span class="hljs-params">return</span> <span class="hljs-params">_e</span>(<span class="hljs-params">o.integerValue</span>)===<span class="hljs-params">_e</span>(<span class="hljs-params">a.integerValue</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"doubleValue"</span><span class="hljs-keyword">in</span> o&amp;&amp;<span class="hljs-string">"doubleValue"</span><span class="hljs-keyword">in</span> a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">_e</span>(<span class="hljs-params">o.doubleValue</span>),<span class="hljs-params">u</span>=<span class="hljs-params">_e</span>(<span class="hljs-params">a.doubleValue</span>);<span class="hljs-params">return</span> <span class="hljs-params">c</span>===<span class="hljs-params">u</span>?<span class="hljs-params">Wr</span>(<span class="hljs-params">c</span>)===<span class="hljs-params">Wr</span>(<span class="hljs-params">u</span>):<span class="hljs-params">isNaN</span>(<span class="hljs-params">c</span>)&amp;&amp;<span class="hljs-params">isNaN</span>(<span class="hljs-params">u</span>)}<span class="hljs-params">return</span>!1}(<span class="hljs-params">r,i</span>);<span class="hljs-params">case</span> 9:<span class="hljs-params">return</span> <span class="hljs-params">ui</span>(<span class="hljs-params">r.arrayValue.values||[],i.arrayValue.values||[],_t</span>);<span class="hljs-params">case</span> 10:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>||{},<span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>||{};<span class="hljs-params">if</span>(<span class="hljs-params">il(c</span>)!==<span class="hljs-params">il</span>(<span class="hljs-params">u</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> h <span class="hljs-keyword">in</span> c</span>)<span class="hljs-params">if</span>(<span class="hljs-params">c.hasOwnProperty(h</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===u[h]||!_t(c[h],u[h]</span>)))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}(<span class="hljs-params">r,i</span>);<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">var</span> <span class="hljs-params">a</span>}<span class="hljs-params">function</span> <span class="hljs-params">Cs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">void</span> 0!==(<span class="hljs-params">r.values||[]</span>).<span class="hljs-params">find</span>(<span class="hljs-params">s=&gt;_t(s,i</span>))}<span class="hljs-params">function</span> <span class="hljs-params">di</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">In</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">In</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">s!==o</span>)<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">s,o</span>);<span class="hljs-params">switch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">case</span> 0:<span class="hljs-params">return</span> 0;<span class="hljs-params">case</span> 1:<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">r.booleanValue,i.booleanValue</span>);<span class="hljs-params">case</span> 2:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">_e</span>(<span class="hljs-params">a.integerValue||a.doubleValue</span>),<span class="hljs-params">h</span>=<span class="hljs-params">_e</span>(<span class="hljs-params">c.integerValue||c.doubleValue</span>);<span class="hljs-params">return</span> <span class="hljs-params">u</span>&lt;<span class="hljs-params">h</span>?-1:<span class="hljs-params">u</span>&gt;<span class="hljs-params">h</span>?1:<span class="hljs-params">u</span>===<span class="hljs-params">h</span>?0:<span class="hljs-params">isNaN</span>(<span class="hljs-params">u</span>)?<span class="hljs-params">isNaN</span>(<span class="hljs-params">h</span>)?0:-1:1}(<span class="hljs-params">r,i</span>);<span class="hljs-params">case</span> 3:<span class="hljs-params">return</span> <span class="hljs-params">al</span>(<span class="hljs-params">r.timestampValue,i.timestampValue</span>);<span class="hljs-params">case</span> 4:<span class="hljs-params">return</span> <span class="hljs-params">al</span>(<span class="hljs-params">Ds(r</span>),<span class="hljs-params">Ds</span>(<span class="hljs-params">i</span>));<span class="hljs-params">case</span> 5:<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">r.stringValue,i.stringValue</span>);<span class="hljs-params">case</span> 6:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">hi</span>(<span class="hljs-params">a</span>),<span class="hljs-params">h</span>=<span class="hljs-params">hi</span>(<span class="hljs-params">c</span>);<span class="hljs-params">return</span> <span class="hljs-params">u</span>.<span class="hljs-params">compareTo</span>(<span class="hljs-params">h</span>)}(<span class="hljs-params">r.bytesValue,i.bytesValue</span>);<span class="hljs-params">case</span> 7:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>),<span class="hljs-params">h</span>=<span class="hljs-params">c</span>.<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> f=<span class="hljs-number">0</span>;f&lt;u.length&amp;&amp;f&lt;h.length;f++</span>){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">$</span>(<span class="hljs-params">u[f],h[f]</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!==v</span>)<span class="hljs-params">return</span> <span class="hljs-params">v</span>}<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">u.length,h.length</span>)}(<span class="hljs-params">r.referenceValue,i.referenceValue</span>);<span class="hljs-params">case</span> 8:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">$</span>(<span class="hljs-params">_e(a.latitude</span>),<span class="hljs-params">_e</span>(<span class="hljs-params">c.latitude</span>));<span class="hljs-params">return</span> 0!==<span class="hljs-params">u</span>?<span class="hljs-params">u</span>:<span class="hljs-params">$</span>(<span class="hljs-params">_e(a.longitude</span>),<span class="hljs-params">_e</span>(<span class="hljs-params">c.longitude</span>))}(<span class="hljs-params">r.geoPointValue,i.geoPointValue</span>);<span class="hljs-params">case</span> 9:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">values</span>||[],<span class="hljs-params">h</span>=<span class="hljs-params">c</span>.<span class="hljs-params">values</span>||[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> f=<span class="hljs-number">0</span>;f&lt;u.length&amp;&amp;f&lt;h.length;++f</span>){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">di</span>(<span class="hljs-params">u[f],h[f]</span>);<span class="hljs-params">if</span>(<span class="hljs-params">v</span>)<span class="hljs-params">return</span> <span class="hljs-params">v</span>}<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">u.length,h.length</span>)}(<span class="hljs-params">r.arrayValue,i.arrayValue</span>);<span class="hljs-params">case</span> 10:<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">fields</span>||{},<span class="hljs-params">h</span>=<span class="hljs-params">Object</span>.<span class="hljs-params">keys</span>(<span class="hljs-params">u</span>),<span class="hljs-params">f</span>=<span class="hljs-params">c</span>.<span class="hljs-params">fields</span>||{},<span class="hljs-params">v</span>=<span class="hljs-params">Object</span>.<span class="hljs-params">keys</span>(<span class="hljs-params">f</span>);<span class="hljs-params">h</span>.<span class="hljs-params">sort</span><span class="hljs-params">()</span>,<span class="hljs-params">v</span>.<span class="hljs-params">sort</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> w=<span class="hljs-number">0</span>;w&lt;h.length&amp;&amp;w&lt;v.length;++w</span>){<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">$</span>(<span class="hljs-params">h[w],v[w]</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!==T</span>)<span class="hljs-params">return</span> <span class="hljs-params">T</span>;<span class="hljs-params">const</span> <span class="hljs-params">S</span>=<span class="hljs-params">di</span>(<span class="hljs-params">u[h[w]],f[v[w]]</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!==S</span>)<span class="hljs-params">return</span> <span class="hljs-params">S</span>}<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">h.length,v.length</span>)}(<span class="hljs-params">r.mapValue,i.mapValue</span>);<span class="hljs-params">default</span>:<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}<span class="hljs-params">function</span> <span class="hljs-params">al</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r&amp;&amp;<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> i&amp;&amp;r.length===i.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">$</span>(<span class="hljs-params">r,i</span>);<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">i</span>),<span class="hljs-params">a</span>=<span class="hljs-params">$</span>(<span class="hljs-params">s.seconds,o.seconds</span>);<span class="hljs-params">return</span> 0!==<span class="hljs-params">a</span>?<span class="hljs-params">a</span>:<span class="hljs-params">$</span>(<span class="hljs-params">s.nanos,o.nanos</span>)}<span class="hljs-params">function</span> <span class="hljs-params">ha</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">da</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">da</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>"<span class="hljs-params">nullValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?"<span class="hljs-params">null</span>":"<span class="hljs-params">booleanValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?""+<span class="hljs-params">r</span>.<span class="hljs-params">booleanValue</span>:"<span class="hljs-params">integerValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?""+<span class="hljs-params">r</span>.<span class="hljs-params">integerValue</span>:"<span class="hljs-params">doubleValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?""+<span class="hljs-params">r</span>.<span class="hljs-params">doubleValue</span>:"<span class="hljs-params">timestampValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span>`<span class="hljs-params">time</span>(<span class="hljs-params">${a.seconds},${a.nanos}</span>)`}(<span class="hljs-params">r.timestampValue</span>):"<span class="hljs-params">stringValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">r</span>.<span class="hljs-params">stringValue</span>:"<span class="hljs-params">bytesValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">hi</span>(<span class="hljs-params">r.bytesValue</span>).<span class="hljs-params">toBase64</span><span class="hljs-params">()</span>:"<span class="hljs-params">referenceValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">U</span>.<span class="hljs-params">fromName</span>(<span class="hljs-params">r.referenceValue</span>).<span class="hljs-params">toString</span><span class="hljs-params">()</span>:"<span class="hljs-params">geoPointValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?`<span class="hljs-params">geo</span>(<span class="hljs-params">${(i=r.geoPointValue</span>).<span class="hljs-params">latitude</span>},<span class="hljs-params">$</span>{<span class="hljs-params">i</span>.<span class="hljs-params">longitude</span>})`:"<span class="hljs-params">arrayValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o</span>){<span class="hljs-params">let</span> <span class="hljs-params">a</span>="[",<span class="hljs-params">c</span>=!0;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> o.values||[]</span>)<span class="hljs-params">c</span>?<span class="hljs-params">c</span>=!1:<span class="hljs-params">a</span>+=",",<span class="hljs-params">a</span>+=<span class="hljs-params">da</span>(<span class="hljs-params">u</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>+"]"}(<span class="hljs-params">r.arrayValue</span>):"<span class="hljs-params">mapValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Object</span>.<span class="hljs-params">keys</span>(<span class="hljs-params">o.fields||{}</span>).<span class="hljs-params">sort</span><span class="hljs-params">()</span>;<span class="hljs-params">let</span> <span class="hljs-params">c</span>="{",<span class="hljs-params">u</span>=!0;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> h <span class="hljs-keyword">of</span> a</span>)<span class="hljs-params">u</span>?<span class="hljs-params">u</span>=!1:<span class="hljs-params">c</span>+=",",<span class="hljs-params">c</span>+=`<span class="hljs-params">$</span>{<span class="hljs-params">h</span>}:<span class="hljs-params">$</span>{<span class="hljs-params">da</span>(<span class="hljs-params">o.fields[h]</span>)}`;<span class="hljs-params">return</span> <span class="hljs-params">c</span>+"}"}(<span class="hljs-params">r.mapValue</span>):<span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">var</span> <span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Jr</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>{<span class="hljs-params">referenceValue</span>:`<span class="hljs-params">projects</span>/<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">projectId</span>}/<span class="hljs-params">databases</span>/<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">database</span>}/<span class="hljs-params">documents</span>/<span class="hljs-params">$</span>{<span class="hljs-params">i</span>.<span class="hljs-params">path</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>}`}}<span class="hljs-params">function</span> <span class="hljs-params">fa</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>&amp;&amp;"<span class="hljs-params">integerValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">pa</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>&amp;&amp;"<span class="hljs-params">arrayValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">cl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>&amp;&amp;"<span class="hljs-params">nullValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">ul</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>&amp;&amp;"<span class="hljs-params">doubleValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">isNaN</span>(<span class="hljs-params"><span class="hljs-built_in">Number</span>(r.doubleValue</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Xr</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!!<span class="hljs-params">r</span>&amp;&amp;"<span class="hljs-params">mapValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">Rs</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.geoPointValue</span>)<span class="hljs-params">return</span>{<span class="hljs-params">geoPointValue</span>:<span class="hljs-params">Object</span>.<span class="hljs-params">assign</span>(<span class="hljs-params">{},r.geoPointValue</span>)};<span class="hljs-params">if</span>(<span class="hljs-params">r.timestampValue&amp;&amp;<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> r.timestampValue</span>)<span class="hljs-params">return</span>{<span class="hljs-params">timestampValue</span>:<span class="hljs-params">Object</span>.<span class="hljs-params">assign</span>(<span class="hljs-params">{},r.timestampValue</span>)};<span class="hljs-params">if</span>(<span class="hljs-params">r.mapValue</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>={<span class="hljs-params">mapValue</span>:{<span class="hljs-params">fields</span>:{}}};<span class="hljs-params">return</span> <span class="hljs-params">Tn</span>(<span class="hljs-params">r.mapValue.fields,(s,o</span>)=&gt;</span>i.mapValue.fields[s]=Rs(o)),i}<span class="hljs-keyword">if</span>(r.arrayValue){<span class="hljs-keyword">const</span> i={<span class="hljs-attr">arrayValue</span>:{<span class="hljs-attr">values</span>:[]}};<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;<span class="hljs-function">(<span class="hljs-params">r.arrayValue.values||[]</span>).<span class="hljs-params">length</span>;++<span class="hljs-params">s</span>)<span class="hljs-params">i</span>.<span class="hljs-params">arrayValue</span>.<span class="hljs-params">values</span>[<span class="hljs-params">s</span>]=<span class="hljs-params">Rs</span>(<span class="hljs-params">r.arrayValue.values[s]</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">return</span> <span class="hljs-params">Object</span>.<span class="hljs-params">assign</span>(<span class="hljs-params">{},r</span>)}<span class="hljs-params">class</span> <span class="hljs-params">qe</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">value</span>=<span class="hljs-params">i</span>}<span class="hljs-params">static</span> <span class="hljs-params">empty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">qe</span>(<span class="hljs-params">{mapValue:{}}</span>)}<span class="hljs-params">field</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.isEmpty(</span>))<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">value</span>;{<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">value</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> o=<span class="hljs-number">0</span>;o&lt;i.length<span class="hljs-number">-1</span>;++o</span>)<span class="hljs-params">if</span>(<span class="hljs-params">s=(s.mapValue.fields||{}</span>)[<span class="hljs-params">i</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o</span>)],!<span class="hljs-params">Xr</span>(<span class="hljs-params">s</span>))<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>=(<span class="hljs-params">s.mapValue.fields||{}</span>)[<span class="hljs-params">i</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>],<span class="hljs-params">s</span>||<span class="hljs-params">null</span>}}<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">getFieldsMap</span>(<span class="hljs-params">i.popLast(</span>))[<span class="hljs-params">i</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>]=<span class="hljs-params">Rs</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">setAll</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">Oe</span>.<span class="hljs-params">emptyPath</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>={},<span class="hljs-params">a</span>=[];<span class="hljs-params">i</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(u,h</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(!s.isImmediateParentOf(h)){<span class="hljs-keyword">const</span> f=<span class="hljs-keyword">this</span>.getFieldsMap(s);<span class="hljs-keyword">this</span>.applyChanges(f,o,a),o={},a=[],s=h.popLast()}u?o[h.lastSegment()]=Rs(u):a.push(h.lastSegment())});<span class="hljs-keyword">const</span> c=<span class="hljs-keyword">this</span>.getFieldsMap(s);<span class="hljs-keyword">this</span>.applyChanges(c,o,a)}<span class="hljs-keyword">delete</span>(i){<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">this</span>.field(i.popLast());Xr(s)&amp;&amp;s.mapValue.fields&amp;&amp;<span class="hljs-keyword">delete</span> s.mapValue.fields[i.lastSegment()]}isEqual(i){<span class="hljs-keyword">return</span> _t(<span class="hljs-keyword">this</span>.value,i.value)}getFieldsMap(i){<span class="hljs-keyword">let</span> s=<span class="hljs-keyword">this</span>.value;s.mapValue.fields||<span class="hljs-function">(<span class="hljs-params">s.mapValue={fields:{}}</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> o=<span class="hljs-number">0</span>;o&lt;i.length;++o</span>){<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>[<span class="hljs-params">i</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o</span>)];<span class="hljs-params">Xr</span>(<span class="hljs-params">a</span>)&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>||(<span class="hljs-params">a={mapValue:{fields:{}}},s.mapValue.fields[i.get(o</span>)]=<span class="hljs-params">a</span>),<span class="hljs-params">s</span>=<span class="hljs-params">a</span>}<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>}<span class="hljs-params">applyChanges</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">Tn</span>(<span class="hljs-params">s,(a,c</span>)=&gt;</span>i[a]=c);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> o)<span class="hljs-keyword">delete</span> i[a]}clone(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> qe(Rs(<span class="hljs-keyword">this</span>.value))}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ll</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=[];<span class="hljs-keyword">return</span> Tn(r.fields,(s,o)=&gt;{<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">new</span> Oe([s]);<span class="hljs-keyword">if</span>(Xr(o)){<span class="hljs-keyword">const</span> c=ll(o.mapValue).fields;<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===c.length)i.push(a);<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> c)i.push(a.child(u))}<span class="hljs-keyword">else</span> i.push(a)}),<span class="hljs-keyword">new</span> li(i)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ae</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a,c){<span class="hljs-keyword">this</span>.key=i,<span class="hljs-keyword">this</span>.documentType=s,<span class="hljs-keyword">this</span>.version=o,<span class="hljs-keyword">this</span>.data=a,<span class="hljs-keyword">this</span>.documentState=c}<span class="hljs-keyword">static</span> newInvalidDocument(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ae(i,<span class="hljs-number">0</span>,H.min(),qe.empty(),<span class="hljs-number">0</span>)}<span class="hljs-keyword">static</span> newFoundDocument(i,s,o){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ae(i,<span class="hljs-number">1</span>,s,o,<span class="hljs-number">0</span>)}<span class="hljs-keyword">static</span> newNoDocument(i,s){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ae(i,<span class="hljs-number">2</span>,s,qe.empty(),<span class="hljs-number">0</span>)}<span class="hljs-keyword">static</span> newUnknownDocument(i,s){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ae(i,<span class="hljs-number">3</span>,s,qe.empty(),<span class="hljs-number">2</span>)}convertToFoundDocument(i,s){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version=i,<span class="hljs-keyword">this</span>.documentType=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.data=s,<span class="hljs-keyword">this</span>.documentState=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>}convertToNoDocument(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version=i,<span class="hljs-keyword">this</span>.documentType=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.data=qe.empty(),<span class="hljs-keyword">this</span>.documentState=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>}convertToUnknownDocument(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version=i,<span class="hljs-keyword">this</span>.documentType=<span class="hljs-number">3</span>,<span class="hljs-keyword">this</span>.data=qe.empty(),<span class="hljs-keyword">this</span>.documentState=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>}setHasCommittedMutations(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentState=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>}setHasLocalMutations(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.documentState=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>}<span class="hljs-keyword">get</span> hasLocalMutations(){<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>.documentState}<span class="hljs-keyword">get</span> hasCommittedMutations(){<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>===<span class="hljs-keyword">this</span>.documentState}<span class="hljs-keyword">get</span> hasPendingWrites(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hasLocalMutations||<span class="hljs-keyword">this</span>.hasCommittedMutations}isValidDocument(){<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>!==<span class="hljs-keyword">this</span>.documentType}isFoundDocument(){<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>===<span class="hljs-keyword">this</span>.documentType}isNoDocument(){<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>===<span class="hljs-keyword">this</span>.documentType}isUnknownDocument(){<span class="hljs-keyword">return</span> <span class="hljs-number">3</span>===<span class="hljs-keyword">this</span>.documentType}isEqual(i){<span class="hljs-keyword">return</span> i <span class="hljs-keyword">instanceof</span> ae&amp;&amp;<span class="hljs-keyword">this</span>.key.isEqual(i.key)&amp;&amp;<span class="hljs-keyword">this</span>.version.isEqual(i.version)&amp;&amp;<span class="hljs-keyword">this</span>.documentType===i.documentType&amp;&amp;<span class="hljs-keyword">this</span>.documentState===i.documentState&amp;&amp;<span class="hljs-keyword">this</span>.data.isEqual(i.data)}clone(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ae(<span class="hljs-keyword">this</span>.key,<span class="hljs-keyword">this</span>.documentType,<span class="hljs-keyword">this</span>.version,<span class="hljs-keyword">this</span>.data.clone(),<span class="hljs-keyword">this</span>.documentState)}toString(){<span class="hljs-keyword">return</span><span class="hljs-string">`Document(<span class="hljs-subst">${<span class="hljs-keyword">this</span>.key}</span>, <span class="hljs-subst">${<span class="hljs-keyword">this</span>.version}</span>, <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.data.value)}</span>, {documentType: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.documentType}</span>}), {documentState: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.documentState}</span>})`</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">kf</span></span>{<span class="hljs-keyword">constructor</span>(i,s=null,o=[],a=[],c=null,u=null,h=null){<span class="hljs-keyword">this</span>.path=i,<span class="hljs-keyword">this</span>.collectionGroup=s,<span class="hljs-keyword">this</span>.orderBy=o,<span class="hljs-keyword">this</span>.filters=a,<span class="hljs-keyword">this</span>.limit=c,<span class="hljs-keyword">this</span>.startAt=u,<span class="hljs-keyword">this</span>.endAt=h,<span class="hljs-keyword">this</span>.A=<span class="hljs-literal">null</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hl</span>(<span class="hljs-params">r,i=null,s=[],o=[],a=null,c=null,u=null</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kf(r,i,s,o,a,c,u)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">As</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=M(r);<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===i.A){<span class="hljs-keyword">let</span> s=i.path.canonicalString();<span class="hljs-literal">null</span>!==i.collectionGroup&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s+=<span class="hljs-string">"|cg:"</span>+i.collectionGroup</span>),<span class="hljs-params">s</span>+="|<span class="hljs-params">f</span>:",<span class="hljs-params">s</span>+=<span class="hljs-params">i</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">map</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>+<span class="hljs-params">r</span>.<span class="hljs-params">op</span>.<span class="hljs-params">toString</span><span class="hljs-params">()</span>+<span class="hljs-params">ha</span>(<span class="hljs-params">r.value</span>)}(<span class="hljs-params">o</span>)).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">","</span></span>),<span class="hljs-params">s</span>+="|<span class="hljs-params">ob</span>:",<span class="hljs-params">s</span>+=<span class="hljs-params">i</span>.<span class="hljs-params">orderBy</span>.<span class="hljs-params">map</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">return</span>(a=o</span>).<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>+<span class="hljs-params">a</span>.<span class="hljs-params">dir</span>;<span class="hljs-params">var</span> <span class="hljs-params">a</span>}).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">","</span></span>),<span class="hljs-params">En</span>(<span class="hljs-params">i.limit</span>)||(<span class="hljs-params">s+=<span class="hljs-string">"|l:"</span>,s+=i.limit</span>),<span class="hljs-params">i</span>.<span class="hljs-params">startAt</span>&amp;&amp;(<span class="hljs-params">s+=<span class="hljs-string">"|lb:"</span>,s+=no(i.startAt</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">endAt</span>&amp;&amp;(<span class="hljs-params">s+=<span class="hljs-string">"|ub:"</span>,s+=no(i.endAt</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">A</span>=<span class="hljs-params">s</span>}<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">A</span>}<span class="hljs-params">function</span> <span class="hljs-params">eo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.limit!==i.limit||r.orderBy.length!==i.orderBy.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;r.orderBy.length;a++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">!qf(r.orderBy[a],i.orderBy[a]</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">if</span>(<span class="hljs-params">r.filters.length!==i.filters.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;r.filters.length;a++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">(s=r.filters[a]</span>).<span class="hljs-params">op</span>!==(<span class="hljs-params">o=i.filters[a]</span>).<span class="hljs-params">op</span>||!<span class="hljs-params">s</span>.<span class="hljs-params">field</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">o.field</span>)||!<span class="hljs-params">_t</span>(<span class="hljs-params">s.value,o.value</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">collectionGroup</span>===<span class="hljs-params">i</span>.<span class="hljs-params">collectionGroup</span>&amp;&amp;!!<span class="hljs-params">r</span>.<span class="hljs-params">path</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.path</span>)&amp;&amp;!!<span class="hljs-params">pl</span>(<span class="hljs-params">r.startAt,i.startAt</span>)&amp;&amp;<span class="hljs-params">pl</span>(<span class="hljs-params">r.endAt,i.endAt</span>)}<span class="hljs-params">function</span> <span class="hljs-params">to</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">U</span>.<span class="hljs-params">isDocumentKey</span>(<span class="hljs-params">r.path</span>)&amp;&amp;<span class="hljs-params">null</span>===<span class="hljs-params">r</span>.<span class="hljs-params">collectionGroup</span>&amp;&amp;0===<span class="hljs-params">r</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">length</span>}<span class="hljs-params">class</span> <span class="hljs-params">He</span> <span class="hljs-params">extends</span> <span class="hljs-params">class</span>{}{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">field</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">op</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">value</span>=<span class="hljs-params">o</span>}<span class="hljs-params">static</span> <span class="hljs-params">create</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">isKeyField</span><span class="hljs-params">()</span>?"<span class="hljs-params">in</span>"===<span class="hljs-params">s</span>||"<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">R</span>(<span class="hljs-params">i,s,o</span>):<span class="hljs-params">new</span> <span class="hljs-params">Lf</span>(<span class="hljs-params">i,s,o</span>):"<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">new</span> <span class="hljs-params">Ff</span>(<span class="hljs-params">i,o</span>):"<span class="hljs-params">in</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">new</span> <span class="hljs-params">Uf</span>(<span class="hljs-params">i,o</span>):"<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">new</span> <span class="hljs-params">Vf</span>(<span class="hljs-params">i,o</span>):"<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">new</span> <span class="hljs-params">Bf</span>(<span class="hljs-params">i,o</span>):<span class="hljs-params">new</span> <span class="hljs-params">He</span>(<span class="hljs-params">i,s,o</span>)}<span class="hljs-params">static</span> <span class="hljs-params">R</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span>"<span class="hljs-params">in</span>"===<span class="hljs-params">s</span>?<span class="hljs-params">new</span> <span class="hljs-params">Mf</span>(<span class="hljs-params">i,o</span>):<span class="hljs-params">new</span> <span class="hljs-params">Of</span>(<span class="hljs-params">i,o</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.field</span>);<span class="hljs-params">return</span>"!="===<span class="hljs-params">this</span>.<span class="hljs-params">op</span>?<span class="hljs-params">null</span>!==<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">P</span>(<span class="hljs-params">di(s,<span class="hljs-keyword">this</span>.value</span>)):<span class="hljs-params">null</span>!==<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">In</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.value</span>)===<span class="hljs-params">In</span>(<span class="hljs-params">s</span>)&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">P</span>(<span class="hljs-params">di(s,<span class="hljs-keyword">this</span>.value</span>))}<span class="hljs-params">P</span>(<span class="hljs-params">i</span>){<span class="hljs-params">switch</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.op</span>){<span class="hljs-params">case</span>"&lt;":<span class="hljs-params">return</span> <span class="hljs-params">i</span>&lt;0;<span class="hljs-params">case</span>"&lt;=":<span class="hljs-params">return</span> <span class="hljs-params">i</span>&lt;=0;<span class="hljs-params">case</span>"==":<span class="hljs-params">return</span> 0===<span class="hljs-params">i</span>;<span class="hljs-params">case</span>"!=":<span class="hljs-params">return</span> 0!==<span class="hljs-params">i</span>;<span class="hljs-params">case</span>"&gt;":<span class="hljs-params">return</span> <span class="hljs-params">i</span>&gt;0;<span class="hljs-params">case</span>"&gt;=":<span class="hljs-params">return</span> <span class="hljs-params">i</span>&gt;=0;<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}<span class="hljs-params">v</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>["&lt;","&lt;=","&gt;","&gt;=","!=","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"].<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.op</span>)&gt;=0}}<span class="hljs-params">class</span> <span class="hljs-params">Lf</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,s,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">U</span>.<span class="hljs-params">fromName</span>(<span class="hljs-params">o.referenceValue</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">U</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params">i.key,<span class="hljs-keyword">this</span>.key</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">P</span>(<span class="hljs-params">s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Mf</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"in"</span>,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">keys</span>=<span class="hljs-params">dl</span>(<span class="hljs-params"><span class="hljs-number">0</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">keys</span>.<span class="hljs-params">some</span>(<span class="hljs-params">s=&gt;s.isEqual(i.key</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">Of</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"not-in"</span>,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">keys</span>=<span class="hljs-params">dl</span>(<span class="hljs-params"><span class="hljs-number">0</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>!<span class="hljs-params">this</span>.<span class="hljs-params">keys</span>.<span class="hljs-params">some</span>(<span class="hljs-params">s=&gt;s.isEqual(i.key</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">dl</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>;<span class="hljs-params">return</span>(<span class="hljs-params">(<span class="hljs-literal">null</span>===(s=i.arrayValue</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">s</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">s</span>.<span class="hljs-params">values</span>)||[]).<span class="hljs-params">map</span>(<span class="hljs-params">o=&gt;U.fromName(o.referenceValue</span>))}<span class="hljs-params">class</span> <span class="hljs-params">Ff</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"array-contains"</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.field</span>);<span class="hljs-params">return</span> <span class="hljs-params">pa</span>(<span class="hljs-params">s</span>)&amp;&amp;<span class="hljs-params">Cs</span>(<span class="hljs-params">s.arrayValue,<span class="hljs-keyword">this</span>.value</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Uf</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"in"</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.field</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">Cs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.value.arrayValue,s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Vf</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"not-in"</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">Cs(<span class="hljs-keyword">this</span>.value.arrayValue,{nullValue:<span class="hljs-string">"NULL_VALUE"</span>}</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.field</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">s</span>&amp;&amp;!<span class="hljs-params">Cs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.value.arrayValue,s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Bf</span> <span class="hljs-params">extends</span> <span class="hljs-params">He</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"array-contains-any"</span>,s</span>)}<span class="hljs-params">matches</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.field</span>);<span class="hljs-params">return</span>!(<span class="hljs-params">!pa(s</span>)||!<span class="hljs-params">s</span>.<span class="hljs-params">arrayValue</span>.<span class="hljs-params">values</span>)&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">arrayValue</span>.<span class="hljs-params">values</span>.<span class="hljs-params">some</span>(<span class="hljs-params">o=&gt;Cs(<span class="hljs-keyword">this</span>.value.arrayValue,o</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">ks</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">position</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">before</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">function</span> <span class="hljs-params">no</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>`<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">before</span>?"<span class="hljs-params">b</span>":"<span class="hljs-params">a</span>"}:<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">position</span>.<span class="hljs-params">map</span>(<span class="hljs-params">i=&gt;ha(i</span>)).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">","</span></span>)}`}<span class="hljs-params">class</span> <span class="hljs-params">fi</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s=<span class="hljs-string">"asc"</span></span>){<span class="hljs-params">this</span>.<span class="hljs-params">field</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">dir</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">function</span> <span class="hljs-params">qf</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">dir</span>===<span class="hljs-params">i</span>.<span class="hljs-params">dir</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">field</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.field</span>)}<span class="hljs-params">function</span> <span class="hljs-params">fl</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>=0;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;r.position.length;a++</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>[<span class="hljs-params">a</span>],<span class="hljs-params">u</span>=<span class="hljs-params">r</span>.<span class="hljs-params">position</span>[<span class="hljs-params">a</span>];<span class="hljs-params">if</span>(<span class="hljs-params">o=c.field.isKeyField(</span>)?<span class="hljs-params">U</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params">U.fromName(u.referenceValue</span>),<span class="hljs-params">s</span>.<span class="hljs-params">key</span>):<span class="hljs-params">di</span>(<span class="hljs-params">u,s.data.field(c.field</span>)),"<span class="hljs-params">desc</span>"===<span class="hljs-params">c</span>.<span class="hljs-params">dir</span>&amp;&amp;(<span class="hljs-params">o*=<span class="hljs-number">-1</span></span>),0!==<span class="hljs-params">o</span>)<span class="hljs-params">break</span>}<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">before</span>?<span class="hljs-params">o</span>&lt;=0:<span class="hljs-params">o</span>&lt;0}<span class="hljs-params">function</span> <span class="hljs-params">pl</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===r</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>===<span class="hljs-params">i</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===i||r.before!==i.before||r.position.length!==i.position.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;r.position.length;s++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">!_t(r.position[s],i.position[s]</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}<span class="hljs-params">class</span> <span class="hljs-params">Rt</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s=<span class="hljs-literal">null</span>,o=[],a=[],c=<span class="hljs-literal">null</span>,u=<span class="hljs-string">"F"</span>,h=<span class="hljs-literal">null</span>,f=<span class="hljs-literal">null</span></span>){<span class="hljs-params">this</span>.<span class="hljs-params">path</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">collectionGroup</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">explicitOrderBy</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">filters</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">limit</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">limitType</span>=<span class="hljs-params">u</span>,<span class="hljs-params">this</span>.<span class="hljs-params">startAt</span>=<span class="hljs-params">h</span>,<span class="hljs-params">this</span>.<span class="hljs-params">endAt</span>=<span class="hljs-params">f</span>,<span class="hljs-params">this</span>.<span class="hljs-params">V</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">S</span>=<span class="hljs-params">null</span>}}<span class="hljs-params">function</span> <span class="hljs-params">ml</span>(<span class="hljs-params">r,i,s,o,a,c,u,h</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">r,i,s,o,a,c,u,h</span>)}<span class="hljs-params">function</span> <span class="hljs-params">pi</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">r</span>)}<span class="hljs-params">function</span> <span class="hljs-params">io</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!<span class="hljs-params">En</span>(<span class="hljs-params">r.limit</span>)&amp;&amp;"<span class="hljs-params">F</span>"===<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>}<span class="hljs-params">function</span> <span class="hljs-params">so</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!<span class="hljs-params">En</span>(<span class="hljs-params">r.limit</span>)&amp;&amp;"<span class="hljs-params">L</span>"===<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>}<span class="hljs-params">function</span> <span class="hljs-params">ma</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">length</span>&gt;0?<span class="hljs-params">r</span>.<span class="hljs-params">explicitOrderBy</span>[0].<span class="hljs-params">field</span>:<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">ga</span>(<span class="hljs-params">r</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> r.filters</span>)<span class="hljs-params">if</span>(<span class="hljs-params">i.v(</span>))<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">field</span>;<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">ya</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">r</span>.<span class="hljs-params">collectionGroup</span>}<span class="hljs-params">function</span> <span class="hljs-params">mi</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===i.V</span>){<span class="hljs-params">i</span>.<span class="hljs-params">V</span>=[];<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">ga</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">ma</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==s&amp;&amp;<span class="hljs-literal">null</span>===o</span>)<span class="hljs-params">s</span>.<span class="hljs-params">isKeyField</span><span class="hljs-params">()</span>||<span class="hljs-params">i</span>.<span class="hljs-params">V</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> fi(s</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">V</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> fi(Oe.keyField(</span>),"<span class="hljs-params">asc</span>"));<span class="hljs-params">else</span>{<span class="hljs-params">let</span> <span class="hljs-params">a</span>=!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> i.explicitOrderBy</span>)<span class="hljs-params">i</span>.<span class="hljs-params">V</span>.<span class="hljs-params">push</span>(<span class="hljs-params">c</span>),<span class="hljs-params">c</span>.<span class="hljs-params">field</span>.<span class="hljs-params">isKeyField</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">a=!<span class="hljs-number">0</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">!a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">length</span>&gt;0?<span class="hljs-params">i</span>.<span class="hljs-params">explicitOrderBy</span>[<span class="hljs-params">i</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">length</span>-1].<span class="hljs-params">dir</span>:"<span class="hljs-params">asc</span>";<span class="hljs-params">i</span>.<span class="hljs-params">V</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> fi(Oe.keyField(</span>),<span class="hljs-params">c</span>))}}}<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">V</span>}<span class="hljs-params">function</span> <span class="hljs-params">at</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!i.S</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"F"</span>===i.limitType</span>)<span class="hljs-params">i</span>.<span class="hljs-params">S</span>=<span class="hljs-params">hl</span>(<span class="hljs-params">i.path,i.collectionGroup,mi(i</span>),<span class="hljs-params">i</span>.<span class="hljs-params">filters</span>,<span class="hljs-params">i</span>.<span class="hljs-params">limit</span>,<span class="hljs-params">i</span>.<span class="hljs-params">startAt</span>,<span class="hljs-params">i</span>.<span class="hljs-params">endAt</span>);<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">s</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> mi(i</span>))<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> fi(c.field,<span class="hljs-string">"desc"</span>===c.dir?<span class="hljs-string">"asc"</span>:<span class="hljs-string">"desc"</span></span>));<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">endAt</span>?<span class="hljs-params">new</span> <span class="hljs-params">ks</span>(<span class="hljs-params">i.endAt.position,!i.endAt.before</span>):<span class="hljs-params">null</span>,<span class="hljs-params">a</span>=<span class="hljs-params">i</span>.<span class="hljs-params">startAt</span>?<span class="hljs-params">new</span> <span class="hljs-params">ks</span>(<span class="hljs-params">i.startAt.position,!i.startAt.before</span>):<span class="hljs-params">null</span>;<span class="hljs-params">i</span>.<span class="hljs-params">S</span>=<span class="hljs-params">hl</span>(<span class="hljs-params">i.path,i.collectionGroup,s,i.filters,i.limit,o,a</span>)}<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">S</span>}<span class="hljs-params">function</span> <span class="hljs-params">gl</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">r.path,r.collectionGroup,r.explicitOrderBy.slice(</span>),<span class="hljs-params">r</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">i</span>,<span class="hljs-params">s</span>,<span class="hljs-params">r</span>.<span class="hljs-params">startAt</span>,<span class="hljs-params">r</span>.<span class="hljs-params">endAt</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ps</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">eo</span>(<span class="hljs-params">at(r</span>),<span class="hljs-params">at</span>(<span class="hljs-params">i</span>))&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>===<span class="hljs-params">i</span>.<span class="hljs-params">limitType</span>}<span class="hljs-params">function</span> <span class="hljs-params">yl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>`<span class="hljs-params">$</span>{<span class="hljs-params">As</span>(<span class="hljs-params">at(r</span>))}|<span class="hljs-params">lt</span>:<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>}`}<span class="hljs-params">function</span> <span class="hljs-params">_a</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>`<span class="hljs-params">Query</span>(<span class="hljs-params">target=${<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">path</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">r</span>.<span class="hljs-params">collectionGroup</span>&amp;&amp;(<span class="hljs-params">i+=<span class="hljs-string">" collectionGroup="</span>+r.collectionGroup</span>),<span class="hljs-params">r</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;(<span class="hljs-params">i+=<span class="hljs-string">`, filters: [<span class="hljs-subst">${r.filters.map(s=&gt;{<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${(o=s).field.canonicalString()}</span> <span class="hljs-subst">${o.op}</span> <span class="hljs-subst">${ha(o.value)}</span>`</span>;<span class="hljs-keyword">var</span> o}</span>).join(", ")}]`</span></span>),<span class="hljs-params">En</span>(<span class="hljs-params">r.limit</span>)||(<span class="hljs-params">i+=<span class="hljs-string">", limit: "</span>+r.limit</span>),<span class="hljs-params">r</span>.<span class="hljs-params">orderBy</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;(<span class="hljs-params">i+=<span class="hljs-string">`, orderBy: [<span class="hljs-subst">${r.orderBy.map(s=&gt;{<span class="hljs-keyword">return</span><span class="hljs-string">`<span class="hljs-subst">${(o=s).field.canonicalString()}</span> (<span class="hljs-subst">${o.dir}</span>)`</span>;<span class="hljs-keyword">var</span> o}</span>).join(", ")}]`</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">startAt</span>&amp;&amp;(<span class="hljs-params">i+=<span class="hljs-string">", startAt: "</span>+no(r.startAt</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">endAt</span>&amp;&amp;(<span class="hljs-params">i+=<span class="hljs-string">", endAt: "</span>+no(r.endAt</span>)),`<span class="hljs-params">Target</span>(<span class="hljs-params">${i}</span>)`}(<span class="hljs-params">at(r</span>))}; <span class="hljs-params">limitType</span>=<span class="hljs-params">$</span>{<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>})`}<span class="hljs-params">function</span> <span class="hljs-params">Ns</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">isFoundDocument</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">key</span>.<span class="hljs-params">path</span>;<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">s</span>.<span class="hljs-params">collectionGroup</span>?<span class="hljs-params">o</span>.<span class="hljs-params">key</span>.<span class="hljs-params">hasCollectionId</span>(<span class="hljs-params">s.collectionGroup</span>)&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">path</span>.<span class="hljs-params">isPrefixOf</span>(<span class="hljs-params">a</span>):<span class="hljs-params">U</span>.<span class="hljs-params">isDocumentKey</span>(<span class="hljs-params">s.path</span>)?<span class="hljs-params">s</span>.<span class="hljs-params">path</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">a</span>):<span class="hljs-params">s</span>.<span class="hljs-params">path</span>.<span class="hljs-params">isImmediateParentOf</span>(<span class="hljs-params">a</span>)}(<span class="hljs-params">r,i</span>)&amp;&amp;<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> s.explicitOrderBy</span>)<span class="hljs-params">if</span>(<span class="hljs-params">!a.field.isKeyField(</span>)&amp;&amp;<span class="hljs-params">null</span>===<span class="hljs-params">o</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">a.field</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}(<span class="hljs-params">r,i</span>)&amp;&amp;<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> s.filters</span>)<span class="hljs-params">if</span>(<span class="hljs-params">!a.matches(o</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}(<span class="hljs-params">r,i</span>)&amp;&amp;(<span class="hljs-params">o=i,!((s=r</span>).<span class="hljs-params">startAt</span>&amp;&amp;!<span class="hljs-params">fl</span>(<span class="hljs-params">s.startAt,mi(s</span>),<span class="hljs-params">o</span>)||<span class="hljs-params">s</span>.<span class="hljs-params">endAt</span>&amp;&amp;<span class="hljs-params">fl</span>(<span class="hljs-params">s.endAt,mi(s</span>),<span class="hljs-params">o</span>)));<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">_l</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>(<span class="hljs-params">i,s</span>)=&gt;</span>{<span class="hljs-keyword">let</span> o=!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> mi(r)){<span class="hljs-keyword">const</span> c=zf(a,i,s);<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==c)<span class="hljs-keyword">return</span> c;o=o||a.field.isKeyField()}<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">zf</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">const</span> o=r.field.isKeyField()?U.comparator(i.key,s.key):<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,c,u</span>)</span>{<span class="hljs-keyword">const</span> h=c.data.field(a),f=u.data.field(a);<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!==h&amp;&amp;<span class="hljs-literal">null</span>!==f?di(h,f):V()}(r.field,i,s);<span class="hljs-keyword">switch</span>(r.dir){<span class="hljs-keyword">case</span><span class="hljs-string">"asc"</span>:<span class="hljs-keyword">return</span> o;<span class="hljs-keyword">case</span><span class="hljs-string">"desc"</span>:<span class="hljs-keyword">return</span><span class="hljs-number">-1</span>*o;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> V()}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">vl</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">if</span>(r.D){<span class="hljs-keyword">if</span>(<span class="hljs-built_in">isNaN</span>(i))<span class="hljs-keyword">return</span>{<span class="hljs-attr">doubleValue</span>:<span class="hljs-string">"NaN"</span>};<span class="hljs-keyword">if</span>(i===<span class="hljs-number">1</span>/<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>{<span class="hljs-attr">doubleValue</span>:<span class="hljs-string">"Infinity"</span>};<span class="hljs-keyword">if</span>(i===<span class="hljs-number">-1</span>/<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>{<span class="hljs-attr">doubleValue</span>:<span class="hljs-string">"-Infinity"</span>}}<span class="hljs-keyword">return</span>{<span class="hljs-attr">doubleValue</span>:Wr(i)?<span class="hljs-string">"-0"</span>:i}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wl</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">integerValue</span>:<span class="hljs-string">""</span>+r}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bl</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> ol(i)?wl(i):vl(r,i)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ro</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>._=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gf</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">return</span> r <span class="hljs-keyword">instanceof</span> gi?<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,a</span>)</span>{<span class="hljs-keyword">const</span> c={<span class="hljs-attr">fields</span>:{<span class="hljs-attr">__type__</span>:{<span class="hljs-attr">stringValue</span>:<span class="hljs-string">"server_timestamp"</span>},<span class="hljs-attr">__local_write_time__</span>:{<span class="hljs-attr">timestampValue</span>:{<span class="hljs-attr">seconds</span>:o.seconds,<span class="hljs-attr">nanos</span>:o.nanoseconds}}}};<span class="hljs-keyword">return</span> a&amp;&amp;<span class="hljs-function">(<span class="hljs-params">c.fields.__previous_value__=a</span>),{<span class="hljs-params">mapValue</span>:<span class="hljs-params">c</span>}}(<span class="hljs-params">s,i</span>):<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Sn</span>?<span class="hljs-params">El</span>(<span class="hljs-params">r,i</span>):<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">xn</span>?<span class="hljs-params">Il</span>(<span class="hljs-params">r,i</span>):<span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">Tl</span>(<span class="hljs-params">o,a</span>),<span class="hljs-params">u</span>=<span class="hljs-params">Sl</span>(<span class="hljs-params">c</span>)+<span class="hljs-params">Sl</span>(<span class="hljs-params">o.C</span>);<span class="hljs-params">return</span> <span class="hljs-params">fa</span>(<span class="hljs-params">c</span>)&amp;&amp;<span class="hljs-params">fa</span>(<span class="hljs-params">o.C</span>)?<span class="hljs-params">wl</span>(<span class="hljs-params">u</span>):<span class="hljs-params">vl</span>(<span class="hljs-params">o.N,u</span>)}(<span class="hljs-params">r,i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">jf</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Sn</span>?<span class="hljs-params">El</span>(<span class="hljs-params">r,i</span>):<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">xn</span>?<span class="hljs-params">Il</span>(<span class="hljs-params">r,i</span>):<span class="hljs-params">s</span>}<span class="hljs-params">function</span> <span class="hljs-params">Tl</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">yi</span>?<span class="hljs-params">fa</span>(<span class="hljs-params">s=i</span>)||(<span class="hljs-params">o=s</span>)&amp;&amp;"<span class="hljs-params">doubleValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">o</span>?<span class="hljs-params">i</span>:{<span class="hljs-params">integerValue</span>:0}:<span class="hljs-params">null</span>;<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">s</span>}<span class="hljs-params">class</span> <span class="hljs-params">gi</span> <span class="hljs-params">extends</span> <span class="hljs-params">ro</span>{}<span class="hljs-params">class</span> <span class="hljs-params">Sn</span> <span class="hljs-params">extends</span> <span class="hljs-params">ro</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">elements</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">function</span> <span class="hljs-params">El</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">xl</span>(<span class="hljs-params">i</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> r.elements</span>)<span class="hljs-params">s</span>.<span class="hljs-params">some</span>(<span class="hljs-params">a=&gt;_t(a,o</span>))||<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span>{<span class="hljs-params">arrayValue</span>:{<span class="hljs-params">values</span>:<span class="hljs-params">s</span>}}}<span class="hljs-params">class</span> <span class="hljs-params">xn</span> <span class="hljs-params">extends</span> <span class="hljs-params">ro</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">elements</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Il</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">xl</span>(<span class="hljs-params">i</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> r.elements</span>)<span class="hljs-params">s</span>=<span class="hljs-params">s</span>.<span class="hljs-params">filter</span>(<span class="hljs-params">a=&gt;!_t(a,o</span>));<span class="hljs-params">return</span>{<span class="hljs-params">arrayValue</span>:{<span class="hljs-params">values</span>:<span class="hljs-params">s</span>}}}<span class="hljs-params">class</span> <span class="hljs-params">yi</span> <span class="hljs-params">extends</span> <span class="hljs-params">ro</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">C</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Sl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">_e</span>(<span class="hljs-params">r.integerValue||r.doubleValue</span>)}<span class="hljs-params">function</span> <span class="hljs-params">xl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">pa</span>(<span class="hljs-params">r</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">arrayValue</span>.<span class="hljs-params">values</span>?<span class="hljs-params">r</span>.<span class="hljs-params">arrayValue</span>.<span class="hljs-params">values</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>:[]}<span class="hljs-params">class</span> <span class="hljs-params">Ls</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">field</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">transform</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Kf</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">version</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">transformResults</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">ve</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">updateTime</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">exists</span>=<span class="hljs-params">s</span>}<span class="hljs-params">static</span> <span class="hljs-params">none</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ve</span>}<span class="hljs-params">static</span> <span class="hljs-params">exists</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ve</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">updateTime</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ve</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">get</span> <span class="hljs-params">isNone</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">void</span> 0===<span class="hljs-params">this</span>.<span class="hljs-params">updateTime</span>&amp;&amp;<span class="hljs-params">void</span> 0===<span class="hljs-params">this</span>.<span class="hljs-params">exists</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">exists</span>===<span class="hljs-params">i</span>.<span class="hljs-params">exists</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.updateTime?!!i.updateTime&amp;&amp;<span class="hljs-keyword">this</span>.updateTime.isEqual(i.updateTime</span>):!<span class="hljs-params">i</span>.<span class="hljs-params">updateTime</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">oo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">updateTime</span>?<span class="hljs-params">i</span>.<span class="hljs-params">isFoundDocument</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">version</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">r.updateTime</span>):<span class="hljs-params">void</span> 0===<span class="hljs-params">r</span>.<span class="hljs-params">exists</span>||<span class="hljs-params">r</span>.<span class="hljs-params">exists</span>===<span class="hljs-params">i</span>.<span class="hljs-params">isFoundDocument</span><span class="hljs-params">()</span>}<span class="hljs-params">class</span> <span class="hljs-params">ao</span>{}<span class="hljs-params">function</span> <span class="hljs-params">$f</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Ms</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">o</span>.<span class="hljs-params">value</span>.<span class="hljs-params">clone</span><span class="hljs-params">()</span>,<span class="hljs-params">h</span>=<span class="hljs-params">Al</span>(<span class="hljs-params">o.fieldTransforms,a,c.transformResults</span>);<span class="hljs-params">u</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">h</span>),<span class="hljs-params">a</span>.<span class="hljs-params">convertToFoundDocument</span>(<span class="hljs-params">c.version,u</span>).<span class="hljs-params">setHasCommittedMutations</span><span class="hljs-params">()</span>}(<span class="hljs-params">r,i,s</span>):<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Kt</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!oo(o.precondition,a</span>))<span class="hljs-params">return</span> <span class="hljs-params">void</span> <span class="hljs-params">a</span>.<span class="hljs-params">convertToUnknownDocument</span>(<span class="hljs-params">c.version</span>);<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">Al</span>(<span class="hljs-params">o.fieldTransforms,a,c.transformResults</span>),<span class="hljs-params">h</span>=<span class="hljs-params">a</span>.<span class="hljs-params">data</span>;<span class="hljs-params">h</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">Rl(o</span>)),<span class="hljs-params">h</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">u</span>),<span class="hljs-params">a</span>.<span class="hljs-params">convertToFoundDocument</span>(<span class="hljs-params">c.version,h</span>).<span class="hljs-params">setHasCommittedMutations</span><span class="hljs-params">()</span>}(<span class="hljs-params">r,i,s</span>):<span class="hljs-params">i</span>.<span class="hljs-params">convertToNoDocument</span>(<span class="hljs-params">s.version</span>).<span class="hljs-params">setHasCommittedMutations</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">va</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Ms</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!oo(o.precondition,a</span>))<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">o</span>.<span class="hljs-params">value</span>.<span class="hljs-params">clone</span><span class="hljs-params">()</span>,<span class="hljs-params">h</span>=<span class="hljs-params">kl</span>(<span class="hljs-params">o.fieldTransforms,c,a</span>);<span class="hljs-params">u</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">h</span>),<span class="hljs-params">a</span>.<span class="hljs-params">convertToFoundDocument</span>(<span class="hljs-params">Cl(a</span>),<span class="hljs-params">u</span>).<span class="hljs-params">setHasLocalMutations</span><span class="hljs-params">()</span>}(<span class="hljs-params">r,i,s</span>):<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Kt</span>?<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!oo(o.precondition,a</span>))<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">kl</span>(<span class="hljs-params">o.fieldTransforms,c,a</span>),<span class="hljs-params">h</span>=<span class="hljs-params">a</span>.<span class="hljs-params">data</span>;<span class="hljs-params">h</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">Rl(o</span>)),<span class="hljs-params">h</span>.<span class="hljs-params">setAll</span>(<span class="hljs-params">u</span>),<span class="hljs-params">a</span>.<span class="hljs-params">convertToFoundDocument</span>(<span class="hljs-params">Cl(a</span>),<span class="hljs-params">h</span>).<span class="hljs-params">setHasLocalMutations</span><span class="hljs-params">()</span>}(<span class="hljs-params">r,i,s</span>):<span class="hljs-params">oo</span>(<span class="hljs-params">r.precondition,a=i</span>)&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">convertToNoDocument</span>(<span class="hljs-params">H.min(</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Zf</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">null</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> r.fieldTransforms</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">o.field</span>),<span class="hljs-params">c</span>=<span class="hljs-params">Tl</span>(<span class="hljs-params">o.transform,a||<span class="hljs-literal">null</span></span>);<span class="hljs-params">null</span>!=<span class="hljs-params">c</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-literal">null</span>==s&amp;&amp;(s=qe.empty(</span>)),<span class="hljs-params">s</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o.field,c</span>))}<span class="hljs-params">return</span> <span class="hljs-params">s</span>||<span class="hljs-params">null</span>}<span class="hljs-params">function</span> <span class="hljs-params">Dl</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">type</span>===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;!!<span class="hljs-params">r</span>.<span class="hljs-params">key</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.key</span>)&amp;&amp;!!<span class="hljs-params">r</span>.<span class="hljs-params">precondition</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.precondition</span>)&amp;&amp;(<span class="hljs-params">o=i.fieldTransforms,!!(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===(s=r.fieldTransforms</span>)&amp;&amp;<span class="hljs-params">void</span> 0===<span class="hljs-params">o</span>||<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">ui</span>(<span class="hljs-params">s,o,(a,c</span>)=&gt;</span><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> r.field.isEqual(i.field)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">o=i.transform,(s=r.transform</span>)<span class="hljs-params">instanceof</span> <span class="hljs-params">Sn</span>&amp;&amp;<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Sn</span>||<span class="hljs-params">s</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">xn</span>&amp;&amp;<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">xn</span>?<span class="hljs-params">ui</span>(<span class="hljs-params">s.elements,o.elements,_t</span>):<span class="hljs-params">s</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">yi</span>&amp;&amp;<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">yi</span>?<span class="hljs-params">_t</span>(<span class="hljs-params">s.C,o.C</span>):<span class="hljs-params">s</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">gi</span>&amp;&amp;<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">gi</span>);<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>}(<span class="hljs-params">a,c</span>))))&amp;&amp;(<span class="hljs-params"><span class="hljs-number">0</span>===r.type?r.value.isEqual(i.value</span>):1!==<span class="hljs-params">r</span>.<span class="hljs-params">type</span>||<span class="hljs-params">r</span>.<span class="hljs-params">data</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.data</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">fieldMask</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.fieldMask</span>));<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">Cl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">isFoundDocument</span><span class="hljs-params">()</span>?<span class="hljs-params">r</span>.<span class="hljs-params">version</span>:<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>}<span class="hljs-params">class</span> <span class="hljs-params">Ms</span> <span class="hljs-params">extends</span> <span class="hljs-params">ao</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a=[]</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">value</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">precondition</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">fieldTransforms</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=0}}<span class="hljs-params">class</span> <span class="hljs-params">Kt</span> <span class="hljs-params">extends</span> <span class="hljs-params">ao</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c=[]</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">data</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">fieldMask</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">precondition</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">fieldTransforms</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=1}}<span class="hljs-params">function</span> <span class="hljs-params">Rl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">fieldMask</span>.<span class="hljs-params">fields</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{<span class="hljs-keyword">if</span>(!s.isEmpty(</span>)){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">s</span>);<span class="hljs-params">i</span>.<span class="hljs-params">set</span>(<span class="hljs-params">s,o</span>)}}),<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Al</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">z</span>(<span class="hljs-params">r.length===s.length</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;s.length;a++</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>[<span class="hljs-params">a</span>],<span class="hljs-params">u</span>=<span class="hljs-params">c</span>.<span class="hljs-params">transform</span>,<span class="hljs-params">h</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">c.field</span>);<span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">c.field,jf(u,h,s[a]</span>))}<span class="hljs-params">return</span> <span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">kl</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> r</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">transform</span>,<span class="hljs-params">u</span>=<span class="hljs-params">s</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">a.field</span>);<span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a.field,Gf(c,u,i</span>))}<span class="hljs-params">return</span> <span class="hljs-params">o</span>}<span class="hljs-params">class</span> <span class="hljs-params">Os</span> <span class="hljs-params">extends</span> <span class="hljs-params">ao</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">precondition</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=2,<span class="hljs-params">this</span>.<span class="hljs-params">fieldTransforms</span>=[]}}<span class="hljs-params">class</span> <span class="hljs-params">wa</span> <span class="hljs-params">extends</span> <span class="hljs-params">ao</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">precondition</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=3,<span class="hljs-params">this</span>.<span class="hljs-params">fieldTransforms</span>=[]}}<span class="hljs-params">class</span> <span class="hljs-params">Qf</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">count</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">var</span> <span class="hljs-params">we</span>,<span class="hljs-params">Q</span>;<span class="hljs-params">function</span> <span class="hljs-params">Pl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">r</span>){<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">OK</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">CANCELLED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNKNOWN</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">DEADLINE_EXCEEDED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">RESOURCE_EXHAUSTED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">INTERNAL</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNAVAILABLE</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNAUTHENTICATED</span>:<span class="hljs-params">return</span>!1;<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">INVALID_ARGUMENT</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">NOT_FOUND</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">ALREADY_EXISTS</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">PERMISSION_DENIED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">FAILED_PRECONDITION</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">ABORTED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">OUT_OF_RANGE</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNIMPLEMENTED</span>:<span class="hljs-params">case</span> <span class="hljs-params">I</span>.<span class="hljs-params">DATA_LOSS</span>:<span class="hljs-params">return</span>!0;<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Nl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===r</span>)<span class="hljs-params">return</span> <span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">"GRPC error has no .code"</span></span>),<span class="hljs-params">I</span>.<span class="hljs-params">UNKNOWN</span>;<span class="hljs-params">switch</span>(<span class="hljs-params">r</span>){<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">OK</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">OK</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">CANCELLED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">CANCELLED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">UNKNOWN</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNKNOWN</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">DEADLINE_EXCEEDED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">DEADLINE_EXCEEDED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">RESOURCE_EXHAUSTED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">RESOURCE_EXHAUSTED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">INTERNAL</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">INTERNAL</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">UNAVAILABLE</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNAVAILABLE</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">UNAUTHENTICATED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNAUTHENTICATED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">INVALID_ARGUMENT</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">INVALID_ARGUMENT</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">NOT_FOUND</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">NOT_FOUND</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">ALREADY_EXISTS</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">ALREADY_EXISTS</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">PERMISSION_DENIED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">PERMISSION_DENIED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">FAILED_PRECONDITION</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">FAILED_PRECONDITION</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">ABORTED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">ABORTED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">OUT_OF_RANGE</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">OUT_OF_RANGE</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">UNIMPLEMENTED</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">UNIMPLEMENTED</span>;<span class="hljs-params">case</span> <span class="hljs-params">we</span>.<span class="hljs-params">DATA_LOSS</span>:<span class="hljs-params">return</span> <span class="hljs-params">I</span>.<span class="hljs-params">DATA_LOSS</span>;<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}(<span class="hljs-params">Q=we||(we={}</span>))[<span class="hljs-params">Q</span>.<span class="hljs-params">OK</span>=0]="<span class="hljs-params">OK</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">CANCELLED</span>=1]="<span class="hljs-params">CANCELLED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">UNKNOWN</span>=2]="<span class="hljs-params">UNKNOWN</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">INVALID_ARGUMENT</span>=3]="<span class="hljs-params">INVALID_ARGUMENT</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">DEADLINE_EXCEEDED</span>=4]="<span class="hljs-params">DEADLINE_EXCEEDED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">NOT_FOUND</span>=5]="<span class="hljs-params">NOT_FOUND</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">ALREADY_EXISTS</span>=6]="<span class="hljs-params">ALREADY_EXISTS</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">PERMISSION_DENIED</span>=7]="<span class="hljs-params">PERMISSION_DENIED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">UNAUTHENTICATED</span>=16]="<span class="hljs-params">UNAUTHENTICATED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">RESOURCE_EXHAUSTED</span>=8]="<span class="hljs-params">RESOURCE_EXHAUSTED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">FAILED_PRECONDITION</span>=9]="<span class="hljs-params">FAILED_PRECONDITION</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">ABORTED</span>=10]="<span class="hljs-params">ABORTED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">OUT_OF_RANGE</span>=11]="<span class="hljs-params">OUT_OF_RANGE</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">UNIMPLEMENTED</span>=12]="<span class="hljs-params">UNIMPLEMENTED</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">INTERNAL</span>=13]="<span class="hljs-params">INTERNAL</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">UNAVAILABLE</span>=14]="<span class="hljs-params">UNAVAILABLE</span>",<span class="hljs-params">Q</span>[<span class="hljs-params">Q</span>.<span class="hljs-params">DATA_LOSS</span>=15]="<span class="hljs-params">DATA_LOSS</span>";<span class="hljs-params">class</span> <span class="hljs-params">Ie</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">root</span>=<span class="hljs-params">s</span>||<span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>}<span class="hljs-params">insert</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.comparator,<span class="hljs-keyword">this</span>.root.insert(i,s,<span class="hljs-keyword">this</span>.comparator</span>).<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,Fe.BLACK,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span></span>))}<span class="hljs-params">remove</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.comparator,<span class="hljs-keyword">this</span>.root.remove(i,<span class="hljs-keyword">this</span>.comparator</span>).<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,Fe.BLACK,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span></span>))}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">root</span>;<span class="hljs-params">for</span>(<span class="hljs-params">;!s.isEmpty(</span>);){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params">i,s.key</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===o</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">value</span>;<span class="hljs-params">o</span>&lt;0?<span class="hljs-params">s</span>=<span class="hljs-params">s</span>.<span class="hljs-params">left</span>:<span class="hljs-params">o</span>&gt;0&amp;&amp;(<span class="hljs-params">s=s.right</span>)}<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">indexOf</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=0,<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">root</span>;<span class="hljs-params">for</span>(<span class="hljs-params">;!o.isEmpty(</span>);){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>(<span class="hljs-params">i,o.key</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>+<span class="hljs-params">o</span>.<span class="hljs-params">left</span>.<span class="hljs-params">size</span>;<span class="hljs-params">a</span>&lt;0?<span class="hljs-params">o</span>=<span class="hljs-params">o</span>.<span class="hljs-params">left</span>:(<span class="hljs-params">s+=o.left.size+<span class="hljs-number">1</span>,o=o.right</span>)}<span class="hljs-params">return</span>-1}<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">size</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">size</span>}<span class="hljs-params">minKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">minKey</span><span class="hljs-params">()</span>}<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>}<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">forEach</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">(s,o</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params">i(s,o</span>),!1))}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">(s,o</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params">i.push(<span class="hljs-string">`<span class="hljs-subst">${s}</span>:<span class="hljs-subst">${o}</span>`</span></span>),!1)),`{<span class="hljs-params">$</span>{<span class="hljs-params">i</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">", "</span></span>)}}`}<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">root</span>.<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">co</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.root,<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.comparator,!<span class="hljs-number">1</span></span>)}<span class="hljs-params">getIteratorFrom</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">co</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.root,i,<span class="hljs-keyword">this</span>.comparator,!<span class="hljs-number">1</span></span>)}<span class="hljs-params">getReverseIterator</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">co</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.root,<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.comparator,!<span class="hljs-number">0</span></span>)}<span class="hljs-params">getReverseIteratorFrom</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">co</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.root,i,<span class="hljs-keyword">this</span>.comparator,!<span class="hljs-number">0</span></span>)}}<span class="hljs-params">class</span> <span class="hljs-params">co</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">isReverse</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>=[];<span class="hljs-params">let</span> <span class="hljs-params">c</span>=1;<span class="hljs-params">for</span>(<span class="hljs-params">;!i.isEmpty(</span>);)<span class="hljs-params">if</span>(<span class="hljs-params">c=s?o(i.key,s</span>):1,<span class="hljs-params">a</span>&amp;&amp;(<span class="hljs-params">c*=<span class="hljs-number">-1</span></span>),<span class="hljs-params">c</span>&lt;0)<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">isReverse</span>?<span class="hljs-params">i</span>.<span class="hljs-params">left</span>:<span class="hljs-params">i</span>.<span class="hljs-params">right</span>;<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>);<span class="hljs-params">break</span>}<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">isReverse</span>?<span class="hljs-params">i</span>.<span class="hljs-params">right</span>:<span class="hljs-params">i</span>.<span class="hljs-params">left</span>}}<span class="hljs-params">getNext</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">pop</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>={<span class="hljs-params">key</span>:<span class="hljs-params">i</span>.<span class="hljs-params">key</span>,<span class="hljs-params">value</span>:<span class="hljs-params">i</span>.<span class="hljs-params">value</span>};<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.isReverse</span>)<span class="hljs-params">for</span>(<span class="hljs-params">i=i.left;!i.isEmpty(</span>);)<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">right</span>;<span class="hljs-params">else</span> <span class="hljs-params">for</span>(<span class="hljs-params">i=i.right;!i.isEmpty(</span>);)<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">left</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">hasNext</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">length</span>&gt;0}<span class="hljs-params">peek</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.nodeStack.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>[<span class="hljs-params">this</span>.<span class="hljs-params">nodeStack</span>.<span class="hljs-params">length</span>-1];<span class="hljs-params">return</span>{<span class="hljs-params">key</span>:<span class="hljs-params">i</span>.<span class="hljs-params">key</span>,<span class="hljs-params">value</span>:<span class="hljs-params">i</span>.<span class="hljs-params">value</span>}}}<span class="hljs-params">class</span> <span class="hljs-params">Fe</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">value</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">color</span>=<span class="hljs-params">null</span>!=<span class="hljs-params">o</span>?<span class="hljs-params">o</span>:<span class="hljs-params">Fe</span>.<span class="hljs-params">RED</span>,<span class="hljs-params">this</span>.<span class="hljs-params">left</span>=<span class="hljs-params">null</span>!=<span class="hljs-params">a</span>?<span class="hljs-params">a</span>:<span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">right</span>=<span class="hljs-params">null</span>!=<span class="hljs-params">c</span>?<span class="hljs-params">c</span>:<span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>,<span class="hljs-params">this</span>.<span class="hljs-params">size</span>=<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">size</span>+1+<span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">size</span>}<span class="hljs-params">copy</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Fe</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=i?i:<span class="hljs-keyword">this</span>.key,<span class="hljs-literal">null</span>!=s?s:<span class="hljs-keyword">this</span>.value,<span class="hljs-literal">null</span>!=o?o:<span class="hljs-keyword">this</span>.color,<span class="hljs-literal">null</span>!=a?a:<span class="hljs-keyword">this</span>.left,<span class="hljs-literal">null</span>!=c?c:<span class="hljs-keyword">this</span>.right</span>)}<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>!1}<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">i</span>)||<span class="hljs-params">i</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.key,<span class="hljs-keyword">this</span>.value</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">i</span>)||<span class="hljs-params">i</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.key,<span class="hljs-keyword">this</span>.value</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">min</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>?<span class="hljs-params">this</span>:<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>}<span class="hljs-params">minKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>}<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>?<span class="hljs-params">this</span>.<span class="hljs-params">key</span>:<span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>}<span class="hljs-params">insert</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>(<span class="hljs-params">i,a.key</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>=<span class="hljs-params">c</span>&lt;0?<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,a.left.insert(i,s,o</span>),<span class="hljs-params">null</span>):0===<span class="hljs-params">c</span>?<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,s,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span></span>):<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,a.right.insert(i,s,o</span>)),<span class="hljs-params">a</span>.<span class="hljs-params">fixUp</span><span class="hljs-params">()</span>}<span class="hljs-params">removeMin</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.left.isEmpty(</span>))<span class="hljs-params">return</span> <span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>;<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||<span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||(<span class="hljs-params">i=i.moveRedLeft(</span>)),<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,i.left.removeMin(</span>),<span class="hljs-params">null</span>),<span class="hljs-params">i</span>.<span class="hljs-params">fixUp</span><span class="hljs-params">()</span>}<span class="hljs-params">remove</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>=<span class="hljs-params">this</span>;<span class="hljs-params">if</span>(<span class="hljs-params">s(i,a.key</span>)&lt;0)<span class="hljs-params">a</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>||<span class="hljs-params">a</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||<span class="hljs-params">a</span>.<span class="hljs-params">left</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||(<span class="hljs-params">a=a.moveRedLeft(</span>)),<span class="hljs-params">a</span>=<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,a.left.remove(i,s</span>),<span class="hljs-params">null</span>);<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">a.left.isRed(</span>)&amp;&amp;(<span class="hljs-params">a=a.rotateRight(</span>)),<span class="hljs-params">a</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>||<span class="hljs-params">a</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||<span class="hljs-params">a</span>.<span class="hljs-params">right</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||(<span class="hljs-params">a=a.moveRedRight(</span>)),0===<span class="hljs-params">s</span>(<span class="hljs-params">i,a.key</span>)){<span class="hljs-params">if</span>(<span class="hljs-params">a.right.isEmpty(</span>))<span class="hljs-params">return</span> <span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>;<span class="hljs-params">o</span>=<span class="hljs-params">a</span>.<span class="hljs-params">right</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params">o.key,o.value,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,a.right.removeMin(</span>))}<span class="hljs-params">a</span>=<span class="hljs-params">a</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,a.right.remove(i,s</span>))}<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">fixUp</span><span class="hljs-params">()</span>}<span class="hljs-params">isRed</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">color</span>}<span class="hljs-params">fixUp</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;!<span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">i=i.rotateLeft(</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">i=i.rotateRight(</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">i=i.colorFlip(</span>)),<span class="hljs-params">i</span>}<span class="hljs-params">moveRedLeft</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">colorFlip</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">right</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">i=i.copy(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,i.right.rotateRight(</span>)),<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">rotateLeft</span><span class="hljs-params">()</span>,<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">colorFlip</span><span class="hljs-params">()</span>),<span class="hljs-params">i</span>}<span class="hljs-params">moveRedRight</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">colorFlip</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">left</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params">i=i.rotateRight(</span>),<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">colorFlip</span><span class="hljs-params">()</span>),<span class="hljs-params">i</span>}<span class="hljs-params">rotateLeft</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,Fe.RED,<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.right.left</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.color,i,<span class="hljs-literal">null</span></span>)}<span class="hljs-params">rotateRight</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,Fe.RED,<span class="hljs-keyword">this</span>.left.right,<span class="hljs-literal">null</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.color,<span class="hljs-literal">null</span>,i</span>)}<span class="hljs-params">colorFlip</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,!<span class="hljs-keyword">this</span>.left.color,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span></span>),<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,!<span class="hljs-keyword">this</span>.right.color,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,!<span class="hljs-keyword">this</span>.color,i,s</span>)}<span class="hljs-params">checkMaxDepth</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">check</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">Math</span>.<span class="hljs-params">pow</span>(<span class="hljs-params"><span class="hljs-number">2</span>,i</span>)&lt;=<span class="hljs-params">this</span>.<span class="hljs-params">size</span>+1}<span class="hljs-params">check</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.isRed(</span>)&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>||<span class="hljs-params">this</span>.<span class="hljs-params">right</span>.<span class="hljs-params">isRed</span><span class="hljs-params">()</span>)<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">left</span>.<span class="hljs-params">check</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i!==<span class="hljs-keyword">this</span>.right.check(</span>))<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>+(<span class="hljs-params"><span class="hljs-keyword">this</span>.isRed(</span>)?0:1)}}<span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>=<span class="hljs-params">null</span>,<span class="hljs-params">Fe</span>.<span class="hljs-params">RED</span>=!0,<span class="hljs-params">Fe</span>.<span class="hljs-params">BLACK</span>=!1,<span class="hljs-params">Fe</span>.<span class="hljs-params">EMPTY</span>=<span class="hljs-params">new</span> <span class="hljs-params">class</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">size</span>=0}<span class="hljs-params">get</span> <span class="hljs-params">key</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">value</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">color</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">left</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">right</span><span class="hljs-params">()</span>{<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">copy</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>}<span class="hljs-params">insert</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Fe</span>(<span class="hljs-params">r,i</span>)}<span class="hljs-params">remove</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>}<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>!0}<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!1}<span class="hljs-params">reverseTraversal</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!1}<span class="hljs-params">minKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">isRed</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>!1}<span class="hljs-params">checkMaxDepth</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>!0}<span class="hljs-params">check</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 0}};<span class="hljs-params">class</span> <span class="hljs-params">ue</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">data</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.comparator</span>)}<span class="hljs-params">has</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">first</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">minKey</span><span class="hljs-params">()</span>}<span class="hljs-params">last</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">maxKey</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">size</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">size</span>}<span class="hljs-params">indexOf</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">forEach</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">(s,o</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params">i(s</span>),!1))}<span class="hljs-params">forEachInRange</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">getIteratorFrom</span>(<span class="hljs-params">i[<span class="hljs-number">0</span>]</span>);<span class="hljs-params">for</span>(<span class="hljs-params">;o.hasNext(</span>);){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.comparator(a.key,i[<span class="hljs-number">1</span>]</span>)&gt;=0)<span class="hljs-params">return</span>;<span class="hljs-params">s</span>(<span class="hljs-params">a.key</span>)}}<span class="hljs-params">forEachWhile</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>;<span class="hljs-params">for</span>(<span class="hljs-params">o=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==s?<span class="hljs-keyword">this</span>.data.getIteratorFrom(s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>;<span class="hljs-params">o</span>.<span class="hljs-params">hasNext</span><span class="hljs-params">()</span>;)<span class="hljs-params">if</span>(<span class="hljs-params">!i(o.getNext(</span>).<span class="hljs-params">key</span>))<span class="hljs-params">return</span>}<span class="hljs-params">firstAfterOrEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">getIteratorFrom</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">hasNext</span><span class="hljs-params">()</span>?<span class="hljs-params">s</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>:<span class="hljs-params">null</span>}<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ll</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.data.getIterator(</span>))}<span class="hljs-params">getIteratorFrom</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ll</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.data.getIteratorFrom(i</span>))}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.data.remove(i</span>).<span class="hljs-params">insert</span>(<span class="hljs-params">i,!<span class="hljs-number">0</span></span>))}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)?<span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.data.remove(i</span>)):<span class="hljs-params">this</span>}<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>}<span class="hljs-params">unionWith</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">size</span>&lt;<span class="hljs-params">i</span>.<span class="hljs-params">size</span>&amp;&amp;(<span class="hljs-params">s=i,i=<span class="hljs-keyword">this</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{s=s.add(o</span>)}),<span class="hljs-params">s</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!(i <span class="hljs-keyword">instanceof</span> ue</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">size</span>!==<span class="hljs-params">i</span>.<span class="hljs-params">size</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">data</span>.<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">data</span>.<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params">;s.hasNext(</span>);){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>,<span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!==<span class="hljs-keyword">this</span>.comparator(a,c</span>))<span class="hljs-params">return</span>!1}<span class="hljs-params">return</span>!0}<span class="hljs-params">toArray</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{i.push(s</span>)}),<span class="hljs-params">i</span>}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;i.push(s</span>)),"<span class="hljs-params">SortedSet</span>(<span class="hljs-params"><span class="hljs-string">"+i.toString()+"</span></span>)"}<span class="hljs-params">copy</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.comparator</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">data</span>=<span class="hljs-params">i</span>,<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Ll</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">iter</span>=<span class="hljs-params">i</span>}<span class="hljs-params">getNext</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">iter</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>}<span class="hljs-params">hasNext</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">iter</span>.<span class="hljs-params">hasNext</span><span class="hljs-params">()</span>}}<span class="hljs-params">const</span> <span class="hljs-params">Yf</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>);<span class="hljs-params">function</span> <span class="hljs-params">ct</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">Yf</span>}<span class="hljs-params">const</span> <span class="hljs-params">Wf</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>);<span class="hljs-params">function</span> <span class="hljs-params">ba</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">Wf</span>}<span class="hljs-params">const</span> <span class="hljs-params">Jf</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>);<span class="hljs-params">function</span> <span class="hljs-params">Ml</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">Jf</span>}<span class="hljs-params">const</span> <span class="hljs-params">Xf</span>=<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">U.comparator</span>);<span class="hljs-params">function</span> <span class="hljs-params">te</span>(<span class="hljs-params">...r</span>){<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">Xf</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> r</span>)<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">add</span>(<span class="hljs-params">s</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">const</span> <span class="hljs-params">ep</span>=<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">$</span>);<span class="hljs-params">function</span> <span class="hljs-params">uo</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">ep</span>}<span class="hljs-params">class</span> <span class="hljs-params">Fs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">snapshotVersion</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetChanges</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetMismatches</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">documentUpdates</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">resolvedLimboDocuments</span>=<span class="hljs-params">c</span>}<span class="hljs-params">static</span> <span class="hljs-params">createSynthesizedRemoteEventForCurrentChange</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i,Us.createSynthesizedTargetChangeForCurrentChange(i,s</span>)),<span class="hljs-params">new</span> <span class="hljs-params">Fs</span>(<span class="hljs-params">H.min(</span>),<span class="hljs-params">o</span>,<span class="hljs-params">uo</span><span class="hljs-params">()</span>,<span class="hljs-params">ct</span><span class="hljs-params">()</span>,<span class="hljs-params">te</span><span class="hljs-params">()</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Us</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">resumeToken</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">current</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">addedDocuments</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">modifiedDocuments</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">removedDocuments</span>=<span class="hljs-params">c</span>}<span class="hljs-params">static</span> <span class="hljs-params">createSynthesizedTargetChangeForCurrentChange</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Us</span>(<span class="hljs-params">Ae.EMPTY_BYTE_STRING,s,te(</span>),<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">te</span><span class="hljs-params">()</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">lo</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">k</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">removedTargetIds</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">$</span>=<span class="hljs-params">a</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Ol</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">targetId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">O</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Fl</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o=Ae.EMPTY_BYTE_STRING,a=<span class="hljs-literal">null</span></span>){<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetIds</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">resumeToken</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">cause</span>=<span class="hljs-params">a</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Ul</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">F</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">M</span>=<span class="hljs-params">Bl</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">L</span>=<span class="hljs-params">Ae</span>.<span class="hljs-params">EMPTY_BYTE_STRING</span>,<span class="hljs-params">this</span>.<span class="hljs-params">B</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">U</span>=!0}<span class="hljs-params">get</span> <span class="hljs-params">current</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">B</span>}<span class="hljs-params">get</span> <span class="hljs-params">resumeToken</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">L</span>}<span class="hljs-params">get</span> <span class="hljs-params">q</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 0!==<span class="hljs-params">this</span>.<span class="hljs-params">F</span>}<span class="hljs-params">get</span> <span class="hljs-params">K</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">U</span>}<span class="hljs-params">j</span>(<span class="hljs-params">i</span>){<span class="hljs-params">i</span>.<span class="hljs-params">approximateByteSize</span><span class="hljs-params">()</span>&gt;0&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.U=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.L=i</span>)}<span class="hljs-params">W</span><span class="hljs-params">()</span>{<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">M</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(a,c</span>)=&gt;</span>{<span class="hljs-keyword">switch</span>(c){<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:i=i.add(a);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:s=s.add(a);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:o=o.add(a);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:V()}}),<span class="hljs-keyword">new</span> Us(<span class="hljs-keyword">this</span>.L,<span class="hljs-keyword">this</span>.B,i,s,o)}G(){<span class="hljs-keyword">this</span>.U=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.M=Bl()}H(i,s){<span class="hljs-keyword">this</span>.U=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.M=<span class="hljs-keyword">this</span>.M.insert(i,s)}J(i){<span class="hljs-keyword">this</span>.U=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.M=<span class="hljs-keyword">this</span>.M.remove(i)}Y(){<span class="hljs-keyword">this</span>.F+=<span class="hljs-number">1</span>}X(){<span class="hljs-keyword">this</span>.F-=<span class="hljs-number">1</span>}Z(){<span class="hljs-keyword">this</span>.U=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.B=!<span class="hljs-number">0</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">tp</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.tt=i,<span class="hljs-keyword">this</span>.et=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>,<span class="hljs-keyword">this</span>.nt=ct(),<span class="hljs-keyword">this</span>.st=Vl(),<span class="hljs-keyword">this</span>.it=<span class="hljs-keyword">new</span> ue($)}rt(i){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> i.k)i.$&amp;&amp;i.$.isFoundDocument()?<span class="hljs-keyword">this</span>.ot(s,i.$):<span class="hljs-keyword">this</span>.at(s,i.key,i.$);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> i.removedTargetIds)<span class="hljs-keyword">this</span>.at(s,i.key,i.$)}ct(i){<span class="hljs-keyword">this</span>.forEachTarget(i,s=&gt;{<span class="hljs-keyword">const</span> o=<span class="hljs-keyword">this</span>.ut(s);<span class="hljs-keyword">switch</span>(i.state){<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.ht(s)&amp;&amp;o.j(i.resumeToken);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:o.X(),o.q||o.G(),o.j(i.resumeToken);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:o.X(),o.q||<span class="hljs-keyword">this</span>.removeTarget(s);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-keyword">this</span>.ht(s)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">o.Z(</span>),<span class="hljs-params">o</span>.<span class="hljs-params">j</span>(<span class="hljs-params">i.resumeToken</span>));<span class="hljs-params">break</span>;<span class="hljs-params">case</span> 4:<span class="hljs-params">this</span>.<span class="hljs-params">ht</span>(<span class="hljs-params">s</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.lt(s</span>),<span class="hljs-params">o</span>.<span class="hljs-params">j</span>(<span class="hljs-params">i.resumeToken</span>));<span class="hljs-params">break</span>;<span class="hljs-params">default</span>:<span class="hljs-params">V</span><span class="hljs-params">()</span>}})}<span class="hljs-params">forEachTarget</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">i</span>.<span class="hljs-params">targetIds</span>.<span class="hljs-params">length</span>&gt;0?<span class="hljs-params">i</span>.<span class="hljs-params">targetIds</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(o,a</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.ht(a)&amp;&amp;s(a)})}ft(i){<span class="hljs-keyword">const</span> s=i.targetId,o=i.O.count,a=<span class="hljs-keyword">this</span>.dt(s);<span class="hljs-keyword">if</span>(a){<span class="hljs-keyword">const</span> c=a.target;<span class="hljs-keyword">if</span>(to(c))<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>===o){<span class="hljs-keyword">const</span> u=<span class="hljs-keyword">new</span> U(c.path);<span class="hljs-keyword">this</span>.at(s,u,ae.newNoDocument(u,H.min()))}<span class="hljs-keyword">else</span> z(<span class="hljs-number">1</span>===o);<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.wt(s)!==o&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.lt(s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">it</span>=<span class="hljs-params">this</span>.<span class="hljs-params">it</span>.<span class="hljs-params">add</span>(<span class="hljs-params">s</span>))}}<span class="hljs-params">_t</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(c,u</span>)=&gt;</span>{<span class="hljs-keyword">const</span> h=<span class="hljs-keyword">this</span>.dt(u);<span class="hljs-keyword">if</span>(h){<span class="hljs-keyword">if</span>(c.current&amp;&amp;to(h.target)){<span class="hljs-keyword">const</span> f=<span class="hljs-keyword">new</span> U(h.target.path);<span class="hljs-literal">null</span>!==<span class="hljs-keyword">this</span>.nt.get(f)||<span class="hljs-keyword">this</span>.gt(u,f)||<span class="hljs-keyword">this</span>.at(u,f,ae.newNoDocument(f,i))}c.K&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s.set(u,c.W(</span>)),<span class="hljs-params">c</span>.<span class="hljs-params">G</span><span class="hljs-params">()</span>)}});<span class="hljs-params">let</span> <span class="hljs-params">o</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>;<span class="hljs-params">this</span>.<span class="hljs-params">st</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(c,u</span>)=&gt;</span>{<span class="hljs-keyword">let</span> h=!<span class="hljs-number">0</span>;u.forEachWhile(<span class="hljs-function"><span class="hljs-params">f</span>=&gt;</span>{<span class="hljs-keyword">const</span> v=<span class="hljs-keyword">this</span>.dt(f);<span class="hljs-keyword">return</span>!v||<span class="hljs-number">2</span>===v.purpose||<span class="hljs-function">(<span class="hljs-params">h=!<span class="hljs-number">1</span>,!<span class="hljs-number">1</span></span>)}),<span class="hljs-params">h</span>&amp;&amp;(<span class="hljs-params">o=o.add(c</span>))});<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">Fs</span>(<span class="hljs-params">i,s,<span class="hljs-keyword">this</span>.it,<span class="hljs-keyword">this</span>.nt,o</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">nt</span>=<span class="hljs-params">ct</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">st</span>=<span class="hljs-params">Vl</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">it</span>=<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">$</span>),<span class="hljs-params">a</span>}<span class="hljs-params">ot</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.ht(i</span>))<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">gt</span>(<span class="hljs-params">i,s.key</span>)?2:0;<span class="hljs-params">this</span>.<span class="hljs-params">ut</span>(<span class="hljs-params">i</span>).<span class="hljs-params">H</span>(<span class="hljs-params">s.key,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">nt</span>=<span class="hljs-params">this</span>.<span class="hljs-params">nt</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s.key,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">st</span>=<span class="hljs-params">this</span>.<span class="hljs-params">st</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s.key,<span class="hljs-keyword">this</span>.yt(s.key</span>).<span class="hljs-params">add</span>(<span class="hljs-params">i</span>))}<span class="hljs-params">at</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.ht(i</span>))<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ut</span>(<span class="hljs-params">i</span>);<span class="hljs-params">this</span>.<span class="hljs-params">gt</span>(<span class="hljs-params">i,s</span>)?<span class="hljs-params">a</span>.<span class="hljs-params">H</span>(<span class="hljs-params">s,<span class="hljs-number">1</span></span>):<span class="hljs-params">a</span>.<span class="hljs-params">J</span>(<span class="hljs-params">s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">st</span>=<span class="hljs-params">this</span>.<span class="hljs-params">st</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,<span class="hljs-keyword">this</span>.yt(s</span>).<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>)),<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.nt=<span class="hljs-keyword">this</span>.nt.insert(s,o</span>))}<span class="hljs-params">removeTarget</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">wt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ut</span>(<span class="hljs-params">i</span>).<span class="hljs-params">W</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">tt</span>.<span class="hljs-params">getRemoteKeysForTarget</span>(<span class="hljs-params">i</span>).<span class="hljs-params">size</span>+<span class="hljs-params">s</span>.<span class="hljs-params">addedDocuments</span>.<span class="hljs-params">size</span>-<span class="hljs-params">s</span>.<span class="hljs-params">removedDocuments</span>.<span class="hljs-params">size</span>}<span class="hljs-params">Y</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ut</span>(<span class="hljs-params">i</span>).<span class="hljs-params">Y</span><span class="hljs-params">()</span>}<span class="hljs-params">ut</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>||(<span class="hljs-params">s=<span class="hljs-keyword">new</span> Ul,<span class="hljs-keyword">this</span>.et.set(i,s</span>)),<span class="hljs-params">s</span>}<span class="hljs-params">yt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">st</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>||(<span class="hljs-params">s=<span class="hljs-keyword">new</span> ue($</span>),<span class="hljs-params">this</span>.<span class="hljs-params">st</span>=<span class="hljs-params">this</span>.<span class="hljs-params">st</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">i,s</span>)),<span class="hljs-params">s</span>}<span class="hljs-params">ht</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">dt</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>||<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"WatchChangeAggregator"</span>,<span class="hljs-string">"Detected inactive target"</span>,i</span>),<span class="hljs-params">s</span>}<span class="hljs-params">dt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">q</span>?<span class="hljs-params">null</span>:<span class="hljs-params">this</span>.<span class="hljs-params">tt</span>.<span class="hljs-params">Et</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">lt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">et</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i,<span class="hljs-keyword">new</span> Ul</span>),<span class="hljs-params">this</span>.<span class="hljs-params">tt</span>.<span class="hljs-params">getRemoteKeysForTarget</span>(<span class="hljs-params">i</span>).<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{<span class="hljs-keyword">this</span>.at(i,s,<span class="hljs-literal">null</span></span>)})}<span class="hljs-params">gt</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">tt</span>.<span class="hljs-params">getRemoteKeysForTarget</span>(<span class="hljs-params">i</span>).<span class="hljs-params">has</span>(<span class="hljs-params">s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Vl</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Bl</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>)}<span class="hljs-params">const</span> <span class="hljs-params">np</span>={<span class="hljs-params">asc</span>:"<span class="hljs-params">ASCENDING</span>",<span class="hljs-params">desc</span>:"<span class="hljs-params">DESCENDING</span>"},<span class="hljs-params">ip</span>={"&lt;":"<span class="hljs-params">LESS_THAN</span>","&lt;=":"<span class="hljs-params">LESS_THAN_OR_EQUAL</span>","&gt;":"<span class="hljs-params">GREATER_THAN</span>","&gt;=":"<span class="hljs-params">GREATER_THAN_OR_EQUAL</span>","==":"<span class="hljs-params">EQUAL</span>","!=":"<span class="hljs-params">NOT_EQUAL</span>","<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>":"<span class="hljs-params">ARRAY_CONTAINS</span>",<span class="hljs-params">in</span>:"<span class="hljs-params">IN</span>","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>":"<span class="hljs-params">NOT_IN</span>","<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>":"<span class="hljs-params">ARRAY_CONTAINS_ANY</span>"};<span class="hljs-params">class</span> <span class="hljs-params">sp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">databaseId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">D</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Vs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">D</span>?`<span class="hljs-params">$</span>{<span class="hljs-params">new</span> <span class="hljs-params">Date</span>(<span class="hljs-params"><span class="hljs-number">1e3</span>*i.seconds</span>).<span class="hljs-params">toISOString</span><span class="hljs-params">()</span>.<span class="hljs-params">replace</span>(<span class="hljs-params"><span class="hljs-regexp">/\.\d*/</span>,<span class="hljs-string">""</span></span>).<span class="hljs-params">replace</span>(<span class="hljs-params"><span class="hljs-string">"Z"</span>,<span class="hljs-string">""</span></span>)}.<span class="hljs-params">$</span>{(<span class="hljs-params"><span class="hljs-string">"000000000"</span>+i.nanoseconds</span>).<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-number">-9</span></span>)}<span class="hljs-params">Z</span>`:{<span class="hljs-params">seconds</span>:""+<span class="hljs-params">i</span>.<span class="hljs-params">seconds</span>,<span class="hljs-params">nanos</span>:<span class="hljs-params">i</span>.<span class="hljs-params">nanoseconds</span>}}<span class="hljs-params">function</span> <span class="hljs-params">ql</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">D</span>?<span class="hljs-params">i</span>.<span class="hljs-params">toBase64</span><span class="hljs-params">()</span>:<span class="hljs-params">i</span>.<span class="hljs-params">toUint8Array</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">rp</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Vs</span>(<span class="hljs-params">r,i.toTimestamp(</span>))}<span class="hljs-params">function</span> <span class="hljs-params">ke</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params">!!r</span>),<span class="hljs-params">H</span>.<span class="hljs-params">fromTimestamp</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Re</span>(<span class="hljs-params">s.seconds,s.nanos</span>)}(<span class="hljs-params">r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Ta</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>(<span class="hljs-params">s=r,<span class="hljs-keyword">new</span> X([<span class="hljs-string">"projects"</span>,s.projectId,<span class="hljs-string">"databases"</span>,s.database]</span>)).<span class="hljs-params">child</span>(<span class="hljs-params"><span class="hljs-string">"documents"</span></span>).<span class="hljs-params">child</span>(<span class="hljs-params">i</span>).<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>;<span class="hljs-params">var</span> <span class="hljs-params">s</span>}<span class="hljs-params">function</span> <span class="hljs-params">zl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">X</span>.<span class="hljs-params">fromString</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params">eh(i</span>)),<span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Bs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ta</span>(<span class="hljs-params">r.databaseId,i.path</span>)}<span class="hljs-params">function</span> <span class="hljs-params">vt</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">zl</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">s.get(<span class="hljs-number">1</span></span>)!==<span class="hljs-params">r</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">projectId</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Tried to deserialize key from different project: "</span>+s.get(<span class="hljs-number">1</span></span>)+" <span class="hljs-params">vs</span> "+<span class="hljs-params">r</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">projectId</span>);<span class="hljs-params">if</span>(<span class="hljs-params">s.get(<span class="hljs-number">3</span></span>)!==<span class="hljs-params">r</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">database</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Tried to deserialize key from different database: "</span>+s.get(<span class="hljs-number">3</span></span>)+" <span class="hljs-params">vs</span> "+<span class="hljs-params">r</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">database</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">jl(s</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Ea</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ta</span>(<span class="hljs-params">r.databaseId,i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Gl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">zl</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> 4===<span class="hljs-params">i</span>.<span class="hljs-params">length</span>?<span class="hljs-params">X</span>.<span class="hljs-params">emptyPath</span><span class="hljs-params">()</span>:<span class="hljs-params">jl</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">qs</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">X</span>(<span class="hljs-params">[<span class="hljs-string">"projects"</span>,r.databaseId.projectId,<span class="hljs-string">"databases"</span>,r.databaseId.database]</span>).<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">jl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params">r.length&gt;<span class="hljs-number">4</span>&amp;&amp;<span class="hljs-string">"documents"</span>===r.get(<span class="hljs-number">4</span></span>)),<span class="hljs-params">r</span>.<span class="hljs-params">popFirst</span>(<span class="hljs-params"><span class="hljs-number">5</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Hl</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span>{<span class="hljs-params">name</span>:<span class="hljs-params">Bs</span>(<span class="hljs-params">r,i</span>),<span class="hljs-params">fields</span>:<span class="hljs-params">s</span>.<span class="hljs-params">value</span>.<span class="hljs-params">mapValue</span>.<span class="hljs-params">fields</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Kl</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,i.name</span>),<span class="hljs-params">a</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">i.updateTime</span>),<span class="hljs-params">c</span>=<span class="hljs-params">new</span> <span class="hljs-params">qe</span>(<span class="hljs-params">{mapValue:{fields:i.fields}}</span>),<span class="hljs-params">u</span>=<span class="hljs-params">ae</span>.<span class="hljs-params">newFoundDocument</span>(<span class="hljs-params">o,a,c</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">u</span>.<span class="hljs-params">setHasCommittedMutations</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>?<span class="hljs-params">u</span>.<span class="hljs-params">setHasCommittedMutations</span><span class="hljs-params">()</span>:<span class="hljs-params">u</span>}<span class="hljs-params">function</span> <span class="hljs-params">ho</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i <span class="hljs-keyword">instanceof</span> Ms</span>)<span class="hljs-params">s</span>={<span class="hljs-params">update</span>:<span class="hljs-params">Hl</span>(<span class="hljs-params">r,i.key,i.value</span>)};<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">i <span class="hljs-keyword">instanceof</span> Os</span>)<span class="hljs-params">s</span>={<span class="hljs-params">delete</span>:<span class="hljs-params">Bs</span>(<span class="hljs-params">r,i.key</span>)};<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">i <span class="hljs-keyword">instanceof</span> Kt</span>)<span class="hljs-params">s</span>={<span class="hljs-params">update</span>:<span class="hljs-params">Hl</span>(<span class="hljs-params">r,i.key,i.data</span>),<span class="hljs-params">updateMask</span>:<span class="hljs-params">pp</span>(<span class="hljs-params">i.fieldMask</span>)};<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!(i <span class="hljs-keyword">instanceof</span> wa</span>))<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">s</span>={<span class="hljs-params">verify</span>:<span class="hljs-params">Bs</span>(<span class="hljs-params">r,i.key</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">fieldTransforms</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;(<span class="hljs-params">s.updateTransforms=i.fieldTransforms.map(o=&gt;<span class="hljs-keyword">function</span>(a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>.<span class="hljs-params">transform</span>;<span class="hljs-params">if</span>(<span class="hljs-params">u <span class="hljs-keyword">instanceof</span> gi</span>)<span class="hljs-params">return</span>{<span class="hljs-params">fieldPath</span>:<span class="hljs-params">c</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>,<span class="hljs-params">setToServerValue</span>:"<span class="hljs-params">REQUEST_TIME</span>"};<span class="hljs-params">if</span>(<span class="hljs-params">u <span class="hljs-keyword">instanceof</span> Sn</span>)<span class="hljs-params">return</span>{<span class="hljs-params">fieldPath</span>:<span class="hljs-params">c</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>,<span class="hljs-params">appendMissingElements</span>:{<span class="hljs-params">values</span>:<span class="hljs-params">u</span>.<span class="hljs-params">elements</span>}};<span class="hljs-params">if</span>(<span class="hljs-params">u <span class="hljs-keyword">instanceof</span> xn</span>)<span class="hljs-params">return</span>{<span class="hljs-params">fieldPath</span>:<span class="hljs-params">c</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>,<span class="hljs-params">removeAllFromArray</span>:{<span class="hljs-params">values</span>:<span class="hljs-params">u</span>.<span class="hljs-params">elements</span>}};<span class="hljs-params">if</span>(<span class="hljs-params">u <span class="hljs-keyword">instanceof</span> yi</span>)<span class="hljs-params">return</span>{<span class="hljs-params">fieldPath</span>:<span class="hljs-params">c</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>,<span class="hljs-params">increment</span>:<span class="hljs-params">u</span>.<span class="hljs-params">C</span>};<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}(<span class="hljs-params"><span class="hljs-number">0</span>,o</span>))),<span class="hljs-params">i</span>.<span class="hljs-params">precondition</span>.<span class="hljs-params">isNone</span>||(<span class="hljs-params">s.currentDocument=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==(a=i.precondition</span>).<span class="hljs-params">updateTime</span>?{<span class="hljs-params">updateTime</span>:<span class="hljs-params">rp</span>(<span class="hljs-params">r,a.updateTime</span>)}:<span class="hljs-params">void</span> 0!==<span class="hljs-params">a</span>.<span class="hljs-params">exists</span>?{<span class="hljs-params">exists</span>:<span class="hljs-params">a</span>.<span class="hljs-params">exists</span>}:<span class="hljs-params">V</span><span class="hljs-params">()</span>),<span class="hljs-params">s</span>;<span class="hljs-params">var</span> <span class="hljs-params">a</span>}<span class="hljs-params">function</span> <span class="hljs-params">$l</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">currentDocument</span>?<span class="hljs-params">void</span> 0!==(<span class="hljs-params">a=i.currentDocument</span>).<span class="hljs-params">updateTime</span>?<span class="hljs-params">ve</span>.<span class="hljs-params">updateTime</span>(<span class="hljs-params">ke(a.updateTime</span>)):<span class="hljs-params">void</span> 0!==<span class="hljs-params">a</span>.<span class="hljs-params">exists</span>?<span class="hljs-params">ve</span>.<span class="hljs-params">exists</span>(<span class="hljs-params">a.exists</span>):<span class="hljs-params">ve</span>.<span class="hljs-params">none</span><span class="hljs-params">()</span>:<span class="hljs-params">ve</span>.<span class="hljs-params">none</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">updateTransforms</span>?<span class="hljs-params">i</span>.<span class="hljs-params">updateTransforms</span>.<span class="hljs-params">map</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">function</span>(c,u</span>){<span class="hljs-params">let</span> <span class="hljs-params">h</span>=<span class="hljs-params">null</span>;"<span class="hljs-params">setToServerValue</span>"<span class="hljs-params">in</span> <span class="hljs-params">u</span>?(<span class="hljs-params">z(<span class="hljs-string">"REQUEST_TIME"</span>===u.setToServerValue</span>),<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">gi</span>):"<span class="hljs-params">appendMissingElements</span>"<span class="hljs-params">in</span> <span class="hljs-params">u</span>?<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">Sn</span>(<span class="hljs-params">u.appendMissingElements.values||[]</span>):"<span class="hljs-params">removeAllFromArray</span>"<span class="hljs-params">in</span> <span class="hljs-params">u</span>?<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">xn</span>(<span class="hljs-params">u.removeAllFromArray.values||[]</span>):"<span class="hljs-params">increment</span>"<span class="hljs-params">in</span> <span class="hljs-params">u</span>?<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">yi</span>(<span class="hljs-params">c,u.increment</span>):<span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">Oe</span>.<span class="hljs-params">fromServerFormat</span>(<span class="hljs-params">u.fieldPath</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ls</span>(<span class="hljs-params">f,h</span>)}(<span class="hljs-params">r,a</span>)):[];<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i.update</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,i.update.name</span>),<span class="hljs-params">c</span>=<span class="hljs-params">new</span> <span class="hljs-params">qe</span>(<span class="hljs-params">{mapValue:{fields:i.update.fields}}</span>);<span class="hljs-params">if</span>(<span class="hljs-params">i.updateMask</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">li</span>(<span class="hljs-params">(i.updateMask.fieldPaths||[]</span>).<span class="hljs-params">map</span>(<span class="hljs-params">v=&gt;Oe.fromServerFormat(v</span>)));<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Kt</span>(<span class="hljs-params">a,c,u,s,o</span>)}<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ms</span>(<span class="hljs-params">a,c,s,o</span>)}<span class="hljs-params">if</span>(<span class="hljs-params">i.<span class="hljs-keyword">delete</span></span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,i.<span class="hljs-keyword">delete</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Os</span>(<span class="hljs-params">a,s</span>)}<span class="hljs-params">if</span>(<span class="hljs-params">i.verify</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,i.verify</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">wa</span>(<span class="hljs-params">a,s</span>)}<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">Zl</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>{<span class="hljs-params">documents</span>:[<span class="hljs-params">Ea</span>(<span class="hljs-params">r,i.path</span>)]}}<span class="hljs-params">function</span> <span class="hljs-params">Ql</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>={<span class="hljs-params">structuredQuery</span>:{}},<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">path</span>;<span class="hljs-params">null</span>!==<span class="hljs-params">i</span>.<span class="hljs-params">collectionGroup</span>?(<span class="hljs-params">s.parent=Ea(r,o</span>),<span class="hljs-params">s</span>.<span class="hljs-params">structuredQuery</span>.<span class="hljs-params">from</span>=[{<span class="hljs-params">collectionId</span>:<span class="hljs-params">i</span>.<span class="hljs-params">collectionGroup</span>,<span class="hljs-params">allDescendants</span>:!0}]):(<span class="hljs-params">s.parent=Ea(r,o.popLast(</span>)),<span class="hljs-params">s</span>.<span class="hljs-params">structuredQuery</span>.<span class="hljs-params">from</span>=[{<span class="hljs-params">collectionId</span>:<span class="hljs-params">o</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>}]);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">function</span>(<span class="hljs-params">h</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===h.length</span>)<span class="hljs-params">return</span>;<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">h</span>.<span class="hljs-params">map</span>(<span class="hljs-params">v=&gt;<span class="hljs-keyword">function</span>(w</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"=="</span>===w.op</span>){<span class="hljs-params">if</span>(<span class="hljs-params">ul(w.value</span>))<span class="hljs-params">return</span>{<span class="hljs-params">unaryFilter</span>:{<span class="hljs-params">field</span>:<span class="hljs-params">_i</span>(<span class="hljs-params">w.field</span>),<span class="hljs-params">op</span>:"<span class="hljs-params">IS_NAN</span>"}};<span class="hljs-params">if</span>(<span class="hljs-params">cl(w.value</span>))<span class="hljs-params">return</span>{<span class="hljs-params">unaryFilter</span>:{<span class="hljs-params">field</span>:<span class="hljs-params">_i</span>(<span class="hljs-params">w.field</span>),<span class="hljs-params">op</span>:"<span class="hljs-params">IS_NULL</span>"}}}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"!="</span>===w.op</span>){<span class="hljs-params">if</span>(<span class="hljs-params">ul(w.value</span>))<span class="hljs-params">return</span>{<span class="hljs-params">unaryFilter</span>:{<span class="hljs-params">field</span>:<span class="hljs-params">_i</span>(<span class="hljs-params">w.field</span>),<span class="hljs-params">op</span>:"<span class="hljs-params">IS_NOT_NAN</span>"}};<span class="hljs-params">if</span>(<span class="hljs-params">cl(w.value</span>))<span class="hljs-params">return</span>{<span class="hljs-params">unaryFilter</span>:{<span class="hljs-params">field</span>:<span class="hljs-params">_i</span>(<span class="hljs-params">w.field</span>),<span class="hljs-params">op</span>:"<span class="hljs-params">IS_NOT_NULL</span>"}}}<span class="hljs-params">return</span>{<span class="hljs-params">fieldFilter</span>:{<span class="hljs-params">field</span>:<span class="hljs-params">_i</span>(<span class="hljs-params">w.field</span>),<span class="hljs-params">op</span>:<span class="hljs-params">hp</span>(<span class="hljs-params">w.op</span>),<span class="hljs-params">value</span>:<span class="hljs-params">w</span>.<span class="hljs-params">value</span>}}}(<span class="hljs-params">v</span>));<span class="hljs-params">return</span> 1===<span class="hljs-params">f</span>.<span class="hljs-params">length</span>?<span class="hljs-params">f</span>[0]:{<span class="hljs-params">compositeFilter</span>:{<span class="hljs-params">op</span>:"<span class="hljs-params">AND</span>",<span class="hljs-params">filters</span>:<span class="hljs-params">f</span>}}}(<span class="hljs-params">i.filters</span>);<span class="hljs-params">a</span>&amp;&amp;(<span class="hljs-params">s.structuredQuery.where=a</span>);<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">function</span>(<span class="hljs-params">h</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>!==h.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">h</span>.<span class="hljs-params">map</span>(<span class="hljs-params">f=&gt;{<span class="hljs-keyword">return</span>{field:_i((v=f</span>).<span class="hljs-params">field</span>),<span class="hljs-params">direction</span>:<span class="hljs-params">lp</span>(<span class="hljs-params">v.dir</span>)};<span class="hljs-params">var</span> <span class="hljs-params">v</span>})}(<span class="hljs-params">i.orderBy</span>);<span class="hljs-params">c</span>&amp;&amp;(<span class="hljs-params">s.structuredQuery.orderBy=c</span>);<span class="hljs-params">const</span> <span class="hljs-params">u</span>=(<span class="hljs-params">f=i.limit,r.D||En(f</span>)?<span class="hljs-params">f</span>:{<span class="hljs-params">value</span>:<span class="hljs-params">f</span>});<span class="hljs-params">var</span> <span class="hljs-params">f</span>;<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">u</span>&amp;&amp;(<span class="hljs-params">s.structuredQuery.limit=u</span>),<span class="hljs-params">i</span>.<span class="hljs-params">startAt</span>&amp;&amp;(<span class="hljs-params">s.structuredQuery.startAt=Jl(i.startAt</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">endAt</span>&amp;&amp;(<span class="hljs-params">s.structuredQuery.endAt=Jl(i.endAt</span>)),<span class="hljs-params">s</span>}<span class="hljs-params">function</span> <span class="hljs-params">Yl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">let</span> <span class="hljs-params">i</span>=<span class="hljs-params">Gl</span>(<span class="hljs-params">r.parent</span>);<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">structuredQuery</span>,<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">from</span>?<span class="hljs-params">s</span>.<span class="hljs-params">from</span>.<span class="hljs-params">length</span>:0;<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params">o&gt;<span class="hljs-number">0</span></span>){<span class="hljs-params">z</span>(<span class="hljs-params"><span class="hljs-number">1</span>===o</span>);<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">s</span>.<span class="hljs-params">from</span>[0];<span class="hljs-params">w</span>.<span class="hljs-params">allDescendants</span>?<span class="hljs-params">a</span>=<span class="hljs-params">w</span>.<span class="hljs-params">collectionId</span>:<span class="hljs-params">i</span>=<span class="hljs-params">i</span>.<span class="hljs-params">child</span>(<span class="hljs-params">w.collectionId</span>)}<span class="hljs-params">let</span> <span class="hljs-params">c</span>=[];<span class="hljs-params">s</span>.<span class="hljs-params">where</span>&amp;&amp;(<span class="hljs-params">c=Wl(s.where</span>));<span class="hljs-params">let</span> <span class="hljs-params">u</span>=[];<span class="hljs-params">s</span>.<span class="hljs-params">orderBy</span>&amp;&amp;(<span class="hljs-params">u=s.orderBy.map(w=&gt;{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> fi(vi((T=w</span>).<span class="hljs-params">field</span>),<span class="hljs-params">function</span>(<span class="hljs-params">S</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">S</span>){<span class="hljs-params">case</span>"<span class="hljs-params">ASCENDING</span>":<span class="hljs-params">return</span>"<span class="hljs-params">asc</span>";<span class="hljs-params">case</span>"<span class="hljs-params">DESCENDING</span>":<span class="hljs-params">return</span>"<span class="hljs-params">desc</span>";<span class="hljs-params">default</span>:<span class="hljs-params">return</span>}}(<span class="hljs-params">T.direction</span>));<span class="hljs-params">var</span> <span class="hljs-params">T</span>}));<span class="hljs-params">let</span> <span class="hljs-params">h</span>=<span class="hljs-params">null</span>;<span class="hljs-params">s</span>.<span class="hljs-params">limit</span>&amp;&amp;(<span class="hljs-params">h=<span class="hljs-keyword">function</span>(w</span>){<span class="hljs-params">let</span> <span class="hljs-params">T</span>;<span class="hljs-params">return</span> <span class="hljs-params">T</span>="<span class="hljs-params">object</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">w</span>?<span class="hljs-params">w</span>.<span class="hljs-params">value</span>:<span class="hljs-params">w</span>,<span class="hljs-params">En</span>(<span class="hljs-params">T</span>)?<span class="hljs-params">null</span>:<span class="hljs-params">T</span>}(<span class="hljs-params">s.limit</span>));<span class="hljs-params">let</span> <span class="hljs-params">f</span>=<span class="hljs-params">null</span>;<span class="hljs-params">s</span>.<span class="hljs-params">startAt</span>&amp;&amp;(<span class="hljs-params">f=Xl(s.startAt</span>));<span class="hljs-params">let</span> <span class="hljs-params">v</span>=<span class="hljs-params">null</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">endAt</span>&amp;&amp;(<span class="hljs-params">v=Xl(s.endAt</span>)),<span class="hljs-params">ml</span>(<span class="hljs-params">i,a,u,c,h,<span class="hljs-string">"F"</span>,f,v</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Wl</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>?<span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">unaryFilter</span>?[<span class="hljs-params">fp</span>(<span class="hljs-params">r</span>)]:<span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">fieldFilter</span>?[<span class="hljs-params">dp</span>(<span class="hljs-params">r</span>)]:<span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">compositeFilter</span>?<span class="hljs-params">r</span>.<span class="hljs-params">compositeFilter</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">map</span>(<span class="hljs-params">i=&gt;Wl(i</span>)).<span class="hljs-params">reduce</span>(<span class="hljs-params">(i,s</span>)=&gt;</span>i.concat(s)):V():[]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Jl</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">before</span>:r.before,<span class="hljs-attr">values</span>:r.position}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Xl</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ks(r.values||[],!!r.before)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lp</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> np[r]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hp</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> ip[r]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_i</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">fieldPath</span>:r.canonicalString()}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">vi</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> Oe.fromServerFormat(r.fieldPath)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dp</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> He.create(vi(r.fieldFilter.field),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{<span class="hljs-keyword">switch</span>(i){<span class="hljs-keyword">case</span><span class="hljs-string">"EQUAL"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"=="</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"NOT_EQUAL"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"!="</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"GREATER_THAN"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"&gt;"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"GREATER_THAN_OR_EQUAL"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"&gt;="</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"LESS_THAN"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"&lt;"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"LESS_THAN_OR_EQUAL"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"&lt;="</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"ARRAY_CONTAINS"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"array-contains"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"IN"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"in"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"NOT_IN"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"not-in"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"ARRAY_CONTAINS_ANY"</span>:<span class="hljs-keyword">return</span><span class="hljs-string">"array-contains-any"</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"OPERATOR_UNSPECIFIED"</span>:<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> V()}}(r.fieldFilter.op),r.fieldFilter.value)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fp</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">switch</span>(r.unaryFilter.op){<span class="hljs-keyword">case</span><span class="hljs-string">"IS_NAN"</span>:<span class="hljs-keyword">const</span> i=vi(r.unaryFilter.field);<span class="hljs-keyword">return</span> He.create(i,<span class="hljs-string">"=="</span>,{<span class="hljs-attr">doubleValue</span>:<span class="hljs-literal">NaN</span>});<span class="hljs-keyword">case</span><span class="hljs-string">"IS_NULL"</span>:<span class="hljs-keyword">const</span> s=vi(r.unaryFilter.field);<span class="hljs-keyword">return</span> He.create(s,<span class="hljs-string">"=="</span>,{<span class="hljs-attr">nullValue</span>:<span class="hljs-string">"NULL_VALUE"</span>});<span class="hljs-keyword">case</span><span class="hljs-string">"IS_NOT_NAN"</span>:<span class="hljs-keyword">const</span> o=vi(r.unaryFilter.field);<span class="hljs-keyword">return</span> He.create(o,<span class="hljs-string">"!="</span>,{<span class="hljs-attr">doubleValue</span>:<span class="hljs-literal">NaN</span>});<span class="hljs-keyword">case</span><span class="hljs-string">"IS_NOT_NULL"</span>:<span class="hljs-keyword">const</span> a=vi(r.unaryFilter.field);<span class="hljs-keyword">return</span> He.create(a,<span class="hljs-string">"!="</span>,{<span class="hljs-attr">nullValue</span>:<span class="hljs-string">"NULL_VALUE"</span>});<span class="hljs-keyword">case</span><span class="hljs-string">"OPERATOR_UNSPECIFIED"</span>:<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> V()}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pp</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=[];<span class="hljs-keyword">return</span> r.fields.forEach(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>i.push(s.canonicalString())),{<span class="hljs-attr">fieldPaths</span>:i}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eh</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> r.length&gt;=<span class="hljs-number">4</span>&amp;&amp;<span class="hljs-string">"projects"</span>===r.get(<span class="hljs-number">0</span>)&amp;&amp;<span class="hljs-string">"databases"</span>===r.get(<span class="hljs-number">2</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dt</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">let</span> i=<span class="hljs-string">""</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> s=<span class="hljs-number">0</span>;s&lt;r.length;s++)i.length&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params">i=th(i</span>)),<span class="hljs-params">i</span>=<span class="hljs-params">mp</span>(<span class="hljs-params">r.get(s</span>),<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">th</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">mp</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">length</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;o;a++</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">r</span>.<span class="hljs-params">charAt</span>(<span class="hljs-params">a</span>);<span class="hljs-params">switch</span>(<span class="hljs-params">c</span>){<span class="hljs-params">case</span>"\0":<span class="hljs-params">s</span>+="\<span class="hljs-params">x01</span>\<span class="hljs-params">x10</span>";<span class="hljs-params">break</span>;<span class="hljs-params">case</span>"\<span class="hljs-params">x01</span>":<span class="hljs-params">s</span>+="\<span class="hljs-params">x01</span>\<span class="hljs-params">x11</span>";<span class="hljs-params">break</span>;<span class="hljs-params">default</span>:<span class="hljs-params">s</span>+=<span class="hljs-params">c</span>}}<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">function</span> <span class="hljs-params">th</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>+"\<span class="hljs-params">x01</span>\<span class="hljs-params">x01</span>"}<span class="hljs-params">function</span> <span class="hljs-params">At</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">length</span>;<span class="hljs-params">if</span>(<span class="hljs-params">z(i&gt;=<span class="hljs-number">2</span></span>),2===<span class="hljs-params">i</span>)<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params"><span class="hljs-string">"\x01"</span>===r.charAt(<span class="hljs-number">0</span></span>)&amp;&amp;"\<span class="hljs-params">x01</span>"===<span class="hljs-params">r</span>.<span class="hljs-params">charAt</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>)),<span class="hljs-params">X</span>.<span class="hljs-params">emptyPath</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>-2,<span class="hljs-params">o</span>=[];<span class="hljs-params">let</span> <span class="hljs-params">a</span>="";<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;i;</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">r</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"\x01"</span>,c</span>);<span class="hljs-params">switch</span>(<span class="hljs-params">(u&lt;<span class="hljs-number">0</span>||u&gt;s</span>)&amp;&amp;<span class="hljs-params">V</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>.<span class="hljs-params">charAt</span>(<span class="hljs-params">u+<span class="hljs-number">1</span></span>)){<span class="hljs-params">case</span>"\<span class="hljs-params">x01</span>":<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">r</span>.<span class="hljs-params">substring</span>(<span class="hljs-params">c,u</span>);<span class="hljs-params">let</span> <span class="hljs-params">f</span>;0===<span class="hljs-params">a</span>.<span class="hljs-params">length</span>?<span class="hljs-params">f</span>=<span class="hljs-params">h</span>:(<span class="hljs-params">a+=h,f=a,a=<span class="hljs-string">""</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">push</span>(<span class="hljs-params">f</span>);<span class="hljs-params">break</span>;<span class="hljs-params">case</span>"\<span class="hljs-params">x10</span>":<span class="hljs-params">a</span>+=<span class="hljs-params">r</span>.<span class="hljs-params">substring</span>(<span class="hljs-params">c,u</span>),<span class="hljs-params">a</span>+="\0";<span class="hljs-params">break</span>;<span class="hljs-params">case</span>"\<span class="hljs-params">x11</span>":<span class="hljs-params">a</span>+=<span class="hljs-params">r</span>.<span class="hljs-params">substring</span>(<span class="hljs-params">c,u+<span class="hljs-number">1</span></span>);<span class="hljs-params">break</span>;<span class="hljs-params">default</span>:<span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">c</span>=<span class="hljs-params">u</span>+2}<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">X</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">class</span> <span class="hljs-params">gp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">seconds</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">nanoseconds</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">it</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ownerId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">allowTabSynchronization</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">leaseTimestampMs</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">it</span>.<span class="hljs-params">store</span>="<span class="hljs-params">owner</span>",<span class="hljs-params">it</span>.<span class="hljs-params">key</span>="<span class="hljs-params">owner</span>";<span class="hljs-params">class</span> <span class="hljs-params">$t</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">userId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">lastAcknowledgedBatchId</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">lastStreamToken</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">$t</span>.<span class="hljs-params">store</span>="<span class="hljs-params">mutationQueues</span>",<span class="hljs-params">$t</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">userId</span>";<span class="hljs-params">class</span> <span class="hljs-params">se</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">userId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">batchId</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">localWriteTimeMs</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">baseMutations</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mutations</span>=<span class="hljs-params">c</span>}}<span class="hljs-params">se</span>.<span class="hljs-params">store</span>="<span class="hljs-params">mutations</span>",<span class="hljs-params">se</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">batchId</span>",<span class="hljs-params">se</span>.<span class="hljs-params">userMutationsIndex</span>="<span class="hljs-params">userMutationsIndex</span>",<span class="hljs-params">se</span>.<span class="hljs-params">userMutationsKeyPath</span>=["<span class="hljs-params">userId</span>","<span class="hljs-params">batchId</span>"];<span class="hljs-params">class</span> <span class="hljs-params">ze</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{}<span class="hljs-params">static</span> <span class="hljs-params">prefixForUser</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>[<span class="hljs-params">i</span>]}<span class="hljs-params">static</span> <span class="hljs-params">prefixForPath</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span>[<span class="hljs-params">i</span>,<span class="hljs-params">dt</span>(<span class="hljs-params">s</span>)]}<span class="hljs-params">static</span> <span class="hljs-params">key</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span>[<span class="hljs-params">i</span>,<span class="hljs-params">dt</span>(<span class="hljs-params">s</span>),<span class="hljs-params">o</span>]}}<span class="hljs-params">ze</span>.<span class="hljs-params">store</span>="<span class="hljs-params">documentMutations</span>",<span class="hljs-params">ze</span>.<span class="hljs-params">PLACEHOLDER</span>=<span class="hljs-params">new</span> <span class="hljs-params">ze</span>;<span class="hljs-params">class</span> <span class="hljs-params">yp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">path</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readTime</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">_p</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">path</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">version</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">le</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c,u</span>){<span class="hljs-params">this</span>.<span class="hljs-params">unknownDocument</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">noDocument</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">document</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">hasCommittedMutations</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readTime</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">parentPath</span>=<span class="hljs-params">u</span>}}<span class="hljs-params">le</span>.<span class="hljs-params">store</span>="<span class="hljs-params">remoteDocuments</span>",<span class="hljs-params">le</span>.<span class="hljs-params">readTimeIndex</span>="<span class="hljs-params">readTimeIndex</span>",<span class="hljs-params">le</span>.<span class="hljs-params">readTimeIndexPath</span>="<span class="hljs-params">readTime</span>",<span class="hljs-params">le</span>.<span class="hljs-params">collectionReadTimeIndex</span>="<span class="hljs-params">collectionReadTimeIndex</span>",<span class="hljs-params">le</span>.<span class="hljs-params">collectionReadTimeIndexPath</span>=["<span class="hljs-params">parentPath</span>","<span class="hljs-params">readTime</span>"];<span class="hljs-params">class</span> <span class="hljs-params">wt</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">byteSize</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">wt</span>.<span class="hljs-params">store</span>="<span class="hljs-params">remoteDocumentGlobal</span>",<span class="hljs-params">wt</span>.<span class="hljs-params">key</span>="<span class="hljs-params">remoteDocumentGlobalKey</span>";<span class="hljs-params">class</span> <span class="hljs-params">Ye</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c,u,h</span>){<span class="hljs-params">this</span>.<span class="hljs-params">targetId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">canonicalId</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readTime</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">resumeToken</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">lastListenSequenceNumber</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">lastLimboFreeSnapshotVersion</span>=<span class="hljs-params">u</span>,<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">h</span>}}<span class="hljs-params">Ye</span>.<span class="hljs-params">store</span>="<span class="hljs-params">targets</span>",<span class="hljs-params">Ye</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">targetId</span>",<span class="hljs-params">Ye</span>.<span class="hljs-params">queryTargetsIndexName</span>="<span class="hljs-params">queryTargetsIndex</span>",<span class="hljs-params">Ye</span>.<span class="hljs-params">queryTargetsKeyPath</span>=["<span class="hljs-params">canonicalId</span>","<span class="hljs-params">targetId</span>"];<span class="hljs-params">class</span> <span class="hljs-params">Ue</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">targetId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">path</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">sequenceNumber</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">Ue</span>.<span class="hljs-params">store</span>="<span class="hljs-params">targetDocuments</span>",<span class="hljs-params">Ue</span>.<span class="hljs-params">keyPath</span>=["<span class="hljs-params">targetId</span>","<span class="hljs-params">path</span>"],<span class="hljs-params">Ue</span>.<span class="hljs-params">documentTargetsIndex</span>="<span class="hljs-params">documentTargetsIndex</span>",<span class="hljs-params">Ue</span>.<span class="hljs-params">documentTargetsKeyPath</span>=["<span class="hljs-params">path</span>","<span class="hljs-params">targetId</span>"];<span class="hljs-params">class</span> <span class="hljs-params">st</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">highestTargetId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">highestListenSequenceNumber</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">lastRemoteSnapshotVersion</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetCount</span>=<span class="hljs-params">a</span>}}<span class="hljs-params">st</span>.<span class="hljs-params">key</span>="<span class="hljs-params">targetGlobalKey</span>",<span class="hljs-params">st</span>.<span class="hljs-params">store</span>="<span class="hljs-params">targetGlobal</span>";<span class="hljs-params">class</span> <span class="hljs-params">Dn</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">collectionId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">parent</span>=<span class="hljs-params">s</span>}}<span class="hljs-params">Dn</span>.<span class="hljs-params">store</span>="<span class="hljs-params">collectionParents</span>",<span class="hljs-params">Dn</span>.<span class="hljs-params">keyPath</span>=["<span class="hljs-params">collectionId</span>","<span class="hljs-params">parent</span>"];<span class="hljs-params">class</span> <span class="hljs-params">kt</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">clientId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">updateTimeMs</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">networkEnabled</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">inForeground</span>=<span class="hljs-params">a</span>}}<span class="hljs-params">kt</span>.<span class="hljs-params">store</span>="<span class="hljs-params">clientMetadata</span>",<span class="hljs-params">kt</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">clientId</span>";<span class="hljs-params">class</span> <span class="hljs-params">wi</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">bundleId</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">createTime</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">version</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">wi</span>.<span class="hljs-params">store</span>="<span class="hljs-params">bundles</span>",<span class="hljs-params">wi</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">bundleId</span>";<span class="hljs-params">class</span> <span class="hljs-params">bi</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">name</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readTime</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">bundledQuery</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">bi</span>.<span class="hljs-params">store</span>="<span class="hljs-params">namedQueries</span>",<span class="hljs-params">bi</span>.<span class="hljs-params">keyPath</span>="<span class="hljs-params">name</span>";<span class="hljs-params">const</span> <span class="hljs-params">vp</span>=[<span class="hljs-params">$t</span>.<span class="hljs-params">store</span>,<span class="hljs-params">se</span>.<span class="hljs-params">store</span>,<span class="hljs-params">ze</span>.<span class="hljs-params">store</span>,<span class="hljs-params">le</span>.<span class="hljs-params">store</span>,<span class="hljs-params">Ye</span>.<span class="hljs-params">store</span>,<span class="hljs-params">it</span>.<span class="hljs-params">store</span>,<span class="hljs-params">st</span>.<span class="hljs-params">store</span>,<span class="hljs-params">Ue</span>.<span class="hljs-params">store</span>,<span class="hljs-params">kt</span>.<span class="hljs-params">store</span>,<span class="hljs-params">wt</span>.<span class="hljs-params">store</span>,<span class="hljs-params">Dn</span>.<span class="hljs-params">store</span>,<span class="hljs-params">wi</span>.<span class="hljs-params">store</span>,<span class="hljs-params">bi</span>.<span class="hljs-params">store</span>],<span class="hljs-params">nh</span>="<span class="hljs-params">The</span> <span class="hljs-params">current</span> <span class="hljs-params">tab</span> <span class="hljs-params">is</span> <span class="hljs-params">not</span> <span class="hljs-params">in</span> <span class="hljs-params">the</span> <span class="hljs-params">required</span> <span class="hljs-params">state</span> <span class="hljs-params">to</span> <span class="hljs-params">perform</span> <span class="hljs-params">this</span> <span class="hljs-params">operation</span>. <span class="hljs-params">It</span> <span class="hljs-params">might</span> <span class="hljs-params">be</span> <span class="hljs-params">necessary</span> <span class="hljs-params">to</span> <span class="hljs-params">refresh</span> <span class="hljs-params">the</span> <span class="hljs-params">browser</span> <span class="hljs-params">tab</span>.";<span class="hljs-params">class</span> <span class="hljs-params">ih</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">onCommittedListeners</span>=[]}<span class="hljs-params">addOnCommittedListener</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">onCommittedListeners</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">raiseOnCommittedEvent</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">onCommittedListeners</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">i=&gt;i(</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">R</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">nextCallback</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">catchCallback</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">result</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">error</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">isDone</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">callbackAttached</span>=!1,<span class="hljs-params">i</span>(<span class="hljs-params">s=&gt;{<span class="hljs-keyword">this</span>.isDone=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.result=s,<span class="hljs-keyword">this</span>.nextCallback&amp;&amp;<span class="hljs-keyword">this</span>.nextCallback(s</span>)},<span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">this</span>.isDone=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.error=s,<span class="hljs-keyword">this</span>.catchCallback&amp;&amp;<span class="hljs-keyword">this</span>.catchCallback(s)})}<span class="hljs-keyword">catch</span>(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.next(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,i)}next(i,s){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.callbackAttached&amp;&amp;V(),<span class="hljs-keyword">this</span>.callbackAttached=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.isDone?<span class="hljs-keyword">this</span>.error?<span class="hljs-keyword">this</span>.wrapFailure(s,<span class="hljs-keyword">this</span>.error):<span class="hljs-keyword">this</span>.wrapSuccess(i,<span class="hljs-keyword">this</span>.result):<span class="hljs-keyword">new</span> R(<span class="hljs-function">(<span class="hljs-params">o,a</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.nextCallback=<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">this</span>.wrapSuccess(i,c).next(o,a)},<span class="hljs-keyword">this</span>.catchCallback=<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">this</span>.wrapFailure(s,c).next(o,a)}})}toPromise(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">i,s</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.next(i,s)})}wrapUserFunction(i){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">const</span> s=i();<span class="hljs-keyword">return</span> s <span class="hljs-keyword">instanceof</span> R?s:R.resolve(s)}<span class="hljs-keyword">catch</span>(s){<span class="hljs-keyword">return</span> R.reject(s)}}wrapSuccess(i,s){<span class="hljs-keyword">return</span> i?<span class="hljs-keyword">this</span>.wrapUserFunction(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>i(s)):R.resolve(s)}wrapFailure(i,s){<span class="hljs-keyword">return</span> i?<span class="hljs-keyword">this</span>.wrapUserFunction(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>i(s)):R.reject(s)}<span class="hljs-keyword">static</span> resolve(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> R(<span class="hljs-function">(<span class="hljs-params">s,o</span>)=&gt;</span>{s(i)})}<span class="hljs-keyword">static</span> reject(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> R(<span class="hljs-function">(<span class="hljs-params">s,o</span>)=&gt;</span>{o(i)})}<span class="hljs-keyword">static</span> waitFor(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> R(<span class="hljs-function">(<span class="hljs-params">s,o</span>)=&gt;</span>{<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>,c=<span class="hljs-number">0</span>,u=!<span class="hljs-number">1</span>;i.forEach(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>{++a,h.next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{++c,u&amp;&amp;c===a&amp;&amp;s()},f=&gt;o(f))}),u=!<span class="hljs-number">0</span>,c===a&amp;&amp;s()})}<span class="hljs-keyword">static</span> or(i){<span class="hljs-keyword">let</span> s=R.resolve(!<span class="hljs-number">1</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> i)s=s.next(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>a?R.resolve(a):o());<span class="hljs-keyword">return</span> s}<span class="hljs-keyword">static</span> forEach(i,s){<span class="hljs-keyword">const</span> o=[];<span class="hljs-keyword">return</span> i.forEach(<span class="hljs-function">(<span class="hljs-params">a,c</span>)=&gt;</span>{o.push(s.call(<span class="hljs-keyword">this</span>,a,c))}),<span class="hljs-keyword">this</span>.waitFor(o)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">fo</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.action=i,<span class="hljs-keyword">this</span>.transaction=s,<span class="hljs-keyword">this</span>.aborted=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.Tt=<span class="hljs-keyword">new</span> Ce,<span class="hljs-keyword">this</span>.transaction.oncomplete=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">this</span>.Tt.resolve()},<span class="hljs-keyword">this</span>.transaction.onabort=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{s.error?<span class="hljs-keyword">this</span>.Tt.reject(<span class="hljs-keyword">new</span> zs(i,s.error)):<span class="hljs-keyword">this</span>.Tt.resolve()},<span class="hljs-keyword">this</span>.transaction.onerror=<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{<span class="hljs-keyword">const</span> a=Ia(o.target.error);<span class="hljs-keyword">this</span>.Tt.reject(<span class="hljs-keyword">new</span> zs(i,a))}}<span class="hljs-keyword">static</span> open(i,s,o,a){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> fo(s,i.transaction(a,o))}<span class="hljs-keyword">catch</span>(c){<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> zs(s,c)}}<span class="hljs-keyword">get</span> It(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Tt.promise}abort(i){i&amp;&amp;<span class="hljs-keyword">this</span>.Tt.reject(i),<span class="hljs-keyword">this</span>.aborted||<span class="hljs-function">(<span class="hljs-params">k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"Aborting transaction:"</span>,i?i.message:<span class="hljs-string">"Client-initiated abort"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">aborted</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">transaction</span>.<span class="hljs-params">abort</span><span class="hljs-params">()</span>)}<span class="hljs-params">store</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">transaction</span>.<span class="hljs-params">objectStore</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">bp</span>(<span class="hljs-params">s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">ft</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">name</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">version</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">At</span>=<span class="hljs-params">o</span>,12.2===<span class="hljs-params">ft</span>.<span class="hljs-params">Rt</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,Y.z$</span>)<span class="hljs-params">()</span>)&amp;&amp;<span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."</span></span>)}<span class="hljs-params">static</span> <span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"Removing database:"</span>,i</span>),<span class="hljs-params">Rn</span>(<span class="hljs-params"><span class="hljs-built_in">window</span>.indexedDB.deleteDatabase(i</span>)).<span class="hljs-params">toPromise</span><span class="hljs-params">()</span>}<span class="hljs-params">static</span> <span class="hljs-params">Pt</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> indexedDB</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">if</span>(<span class="hljs-params">ft.bt(</span>))<span class="hljs-params">return</span>!0;<span class="hljs-params">const</span> <span class="hljs-params">i</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Y.z$</span>)<span class="hljs-params">()</span>,<span class="hljs-params">s</span>=<span class="hljs-params">ft</span>.<span class="hljs-params">Rt</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=0&lt;<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">s</span>&lt;10,<span class="hljs-params">a</span>=<span class="hljs-params">ft</span>.<span class="hljs-params">vt</span>(<span class="hljs-params">i</span>),<span class="hljs-params">c</span>=0&lt;<span class="hljs-params">a</span>&amp;&amp;<span class="hljs-params">a</span>&lt;4.5;<span class="hljs-params">return</span>!(<span class="hljs-params">i.indexOf(<span class="hljs-string">"MSIE "</span></span>)&gt;0||<span class="hljs-params">i</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"Trident/"</span></span>)&gt;0||<span class="hljs-params">i</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"Edge/"</span></span>)&gt;0||<span class="hljs-params">o</span>||<span class="hljs-params">c</span>)}<span class="hljs-params">static</span> <span class="hljs-params">bt</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>;<span class="hljs-params">return</span>"<span class="hljs-params">undefined</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">process</span>&amp;&amp;"<span class="hljs-params">YES</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>===(i=process.env</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">i</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">i</span>.<span class="hljs-params">Vt</span>)}<span class="hljs-params">static</span> <span class="hljs-params">St</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">store</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">static</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">match</span>(<span class="hljs-params"><span class="hljs-regexp">/i(?:phone|pad|pod) os ([\d_]+)/i</span></span>),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>[1].<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"_"</span></span>).<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">2</span></span>).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>):"-1";<span class="hljs-params">return</span> <span class="hljs-params">Number</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">static</span> <span class="hljs-params">vt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">match</span>(<span class="hljs-params"><span class="hljs-regexp">/Android ([\d.]+)/i</span></span>),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>[1].<span class="hljs-params">split</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>).<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-number">0</span>,<span class="hljs-number">2</span></span>).<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">"."</span></span>):"-1";<span class="hljs-params">return</span> <span class="hljs-params">Number</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">Dt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">db</span>||(<span class="hljs-params">k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"Opening database:"</span>,s.name</span>),<span class="hljs-params">s</span>.<span class="hljs-params">db</span>=<span class="hljs-params">yield</span> <span class="hljs-params">new</span> <span class="hljs-params">Promise</span>(<span class="hljs-params">(o,a</span>)=&gt;</span>{<span class="hljs-keyword">const</span> c=indexedDB.open(s.name,s.version);c.onsuccess=<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{o(u.target.result)},c.onblocked=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{a(<span class="hljs-keyword">new</span> zs(i,<span class="hljs-string">"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."</span>))},c.onerror=<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{<span class="hljs-keyword">const</span> h=u.target.error;a(<span class="hljs-string">"VersionError"</span>===h.name?<span class="hljs-keyword">new</span> A(I.FAILED_PRECONDITION,<span class="hljs-string">"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."</span>):<span class="hljs-keyword">new</span> zs(i,h))},c.onupgradeneeded=<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">'Database "'</span>+s.name+<span class="hljs-string">'" requires upgrade from version:'</span>,u.oldVersion),s.At.Ct(u.target.result,c.transaction,u.oldVersion,s.version).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"Database upgrade to version "</span>+s.version+<span class="hljs-string">" complete"</span>)})}})),s.Nt&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s.db.onversionchange=o=&gt;s.Nt(o</span>)),<span class="hljs-params">s</span>.<span class="hljs-params">db</span>})<span class="hljs-params">()</span>}<span class="hljs-params">xt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">Nt</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">db</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.db.onversionchange=s=&gt;i(s</span>))}<span class="hljs-params">runTransaction</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>="<span class="hljs-params">readonly</span>"===<span class="hljs-params">s</span>;<span class="hljs-params">let</span> <span class="hljs-params">h</span>=0;<span class="hljs-params">for</span>(<span class="hljs-params">;;</span>){++<span class="hljs-params">h</span>;<span class="hljs-params">try</span>{<span class="hljs-params">c</span>.<span class="hljs-params">db</span>=<span class="hljs-params">yield</span> <span class="hljs-params">c</span>.<span class="hljs-params">Dt</span>(<span class="hljs-params">i</span>);<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">fo</span>.<span class="hljs-params">open</span>(<span class="hljs-params">c.db,i,u?<span class="hljs-string">"readonly"</span>:<span class="hljs-string">"readwrite"</span>,o</span>),<span class="hljs-params">v</span>=<span class="hljs-params">a</span>(<span class="hljs-params">f</span>).<span class="hljs-params">catch</span>(<span class="hljs-params">w=&gt;(f.abort(w</span>),<span class="hljs-params">R</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">w</span>))).<span class="hljs-params">toPromise</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">v</span>.<span class="hljs-params">catch</span>(<span class="hljs-params">(</span>)=&gt;</span>{}),<span class="hljs-keyword">yield</span> f.It,v}<span class="hljs-keyword">catch</span>(f){<span class="hljs-keyword">const</span> v=<span class="hljs-string">"FirebaseError"</span>!==f.name&amp;&amp;h&lt;<span class="hljs-number">3</span>;<span class="hljs-keyword">if</span>(k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"Transaction failed with error:"</span>,f.message,<span class="hljs-string">"Retrying:"</span>,v),c.close(),!v)<span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(f)}}})()}close(){<span class="hljs-keyword">this</span>.db&amp;&amp;<span class="hljs-keyword">this</span>.db.close(),<span class="hljs-keyword">this</span>.db=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">wp</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.kt=i,<span class="hljs-keyword">this</span>.$t=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.Ot=<span class="hljs-literal">null</span>}<span class="hljs-keyword">get</span> isDone(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$t}<span class="hljs-keyword">get</span> Ft(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Ot}<span class="hljs-keyword">set</span> cursor(i){<span class="hljs-keyword">this</span>.kt=i}done(){<span class="hljs-keyword">this</span>.$t=!<span class="hljs-number">0</span>}Mt(i){<span class="hljs-keyword">this</span>.Ot=i}<span class="hljs-keyword">delete</span>(){<span class="hljs-keyword">return</span> Rn(<span class="hljs-keyword">this</span>.kt.delete())}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">zs</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">super</span>(I.UNAVAILABLE,<span class="hljs-string">`IndexedDB transaction '<span class="hljs-subst">${i}</span>' failed: <span class="hljs-subst">${s}</span>`</span>),<span class="hljs-keyword">this</span>.name=<span class="hljs-string">"IndexedDbTransactionError"</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cn</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"IndexedDbTransactionError"</span>===r.name}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">bp</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.store=i}put(i,s){<span class="hljs-keyword">let</span> o;<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==s?<span class="hljs-function">(<span class="hljs-params">k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"PUT"</span>,<span class="hljs-keyword">this</span>.store.name,i,s</span>),<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">store</span>.<span class="hljs-params">put</span>(<span class="hljs-params">s,i</span>)):(<span class="hljs-params">k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"PUT"</span>,<span class="hljs-keyword">this</span>.store.name,<span class="hljs-string">"&lt;auto-key&gt;"</span>,i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">store</span>.<span class="hljs-params">put</span>(<span class="hljs-params">i</span>)),<span class="hljs-params">Rn</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"ADD"</span>,<span class="hljs-keyword">this</span>.store.name,i,i</span>),<span class="hljs-params">Rn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.store.add(i</span>))}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Rn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.store.get(i</span>)).<span class="hljs-params">next</span>(<span class="hljs-params">s=&gt;(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===s&amp;&amp;(s=<span class="hljs-literal">null</span></span>),<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"GET"</span>,<span class="hljs-keyword">this</span>.store.name,i,s</span>),<span class="hljs-params">s</span>))}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"DELETE"</span>,<span class="hljs-keyword">this</span>.store.name,i</span>),<span class="hljs-params">Rn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.store.<span class="hljs-keyword">delete</span>(i</span>))}<span class="hljs-params">count</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"COUNT"</span>,<span class="hljs-keyword">this</span>.store.name</span>),<span class="hljs-params">Rn</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.store.count(</span>))}<span class="hljs-params">Lt</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">cursor</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.options(i,s</span>)),<span class="hljs-params">a</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Bt</span>(<span class="hljs-params">o,(c,u</span>)=&gt;</span>{a.push(u)}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>a)}Ut(i,s){k(<span class="hljs-string">"SimpleDb"</span>,<span class="hljs-string">"DELETE ALL"</span>,<span class="hljs-keyword">this</span>.store.name);<span class="hljs-keyword">const</span> o=<span class="hljs-keyword">this</span>.options(i,s);o.qt=!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">this</span>.cursor(o);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Bt(a,(c,u,h)=&gt;h.delete())}Kt(i,s){<span class="hljs-keyword">let</span> o;s?o=i:<span class="hljs-function">(<span class="hljs-params">o={},s=i</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">cursor</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Bt</span>(<span class="hljs-params">a,s</span>)}<span class="hljs-params">jt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">cursor</span>(<span class="hljs-params">{}</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">R</span>(<span class="hljs-params">(o,a</span>)=&gt;</span>{s.onerror=<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">const</span> u=Ia(c.target.error);a(u)},s.onsuccess=<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">const</span> u=c.target.result;u?i(u.primaryKey,u.value).next(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>{h?u.continue():o()}):o()}})}Bt(i,s){<span class="hljs-keyword">const</span> o=[];<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> R(<span class="hljs-function">(<span class="hljs-params">a,c</span>)=&gt;</span>{i.onerror=<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{c(u.target.error)},i.onsuccess=<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{<span class="hljs-keyword">const</span> h=u.target.result;<span class="hljs-keyword">if</span>(!h)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> a();<span class="hljs-keyword">const</span> f=<span class="hljs-keyword">new</span> wp(h),v=s(h.primaryKey,h.value,f);<span class="hljs-keyword">if</span>(v <span class="hljs-keyword">instanceof</span> R){<span class="hljs-keyword">const</span> w=v.catch(<span class="hljs-function"><span class="hljs-params">T</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">f.done(</span>),<span class="hljs-params">R</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">T</span>)));<span class="hljs-params">o</span>.<span class="hljs-params">push</span>(<span class="hljs-params">w</span>)}<span class="hljs-params">f</span>.<span class="hljs-params">isDone</span>?<span class="hljs-params">a</span><span class="hljs-params">()</span>:<span class="hljs-params">null</span>===<span class="hljs-params">f</span>.<span class="hljs-params">Ft</span>?<span class="hljs-params">h</span>.<span class="hljs-params">continue</span><span class="hljs-params">()</span>:<span class="hljs-params">h</span>.<span class="hljs-params">continue</span>(<span class="hljs-params">f.Ft</span>)}}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>R.waitFor(o))}options(i,s){<span class="hljs-keyword">let</span> o;<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==i&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> i?o=i:s=i</span>),{<span class="hljs-params">index</span>:<span class="hljs-params">o</span>,<span class="hljs-params">range</span>:<span class="hljs-params">s</span>}}<span class="hljs-params">cursor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>="<span class="hljs-params">next</span>";<span class="hljs-params">if</span>(<span class="hljs-params">i.reverse&amp;&amp;(s=<span class="hljs-string">"prev"</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">index</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">store</span>.<span class="hljs-params">index</span>(<span class="hljs-params">i.index</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">qt</span>?<span class="hljs-params">o</span>.<span class="hljs-params">openKeyCursor</span>(<span class="hljs-params">i.range,s</span>):<span class="hljs-params">o</span>.<span class="hljs-params">openCursor</span>(<span class="hljs-params">i.range,s</span>)}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">store</span>.<span class="hljs-params">openCursor</span>(<span class="hljs-params">i.range,s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Rn</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">R</span>(<span class="hljs-params">(i,s</span>)=&gt;</span>{r.onsuccess=<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{i(o.target.result)},r.onerror=<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{<span class="hljs-keyword">const</span> a=Ia(o.target.error);s(a)}})}<span class="hljs-keyword">let</span> sh=!<span class="hljs-number">1</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ia</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=ft.Rt(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Y.z$</span>)<span class="hljs-params">()</span>);<span class="hljs-params">if</span>(<span class="hljs-params">i&gt;=<span class="hljs-number">12.2</span>&amp;&amp;i&lt;<span class="hljs-number">13</span></span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>="<span class="hljs-params">An</span> <span class="hljs-params">internal</span> <span class="hljs-params">error</span> <span class="hljs-params">was</span> <span class="hljs-params">encountered</span> <span class="hljs-params">in</span> <span class="hljs-params">the</span> <span class="hljs-params">Indexed</span> <span class="hljs-params">Database</span> <span class="hljs-params">server</span>";<span class="hljs-params">if</span>(<span class="hljs-params">r.message.indexOf(s</span>)&gt;=0){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"internal"</span>,<span class="hljs-string">`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '<span class="hljs-subst">${s}</span>'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">sh</span>||(<span class="hljs-params">sh=!<span class="hljs-number">0</span>,setTimeout((</span>)=&gt;</span>{<span class="hljs-keyword">throw</span> o},<span class="hljs-number">0</span>)),o}}<span class="hljs-keyword">return</span> r}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">rh</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ih</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">super</span>(),<span class="hljs-keyword">this</span>.Qt=i,<span class="hljs-keyword">this</span>.currentSequenceNumber=s}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">We</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">const</span> s=M(r);<span class="hljs-keyword">return</span> ft.St(s.Qt,i)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sa</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a){<span class="hljs-keyword">this</span>.batchId=i,<span class="hljs-keyword">this</span>.localWriteTime=s,<span class="hljs-keyword">this</span>.baseMutations=o,<span class="hljs-keyword">this</span>.mutations=a}applyToRemoteDocument(i,s){<span class="hljs-keyword">const</span> o=s.mutationResults;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;<span class="hljs-keyword">this</span>.mutations.length;a++){<span class="hljs-keyword">const</span> c=<span class="hljs-keyword">this</span>.mutations[a];c.key.isEqual(i.key)&amp;&amp;$f(c,i,o[a])}}applyToLocalView(i){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.baseMutations)s.key.isEqual(i.key)&amp;&amp;va(s,i,<span class="hljs-keyword">this</span>.localWriteTime);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.mutations)s.key.isEqual(i.key)&amp;&amp;va(s,i,<span class="hljs-keyword">this</span>.localWriteTime)}applyToLocalDocumentSet(i){<span class="hljs-keyword">this</span>.mutations.forEach(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">const</span> o=i.get(s.key),a=o;<span class="hljs-keyword">this</span>.applyToLocalView(a),o.isValidDocument()||a.convertToNoDocument(H.min())})}keys(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mutations.reduce(<span class="hljs-function">(<span class="hljs-params">i,s</span>)=&gt;</span>i.add(s.key),te())}isEqual(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.batchId===i.batchId&amp;&amp;ui(<span class="hljs-keyword">this</span>.mutations,i.mutations,(s,o)=&gt;Dl(s,o))&amp;&amp;ui(<span class="hljs-keyword">this</span>.baseMutations,i.baseMutations,(s,o)=&gt;Dl(s,o))}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">xa</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a){<span class="hljs-keyword">this</span>.batch=i,<span class="hljs-keyword">this</span>.commitVersion=s,<span class="hljs-keyword">this</span>.mutationResults=o,<span class="hljs-keyword">this</span>.docVersions=a}<span class="hljs-keyword">static</span> <span class="hljs-keyword">from</span>(i,s,o){z(i.mutations.length===o.length);<span class="hljs-keyword">let</span> a=Ml();<span class="hljs-keyword">const</span> c=i.mutations;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> u=<span class="hljs-number">0</span>;u&lt;c.length;u++)a=a.insert(c[u].key,o[u].version);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> xa(i,s,o,a)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Zt</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a,c=H.min(),u=H.min(),h=Ae.EMPTY_BYTE_STRING){<span class="hljs-keyword">this</span>.target=i,<span class="hljs-keyword">this</span>.targetId=s,<span class="hljs-keyword">this</span>.purpose=o,<span class="hljs-keyword">this</span>.sequenceNumber=a,<span class="hljs-keyword">this</span>.snapshotVersion=c,<span class="hljs-keyword">this</span>.lastLimboFreeSnapshotVersion=u,<span class="hljs-keyword">this</span>.resumeToken=h}withSequenceNumber(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Zt(<span class="hljs-keyword">this</span>.target,<span class="hljs-keyword">this</span>.targetId,<span class="hljs-keyword">this</span>.purpose,i,<span class="hljs-keyword">this</span>.snapshotVersion,<span class="hljs-keyword">this</span>.lastLimboFreeSnapshotVersion,<span class="hljs-keyword">this</span>.resumeToken)}withResumeToken(i,s){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Zt(<span class="hljs-keyword">this</span>.target,<span class="hljs-keyword">this</span>.targetId,<span class="hljs-keyword">this</span>.purpose,<span class="hljs-keyword">this</span>.sequenceNumber,s,<span class="hljs-keyword">this</span>.lastLimboFreeSnapshotVersion,i)}withLastLimboFreeSnapshotVersion(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Zt(<span class="hljs-keyword">this</span>.target,<span class="hljs-keyword">this</span>.targetId,<span class="hljs-keyword">this</span>.purpose,<span class="hljs-keyword">this</span>.sequenceNumber,<span class="hljs-keyword">this</span>.snapshotVersion,i,<span class="hljs-keyword">this</span>.resumeToken)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">oh</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.Wt=i}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Da</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">if</span>(i.document)<span class="hljs-keyword">return</span> Kl(r.Wt,i.document,!!i.hasCommittedMutations);<span class="hljs-keyword">if</span>(i.noDocument){<span class="hljs-keyword">const</span> s=U.fromSegments(i.noDocument.path),o=Ei(i.noDocument.readTime),a=ae.newNoDocument(s,o);<span class="hljs-keyword">return</span> i.hasCommittedMutations?a.setHasCommittedMutations():a}<span class="hljs-keyword">if</span>(i.unknownDocument){<span class="hljs-keyword">const</span> s=U.fromSegments(i.unknownDocument.path),o=Ei(i.unknownDocument.version);<span class="hljs-keyword">return</span> ae.newUnknownDocument(s,o)}<span class="hljs-keyword">return</span> V()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ah</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">const</span> o=Ca(s),a=i.key.path.popLast().toArray();<span class="hljs-keyword">if</span>(i.isFoundDocument()){<span class="hljs-keyword">const</span> c={<span class="hljs-attr">name</span>:Bs(h=r.Wt,(f=i).key),<span class="hljs-attr">fields</span>:f.data.value.mapValue.fields,<span class="hljs-attr">updateTime</span>:Vs(h,f.version.toTimestamp())};<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> le(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,c,i.hasCommittedMutations,o,a)}<span class="hljs-keyword">var</span> h,f;<span class="hljs-keyword">if</span>(i.isNoDocument()){<span class="hljs-keyword">const</span> c=i.key.path.toArray(),u=Ti(i.version),h=i.hasCommittedMutations;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> le(<span class="hljs-literal">null</span>,<span class="hljs-keyword">new</span> yp(c,u),<span class="hljs-literal">null</span>,h,o,a)}<span class="hljs-keyword">if</span>(i.isUnknownDocument()){<span class="hljs-keyword">const</span> c=i.key.path.toArray(),u=Ti(i.version);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> le(<span class="hljs-keyword">new</span> _p(c,u),<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>,!<span class="hljs-number">0</span>,o,a)}<span class="hljs-keyword">return</span> V()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ca</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=r.toTimestamp();<span class="hljs-keyword">return</span>[i.seconds,i.nanoseconds]}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ch</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">new</span> Re(r[<span class="hljs-number">0</span>],r[<span class="hljs-number">1</span>]);<span class="hljs-keyword">return</span> H.fromTimestamp(i)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ti</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=r.toTimestamp();<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> gp(i.seconds,i.nanoseconds)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ei</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">new</span> Re(r.seconds,r.nanoseconds);<span class="hljs-keyword">return</span> H.fromTimestamp(i)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ii</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-function">(<span class="hljs-params">i.baseMutations||[]</span>).<span class="hljs-params">map</span>(<span class="hljs-params">c=&gt;$l(r.Wt,c</span>));<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;c&lt;i.mutations.length<span class="hljs-number">-1</span>;++c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">i</span>.<span class="hljs-params">mutations</span>[<span class="hljs-params">c</span>];<span class="hljs-params">c</span>+1&lt;<span class="hljs-params">i</span>.<span class="hljs-params">mutations</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">void</span> 0!==<span class="hljs-params">i</span>.<span class="hljs-params">mutations</span>[<span class="hljs-params">c</span>+1].<span class="hljs-params">transform</span>&amp;&amp;(<span class="hljs-params">u.updateTransforms=i.mutations[c+<span class="hljs-number">1</span>].transform.fieldTransforms,i.mutations.splice(c+<span class="hljs-number">1</span>,<span class="hljs-number">1</span></span>),++<span class="hljs-params">c</span>)}<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">mutations</span>.<span class="hljs-params">map</span>(<span class="hljs-params">c=&gt;$l(r.Wt,c</span>)),<span class="hljs-params">a</span>=<span class="hljs-params">Re</span>.<span class="hljs-params">fromMillis</span>(<span class="hljs-params">i.localWriteTimeMs</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Sa</span>(<span class="hljs-params">i.batchId,a,s,o</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Gs</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">Ei</span>(<span class="hljs-params">r.readTime</span>),<span class="hljs-params">s</span>=<span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">lastLimboFreeSnapshotVersion</span>?<span class="hljs-params">Ei</span>(<span class="hljs-params">r.lastLimboFreeSnapshotVersion</span>):<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>;<span class="hljs-params">let</span> <span class="hljs-params">o</span>;<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">return</span> <span class="hljs-params">void</span> 0!==<span class="hljs-params">r</span>.<span class="hljs-params">query</span>.<span class="hljs-params">documents</span>?(<span class="hljs-params">z(<span class="hljs-number">1</span>===(a=r.query</span>).<span class="hljs-params">documents</span>.<span class="hljs-params">length</span>),<span class="hljs-params">o</span>=<span class="hljs-params">at</span>(<span class="hljs-params">pi(Gl(a.documents[<span class="hljs-number">0</span>]</span>)))):<span class="hljs-params">o</span>=<span class="hljs-params">at</span>(<span class="hljs-params">Yl(r.query</span>)),<span class="hljs-params">new</span> <span class="hljs-params">Zt</span>(<span class="hljs-params">o,r.targetId,<span class="hljs-number">0</span>,r.lastListenSequenceNumber,i,s,Ae.fromBase64String(r.resumeToken</span>))}<span class="hljs-params">function</span> <span class="hljs-params">uh</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Ti</span>(<span class="hljs-params">i.snapshotVersion</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Ti</span>(<span class="hljs-params">i.lastLimboFreeSnapshotVersion</span>);<span class="hljs-params">let</span> <span class="hljs-params">a</span>;<span class="hljs-params">a</span>=<span class="hljs-params">to</span>(<span class="hljs-params">i.target</span>)?<span class="hljs-params">Zl</span>(<span class="hljs-params">r.Wt,i.target</span>):<span class="hljs-params">Ql</span>(<span class="hljs-params">r.Wt,i.target</span>);<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>.<span class="hljs-params">resumeToken</span>.<span class="hljs-params">toBase64</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ye</span>(<span class="hljs-params">i.targetId,As(i.target</span>),<span class="hljs-params">s</span>,<span class="hljs-params">c</span>,<span class="hljs-params">i</span>.<span class="hljs-params">sequenceNumber</span>,<span class="hljs-params">o</span>,<span class="hljs-params">a</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ra</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">Yl</span>(<span class="hljs-params">{parent:r.parent,structuredQuery:r.structuredQuery}</span>);<span class="hljs-params">return</span>"<span class="hljs-params">LAST</span>"===<span class="hljs-params">r</span>.<span class="hljs-params">limitType</span>?<span class="hljs-params">gl</span>(<span class="hljs-params">i,i.limit,<span class="hljs-string">"L"</span></span>):<span class="hljs-params">i</span>}<span class="hljs-params">class</span> <span class="hljs-params">Tp</span>{<span class="hljs-params">getBundleMetadata</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">lh</span>(<span class="hljs-params">i</span>).<span class="hljs-params">get</span>(<span class="hljs-params">s</span>).<span class="hljs-params">next</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">if</span>(o</span>)<span class="hljs-params">return</span>{<span class="hljs-params">id</span>:(<span class="hljs-params">a=o</span>).<span class="hljs-params">bundleId</span>,<span class="hljs-params">createTime</span>:<span class="hljs-params">Ei</span>(<span class="hljs-params">a.createTime</span>),<span class="hljs-params">version</span>:<span class="hljs-params">a</span>.<span class="hljs-params">version</span>};<span class="hljs-params">var</span> <span class="hljs-params">a</span>})}<span class="hljs-params">saveBundleMetadata</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">lh</span>(<span class="hljs-params">i</span>).<span class="hljs-params">put</span>(<span class="hljs-params">{bundleId:(o=s</span>).<span class="hljs-params">id</span>,<span class="hljs-params">createTime</span>:<span class="hljs-params">Ti</span>(<span class="hljs-params">ke(o.createTime</span>)),<span class="hljs-params">version</span>:<span class="hljs-params">o</span>.<span class="hljs-params">version</span>});<span class="hljs-params">var</span> <span class="hljs-params">o</span>}<span class="hljs-params">getNamedQuery</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">hh</span>(<span class="hljs-params">i</span>).<span class="hljs-params">get</span>(<span class="hljs-params">s</span>).<span class="hljs-params">next</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">if</span>(o</span>)<span class="hljs-params">return</span>{<span class="hljs-params">name</span>:(<span class="hljs-params">a=o</span>).<span class="hljs-params">name</span>,<span class="hljs-params">query</span>:<span class="hljs-params">Ra</span>(<span class="hljs-params">a.bundledQuery</span>),<span class="hljs-params">readTime</span>:<span class="hljs-params">Ei</span>(<span class="hljs-params">a.readTime</span>)};<span class="hljs-params">var</span> <span class="hljs-params">a</span>})}<span class="hljs-params">saveNamedQuery</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">hh</span>(<span class="hljs-params">i</span>).<span class="hljs-params">put</span>(<span class="hljs-params">{name:(o=s</span>).<span class="hljs-params">name</span>,<span class="hljs-params">readTime</span>:<span class="hljs-params">Ti</span>(<span class="hljs-params">ke(o.readTime</span>)),<span class="hljs-params">bundledQuery</span>:<span class="hljs-params">o</span>.<span class="hljs-params">bundledQuery</span>});<span class="hljs-params">var</span> <span class="hljs-params">o</span>}}<span class="hljs-params">function</span> <span class="hljs-params">lh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">We</span>(<span class="hljs-params">r,wi.store</span>)}<span class="hljs-params">function</span> <span class="hljs-params">hh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">We</span>(<span class="hljs-params">r,bi.store</span>)}<span class="hljs-params">class</span> <span class="hljs-params">Ep</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Gt</span>=<span class="hljs-params">new</span> <span class="hljs-params">Aa</span>}<span class="hljs-params">addToCollectionParentIndex</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Gt</span>.<span class="hljs-params">add</span>(<span class="hljs-params">s</span>),<span class="hljs-params">R</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>}<span class="hljs-params">getCollectionParents</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">R</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Gt.getEntries(s</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">Aa</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">index</span>={}}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">popLast</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">index</span>[<span class="hljs-params">s</span>]||<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">X.comparator</span>),<span class="hljs-params">c</span>=!<span class="hljs-params">a</span>.<span class="hljs-params">has</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">index</span>[<span class="hljs-params">s</span>]=<span class="hljs-params">a</span>.<span class="hljs-params">add</span>(<span class="hljs-params">o</span>),<span class="hljs-params">c</span>}<span class="hljs-params">has</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">popLast</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">index</span>[<span class="hljs-params">s</span>];<span class="hljs-params">return</span> <span class="hljs-params">a</span>&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">has</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">getEntries</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.index[i]||<span class="hljs-keyword">new</span> ue(X.comparator</span>)).<span class="hljs-params">toArray</span><span class="hljs-params">()</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Ip</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">zt</span>=<span class="hljs-params">new</span> <span class="hljs-params">Aa</span>}<span class="hljs-params">addToCollectionParentIndex</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.zt.has(s</span>)){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">popLast</span><span class="hljs-params">()</span>;<span class="hljs-params">i</span>.<span class="hljs-params">addOnCommittedListener</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.zt.add(s)});<span class="hljs-keyword">const</span> c={<span class="hljs-attr">collectionId</span>:o,<span class="hljs-attr">parent</span>:dt(a)};<span class="hljs-keyword">return</span> dh(i).put(c)}<span class="hljs-keyword">return</span> R.resolve()}getCollectionParents(i,s){<span class="hljs-keyword">const</span> o=[],a=IDBKeyRange.bound([s,<span class="hljs-string">""</span>],[nl(s),<span class="hljs-string">""</span>],!<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> dh(i).Lt(a).next(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> c){<span class="hljs-keyword">if</span>(u.collectionId!==s)<span class="hljs-keyword">break</span>;o.push(At(u.parent))}<span class="hljs-keyword">return</span> o})}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dh</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,Dn.store)}<span class="hljs-keyword">const</span> fh={<span class="hljs-attr">didRun</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">sequenceNumbersCollected</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">targetsRemoved</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">documentsRemoved</span>:<span class="hljs-number">0</span>};<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Je</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o){<span class="hljs-keyword">this</span>.cacheSizeCollectionThreshold=i,<span class="hljs-keyword">this</span>.percentileToCollect=s,<span class="hljs-keyword">this</span>.maximumSequenceNumbersToCollect=o}<span class="hljs-keyword">static</span> withCacheSize(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Je(i,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ph</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">const</span> o=r.store(se.store),a=r.store(ze.store),c=[],u=IDBKeyRange.only(s.batchId);<span class="hljs-keyword">let</span> h=<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> f=o.Kt({<span class="hljs-attr">range</span>:u},(w,T,S)=&gt;<span class="hljs-function">(<span class="hljs-params">h++,S.<span class="hljs-keyword">delete</span>(</span>)));<span class="hljs-params">c</span>.<span class="hljs-params">push</span>(<span class="hljs-params">f.next((</span>)=&gt;</span>{z(<span class="hljs-number">1</span>===h)}));<span class="hljs-keyword">const</span> v=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> w <span class="hljs-keyword">of</span> s.mutations){<span class="hljs-keyword">const</span> T=ze.key(i,w.key.path,s.batchId);c.push(a.delete(T)),v.push(w.key)}<span class="hljs-keyword">return</span> R.waitFor(c).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>v)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">po</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(!r)<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> i;<span class="hljs-keyword">if</span>(r.document)i=r.document;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r.unknownDocument)i=r.unknownDocument;<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(!r.noDocument)<span class="hljs-keyword">throw</span> V();i=r.noDocument}<span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(i).length}Je.DEFAULT_COLLECTION_PERCENTILE=<span class="hljs-number">10</span>,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=<span class="hljs-number">1e3</span>,Je.DEFAULT=<span class="hljs-keyword">new</span> Je(<span class="hljs-number">41943040</span>,Je.DEFAULT_COLLECTION_PERCENTILE,Je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Je.DISABLED=<span class="hljs-keyword">new</span> Je(<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ka</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a){<span class="hljs-keyword">this</span>.userId=i,<span class="hljs-keyword">this</span>.N=s,<span class="hljs-keyword">this</span>.Ht=o,<span class="hljs-keyword">this</span>.referenceDelegate=a,<span class="hljs-keyword">this</span>.Jt={}}<span class="hljs-keyword">static</span> Yt(i,s,o,a){z(<span class="hljs-string">""</span>!==i.uid);<span class="hljs-keyword">const</span> c=i.isAuthenticated()?i.uid:<span class="hljs-string">""</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ka(c,s,o,a)}checkEmpty(i){<span class="hljs-keyword">let</span> s=!<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> o=IDBKeyRange.bound([<span class="hljs-keyword">this</span>.userId,<span class="hljs-built_in">Number</span>.NEGATIVE_INFINITY],[<span class="hljs-keyword">this</span>.userId,<span class="hljs-built_in">Number</span>.POSITIVE_INFINITY]);<span class="hljs-keyword">return</span> Qt(i).Kt({<span class="hljs-attr">index</span>:se.userMutationsIndex,<span class="hljs-attr">range</span>:o},(a,c,u)=&gt;{s=!<span class="hljs-number">1</span>,u.done()}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>s)}addMutationBatch(i,s,o,a){<span class="hljs-keyword">const</span> c=Si(i),u=Qt(i);<span class="hljs-keyword">return</span> u.add({}).next(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>{z(<span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> h);<span class="hljs-keyword">const</span> f=<span class="hljs-keyword">new</span> Sa(h,s,o,a),v=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">S,C,P</span>)</span>{<span class="hljs-keyword">const</span> B=P.baseMutations.map(<span class="hljs-function"><span class="hljs-params">de</span>=&gt;</span>ho(S.Wt,de)),j=P.mutations.map(<span class="hljs-function"><span class="hljs-params">de</span>=&gt;</span>ho(S.Wt,de));<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> se(C,P.batchId,P.localWriteTime.toMillis(),B,j)}(<span class="hljs-keyword">this</span>.N,<span class="hljs-keyword">this</span>.userId,f),w=[];<span class="hljs-keyword">let</span> T=<span class="hljs-keyword">new</span> ue(<span class="hljs-function">(<span class="hljs-params">S,C</span>)=&gt;</span>$(S.canonicalString(),C.canonicalString()));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> S <span class="hljs-keyword">of</span> a){<span class="hljs-keyword">const</span> C=ze.key(<span class="hljs-keyword">this</span>.userId,S.key.path,h);T=T.add(S.key.path.popLast()),w.push(u.put(v)),w.push(c.put(C,ze.PLACEHOLDER))}<span class="hljs-keyword">return</span> T.forEach(<span class="hljs-function"><span class="hljs-params">S</span>=&gt;</span>{w.push(<span class="hljs-keyword">this</span>.Ht.addToCollectionParentIndex(i,S))}),i.addOnCommittedListener(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">this</span>.Jt[h]=f.keys()}),R.waitFor(w).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>f)})}lookupMutationBatch(i,s){<span class="hljs-keyword">return</span> Qt(i).get(s).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>o?<span class="hljs-function">(<span class="hljs-params">z(o.userId===<span class="hljs-keyword">this</span>.userId</span>),<span class="hljs-params">Ii</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,o</span>)):<span class="hljs-params">null</span>)}<span class="hljs-params">Xt</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Jt</span>[<span class="hljs-params">s</span>]?<span class="hljs-params">R</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Jt[s]</span>):<span class="hljs-params">this</span>.<span class="hljs-params">lookupMutationBatch</span>(<span class="hljs-params">i,s</span>).<span class="hljs-params">next</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">if</span>(o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">keys</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Jt</span>[<span class="hljs-params">s</span>]=<span class="hljs-params">a</span>,<span class="hljs-params">a</span>}<span class="hljs-params">return</span> <span class="hljs-params">null</span>})}<span class="hljs-params">getNextMutationBatchAfterBatchId</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>+1,<span class="hljs-params">a</span>=<span class="hljs-params">IDBKeyRange</span>.<span class="hljs-params">lowerBound</span>(<span class="hljs-params">[<span class="hljs-keyword">this</span>.userId,o]</span>);<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">null</span>;<span class="hljs-params">return</span> <span class="hljs-params">Qt</span>(<span class="hljs-params">i</span>).<span class="hljs-params">Kt</span>(<span class="hljs-params">{index:se.userMutationsIndex,range:a},(u,h,f</span>)=&gt;</span>{h.userId===<span class="hljs-keyword">this</span>.userId&amp;&amp;<span class="hljs-function">(<span class="hljs-params">z(h.batchId&gt;=o</span>),<span class="hljs-params">c</span>=<span class="hljs-params">Ii</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,h</span>)),<span class="hljs-params">f</span>.<span class="hljs-params">done</span><span class="hljs-params">()</span>}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>c)}getHighestUnacknowledgedBatchId(i){<span class="hljs-keyword">const</span> s=IDBKeyRange.upperBound([<span class="hljs-keyword">this</span>.userId,<span class="hljs-built_in">Number</span>.POSITIVE_INFINITY]);<span class="hljs-keyword">let</span> o=<span class="hljs-number">-1</span>;<span class="hljs-keyword">return</span> Qt(i).Kt({<span class="hljs-attr">index</span>:se.userMutationsIndex,<span class="hljs-attr">range</span>:s,<span class="hljs-attr">reverse</span>:!<span class="hljs-number">0</span>},(a,c,u)=&gt;{o=c.batchId,u.done()}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>o)}getAllMutationBatches(i){<span class="hljs-keyword">const</span> s=IDBKeyRange.bound([<span class="hljs-keyword">this</span>.userId,<span class="hljs-number">-1</span>],[<span class="hljs-keyword">this</span>.userId,<span class="hljs-built_in">Number</span>.POSITIVE_INFINITY]);<span class="hljs-keyword">return</span> Qt(i).Lt(se.userMutationsIndex,s).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>o.map(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>Ii(<span class="hljs-keyword">this</span>.N,a)))}getAllMutationBatchesAffectingDocumentKey(i,s){<span class="hljs-keyword">const</span> o=ze.prefixForPath(<span class="hljs-keyword">this</span>.userId,s.path),a=IDBKeyRange.lowerBound(o),c=[];<span class="hljs-keyword">return</span> Si(i).Kt({<span class="hljs-attr">range</span>:a},(u,h,f)=&gt;{<span class="hljs-keyword">const</span>[v,w,T]=u,S=At(w);<span class="hljs-keyword">if</span>(v===<span class="hljs-keyword">this</span>.userId&amp;&amp;s.path.isEqual(S))<span class="hljs-keyword">return</span> Qt(i).get(T).next(<span class="hljs-function"><span class="hljs-params">C</span>=&gt;</span>{<span class="hljs-keyword">if</span>(!C)<span class="hljs-keyword">throw</span> V();z(C.userId===<span class="hljs-keyword">this</span>.userId),c.push(Ii(<span class="hljs-keyword">this</span>.N,C))});f.done()}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>c)}getAllMutationBatchesAffectingDocumentKeys(i,s){<span class="hljs-keyword">let</span> o=<span class="hljs-keyword">new</span> ue($);<span class="hljs-keyword">const</span> a=[];<span class="hljs-keyword">return</span> s.forEach(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{<span class="hljs-keyword">const</span> u=ze.prefixForPath(<span class="hljs-keyword">this</span>.userId,c.path),h=IDBKeyRange.lowerBound(u),f=Si(i).Kt({<span class="hljs-attr">range</span>:h},(v,w,T)=&gt;{<span class="hljs-keyword">const</span>[S,C,P]=v,B=At(C);S===<span class="hljs-keyword">this</span>.userId&amp;&amp;c.path.isEqual(B)?o=o.add(P):T.done()});a.push(f)}),R.waitFor(a).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.Zt(i,o))}getAllMutationBatchesAffectingQuery(i,s){<span class="hljs-keyword">const</span> o=s.path,a=o.length+<span class="hljs-number">1</span>,c=ze.prefixForPath(<span class="hljs-keyword">this</span>.userId,o),u=IDBKeyRange.lowerBound(c);<span class="hljs-keyword">let</span> h=<span class="hljs-keyword">new</span> ue($);<span class="hljs-keyword">return</span> Si(i).Kt({<span class="hljs-attr">range</span>:u},(f,v,w)=&gt;{<span class="hljs-keyword">const</span>[T,S,C]=f,P=At(S);T===<span class="hljs-keyword">this</span>.userId&amp;&amp;o.isPrefixOf(P)?P.length===a&amp;&amp;<span class="hljs-function">(<span class="hljs-params">h=h.add(C</span>)):<span class="hljs-params">w</span>.<span class="hljs-params">done</span><span class="hljs-params">()</span>}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">this</span>.Zt(i,h))}Zt(i,s){<span class="hljs-keyword">const</span> o=[],a=[];<span class="hljs-keyword">return</span> s.forEach(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{a.push(Qt(i).get(c).next(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===u)<span class="hljs-keyword">throw</span> V();z(u.userId===<span class="hljs-keyword">this</span>.userId),o.push(Ii(<span class="hljs-keyword">this</span>.N,u))}))}),R.waitFor(a).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>o)}removeMutationBatch(i,s){<span class="hljs-keyword">return</span> ph(i.Qt,<span class="hljs-keyword">this</span>.userId,s).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">i.addOnCommittedListener((</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.te(s.batchId)}),R.forEach(o,a=&gt;<span class="hljs-keyword">this</span>.referenceDelegate.markPotentiallyOrphaned(i,a))))}te(i){<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.Jt[i]}performConsistencyCheck(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.checkEmpty(i).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">return</span> R.resolve();<span class="hljs-keyword">const</span> o=IDBKeyRange.lowerBound(ze.prefixForUser(<span class="hljs-keyword">this</span>.userId)),a=[];<span class="hljs-keyword">return</span> Si(i).Kt({<span class="hljs-attr">range</span>:o},(c,u,h)=&gt;{<span class="hljs-keyword">if</span>(c[<span class="hljs-number">0</span>]===<span class="hljs-keyword">this</span>.userId){<span class="hljs-keyword">const</span> f=At(c[<span class="hljs-number">1</span>]);a.push(f)}<span class="hljs-keyword">else</span> h.done()}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{z(<span class="hljs-number">0</span>===a.length)})})}containsKey(i,s){<span class="hljs-keyword">return</span> mh(i,<span class="hljs-keyword">this</span>.userId,s)}ee(i){<span class="hljs-keyword">return</span> gh(i).get(<span class="hljs-keyword">this</span>.userId).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>s||<span class="hljs-keyword">new</span> $t(<span class="hljs-keyword">this</span>.userId,<span class="hljs-number">-1</span>,<span class="hljs-string">""</span>))}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mh</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">const</span> o=ze.prefixForPath(i,s.path),a=o[<span class="hljs-number">1</span>],c=IDBKeyRange.lowerBound(o);<span class="hljs-keyword">let</span> u=!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> Si(r).Kt({<span class="hljs-attr">range</span>:c,<span class="hljs-attr">qt</span>:!<span class="hljs-number">0</span>},(h,f,v)=&gt;{<span class="hljs-keyword">const</span>[w,T,S]=h;w===i&amp;&amp;T===a&amp;&amp;<span class="hljs-function">(<span class="hljs-params">u=!<span class="hljs-number">0</span></span>),<span class="hljs-params">v</span>.<span class="hljs-params">done</span><span class="hljs-params">()</span>}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>u)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Qt</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,se.store)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Si</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,ze.store)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gh</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,$t.store)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">An</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.ne=i}next(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ne+=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.ne}<span class="hljs-keyword">static</span> se(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> An(<span class="hljs-number">0</span>)}<span class="hljs-keyword">static</span> ie(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> An(<span class="hljs-number">-1</span>)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sp</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.referenceDelegate=i,<span class="hljs-keyword">this</span>.N=s}allocateTargetId(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.re(i).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">const</span> o=<span class="hljs-keyword">new</span> An(s.highestTargetId);<span class="hljs-keyword">return</span> s.highestTargetId=o.next(),<span class="hljs-keyword">this</span>.oe(i,s).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>s.highestTargetId)})}getLastRemoteSnapshotVersion(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.re(i).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>H.fromTimestamp(<span class="hljs-keyword">new</span> Re(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.re(i).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>s.highestListenSequenceNumber)}setTargetsMetadata(i,s,o){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.re(i).next(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">a.highestListenSequenceNumber=s,o&amp;&amp;(a.lastRemoteSnapshotVersion=o.toTimestamp(</span>)),<span class="hljs-params">s</span>&gt;<span class="hljs-params">a</span>.<span class="hljs-params">highestListenSequenceNumber</span>&amp;&amp;(<span class="hljs-params">a.highestListenSequenceNumber=s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">oe</span>(<span class="hljs-params">i,a</span>)))}<span class="hljs-params">addTargetData</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ae</span>(<span class="hljs-params">i,s</span>).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">this</span>.re(i).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">o.targetCount+=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.ce(s,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">oe</span>(<span class="hljs-params">i,o</span>))))}<span class="hljs-params">updateTargetData</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ae</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">removeTargetData</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">removeMatchingKeysForTargetId</span>(<span class="hljs-params">i,s.targetId</span>).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>xi(i).delete(s.targetId)).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.re(i)).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">z(o.targetCount&gt;<span class="hljs-number">0</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">targetCount</span>-=1,<span class="hljs-params">this</span>.<span class="hljs-params">oe</span>(<span class="hljs-params">i,o</span>)))}<span class="hljs-params">removeTargets</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">let</span> <span class="hljs-params">a</span>=0;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">xi</span>(<span class="hljs-params">i</span>).<span class="hljs-params">Kt</span>(<span class="hljs-params">(u,h</span>)=&gt;</span>{<span class="hljs-keyword">const</span> f=Gs(h);f.sequenceNumber&lt;=s&amp;&amp;<span class="hljs-literal">null</span>===o.get(f.targetId)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">a++,c.push(<span class="hljs-keyword">this</span>.removeTargetData(i,f</span>)))}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>R.waitFor(c)).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>a)}forEachTarget(i,s){<span class="hljs-keyword">return</span> xi(i).Kt(<span class="hljs-function">(<span class="hljs-params">o,a</span>)=&gt;</span>{<span class="hljs-keyword">const</span> c=Gs(a);s(c)})}re(i){<span class="hljs-keyword">return</span> yh(i).get(st.key).next(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">z(<span class="hljs-literal">null</span>!==s</span>),<span class="hljs-params">s</span>))}<span class="hljs-params">oe</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">yh</span>(<span class="hljs-params">i</span>).<span class="hljs-params">put</span>(<span class="hljs-params">st.key,s</span>)}<span class="hljs-params">ae</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">xi</span>(<span class="hljs-params">i</span>).<span class="hljs-params">put</span>(<span class="hljs-params">uh(<span class="hljs-keyword">this</span>.N,s</span>))}<span class="hljs-params">ce</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>=!1;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">targetId</span>&gt;<span class="hljs-params">s</span>.<span class="hljs-params">highestTargetId</span>&amp;&amp;(<span class="hljs-params">s.highestTargetId=i.targetId,o=!<span class="hljs-number">0</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">sequenceNumber</span>&gt;<span class="hljs-params">s</span>.<span class="hljs-params">highestListenSequenceNumber</span>&amp;&amp;(<span class="hljs-params">s.highestListenSequenceNumber=i.sequenceNumber,o=!<span class="hljs-number">0</span></span>),<span class="hljs-params">o</span>}<span class="hljs-params">getTargetCount</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">re</span>(<span class="hljs-params">i</span>).<span class="hljs-params">next</span>(<span class="hljs-params">s=&gt;s.targetCount</span>)}<span class="hljs-params">getTargetData</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">As</span>(<span class="hljs-params">s</span>),<span class="hljs-params">a</span>=<span class="hljs-params">IDBKeyRange</span>.<span class="hljs-params">bound</span>(<span class="hljs-params">[o,<span class="hljs-built_in">Number</span>.NEGATIVE_INFINITY],[o,<span class="hljs-built_in">Number</span>.POSITIVE_INFINITY]</span>);<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">null</span>;<span class="hljs-params">return</span> <span class="hljs-params">xi</span>(<span class="hljs-params">i</span>).<span class="hljs-params">Kt</span>(<span class="hljs-params">{range:a,index:Ye.queryTargetsIndexName},(u,h,f</span>)=&gt;</span>{<span class="hljs-keyword">const</span> v=Gs(h);eo(s,v.target)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">c=v,f.done(</span>))}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>c)}addMatchingKeys(i,s,o){<span class="hljs-keyword">const</span> a=[],c=Yt(i);<span class="hljs-keyword">return</span> s.forEach(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{<span class="hljs-keyword">const</span> h=dt(u.path);a.push(c.put(<span class="hljs-keyword">new</span> Ue(o,h))),a.push(<span class="hljs-keyword">this</span>.referenceDelegate.addReference(i,o,u))}),R.waitFor(a)}removeMatchingKeys(i,s,o){<span class="hljs-keyword">const</span> a=Yt(i);<span class="hljs-keyword">return</span> R.forEach(s,c=&gt;{<span class="hljs-keyword">const</span> u=dt(c.path);<span class="hljs-keyword">return</span> R.waitFor([a.delete([o,u]),<span class="hljs-keyword">this</span>.referenceDelegate.removeReference(i,o,c)])})}removeMatchingKeysForTargetId(i,s){<span class="hljs-keyword">const</span> o=Yt(i),a=IDBKeyRange.bound([s],[s+<span class="hljs-number">1</span>],!<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>);<span class="hljs-keyword">return</span> o.delete(a)}getMatchingKeysForTargetId(i,s){<span class="hljs-keyword">const</span> o=IDBKeyRange.bound([s],[s+<span class="hljs-number">1</span>],!<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>),a=Yt(i);<span class="hljs-keyword">let</span> c=te();<span class="hljs-keyword">return</span> a.Kt({<span class="hljs-attr">range</span>:o,<span class="hljs-attr">qt</span>:!<span class="hljs-number">0</span>},(u,h,f)=&gt;{<span class="hljs-keyword">const</span> v=At(u[<span class="hljs-number">1</span>]),w=<span class="hljs-keyword">new</span> U(v);c=c.add(w)}).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>c)}containsKey(i,s){<span class="hljs-keyword">const</span> o=dt(s.path),a=IDBKeyRange.bound([o],[nl(o)],!<span class="hljs-number">1</span>,!<span class="hljs-number">0</span>);<span class="hljs-keyword">let</span> c=<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span> Yt(i).Kt({<span class="hljs-attr">index</span>:Ue.documentTargetsIndex,<span class="hljs-attr">qt</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">range</span>:a},([u,h],f,v)=&gt;{<span class="hljs-number">0</span>!==u&amp;&amp;<span class="hljs-function">(<span class="hljs-params">c++,v.done(</span>))}).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>c&gt;<span class="hljs-number">0</span>)}Et(i,s){<span class="hljs-keyword">return</span> xi(i).get(s).next(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>o?Gs(o):<span class="hljs-literal">null</span>)}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xi</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,Ye.store)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">yh</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,st.store)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Yt</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> We(r,Ue.store)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">kn</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> Pa.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Pa</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Pa=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.code!==I.FAILED_PRECONDITION||r.message!==nh</span>)<span class="hljs-params">throw</span> <span class="hljs-params">r</span>;<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"LocalStore"</span>,<span class="hljs-string">"Unexpectedly lost primary lease"</span></span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">_h</span>(<span class="hljs-params">[r,i],[s,o]</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">$</span>(<span class="hljs-params">r,s</span>);<span class="hljs-params">return</span> 0===<span class="hljs-params">a</span>?<span class="hljs-params">$</span>(<span class="hljs-params">i,o</span>):<span class="hljs-params">a</span>}<span class="hljs-params">class</span> <span class="hljs-params">xp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ue</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>=<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">_h</span>),<span class="hljs-params">this</span>.<span class="hljs-params">he</span>=0}<span class="hljs-params">le</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>++<span class="hljs-params">this</span>.<span class="hljs-params">he</span>}<span class="hljs-params">fe</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=[<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">le</span><span class="hljs-params">()</span>];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.buffer.size&lt;<span class="hljs-keyword">this</span>.ue</span>)<span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>=<span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">add</span>(<span class="hljs-params">s</span>);<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">last</span><span class="hljs-params">()</span>;<span class="hljs-params">_h</span>(<span class="hljs-params">s,o</span>)&lt;0&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.buffer=<span class="hljs-keyword">this</span>.buffer.<span class="hljs-keyword">delete</span>(o</span>).<span class="hljs-params">add</span>(<span class="hljs-params">s</span>))}}<span class="hljs-params">get</span> <span class="hljs-params">maxValue</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">last</span><span class="hljs-params">()</span>[0]}}<span class="hljs-params">class</span> <span class="hljs-params">Dp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">garbageCollector</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">de</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">we</span>=<span class="hljs-params">null</span>}<span class="hljs-params">start</span>(<span class="hljs-params">i</span>){-1!==<span class="hljs-params">this</span>.<span class="hljs-params">garbageCollector</span>.<span class="hljs-params">params</span>.<span class="hljs-params">cacheSizeCollectionThreshold</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_e</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">stop</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">we</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.we.cancel(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">we</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">get</span> <span class="hljs-params">started</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">we</span>}<span class="hljs-params">_e</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">de</span>?3<span class="hljs-params">e5</span>:6<span class="hljs-params">e4</span>;<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"LruGarbageCollector"</span>,<span class="hljs-string">`Garbage collection scheduled in <span class="hljs-subst">${o}</span>ms`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">we</span>=<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAfterDelay</span>(<span class="hljs-params"><span class="hljs-string">"lru_garbage_collection"</span>,o,(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">s</span>.<span class="hljs-params">we</span>=<span class="hljs-params">null</span>,<span class="hljs-params">s</span>.<span class="hljs-params">de</span>=!0;<span class="hljs-params">try</span>{<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">collectGarbage</span>(<span class="hljs-params">s.garbageCollector</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">Cn</span>(<span class="hljs-params">a</span>)?<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"LruGarbageCollector"</span>,<span class="hljs-string">"Ignoring IndexedDB error during garbage collection: "</span>,a</span>):<span class="hljs-params">yield</span> <span class="hljs-params">kn</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">yield</span> <span class="hljs-params">s</span>.<span class="hljs-params">_e</span>(<span class="hljs-params">i</span>)}))}}<span class="hljs-params">class</span> <span class="hljs-params">Cp</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">me</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">params</span>=<span class="hljs-params">s</span>}<span class="hljs-params">calculateTargetCount</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">me</span>.<span class="hljs-params">ge</span>(<span class="hljs-params">i</span>).<span class="hljs-params">next</span>(<span class="hljs-params">o=&gt;<span class="hljs-built_in">Math</span>.floor(s<span class="hljs-regexp">/100*o))}nthSequenceNumber(i,s){if(0===s)return R.resolve(nt.T);const o=new xp(s);return this.me.forEachTarget(i,a=&gt;o.fe(a.sequenceNumber)).next(()=&gt;this.me.ye(i,a=&gt;o.fe(a))).next(()=&gt;o.maxValue)}removeTargets(i,s,o){return this.me.removeTargets(i,s,o)}removeOrphanedDocuments(i,s){return this.me.removeOrphanedDocuments(i,s)}collect(i,s){return-1===this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(fh)):this.getCacheSize(i).next(o=&gt;o&lt;this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fh):this.pe(i,s))}getCacheSize(i){return this.me.getCacheSize(i)}pe(i,s){let o,a,c,u,h,f,v;const w=Date.now();return this.calculateTargetCount(i,this.params.percentileToCollect).next(T=&gt;(T&gt;this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,u=Date.now(),this.nthSequenceNumber(i,a))).next(T=&gt;(o=T,h=Date.now(),this.removeTargets(i,o,s))).next(T=&gt;(c=T,f=Date.now(),this.removeOrphanedDocuments(i,o))).next(T=&gt;(v=Date.now(),ca()&lt;=Et.in.DEBUG&amp;&amp;k("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-w}ms\n\tDetermined least recently used ${a} in `+(h-u)+`ms\n\tRemoved ${c} targets in `+(f-h)+`ms\n\tRemoved ${T} documents in `+(v-f)+`ms\nTotal Duration: ${v-w}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:T})))}}class Rp{constructor(i,s){this.db=i,this.garbageCollector=new Cp(this,s)}ge(i){const s=this.Ee(i);return this.db.getTargetCache().getTargetCount(i).next(o=&gt;s.next(a=&gt;o+a))}Ee(i){let s=0;return this.ye(i,o=&gt;{s++}).next(()=&gt;s)}forEachTarget(i,s){return this.db.getTargetCache().forEachTarget(i,s)}ye(i,s){return this.Te(i,(o,a)=&gt;s(a))}addReference(i,s,o){return mo(i,o)}removeReference(i,s,o){return mo(i,o)}removeTargets(i,s,o){return this.db.getTargetCache().removeTargets(i,s,o)}markPotentiallyOrphaned(i,s){return mo(i,s)}Ie(i,s){return function(o,a){let c=!1;return gh(o).jt(u=&gt;mh(o,u,a).next(h=&gt;(h&amp;&amp;(c=!0),R.resolve(!h)))).next(()=&gt;c)}(i,s)}removeOrphanedDocuments(i,s){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Te(i,(u,h)=&gt;{if(h&lt;=s){const f=this.Ie(i,u).next(v=&gt;{if(!v)return c++,o.getEntry(i,u).next(()=&gt;(o.removeEntry(u),Yt(i).delete([0,dt(u.path)])))});a.push(f)}}).next(()=&gt;R.waitFor(a)).next(()=&gt;o.apply(i)).next(()=&gt;c)}removeTarget(i,s){const o=s.withSequenceNumber(i.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(i,o)}updateLimboDocument(i,s){return mo(i,s)}Te(i,s){const o=Yt(i);let a,c=nt.T;return o.Kt({index:Ue.documentTargetsIndex},([u,h],{path:f,sequenceNumber:v})=&gt;{0===u?(c!==nt.T&amp;&amp;s(new U(At(a)),c),c=v,a=f):c=nt.T}).next(()=&gt;{c!==nt.T&amp;&amp;s(new U(At(a)),c)})}getCacheSize(i){return this.db.getRemoteDocumentCache().getSize(i)}}function mo(r,i){return Yt(r).put((o=r.currentSequenceNumber,new Ue(0,dt(i.path),o)));var o}class Di{constructor(i,s){this.mapKeyFn=i,this.equalsFn=s,this.inner={}}get(i){const s=this.mapKeyFn(i),o=this.inner[s];if(void 0!==o)for(const[a,c]of o)if(this.equalsFn(a,i))return c}has(i){return void 0!==this.get(i)}set(i,s){const o=this.mapKeyFn(i),a=this.inner[o];if(void 0!==a){for(let c=0;c&lt;a.length;c++)if(this.equalsFn(a[c][0],i))return void(a[c]=[i,s]);a.push([i,s])}else this.inner[o]=[[i,s]]}delete(i){const s=this.mapKeyFn(i),o=this.inner[s];if(void 0===o)return!1;for(let a=0;a&lt;o.length;a++)if(this.equalsFn(o[a][0],i))return 1===o.length?delete this.inner[s]:o.splice(a,1),!0;return!1}forEach(i){Tn(this.inner,(s,o)=&gt;{for(const[a,c]of o)i(a,c)})}isEmpty(){return sl(this.inner)}}class vh{constructor(){this.changes=new Di(i=&gt;i.toString(),(i,s)=&gt;i.isEqual(s)),this.changesApplied=!1}getReadTime(i){const s=this.changes.get(i);return s?s.readTime:H.min()}addEntry(i,s){this.assertNotApplied(),this.changes.set(i.key,{document:i,readTime:s})}removeEntry(i,s=null){this.assertNotApplied(),this.changes.set(i,{document:ae.newInvalidDocument(i),readTime:s})}getEntry(i,s){this.assertNotApplied();const o=this.changes.get(s);return void 0!==o?R.resolve(o.document):this.getFromCache(i,s)}getEntries(i,s){return this.getAllFromCache(i,s)}apply(i){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(i)}assertNotApplied(){}}class Ap{constructor(i,s){this.N=i,this.Ht=s}addEntry(i,s,o){return Wt(i).put(go(s),o)}removeEntry(i,s){const o=Wt(i),a=go(s);return o.delete(a)}updateMetadata(i,s){return this.getMetadata(i).next(o=&gt;(o.byteSize+=s,this.Ae(i,o)))}getEntry(i,s){return Wt(i).get(go(s)).next(o=&gt;this.Re(s,o))}Pe(i,s){return Wt(i).get(go(s)).next(o=&gt;({document:this.Re(s,o),size:po(o)}))}getEntries(i,s){let o=ct();return this.be(i,s,(a,c)=&gt;{const u=this.Re(a,c);o=o.insert(a,u)}).next(()=&gt;o)}ve(i,s){let o=ct(),a=new Ie(U.comparator);return this.be(i,s,(c,u)=&gt;{const h=this.Re(c,u);o=o.insert(c,h),a=a.insert(c,po(u))}).next(()=&gt;({documents:o,Ve:a}))}be(i,s,o){if(s.isEmpty())return R.resolve();const a=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),c=s.getIterator();let u=c.getNext();return Wt(i).Kt({range:a},(h,f,v)=&gt;{const w=U.fromSegments(h);for(;u&amp;&amp;U.comparator(u,w)&lt;0;)o(u,null),u=c.getNext();u&amp;&amp;u.isEqual(w)&amp;&amp;(o(u,f),u=c.hasNext()?c.getNext():null),u?v.Mt(u.path.toArray()):v.done()}).next(()=&gt;{for(;u;)o(u,null),u=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(i,s,o){let a=ct();const c=s.path.length+1,u={};if(o.isEqual(H.min())){const h=s.path.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=s.path.toArray(),f=Ca(o);u.range=IDBKeyRange.lowerBound([h,f],!0),u.index=le.collectionReadTimeIndex}return Wt(i).Kt(u,(h,f,v)=&gt;{if(h.length!==c)return;const w=Da(this.N,f);s.path.isPrefixOf(w.key.path)?Ns(s,w)&amp;&amp;(a=a.insert(w.key,w)):v.done()}).next(()=&gt;a)}newChangeBuffer(i){return new kp(this,!!i&amp;&amp;i.trackRemovals)}getSize(i){return this.getMetadata(i).next(s=&gt;s.byteSize)}getMetadata(i){return wh(i).get(wt.key).next(s=&gt;(z(!!s),s))}Ae(i,s){return wh(i).put(wt.key,s)}Re(i,s){if(s){const o=Da(this.N,s);if(!o.isNoDocument()||!o.version.isEqual(H.min()))return o}return ae.newInvalidDocument(i)}}class kp extends vh{constructor(i,s){super(),this.Se=i,this.trackRemovals=s,this.De=new Di(o=&gt;o.toString(),(o,a)=&gt;o.isEqual(a))}applyChanges(i){const s=[];let o=0,a=new ue((c,u)=&gt;$(c.canonicalString(),u.canonicalString()));return this.changes.forEach((c,u)=&gt;{const h=this.De.get(c);if(u.document.isValidDocument()){const f=ah(this.Se.N,u.document,this.getReadTime(c));a=a.add(c.path.popLast()),o+=po(f)-h,s.push(this.Se.addEntry(i,c,f))}else if(o-=h,this.trackRemovals){const f=ah(this.Se.N,ae.newNoDocument(c,H.min()),this.getReadTime(c));s.push(this.Se.addEntry(i,c,f))}else s.push(this.Se.removeEntry(i,c))}),a.forEach(c=&gt;{s.push(this.Se.Ht.addToCollectionParentIndex(i,c))}),s.push(this.Se.updateMetadata(i,o)),R.waitFor(s)}getFromCache(i,s){return this.Se.Pe(i,s).next(o=&gt;(this.De.set(s,o.size),o.document))}getAllFromCache(i,s){return this.Se.ve(i,s).next(({documents:o,Ve:a})=&gt;(a.forEach((c,u)=&gt;{this.De.set(c,u)}),o))}}function wh(r){return We(r,wt.store)}function Wt(r){return We(r,le.store)}function go(r){return r.path.toArray()}class Pp{constructor(i){this.N=i}Ct(i,s,o,a){z(o&lt;a&amp;&amp;o&gt;=0&amp;&amp;a&lt;=11);const c=new fo("createOrUpgrade",s);var h;o&lt;1&amp;&amp;a&gt;=1&amp;&amp;(i.createObjectStore(it.store),(h=i).createObjectStore($t.store,{keyPath:$t.keyPath}),h.createObjectStore(se.store,{keyPath:se.keyPath,autoIncrement:!0}).createIndex(se.userMutationsIndex,se.userMutationsKeyPath,{unique:!0}),h.createObjectStore(ze.store),bh(i),function(h){h.createObjectStore(le.store)}(i));let u=R.resolve();return o&lt;3&amp;&amp;a&gt;=3&amp;&amp;(0!==o&amp;&amp;(function(h){h.deleteObjectStore(Ue.store),h.deleteObjectStore(Ye.store),h.deleteObjectStore(st.store)}(i),bh(i)),u=u.next(()=&gt;function(h){const f=h.store(st.store),v=new st(0,0,H.min().toTimestamp(),0);return f.put(st.key,v)}(c))),o&lt;4&amp;&amp;a&gt;=4&amp;&amp;(0!==o&amp;&amp;(u=u.next(()=&gt;function(h,f){return f.store(se.store).Lt().next(v=&gt;{h.deleteObjectStore(se.store),h.createObjectStore(se.store,{keyPath:se.keyPath,autoIncrement:!0}).createIndex(se.userMutationsIndex,se.userMutationsKeyPath,{unique:!0});const w=f.store(se.store),T=v.map(S=&gt;w.put(S));return R.waitFor(T)})}(i,c))),u=u.next(()=&gt;{!function(h){h.createObjectStore(kt.store,{keyPath:kt.keyPath})}(i)})),o&lt;5&amp;&amp;a&gt;=5&amp;&amp;(u=u.next(()=&gt;this.Ce(c))),o&lt;6&amp;&amp;a&gt;=6&amp;&amp;(u=u.next(()=&gt;(function(h){h.createObjectStore(wt.store)}(i),this.Ne(c)))),o&lt;7&amp;&amp;a&gt;=7&amp;&amp;(u=u.next(()=&gt;this.xe(c))),o&lt;8&amp;&amp;a&gt;=8&amp;&amp;(u=u.next(()=&gt;this.ke(i,c))),o&lt;9&amp;&amp;a&gt;=9&amp;&amp;(u=u.next(()=&gt;{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&amp;&amp;h.deleteObjectStore("remoteDocumentChanges")})(i),function(h){const f=h.objectStore(le.store);f.createIndex(le.readTimeIndex,le.readTimeIndexPath,{unique:!1}),f.createIndex(le.collectionReadTimeIndex,le.collectionReadTimeIndexPath,{unique:!1})}(s)})),o&lt;10&amp;&amp;a&gt;=10&amp;&amp;(u=u.next(()=&gt;this.$e(c))),o&lt;11&amp;&amp;a&gt;=11&amp;&amp;(u=u.next(()=&gt;{(function(h){h.createObjectStore(wi.store,{keyPath:wi.keyPath})})(i),function(h){h.createObjectStore(bi.store,{keyPath:bi.keyPath})}(i)})),u}Ne(i){let s=0;return i.store(le.store).Kt((o,a)=&gt;{s+=po(a)}).next(()=&gt;{const o=new wt(s);return i.store(wt.store).put(wt.key,o)})}Ce(i){const s=i.store($t.store),o=i.store(se.store);return s.Lt().next(a=&gt;R.forEach(a,c=&gt;{const u=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.Lt(se.userMutationsIndex,u).next(h=&gt;R.forEach(h,f=&gt;{z(f.userId===c.userId);const v=Ii(this.N,f);return ph(i,c.userId,v).next(()=&gt;{})}))}))}xe(i){const s=i.store(Ue.store),o=i.store(le.store);return i.store(st.store).get(st.key).next(a=&gt;{const c=[];return o.Kt((u,h)=&gt;{const f=new X(u),v=[0,dt(f)];c.push(s.get(v).next(w=&gt;w?R.resolve():s.put(new Ue(0,dt(f),a.highestListenSequenceNumber))))}).next(()=&gt;R.waitFor(c))})}ke(i,s){i.createObjectStore(Dn.store,{keyPath:Dn.keyPath});const o=s.store(Dn.store),a=new Aa,c=u=&gt;{if(a.add(u)){const h=u.lastSegment(),f=u.popLast();return o.put({collectionId:h,parent:dt(f)})}};return s.store(le.store).Kt({qt:!0},(u,h)=&gt;{const f=new X(u);return c(f.popLast())}).next(()=&gt;s.store(ze.store).Kt({qt:!0},([u,h,f],v)=&gt;{const w=At(h);return c(w.popLast())}))}$e(i){const s=i.store(Ye.store);return s.Kt((o,a)=&gt;{const c=Gs(a),u=uh(this.N,c);return s.put(u)})}}function bh(r){r.createObjectStore(Ue.store,{keyPath:Ue.keyPath}).createIndex(Ue.documentTargetsIndex,Ue.documentTargetsKeyPath,{unique:!0}),r.createObjectStore(Ye.store,{keyPath:Ye.keyPath}).createIndex(Ye.queryTargetsIndexName,Ye.queryTargetsKeyPath,{unique:!0}),r.createObjectStore(st.store)}const Na="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class La{constructor(i,s,o,a,c,u,h,f,v,w){if(this.allowTabSynchronization=i,this.persistenceKey=s,this.clientId=o,this.Oe=c,this.window=u,this.document=h,this.Fe=v,this.Me=w,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=T=&gt;Promise.resolve(),!La.Pt())throw new A(I.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rp(this,a),this.We=s+"main",this.N=new oh(f),this.Ge=new ft(this.We,11,new Pp(this.N)),this.ze=new Sp(this.referenceDelegate,this.N),this.Ht=new Ip,this.He=new Ap(this.N,this.Ht),this.Je=new Tp,this.window&amp;&amp;this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===w&amp;&amp;ye("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=&gt;{if(!this.isPrimary&amp;&amp;!this.allowTabSynchronization)throw new A(I.FAILED_PRECONDITION,Na);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",i=&gt;this.ze.getHighestSequenceNumber(i))}).then(i=&gt;{this.Le=new nt(i,this.Fe)}).then(()=&gt;{this.Be=!0}).catch(i=&gt;(this.Ge&amp;&amp;this.Ge.close(),Promise.reject(i)))}nn(i){var s=this;return this.Qe=function(){var o=(0,D.Z)(function*(a){if(s.started)return i(a)});return function(a){return o.apply(this,arguments)}}(),i(this.isPrimary)}setDatabaseDeletedListener(i){this.Ge.xt(function(){var s=(0,D.Z)(function*(o){null===o.newVersion&amp;&amp;(yield i())});return function(o){return s.apply(this,arguments)}}())}setNetworkEnabled(i){var s=this;this.networkEnabled!==i&amp;&amp;(this.networkEnabled=i,this.Oe.enqueueAndForget((0,D.Z)(function*(){s.started&amp;&amp;(yield s.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",i=&gt;yo(i).put(new kt(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=&gt;{if(this.isPrimary)return this.sn(i).next(s=&gt;{s||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=&gt;this.Qe(!1)))})}).next(()=&gt;this.rn(i)).next(s=&gt;this.isPrimary&amp;&amp;!s?this.on(i).next(()=&gt;!1):!!s&amp;&amp;this.an(i).next(()=&gt;!0))).catch(i=&gt;{if(Cn(i))return k("IndexedDbPersistence","Failed to extend owner lease: ",i),this.isPrimary;if(!this.allowTabSynchronization)throw i;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(i=&gt;{this.isPrimary!==i&amp;&amp;this.Oe.enqueueRetryable(()=&gt;this.Qe(i)),this.isPrimary=i})}sn(i){return js(i).get(it.key).next(s=&gt;R.resolve(this.cn(s)))}un(i){return yo(i).delete(this.clientId)}hn(){var i=this;return(0,D.Z)(function*(){if(i.isPrimary&amp;&amp;!i.ln(i.je,18e5)){i.je=Date.now();const s=yield i.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=&gt;{const a=We(o,kt.store);return a.Lt().next(c=&gt;{const u=i.fn(c,18e5),h=c.filter(f=&gt;-1===u.indexOf(f));return R.forEach(h,f=&gt;a.delete(f.clientId)).next(()=&gt;h)})}).catch(()=&gt;[]);if(i.Ye)for(const o of s)i.Ye.removeItem(i.dn(o.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=&gt;this.Xe().then(()=&gt;this.hn()).then(()=&gt;this.en()))}cn(i){return!!i&amp;&amp;i.ownerId===this.clientId}rn(i){return this.Me?R.resolve(!0):js(i).get(it.key).next(s=&gt;{if(null!==s&amp;&amp;this.ln(s.leaseTimestampMs,5e3)&amp;&amp;!this.wn(s.ownerId)){if(this.cn(s)&amp;&amp;this.networkEnabled)return!0;if(!this.cn(s)){if(!s.allowTabSynchronization)throw new A(I.FAILED_PRECONDITION,Na);return!1}}return!(!this.networkEnabled||!this.inForeground)||yo(i).Lt().next(o=&gt;void 0===this.fn(o,5e3).find(a=&gt;{if(this.clientId!==a.clientId){const u=!this.inForeground&amp;&amp;a.inForeground,h=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&amp;&amp;a.networkEnabled||u&amp;&amp;h)return!0}return!1}))}).next(s=&gt;(this.isPrimary!==s&amp;&amp;k("IndexedDbPersistence",`Client ${s?"is":"is not"} eligible for a primary lease.`),s))}shutdown(){var i=this;return(0,D.Z)(function*(){i.Be=!1,i._n(),i.Ke&amp;&amp;(i.Ke.cancel(),i.Ke=null),i.mn(),i.gn(),yield i.Ge.runTransaction("shutdown","readwrite",[it.store,kt.store],s=&gt;{const o=new rh(s,nt.T);return i.on(o).next(()=&gt;i.un(o))}),i.Ge.close(),i.yn()})()}fn(i,s){return i.filter(o=&gt;this.ln(o.updateTimeMs,s)&amp;&amp;!this.wn(o.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",i=&gt;yo(i).Lt().next(s=&gt;this.fn(s,18e5).map(o=&gt;o.clientId)))}get started(){return this.Be}getMutationQueue(i){return ka.Yt(i,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(i,s,o){let c;return k("IndexedDbPersistence","Starting transaction:",i),this.Ge.runTransaction(i,"readonly"===s?"readonly":"readwrite",vp,u=&gt;(c=new rh(u,this.Le?this.Le.next():nt.T),"readwrite-primary"===s?this.sn(c).next(h=&gt;!!h||this.rn(c)).next(h=&gt;{if(!h)throw ye(`Failed to obtain primary lease for action '${i}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=&gt;this.Qe(!1)),new A(I.FAILED_PRECONDITION,nh);return o(c)}).next(h=&gt;this.an(c).next(()=&gt;h)):this.En(c).next(()=&gt;o(c)))).then(u=&gt;(c.raiseOnCommittedEvent(),u))}En(i){return js(i).get(it.key).next(s=&gt;{if(null!==s&amp;&amp;this.ln(s.leaseTimestampMs,5e3)&amp;&amp;!this.wn(s.ownerId)&amp;&amp;!this.cn(s)&amp;&amp;!(this.Me||this.allowTabSynchronization&amp;&amp;s.allowTabSynchronization))throw new A(I.FAILED_PRECONDITION,Na)})}an(i){const s=new it(this.clientId,this.allowTabSynchronization,Date.now());return js(i).put(it.key,s)}static Pt(){return ft.Pt()}on(i){const s=js(i);return s.get(it.key).next(o=&gt;this.cn(o)?(k("IndexedDbPersistence","Releasing primary lease."),s.delete(it.key)):R.resolve())}ln(i,s){const o=Date.now();return!(i&lt;o-s||i&gt;o&amp;&amp;(ye(`Detected an update time that is in the future: ${i} &gt; ${o}`),1))}Ze(){null!==this.document&amp;&amp;"function"==typeof this.document.addEventListener&amp;&amp;(this.qe=()=&gt;{this.Oe.enqueueAndForget(()=&gt;(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&amp;&amp;(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var i;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&amp;&amp;(this.Ue=()=&gt;{this._n(),(0,Y.G6)()&amp;&amp;navigator.appVersion.match("Version/</span><span class="hljs-number">14</span><span class="hljs-string">")&amp;&amp;this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=&gt;this.shutdown())},this.window.addEventListener("</span>pagehide<span class="hljs-string">",this.Ue))}gn(){this.Ue&amp;&amp;(this.window.removeEventListener("</span>pagehide<span class="hljs-string">",this.Ue),this.Ue=null)}wn(i){var s;try{const o=null!==(null===(s=this.Ye)||void 0===s?void 0:s.getItem(this.dn(i)));return k("</span>IndexedDbPersistence<span class="hljs-string">",`Client '${i}' ${o?"</span>is<span class="hljs-string">":"</span>is not<span class="hljs-string">"} zombied in LocalStorage`),o}catch(o){return ye("</span>IndexedDbPersistence<span class="hljs-string">","</span>Failed to get zombied client id.<span class="hljs-string">",o),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(i){ye("</span>Failed to set zombie client id.<span class="hljs-string">",i)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(i){}}dn(i){return`firestore_zombie_${this.persistenceKey}_${i}`}}function js(r){return We(r,it.store)}function yo(r){return We(r,kt.store)}function Ma(r,i){let s=r.projectId;return r.isDefaultDatabase||(s+="</span>.<span class="hljs-string">"+r.database),"</span>firestore<span class="hljs-regexp">/"+i+"/</span><span class="hljs-string">"+s+"</span><span class="hljs-regexp">/"}class Np{constructor(i,s){this.progress=i,this.Tn=s}}class Th{constructor(i,s,o){this.He=i,this.In=s,this.Ht=o}An(i,s){return this.In.getAllMutationBatchesAffectingDocumentKey(i,s).next(o=&gt;this.Rn(i,s,o))}Rn(i,s,o){return this.He.getEntry(i,s).next(a=&gt;{for(const c of o)c.applyToLocalView(a);return a})}Pn(i,s){i.forEach((o,a)=&gt;{for(const c of s)c.applyToLocalView(a)})}bn(i,s){return this.He.getEntries(i,s).next(o=&gt;this.vn(i,o).next(()=&gt;o))}vn(i,s){return this.In.getAllMutationBatchesAffectingDocumentKeys(i,s).next(o=&gt;this.Pn(s,o))}getDocumentsMatchingQuery(i,s,o){return U.isDocumentKey((a=s).path)&amp;&amp;null===a.collectionGroup&amp;&amp;0===a.filters.length?this.Vn(i,s.path):ya(s)?this.Sn(i,s,o):this.Dn(i,s,o);var a}Vn(i,s){return this.An(i,new U(s)).next(o=&gt;{let a=ba();return o.isFoundDocument()&amp;&amp;(a=a.insert(o.key,o)),a})}Sn(i,s,o){const a=s.collectionGroup;let c=ba();return this.Ht.getCollectionParents(i,a).next(u=&gt;R.forEach(u,h=&gt;{const f=(v=s,w=h.child(a),new Rt(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,w;return this.Dn(i,f,o).next(v=&gt;{v.forEach((w,T)=&gt;{c=c.insert(w,T)})})}).next(()=&gt;c))}Dn(i,s,o){let a,c;return this.He.getDocumentsMatchingQuery(i,s,o).next(u=&gt;(a=u,this.In.getAllMutationBatchesAffectingQuery(i,s))).next(u=&gt;(c=u,this.Cn(i,c,a).next(h=&gt;{a=h;for(const f of c)for(const v of f.mutations){const w=v.key;let T=a.get(w);null==T&amp;&amp;(T=ae.newInvalidDocument(w),a=a.insert(w,T)),va(v,T,f.localWriteTime),T.isFoundDocument()||(a=a.remove(w))}}))).next(()=&gt;(a.forEach((u,h)=&gt;{Ns(s,h)||(a=a.remove(u))}),a))}Cn(i,s,o){let a=te();for(const u of s)for(const h of u.mutations)h instanceof Kt&amp;&amp;null===o.get(h.key)&amp;&amp;(a=a.add(h.key));let c=o;return this.He.getEntries(i,a).next(u=&gt;(u.forEach((h,f)=&gt;{f.isFoundDocument()&amp;&amp;(c=c.insert(h,f))}),c))}}class Oa{constructor(i,s,o,a){this.targetId=i,this.fromCache=s,this.Nn=o,this.xn=a}static kn(i,s){let o=te(),a=te();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Oa(i,s.fromCache,o,a)}}class Eh{$n(i){this.On=i}getDocumentsMatchingQuery(i,s,o,a){return 0===(c=s).filters.length&amp;&amp;null===c.limit&amp;&amp;null==c.startAt&amp;&amp;null==c.endAt&amp;&amp;(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&amp;&amp;c.explicitOrderBy[0].field.isKeyField())||o.isEqual(H.min())?this.Fn(i,s):this.On.bn(i,a).next(c=&gt;{const u=this.Mn(s,c);return(io(s)||so(s))&amp;&amp;this.Ln(s.limitType,u,a,o)?this.Fn(i,s):(ca()&lt;=Et.in.DEBUG&amp;&amp;k("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_a(s)),this.On.getDocumentsMatchingQuery(i,s,o).next(h=&gt;(u.forEach(f=&gt;{h=h.insert(f.key,f)}),h)))});var c}Mn(i,s){let o=new ue(_l(i));return s.forEach((a,c)=&gt;{Ns(i,c)&amp;&amp;(o=o.add(c))}),o}Ln(i,s,o,a){if(o.size!==s.size)return!0;const c="F"===i?s.last():s.first();return!!c&amp;&amp;(c.hasPendingWrites||c.version.compareTo(a)&gt;0)}Fn(i,s){return ca()&lt;=Et.in.DEBUG&amp;&amp;k("QueryEngine","Using full collection scan to execute query:",_a(s)),this.On.getDocumentsMatchingQuery(i,s,H.min())}}class Lp{constructor(i,s,o,a){this.persistence=i,this.Bn=s,this.N=a,this.Un=new Ie($),this.qn=new Di(c=&gt;As(c),eo),this.Kn=H.min(),this.In=i.getMutationQueue(o),this.jn=i.getRemoteDocumentCache(),this.ze=i.getTargetCache(),this.Qn=new Th(this.jn,this.In,this.persistence.getIndexManager()),this.Je=i.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(i){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=&gt;i.collect(s,this.Un))}}function Ih(r,i,s,o){return new Lp(r,i,s,o)}function Sh(r,i){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,D.Z)(function*(r,i){const s=M(r);let o=s.In,a=s.Qn;const c=yield s.persistence.runTransaction("Handle user change","readonly",u=&gt;{let h;return s.In.getAllMutationBatches(u).next(f=&gt;(h=f,o=s.persistence.getMutationQueue(i),a=new Th(s.jn,o,s.persistence.getIndexManager()),o.getAllMutationBatches(u))).next(f=&gt;{const v=[],w=[];let T=te();for(const S of h){v.push(S.batchId);for(const C of S.mutations)T=T.add(C.key)}for(const S of f){w.push(S.batchId);for(const C of S.mutations)T=T.add(C.key)}return a.bn(u,T).next(S=&gt;({Wn:S,removedBatchIds:v,addedBatchIds:w}))})});return s.In=o,s.Qn=a,s.Bn.$n(s.Qn),c})).apply(this,arguments)}function Mp(r,i){const s=M(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=&gt;{const a=i.batch.keys(),c=s.jn.newChangeBuffer({trackRemovals:!0});return function(u,h,f,v){const w=f.batch,T=w.keys();let S=R.resolve();return T.forEach(C=&gt;{S=S.next(()=&gt;v.getEntry(h,C)).next(P=&gt;{const B=f.docVersions.get(C);z(null!==B),P.version.compareTo(B)&lt;0&amp;&amp;(w.applyToRemoteDocument(P,f),P.isValidDocument()&amp;&amp;v.addEntry(P,f.commitVersion))})}),S.next(()=&gt;u.In.removeMutationBatch(h,w))}(s,o,i,c).next(()=&gt;c.apply(o)).next(()=&gt;s.In.performConsistencyCheck(o)).next(()=&gt;s.Qn.bn(o,a))})}function xh(r){const i=M(r);return i.persistence.runTransaction("Get last remote snapshot version","readonly",s=&gt;i.ze.getLastRemoteSnapshotVersion(s))}function Op(r,i){const s=M(r),o=i.snapshotVersion;let a=s.Un;return s.persistence.runTransaction("Apply remote event","readwrite-primary",c=&gt;{const u=s.jn.newChangeBuffer({trackRemovals:!0});a=s.Un;const h=[];i.targetChanges.forEach((v,w)=&gt;{const T=a.get(w);if(!T)return;h.push(s.ze.removeMatchingKeys(c,v.removedDocuments,w).next(()=&gt;s.ze.addMatchingKeys(c,v.addedDocuments,w)));const S=v.resumeToken;if(S.approximateByteSize()&gt;0){const C=T.withResumeToken(S,o).withSequenceNumber(c.currentSequenceNumber);a=a.insert(w,C),P=T,j=v,z((B=C).resumeToken.approximateByteSize()&gt;0),(0===P.resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()&gt;=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size&gt;0)&amp;&amp;h.push(s.ze.updateTargetData(c,C))}var P,B,j});let f=ct();if(i.documentUpdates.forEach((v,w)=&gt;{i.resolvedLimboDocuments.has(v)&amp;&amp;h.push(s.persistence.referenceDelegate.updateLimboDocument(c,v))}),h.push(Dh(c,u,i.documentUpdates,o,void 0).next(v=&gt;{f=v})),!o.isEqual(H.min())){const v=s.ze.getLastRemoteSnapshotVersion(c).next(w=&gt;s.ze.setTargetsMetadata(c,c.currentSequenceNumber,o));h.push(v)}return R.waitFor(h).next(()=&gt;u.apply(c)).next(()=&gt;s.Qn.vn(c,f)).next(()=&gt;f)}).then(c=&gt;(s.Un=a,c))}function Dh(r,i,s,o,a){let c=te();return s.forEach(u=&gt;c=c.add(u)),i.getEntries(r,c).next(u=&gt;{let h=ct();return s.forEach((f,v)=&gt;{const w=u.get(f),T=(null==a?void 0:a.get(f))||o;v.isNoDocument()&amp;&amp;v.version.isEqual(H.min())?(i.removeEntry(f,T),h=h.insert(f,v)):!w.isValidDocument()||v.version.compareTo(w.version)&gt;0||0===v.version.compareTo(w.version)&amp;&amp;w.hasPendingWrites?(i.addEntry(v,T),h=h.insert(f,v)):k("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",v.version)}),h})}function Fp(r,i){const s=M(r);return s.persistence.runTransaction("Get next mutation batch","readonly",o=&gt;(void 0===i&amp;&amp;(i=-1),s.In.getNextMutationBatchAfterBatchId(o,i)))}function Ci(r,i){const s=M(r);return s.persistence.runTransaction("Allocate target","readwrite",o=&gt;{let a;return s.ze.getTargetData(o,i).next(c=&gt;c?(a=c,R.resolve(a)):s.ze.allocateTargetId(o).next(u=&gt;(a=new Zt(i,u,0,o.currentSequenceNumber),s.ze.addTargetData(o,a).next(()=&gt;a))))}).then(o=&gt;{const a=s.Un.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)&gt;0)&amp;&amp;(s.Un=s.Un.insert(o.targetId,o),s.qn.set(i,o.targetId)),o})}function Ri(r,i,s){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,D.Z)(function*(r,i,s){const o=M(r),a=o.Un.get(i),c=s?"readwrite":"readwrite-primary";try{s||(yield o.persistence.runTransaction("Release target",c,u=&gt;o.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Cn(u))throw u;k("LocalStore",`Failed to update sequence numbers for target ${i}: ${u}`)}o.Un=o.Un.remove(i),o.qn.delete(a.target)})).apply(this,arguments)}function _o(r,i,s){const o=M(r);let a=H.min(),c=te();return o.persistence.runTransaction("Execute query","readonly",u=&gt;function(h,f,v){const w=M(h),T=w.qn.get(v);return void 0!==T?R.resolve(w.Un.get(T)):w.ze.getTargetData(f,v)}(o,u,at(i)).next(h=&gt;{if(h)return a=h.lastLimboFreeSnapshotVersion,o.ze.getMatchingKeysForTargetId(u,h.targetId).next(f=&gt;{c=f})}).next(()=&gt;o.Bn.getDocumentsMatchingQuery(u,i,s?a:H.min(),s?c:te())).next(h=&gt;({documents:h,Gn:c})))}function Ch(r,i){const s=M(r),o=M(s.ze),a=s.Un.get(i);return a?Promise.resolve(a.target):s.persistence.runTransaction("Get target data","readonly",c=&gt;o.Et(c,i).next(u=&gt;u?u.target:null))}function Rh(r){const i=M(r);return i.persistence.runTransaction("Get new document changes","readonly",s=&gt;function(o,a,c){const u=M(o);let h=ct(),f=Ca(c);const v=Wt(a),w=IDBKeyRange.lowerBound(f,!0);return v.Kt({index:le.readTimeIndex,range:w},(T,S)=&gt;{const C=Da(u.N,S);h=h.insert(C.key,C),f=S.readTime}).next(()=&gt;({Tn:h,readTime:ch(f)}))}(i.jn,s,i.Kn)).then(({Tn:s,readTime:o})=&gt;(i.Kn=o,s))}function Va(){return(Va=(0,D.Z)(function*(r){const i=M(r);return i.persistence.runTransaction("Synchronize last document change read time","readonly",s=&gt;function(o){const a=Wt(o);let c=H.min();return a.Kt({index:le.readTimeIndex,reverse:!0},(u,h,f)=&gt;{h.readTime&amp;&amp;(c=ch(h.readTime)),f.done()}).next(()=&gt;c)}(s)).then(s=&gt;{i.Kn=s})})).apply(this,arguments)}function Ba(){return(Ba=(0,D.Z)(function*(r,i,s,o){const a=M(r);let c=te(),u=ct(),h=Ml();for(const w of s){const T=i.zn(w.metadata.name);w.document&amp;&amp;(c=c.add(T)),u=u.insert(T,i.Hn(w)),h=h.insert(T,i.Jn(w.metadata.readTime))}const f=a.jn.newChangeBuffer({trackRemovals:!0}),v=yield Ci(a,(w=o,at(pi(X.fromString(`__bundle__/</span>docs<span class="hljs-regexp">/${w}`)))));var w;return a.persistence.runTransaction("Apply bundle documents","readwrite",w=&gt;Dh(w,f,u,H.min(),h).next(T=&gt;(f.apply(w),T)).next(T=&gt;a.ze.removeMatchingKeysForTargetId(w,v.targetId).next(()=&gt;a.ze.addMatchingKeys(w,c,v.targetId)).next(()=&gt;a.Qn.vn(w,T)).next(()=&gt;T)))})).apply(this,arguments)}function Bp(r,i){return qa.apply(this,arguments)}function qa(){return(qa=(0,D.Z)(function*(r,i,s=te()){const o=yield Ci(r,at(Ra(i.bundledQuery))),a=M(r);return a.persistence.runTransaction("Save named query","readwrite",c=&gt;{const u=ke(i.readTime);if(o.snapshotVersion.compareTo(u)&gt;=0)return a.Je.saveNamedQuery(c,i);const h=o.withResumeToken(Ae.EMPTY_BYTE_STRING,u);return a.Un=a.Un.insert(h.targetId,h),a.ze.updateTargetData(c,h).next(()=&gt;a.ze.removeMatchingKeysForTargetId(c,o.targetId)).next(()=&gt;a.ze.addMatchingKeys(c,s,o.targetId)).next(()=&gt;a.Je.saveNamedQuery(c,i))})})).apply(this,arguments)}class qp{constructor(i){this.N=i,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(i,s){return R.resolve(this.Yn.get(s))}saveBundleMetadata(i,s){var o;return this.Yn.set(s.id,{id:(o=s).id,version:o.version,createTime:ke(o.createTime)}),R.resolve()}getNamedQuery(i,s){return R.resolve(this.Xn.get(s))}saveNamedQuery(i,s){return this.Xn.set(s.name,{name:(o=s).name,query:Ra(o.bundledQuery),readTime:ke(o.readTime)}),R.resolve();var o}}class za{constructor(){this.Zn=new ue(Pe.ts),this.es=new ue(Pe.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(i,s){const o=new Pe(i,s);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(i,s){i.forEach(o=&gt;this.addReference(o,s))}removeReference(i,s){this.rs(new Pe(i,s))}os(i,s){i.forEach(o=&gt;this.removeReference(o,s))}cs(i){const s=new U(new X([])),o=new Pe(s,i),a=new Pe(s,i+1),c=[];return this.es.forEachInRange([o,a],u=&gt;{this.rs(u),c.push(u.key)}),c}us(){this.Zn.forEach(i=&gt;this.rs(i))}rs(i){this.Zn=this.Zn.delete(i),this.es=this.es.delete(i)}hs(i){const s=new U(new X([])),o=new Pe(s,i),a=new Pe(s,i+1);let c=te();return this.es.forEachInRange([o,a],u=&gt;{c=c.add(u.key)}),c}containsKey(i){const s=new Pe(i,0),o=this.Zn.firstAfterOrEqual(s);return null!==o&amp;&amp;i.isEqual(o.key)}}class Pe{constructor(i,s){this.key=i,this.ls=s}static ts(i,s){return U.comparator(i.key,s.key)||$(i.ls,s.ls)}static ns(i,s){return $(i.ls,s.ls)||U.comparator(i.key,s.key)}}class zp{constructor(i,s){this.Ht=i,this.referenceDelegate=s,this.In=[],this.fs=1,this.ds=new ue(Pe.ts)}checkEmpty(i){return R.resolve(0===this.In.length)}addMutationBatch(i,s,o,a){const c=this.fs;this.fs++;const u=new Sa(c,s,o,a);this.In.push(u);for(const h of a)this.ds=this.ds.add(new Pe(h.key,c)),this.Ht.addToCollectionParentIndex(i,h.key.path.popLast());return R.resolve(u)}lookupMutationBatch(i,s){return R.resolve(this.ws(s))}getNextMutationBatchAfterBatchId(i,s){const a=this._s(s+1),c=a&lt;0?0:a;return R.resolve(this.In.length&gt;c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(i){return R.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(i,s){const o=new Pe(s,0),a=new Pe(s,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([o,a],u=&gt;{const h=this.ws(u.ls);c.push(h)}),R.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(i,s){let o=new ue($);return s.forEach(a=&gt;{const c=new Pe(a,0),u=new Pe(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,u],h=&gt;{o=o.add(h.ls)})}),R.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(i,s){const o=s.path,a=o.length+1;let c=o;U.isDocumentKey(c)||(c=c.child(""));const u=new Pe(new U(c),0);let h=new ue($);return this.ds.forEachWhile(f=&gt;{const v=f.key.path;return!!o.isPrefixOf(v)&amp;&amp;(v.length===a&amp;&amp;(h=h.add(f.ls)),!0)},u),R.resolve(this.gs(h))}gs(i){const s=[];return i.forEach(o=&gt;{const a=this.ws(o);null!==a&amp;&amp;s.push(a)}),s}removeMutationBatch(i,s){z(0===this.ys(s.batchId,"removed")),this.In.shift();let o=this.ds;return R.forEach(s.mutations,a=&gt;{const c=new Pe(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(i,a.key)}).next(()=&gt;{this.ds=o})}te(i){}containsKey(i,s){const o=new Pe(s,0),a=this.ds.firstAfterOrEqual(o);return R.resolve(s.isEqual(a&amp;&amp;a.key))}performConsistencyCheck(i){return R.resolve()}ys(i,s){return this._s(i)}_s(i){return 0===this.In.length?0:i-this.In[0].batchId}ws(i){const s=this._s(i);return s&lt;0||s&gt;=this.In.length?null:this.In[s]}}class Gp{constructor(i,s){this.Ht=i,this.ps=s,this.docs=new Ie(U.comparator),this.size=0}addEntry(i,s,o){const a=s.key,c=this.docs.get(a),u=c?c.size:0,h=this.ps(s);return this.docs=this.docs.insert(a,{document:s.clone(),size:h,readTime:o}),this.size+=h-u,this.Ht.addToCollectionParentIndex(i,a.path.popLast())}removeEntry(i){const s=this.docs.get(i);s&amp;&amp;(this.docs=this.docs.remove(i),this.size-=s.size)}getEntry(i,s){const o=this.docs.get(s);return R.resolve(o?o.document.clone():ae.newInvalidDocument(s))}getEntries(i,s){let o=ct();return s.forEach(a=&gt;{const c=this.docs.get(a);o=o.insert(a,c?c.document.clone():ae.newInvalidDocument(a))}),R.resolve(o)}getDocumentsMatchingQuery(i,s,o){let a=ct();const c=new U(s.path.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f,readTime:v}}=u.getNext();if(!s.path.isPrefixOf(h.path))break;v.compareTo(o)&lt;=0||Ns(s,f)&amp;&amp;(a=a.insert(f.key,f.clone()))}return R.resolve(a)}Es(i,s){return R.forEach(this.docs,o=&gt;s(o))}newChangeBuffer(i){return new jp(this)}getSize(i){return R.resolve(this.size)}}class jp extends vh{constructor(i){super(),this.Se=i}applyChanges(i){const s=[];return this.changes.forEach((o,a)=&gt;{a.document.isValidDocument()?s.push(this.Se.addEntry(i,a.document,this.getReadTime(o))):this.Se.removeEntry(o)}),R.waitFor(s)}getFromCache(i,s){return this.Se.getEntry(i,s)}getAllFromCache(i,s){return this.Se.getEntries(i,s)}}class Hp{constructor(i){this.persistence=i,this.Ts=new Di(s=&gt;As(s),eo),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Is=0,this.As=new za,this.targetCount=0,this.Rs=An.se()}forEachTarget(i,s){return this.Ts.forEach((o,a)=&gt;s(a)),R.resolve()}getLastRemoteSnapshotVersion(i){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(i){return R.resolve(this.Is)}allocateTargetId(i){return this.highestTargetId=this.Rs.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(i,s,o){return o&amp;&amp;(this.lastRemoteSnapshotVersion=o),s&gt;this.Is&amp;&amp;(this.Is=s),R.resolve()}ae(i){this.Ts.set(i.target,i);const s=i.targetId;s&gt;this.highestTargetId&amp;&amp;(this.Rs=new An(s),this.highestTargetId=s),i.sequenceNumber&gt;this.Is&amp;&amp;(this.Is=i.sequenceNumber)}addTargetData(i,s){return this.ae(s),this.targetCount+=1,R.resolve()}updateTargetData(i,s){return this.ae(s),R.resolve()}removeTargetData(i,s){return this.Ts.delete(s.target),this.As.cs(s.targetId),this.targetCount-=1,R.resolve()}removeTargets(i,s,o){let a=0;const c=[];return this.Ts.forEach((u,h)=&gt;{h.sequenceNumber&lt;=s&amp;&amp;null===o.get(h.targetId)&amp;&amp;(this.Ts.delete(u),c.push(this.removeMatchingKeysForTargetId(i,h.targetId)),a++)}),R.waitFor(c).next(()=&gt;a)}getTargetCount(i){return R.resolve(this.targetCount)}getTargetData(i,s){const o=this.Ts.get(s)||null;return R.resolve(o)}addMatchingKeys(i,s,o){return this.As.ss(s,o),R.resolve()}removeMatchingKeys(i,s,o){this.As.os(s,o);const a=this.persistence.referenceDelegate,c=[];return a&amp;&amp;s.forEach(u=&gt;{c.push(a.markPotentiallyOrphaned(i,u))}),R.waitFor(c)}removeMatchingKeysForTargetId(i,s){return this.As.cs(s),R.resolve()}getMatchingKeysForTargetId(i,s){const o=this.As.hs(s);return R.resolve(o)}containsKey(i,s){return R.resolve(this.As.containsKey(s))}}class Kp{constructor(i,s){this.Ps={},this.Le=new nt(0),this.Be=!1,this.Be=!0,this.referenceDelegate=i(this),this.ze=new Hp(this),this.Ht=new Ep,this.He=new Gp(this.Ht,o=&gt;this.referenceDelegate.bs(o)),this.N=new oh(s),this.Je=new qp(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(i){let s=this.Ps[i.toKey()];return s||(s=new zp(this.Ht,this.referenceDelegate),this.Ps[i.toKey()]=s),s}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(i,s,o){k("MemoryPersistence","Starting transaction:",i);const a=new $p(this.Le.next());return this.referenceDelegate.vs(),o(a).next(c=&gt;this.referenceDelegate.Vs(a).next(()=&gt;c)).toPromise().then(c=&gt;(a.raiseOnCommittedEvent(),c))}Ss(i,s){return R.or(Object.values(this.Ps).map(o=&gt;()=&gt;o.containsKey(i,s)))}}class $p extends ih{constructor(i){super(),this.currentSequenceNumber=i}}class Ga{constructor(i){this.persistence=i,this.Ds=new za,this.Cs=null}static Ns(i){return new Ga(i)}get xs(){if(this.Cs)return this.Cs;throw V()}addReference(i,s,o){return this.Ds.addReference(o,s),this.xs.delete(o.toString()),R.resolve()}removeReference(i,s,o){return this.Ds.removeReference(o,s),this.xs.add(o.toString()),R.resolve()}markPotentiallyOrphaned(i,s){return this.xs.add(s.toString()),R.resolve()}removeTarget(i,s){this.Ds.cs(s.targetId).forEach(a=&gt;this.xs.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(i,s.targetId).next(a=&gt;{a.forEach(c=&gt;this.xs.add(c.toString()))}).next(()=&gt;o.removeTargetData(i,s))}vs(){this.Cs=new Set}Vs(i){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.xs,o=&gt;{const a=U.fromPath(o);return this.ks(i,a).next(c=&gt;{c||s.removeEntry(a)})}).next(()=&gt;(this.Cs=null,s.apply(i)))}updateLimboDocument(i,s){return this.ks(i,s).next(o=&gt;{o?this.xs.delete(s.toString()):this.xs.add(s.toString())})}bs(i){return 0}ks(i,s){return R.or([()=&gt;R.resolve(this.Ds.containsKey(s)),()=&gt;this.persistence.getTargetCache().containsKey(i,s),()=&gt;this.persistence.Ss(i,s)])}}function Ah(r,i){return`firestore_clients_${r}_${i}`}function kh(r,i,s){let o=`firestore_mutations_${r}_${s}`;return i.isAuthenticated()&amp;&amp;(o+=`_${i.uid}`),o}function ja(r,i){return`firestore_targets_${r}_${i}`}class vo{constructor(i,s,o,a){this.user=i,this.batchId=s,this.state=o,this.error=a}static $s(i,s,o){const a=JSON.parse(o);let c,u="object"==typeof a&amp;&amp;-1!==["pending","acknowledged","rejected"].indexOf(a.state)&amp;&amp;(void 0===a.error||"object"==typeof a.error);return u&amp;&amp;a.error&amp;&amp;(u="string"==typeof a.error.message&amp;&amp;"string"==typeof a.error.code,u&amp;&amp;(c=new A(a.error.code,a.error.message))),u?new vo(i,s,a.state,c):(ye("SharedClientState",`Failed to parse mutation state for ID '${s}': ${o}`),null)}Os(){const i={state:this.state,updateTimeMs:Date.now()};return this.error&amp;&amp;(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class Hs{constructor(i,s,o){this.targetId=i,this.state=s,this.error=o}static $s(i,s){const o=JSON.parse(s);let a,c="object"==typeof o&amp;&amp;-1!==["not-current","current","rejected"].indexOf(o.state)&amp;&amp;(void 0===o.error||"object"==typeof o.error);return c&amp;&amp;o.error&amp;&amp;(c="string"==typeof o.error.message&amp;&amp;"string"==typeof o.error.code,c&amp;&amp;(a=new A(o.error.code,o.error.message))),c?new Hs(i,o.state,a):(ye("SharedClientState",`Failed to parse target state for ID '${i}': ${s}`),null)}Os(){const i={state:this.state,updateTimeMs:Date.now()};return this.error&amp;&amp;(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)}}class wo{constructor(i,s){this.clientId=i,this.activeTargetIds=s}static $s(i,s){const o=JSON.parse(s);let a="object"==typeof o&amp;&amp;o.activeTargetIds instanceof Array,c=uo();for(let u=0;a&amp;&amp;u&lt;o.activeTargetIds.length;++u)a=ol(o.activeTargetIds[u]),c=c.add(o.activeTargetIds[u]);return a?new wo(i,c):(ye("SharedClientState",`Failed to parse client data for instance '${i}': ${s}`),null)}}class Ha{constructor(i,s){this.clientId=i,this.onlineState=s}static $s(i){const s=JSON.parse(i);return"object"==typeof s&amp;&amp;-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&amp;&amp;"string"==typeof s.clientId?new Ha(s.clientId,s.onlineState):(ye("SharedClientState",`Failed to parse online state: ${i}`),null)}}class Ka{constructor(){this.activeTargetIds=uo()}Fs(i){this.activeTargetIds=this.activeTargetIds.add(i)}Ms(i){this.activeTargetIds=this.activeTargetIds.delete(i)}Os(){const i={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(i)}}class $a{constructor(i,s,o,a,c){this.window=i,this.Oe=s,this.persistenceKey=o,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ie($),this.started=!1,this.Ks=[];const u=o.replace(/</span>[.*+?^${}(</span>)|[\]\\]/<span class="hljs-params">g</span>,"\\<span class="hljs-params">$</span>&amp;");<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>=<span class="hljs-params">this</span>.<span class="hljs-params">window</span>.<span class="hljs-params">localStorage</span>,<span class="hljs-params">this</span>.<span class="hljs-params">currentUser</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">js</span>=<span class="hljs-params">Ah</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistenceKey,<span class="hljs-keyword">this</span>.Ls</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Qs</span>=`<span class="hljs-params">firestore_sequence_number_$</span>{<span class="hljs-params">this</span>.<span class="hljs-params">persistenceKey</span>}`,<span class="hljs-params">this</span>.<span class="hljs-params">qs</span>=<span class="hljs-params">this</span>.<span class="hljs-params">qs</span>.<span class="hljs-params">insert</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Ls,<span class="hljs-keyword">new</span> Ka</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ws</span>=<span class="hljs-params">new</span> <span class="hljs-params">RegExp</span>(<span class="hljs-params"><span class="hljs-string">`^firestore_clients_<span class="hljs-subst">${u}</span>_([^_]*)$`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Gs</span>=<span class="hljs-params">new</span> <span class="hljs-params">RegExp</span>(<span class="hljs-params"><span class="hljs-string">`^firestore_mutations_<span class="hljs-subst">${u}</span>_(\\d+)(?:_(.*))?$`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">zs</span>=<span class="hljs-params">new</span> <span class="hljs-params">RegExp</span>(<span class="hljs-params"><span class="hljs-string">`^firestore_targets_<span class="hljs-subst">${u}</span>_(\\d+)$`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Hs</span>=`<span class="hljs-params">firestore_online_state_$</span>{<span class="hljs-params">this</span>.<span class="hljs-params">persistenceKey</span>}`,<span class="hljs-params">this</span>.<span class="hljs-params">Js</span>=<span class="hljs-params">function</span>(<span class="hljs-params">h</span>){<span class="hljs-params">return</span>`<span class="hljs-params">firestore_bundle_loaded_$</span>{<span class="hljs-params">h</span>}`}(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistenceKey</span>),<span class="hljs-params">this</span>.<span class="hljs-params">window</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"storage"</span>,<span class="hljs-keyword">this</span>.Bs</span>)}<span class="hljs-params">static</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>!(<span class="hljs-params">!i||!i.localStorage</span>)}<span class="hljs-params">start</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">syncEngine</span>.<span class="hljs-params">pn</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">a===i.Ls</span>)<span class="hljs-params">continue</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>.<span class="hljs-params">getItem</span>(<span class="hljs-params">Ah(i.persistenceKey,a</span>));<span class="hljs-params">if</span>(<span class="hljs-params">c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">wo</span>.<span class="hljs-params">$s</span>(<span class="hljs-params">a,c</span>);<span class="hljs-params">u</span>&amp;&amp;(<span class="hljs-params">i.qs=i.qs.insert(u.clientId,u</span>))}}<span class="hljs-params">i</span>.<span class="hljs-params">Ys</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">getItem</span>(<span class="hljs-params">i.Hs</span>);<span class="hljs-params">if</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">i</span>.<span class="hljs-params">Xs</span>(<span class="hljs-params">o</span>);<span class="hljs-params">a</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">Zs</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i.Ks</span>)<span class="hljs-params">i</span>.<span class="hljs-params">Us</span>(<span class="hljs-params">a</span>);<span class="hljs-params">i</span>.<span class="hljs-params">Ks</span>=[],<span class="hljs-params">i</span>.<span class="hljs-params">window</span>.<span class="hljs-params">addEventListener</span>(<span class="hljs-params"><span class="hljs-string">"pagehide"</span>,(</span>)=&gt;</span>i.shutdown()),i.started=!<span class="hljs-number">0</span>})()}writeSequenceNumber(i){<span class="hljs-keyword">this</span>.setItem(<span class="hljs-keyword">this</span>.Qs,<span class="hljs-built_in">JSON</span>.stringify(i))}getAllActiveQueryTargets(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ti(<span class="hljs-keyword">this</span>.qs)}isActiveQueryTarget(i){<span class="hljs-keyword">let</span> s=!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.qs.forEach(<span class="hljs-function">(<span class="hljs-params">o,a</span>)=&gt;</span>{a.activeTargetIds.has(i)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s=!<span class="hljs-number">0</span></span>)}),<span class="hljs-params">s</span>}<span class="hljs-params">addPendingMutation</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ei</span>(<span class="hljs-params">i,<span class="hljs-string">"pending"</span></span>)}<span class="hljs-params">updateMutationState</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ei</span>(<span class="hljs-params">i,s,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">ni</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">addLocalQueryTarget</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>="<span class="hljs-params">not</span>-<span class="hljs-params">current</span>";<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.isActiveQueryTarget(i</span>)){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">getItem</span>(<span class="hljs-params">ja(<span class="hljs-keyword">this</span>.persistenceKey,i</span>));<span class="hljs-params">if</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Hs</span>.<span class="hljs-params">$s</span>(<span class="hljs-params">i,o</span>);<span class="hljs-params">a</span>&amp;&amp;(<span class="hljs-params">s=a.state</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">si</span>.<span class="hljs-params">Fs</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ys</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>}<span class="hljs-params">removeLocalQueryTarget</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">si</span>.<span class="hljs-params">Ms</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Ys</span><span class="hljs-params">()</span>}<span class="hljs-params">isLocalQueryTarget</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">si</span>.<span class="hljs-params">activeTargetIds</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">clearQueryState</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">removeItem</span>(<span class="hljs-params">ja(<span class="hljs-keyword">this</span>.persistenceKey,i</span>))}<span class="hljs-params">updateQueryState</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ii</span>(<span class="hljs-params">i,s,o</span>)}<span class="hljs-params">handleUserChange</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">s</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">this</span>.ni(a</span>)}),<span class="hljs-params">this</span>.<span class="hljs-params">currentUser</span>=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">this</span>.addPendingMutation(a</span>)})}<span class="hljs-params">setOnlineState</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ri</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">notifyBundleLoaded</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">oi</span><span class="hljs-params">()</span>}<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">started</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.<span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">"storage"</span>,<span class="hljs-keyword">this</span>.Bs</span>),<span class="hljs-params">this</span>.<span class="hljs-params">removeItem</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.js</span>),<span class="hljs-params">this</span>.<span class="hljs-params">started</span>=!1)}<span class="hljs-params">getItem</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">getItem</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">"READ"</span>,i,s</span>),<span class="hljs-params">s</span>}<span class="hljs-params">setItem</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">"SET"</span>,i,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">removeItem</span>(<span class="hljs-params">i</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">"REMOVE"</span>,i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">removeItem</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">Us</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>;<span class="hljs-params">if</span>(<span class="hljs-params">o.storageArea===<span class="hljs-keyword">this</span>.storage</span>){<span class="hljs-params">if</span>(<span class="hljs-params">k(<span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">"EVENT"</span>,o.key,o.newValue</span>),<span class="hljs-params">o</span>.<span class="hljs-params">key</span>===<span class="hljs-params">this</span>.<span class="hljs-params">js</span>)<span class="hljs-params">return</span> <span class="hljs-params">void</span> <span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">"Received WebStorage notification for local change. Another client might have garbage-collected our state"</span></span>);<span class="hljs-params">this</span>.<span class="hljs-params">Oe</span>.<span class="hljs-params">enqueueRetryable</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s.started</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.key</span>)<span class="hljs-params">if</span>(<span class="hljs-params">s.Ws.test(o.key</span>)){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>==o.newValue</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">ai</span>(<span class="hljs-params">o.key</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">ci</span>(<span class="hljs-params">a,<span class="hljs-literal">null</span></span>)}{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">ui</span>(<span class="hljs-params">o.key,o.newValue</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">ci</span>(<span class="hljs-params">a.clientId,a</span>)}}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">s.Gs.test(o.key</span>)){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.newValue</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">hi</span>(<span class="hljs-params">o.key,o.newValue</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">li</span>(<span class="hljs-params">a</span>)}}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">s.zs.test(o.key</span>)){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.newValue</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">fi</span>(<span class="hljs-params">o.key,o.newValue</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">di</span>(<span class="hljs-params">a</span>)}}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">o.key===s.Hs</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.newValue</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Xs</span>(<span class="hljs-params">o.newValue</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">Zs</span>(<span class="hljs-params">a</span>)}}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">o.key===s.Qs</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">function</span>(<span class="hljs-params">c</span>){<span class="hljs-params">let</span> <span class="hljs-params">u</span>=<span class="hljs-params">nt</span>.<span class="hljs-params">T</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!=c</span>)<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">JSON</span>.<span class="hljs-params">parse</span>(<span class="hljs-params">c</span>);<span class="hljs-params">z</span>(<span class="hljs-params"><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> h</span>),<span class="hljs-params">u</span>=<span class="hljs-params">h</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">h</span>){<span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">"Failed to read sequence number from WebStorage"</span>,h</span>)}<span class="hljs-params">return</span> <span class="hljs-params">u</span>}(<span class="hljs-params">o.newValue</span>);<span class="hljs-params">a</span>!==<span class="hljs-params">nt</span>.<span class="hljs-params">T</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">sequenceNumberHandler</span>(<span class="hljs-params">a</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">o.key===s.Js</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">syncEngine</span>.<span class="hljs-params">wi</span><span class="hljs-params">()</span>}<span class="hljs-params">else</span> <span class="hljs-params">s</span>.<span class="hljs-params">Ks</span>.<span class="hljs-params">push</span>(<span class="hljs-params">o</span>)}))}}<span class="hljs-params">get</span> <span class="hljs-params">si</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">qs</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Ls</span>)}<span class="hljs-params">Ys</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.js,<span class="hljs-keyword">this</span>.si.Os(</span>))}<span class="hljs-params">ei</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">vo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.currentUser,i,s,o</span>),<span class="hljs-params">c</span>=<span class="hljs-params">kh</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistenceKey,<span class="hljs-keyword">this</span>.currentUser,i</span>);<span class="hljs-params">this</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params">c,a.Os(</span>))}<span class="hljs-params">ni</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">kh</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistenceKey,<span class="hljs-keyword">this</span>.currentUser,i</span>);<span class="hljs-params">this</span>.<span class="hljs-params">removeItem</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">ri</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">storage</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Hs,<span class="hljs-built_in">JSON</span>.stringify({clientId:<span class="hljs-keyword">this</span>.Ls,onlineState:i}</span>))}<span class="hljs-params">ii</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">ja</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistenceKey,i</span>),<span class="hljs-params">c</span>=<span class="hljs-params">new</span> <span class="hljs-params">Hs</span>(<span class="hljs-params">i,s,o</span>);<span class="hljs-params">this</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params">a,c.Os(</span>))}<span class="hljs-params">oi</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">setItem</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Js,<span class="hljs-string">"value-not-used"</span></span>)}<span class="hljs-params">ai</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Ws</span>.<span class="hljs-params">exec</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>?<span class="hljs-params">s</span>[1]:<span class="hljs-params">null</span>}<span class="hljs-params">ui</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ai</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">wo</span>.<span class="hljs-params">$s</span>(<span class="hljs-params">o,s</span>)}<span class="hljs-params">hi</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Gs</span>.<span class="hljs-params">exec</span>(<span class="hljs-params">i</span>),<span class="hljs-params">a</span>=<span class="hljs-params">Number</span>(<span class="hljs-params">o[<span class="hljs-number">1</span>]</span>);<span class="hljs-params">return</span> <span class="hljs-params">vo</span>.<span class="hljs-params">$s</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Me(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==o[<span class="hljs-number">2</span>]?o[<span class="hljs-number">2</span>]:<span class="hljs-literal">null</span></span>),<span class="hljs-params">a</span>,<span class="hljs-params">s</span>)}<span class="hljs-params">fi</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">zs</span>.<span class="hljs-params">exec</span>(<span class="hljs-params">i</span>),<span class="hljs-params">a</span>=<span class="hljs-params">Number</span>(<span class="hljs-params">o[<span class="hljs-number">1</span>]</span>);<span class="hljs-params">return</span> <span class="hljs-params">Hs</span>.<span class="hljs-params">$s</span>(<span class="hljs-params">a,s</span>)}<span class="hljs-params">Xs</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ha</span>.<span class="hljs-params">$s</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">li</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.user.uid===s.currentUser.uid</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">syncEngine</span>.<span class="hljs-params">_i</span>(<span class="hljs-params">i.batchId,i.state,i.error</span>);<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SharedClientState"</span>,<span class="hljs-string">`Ignoring mutation for non-active user <span class="hljs-subst">${i.user.uid}</span>`</span></span>)})<span class="hljs-params">()</span>}<span class="hljs-params">di</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">syncEngine</span>.<span class="hljs-params">mi</span>(<span class="hljs-params">i.targetId,i.state,i.error</span>)}<span class="hljs-params">ci</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">qs</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">i,s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">qs</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">i</span>),<span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ti</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.qs</span>),<span class="hljs-params">c</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ti</span>(<span class="hljs-params">o</span>),<span class="hljs-params">u</span>=[],<span class="hljs-params">h</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">f=&gt;{a.has(f</span>)||<span class="hljs-params">u</span>.<span class="hljs-params">push</span>(<span class="hljs-params">f</span>)}),<span class="hljs-params">a</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">f=&gt;{c.has(f</span>)||<span class="hljs-params">h</span>.<span class="hljs-params">push</span>(<span class="hljs-params">f</span>)}),<span class="hljs-params">this</span>.<span class="hljs-params">syncEngine</span>.<span class="hljs-params">gi</span>(<span class="hljs-params">u,h</span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.qs=o})}Zs(i){<span class="hljs-keyword">this</span>.qs.get(i.clientId)&amp;&amp;<span class="hljs-keyword">this</span>.onlineStateHandler(i.onlineState)}ti(i){<span class="hljs-keyword">let</span> s=uo();<span class="hljs-keyword">return</span> i.forEach(<span class="hljs-function">(<span class="hljs-params">o,a</span>)=&gt;</span>{s=s.unionWith(a.activeTargetIds)}),s}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ph</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>.yi=<span class="hljs-keyword">new</span> Ka,<span class="hljs-keyword">this</span>.pi={},<span class="hljs-keyword">this</span>.onlineStateHandler=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.sequenceNumberHandler=<span class="hljs-literal">null</span>}addPendingMutation(i){}updateMutationState(i,s,o){}addLocalQueryTarget(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yi.Fs(i),<span class="hljs-keyword">this</span>.pi[i]||<span class="hljs-string">"not-current"</span>}updateQueryState(i,s,o){<span class="hljs-keyword">this</span>.pi[i]=s}removeLocalQueryTarget(i){<span class="hljs-keyword">this</span>.yi.Ms(i)}isLocalQueryTarget(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yi.activeTargetIds.has(i)}clearQueryState(i){<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.pi[i]}getAllActiveQueryTargets(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yi.activeTargetIds}isActiveQueryTarget(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yi.activeTargetIds.has(i)}start(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.yi=<span class="hljs-keyword">new</span> Ka,<span class="hljs-built_in">Promise</span>.resolve()}handleUserChange(i,s,o){}setOnlineState(i){}shutdown(){}writeSequenceNumber(i){}notifyBundleLoaded(){}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Zp</span></span>{Ei(i){}shutdown(){}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Nh</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>.Ti=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.Ii(),<span class="hljs-keyword">this</span>.Ai=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.Ri(),<span class="hljs-keyword">this</span>.Pi=[],<span class="hljs-keyword">this</span>.bi()}Ei(i){<span class="hljs-keyword">this</span>.Pi.push(i)}shutdown(){<span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">"online"</span>,<span class="hljs-keyword">this</span>.Ti),<span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">"offline"</span>,<span class="hljs-keyword">this</span>.Ai)}bi(){<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"online"</span>,<span class="hljs-keyword">this</span>.Ti),<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"offline"</span>,<span class="hljs-keyword">this</span>.Ai)}Ii(){k(<span class="hljs-string">"ConnectivityMonitor"</span>,<span class="hljs-string">"Network connectivity changed: AVAILABLE"</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.Pi)i(<span class="hljs-number">0</span>)}Ri(){k(<span class="hljs-string">"ConnectivityMonitor"</span>,<span class="hljs-string">"Network connectivity changed: UNAVAILABLE"</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> <span class="hljs-keyword">this</span>.Pi)i(<span class="hljs-number">1</span>)}<span class="hljs-keyword">static</span> Pt(){<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-built_in">window</span>.addEventListener&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-built_in">window</span>.removeEventListener}}<span class="hljs-keyword">const</span> Qp={<span class="hljs-attr">BatchGetDocuments</span>:<span class="hljs-string">"batchGet"</span>,<span class="hljs-attr">Commit</span>:<span class="hljs-string">"commit"</span>,<span class="hljs-attr">RunQuery</span>:<span class="hljs-string">"runQuery"</span>};<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Yp</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.vi=i.vi,<span class="hljs-keyword">this</span>.Vi=i.Vi}Si(i){<span class="hljs-keyword">this</span>.Di=i}Ci(i){<span class="hljs-keyword">this</span>.Ni=i}onMessage(i){<span class="hljs-keyword">this</span>.xi=i}close(){<span class="hljs-keyword">this</span>.Vi()}send(i){<span class="hljs-keyword">this</span>.vi(i)}ki(){<span class="hljs-keyword">this</span>.Di()}$i(i){<span class="hljs-keyword">this</span>.Ni(i)}Oi(i){<span class="hljs-keyword">this</span>.xi(i)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Wp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">class</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>.databaseInfo=i,<span class="hljs-keyword">this</span>.databaseId=i.databaseId,<span class="hljs-keyword">this</span>.Fi=<span class="hljs-function">(<span class="hljs-params">i.ssl?<span class="hljs-string">"https"</span>:<span class="hljs-string">"http"</span></span>)+"://"+<span class="hljs-params">i</span>.<span class="hljs-params">host</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Mi</span>="<span class="hljs-params">projects</span>/"+<span class="hljs-params">this</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">projectId</span>+"/<span class="hljs-params">databases</span>/"+<span class="hljs-params">this</span>.<span class="hljs-params">databaseId</span>.<span class="hljs-params">database</span>+"/<span class="hljs-params">documents</span>"}<span class="hljs-params">Li</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Bi</span>(<span class="hljs-params">i,s</span>);<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"RestConnection"</span>,<span class="hljs-string">"Sending: "</span>,c,o</span>);<span class="hljs-params">const</span> <span class="hljs-params">u</span>={};<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Ui</span>(<span class="hljs-params">u,a</span>),<span class="hljs-params">this</span>.<span class="hljs-params">qi</span>(<span class="hljs-params">i,c,u,o</span>).<span class="hljs-params">then</span>(<span class="hljs-params">h=&gt;(k(<span class="hljs-string">"RestConnection"</span>,<span class="hljs-string">"Received: "</span>,h</span>),<span class="hljs-params">h</span>),<span class="hljs-params">h</span>=&gt;</span>{<span class="hljs-keyword">throw</span> Ss(<span class="hljs-string">"RestConnection"</span>,<span class="hljs-string">`<span class="hljs-subst">${i}</span> failed with error: `</span>,h,<span class="hljs-string">"url: "</span>,c,<span class="hljs-string">"request:"</span>,o),h})}Ki(i,s,o,a){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Li(i,s,o,a)}Ui(i,s){<span class="hljs-keyword">if</span>(i[<span class="hljs-string">"X-Goog-Api-Client"</span>]=<span class="hljs-string">"gl-js/ fire/"</span>+ci,i[<span class="hljs-string">"Content-Type"</span>]=<span class="hljs-string">"text/plain"</span>,<span class="hljs-keyword">this</span>.databaseInfo.appId&amp;&amp;<span class="hljs-function">(<span class="hljs-params">i[<span class="hljs-string">"X-Firebase-GMPID"</span>]=<span class="hljs-keyword">this</span>.databaseInfo.appId</span>),<span class="hljs-params">s</span>)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">in</span> s.authHeaders</span>)<span class="hljs-params">s</span>.<span class="hljs-params">authHeaders</span>.<span class="hljs-params">hasOwnProperty</span>(<span class="hljs-params">o</span>)&amp;&amp;(<span class="hljs-params">i[o]=s.authHeaders[o]</span>)}<span class="hljs-params">Bi</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span>`<span class="hljs-params">$</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Fi</span>}/<span class="hljs-params">v1</span>/<span class="hljs-params">$</span>{<span class="hljs-params">s</span>}:<span class="hljs-params">$</span>{<span class="hljs-params">Qp</span>[<span class="hljs-params">i</span>]}`}}{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">forceLongPolling</span>=<span class="hljs-params">i</span>.<span class="hljs-params">forceLongPolling</span>,<span class="hljs-params">this</span>.<span class="hljs-params">autoDetectLongPolling</span>=<span class="hljs-params">i</span>.<span class="hljs-params">autoDetectLongPolling</span>,<span class="hljs-params">this</span>.<span class="hljs-params">useFetchStreams</span>=<span class="hljs-params">i</span>.<span class="hljs-params">useFetchStreams</span>}<span class="hljs-params">qi</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Promise</span>(<span class="hljs-params">(c,u</span>)=&gt;</span>{<span class="hljs-keyword">const</span> h=<span class="hljs-keyword">new</span> Xu;h.listenOnce(Yu.COMPLETE,()=&gt;{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">switch</span>(h.getLastErrorCode()){<span class="hljs-keyword">case</span> Yr.NO_ERROR:<span class="hljs-keyword">const</span> v=h.getResponseJson();k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"XHR received:"</span>,<span class="hljs-built_in">JSON</span>.stringify(v)),c(v);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> Yr.TIMEOUT:k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">'RPC "'</span>+i+<span class="hljs-string">'" timed out'</span>),u(<span class="hljs-keyword">new</span> A(I.DEADLINE_EXCEEDED,<span class="hljs-string">"Request time out"</span>));<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span> Yr.HTTP_ERROR:<span class="hljs-keyword">const</span> w=h.getStatus();<span class="hljs-keyword">if</span>(k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">'RPC "'</span>+i+<span class="hljs-string">'" failed with status:'</span>,w,<span class="hljs-string">"response text:"</span>,h.getResponseText()),w&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> T=h.getResponseJson().error;<span class="hljs-keyword">if</span>(T&amp;&amp;T.status&amp;&amp;T.message){<span class="hljs-keyword">const</span> S=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">C</span>)</span>{<span class="hljs-keyword">const</span> P=C.toLowerCase().replace(<span class="hljs-regexp">/_/g</span>,<span class="hljs-string">"-"</span>);<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.values(I).indexOf(P)&gt;=<span class="hljs-number">0</span>?P:I.UNKNOWN}(T.status);u(<span class="hljs-keyword">new</span> A(S,T.message))}<span class="hljs-keyword">else</span> u(<span class="hljs-keyword">new</span> A(I.UNKNOWN,<span class="hljs-string">"Server responded with status "</span>+h.getStatus()))}<span class="hljs-keyword">else</span> u(<span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">"Connection failed."</span>));<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:V()}}<span class="hljs-keyword">finally</span>{k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">'RPC "'</span>+i+<span class="hljs-string">'" completed.'</span>)}});<span class="hljs-keyword">const</span> f=<span class="hljs-built_in">JSON</span>.stringify(a);h.send(s,<span class="hljs-string">"POST"</span>,f,o,<span class="hljs-number">15</span>)})}ji(i,s){<span class="hljs-keyword">const</span> o=[<span class="hljs-keyword">this</span>.Fi,<span class="hljs-string">"/"</span>,<span class="hljs-string">"google.firestore.v1.Firestore"</span>,<span class="hljs-string">"/"</span>,i,<span class="hljs-string">"/channel"</span>],a=<span class="hljs-keyword">new</span> Qr,c=ri(),u={<span class="hljs-attr">httpSessionIdParam</span>:<span class="hljs-string">"gsessionid"</span>,<span class="hljs-attr">initMessageHeaders</span>:{},<span class="hljs-attr">messageUrlParams</span>:{<span class="hljs-attr">database</span>:<span class="hljs-string">`projects/<span class="hljs-subst">${<span class="hljs-keyword">this</span>.databaseId.projectId}</span>/databases/<span class="hljs-subst">${<span class="hljs-keyword">this</span>.databaseId.database}</span>`</span>},<span class="hljs-attr">sendRawJson</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">supportsCrossDomainXhr</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">internalChannelParams</span>:{<span class="hljs-attr">forwardChannelRequestTimeoutMs</span>:<span class="hljs-number">6e5</span>},<span class="hljs-attr">forceLongPolling</span>:<span class="hljs-keyword">this</span>.forceLongPolling,<span class="hljs-attr">detectBufferingProxy</span>:<span class="hljs-keyword">this</span>.autoDetectLongPolling};<span class="hljs-keyword">this</span>.useFetchStreams&amp;&amp;<span class="hljs-function">(<span class="hljs-params">u.xmlHttpFactory=<span class="hljs-keyword">new</span> Ju({}</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">Ui</span>(<span class="hljs-params">u.initMessageHeaders,s</span>),(<span class="hljs-params"><span class="hljs-number">0</span>,Y.uI</span>)<span class="hljs-params">()</span>||(<span class="hljs-params"><span class="hljs-number">0</span>,Y.b$</span>)<span class="hljs-params">()</span>||(<span class="hljs-params"><span class="hljs-number">0</span>,Y.d</span>)<span class="hljs-params">()</span>||(<span class="hljs-params"><span class="hljs-number">0</span>,Y.w1</span>)<span class="hljs-params">()</span>||(<span class="hljs-params"><span class="hljs-number">0</span>,Y.Mn</span>)<span class="hljs-params">()</span>||(<span class="hljs-params"><span class="hljs-number">0</span>,Y.ru</span>)<span class="hljs-params">()</span>||(<span class="hljs-params">u.httpHeadersOverwriteParam=<span class="hljs-string">"$httpHeaders"</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">o</span>.<span class="hljs-params">join</span>(<span class="hljs-params"><span class="hljs-string">""</span></span>);<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"Connection"</span>,<span class="hljs-string">"Creating WebChannel: "</span>+h,u</span>);<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">a</span>.<span class="hljs-params">createWebChannel</span>(<span class="hljs-params">h,u</span>);<span class="hljs-params">let</span> <span class="hljs-params">v</span>=!1,<span class="hljs-params">w</span>=!1;<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">new</span> <span class="hljs-params">Yp</span>(<span class="hljs-params">{vi:C=&gt;{w?k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"Not sending because WebChannel is closed:"</span>,C</span>):(<span class="hljs-params">v||(k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"Opening WebChannel transport."</span></span>),<span class="hljs-params">f</span>.<span class="hljs-params">open</span><span class="hljs-params">()</span>,<span class="hljs-params">v</span>=!0),<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel sending:"</span>,C</span>),<span class="hljs-params">f</span>.<span class="hljs-params">send</span>(<span class="hljs-params">C</span>))},<span class="hljs-params">Vi</span>:<span class="hljs-params">()</span>=&gt;</span>f.close()}),S=<span class="hljs-function">(<span class="hljs-params">C,P,B</span>)=&gt;</span>{C.listen(P,j=&gt;{<span class="hljs-keyword">try</span>{B(j)}<span class="hljs-keyword">catch</span>(de){setTimeout(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">throw</span> de},<span class="hljs-number">0</span>)}})};<span class="hljs-keyword">return</span> S(f,Is.EventType.OPEN,()=&gt;{w||k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel transport opened."</span>)}),S(f,Is.EventType.CLOSE,()=&gt;{w||<span class="hljs-function">(<span class="hljs-params">w=!<span class="hljs-number">0</span>,k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel transport closed"</span></span>),<span class="hljs-params">T</span>.<span class="hljs-params">$i</span><span class="hljs-params">()</span>)}),<span class="hljs-params">S</span>(<span class="hljs-params">f,Is.EventType.ERROR,C=&gt;{w||(w=!<span class="hljs-number">0</span>,Ss(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel transport errored:"</span>,C</span>),<span class="hljs-params">T</span>.<span class="hljs-params">$i</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">"The operation could not be completed"</span></span>)))}),<span class="hljs-params">S</span>(<span class="hljs-params">f,Is.EventType.MESSAGE,C=&gt;{<span class="hljs-keyword">var</span> P;<span class="hljs-keyword">if</span>(!w</span>){<span class="hljs-params">const</span> <span class="hljs-params">B</span>=<span class="hljs-params">C</span>.<span class="hljs-params">data</span>[0];<span class="hljs-params">z</span>(<span class="hljs-params">!!B</span>);<span class="hljs-params">const</span> <span class="hljs-params">j</span>=<span class="hljs-params">B</span>,<span class="hljs-params">de</span>=<span class="hljs-params">j</span>.<span class="hljs-params">error</span>||(<span class="hljs-params"><span class="hljs-literal">null</span>===(P=j[<span class="hljs-number">0</span>]</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">P</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">P</span>.<span class="hljs-params">error</span>);<span class="hljs-params">if</span>(<span class="hljs-params">de</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel received error:"</span>,de</span>);<span class="hljs-params">const</span> <span class="hljs-params">Ze</span>=<span class="hljs-params">de</span>.<span class="hljs-params">status</span>;<span class="hljs-params">let</span> <span class="hljs-params">Mt</span>=<span class="hljs-params">function</span>(<span class="hljs-params">ir</span>){<span class="hljs-params">const</span> <span class="hljs-params">Oo</span>=<span class="hljs-params">we</span>[<span class="hljs-params">ir</span>];<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==Oo</span>)<span class="hljs-params">return</span> <span class="hljs-params">Nl</span>(<span class="hljs-params">Oo</span>)}(<span class="hljs-params">Ze</span>),<span class="hljs-params">pt</span>=<span class="hljs-params">de</span>.<span class="hljs-params">message</span>;<span class="hljs-params">void</span> 0===<span class="hljs-params">Mt</span>&amp;&amp;(<span class="hljs-params">Mt=I.INTERNAL,pt=<span class="hljs-string">"Unknown error status: "</span>+Ze+<span class="hljs-string">" with message "</span>+de.message</span>),<span class="hljs-params">w</span>=!0,<span class="hljs-params">T</span>.<span class="hljs-params">$i</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> A(Mt,pt</span>)),<span class="hljs-params">f</span>.<span class="hljs-params">close</span><span class="hljs-params">()</span>}<span class="hljs-params">else</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"Connection"</span>,<span class="hljs-string">"WebChannel received:"</span>,B</span>),<span class="hljs-params">T</span>.<span class="hljs-params">Oi</span>(<span class="hljs-params">B</span>)}}),<span class="hljs-params">S</span>(<span class="hljs-params">c,Wu.STAT_EVENT,C=&gt;{C.stat===aa_PROXY?k(<span class="hljs-string">"Connection"</span>,<span class="hljs-string">"Detected buffering proxy"</span></span>):<span class="hljs-params">C</span>.<span class="hljs-params">stat</span>===<span class="hljs-params">aa_NOPROXY</span>&amp;&amp;<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"Connection"</span>,<span class="hljs-string">"Detected no buffering proxy"</span></span>)}),<span class="hljs-params">setTimeout</span>(<span class="hljs-params">(</span>)=&gt;</span>{T.ki()},<span class="hljs-number">0</span>),T}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Lh</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>?<span class="hljs-built_in">window</span>:<span class="hljs-literal">null</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bo</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>?<span class="hljs-built_in">document</span>:<span class="hljs-literal">null</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ks</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> sp(r,!<span class="hljs-number">0</span>)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Za</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o=1e3,a=1.5,c=6e4){<span class="hljs-keyword">this</span>.Oe=i,<span class="hljs-keyword">this</span>.timerId=s,<span class="hljs-keyword">this</span>.Qi=o,<span class="hljs-keyword">this</span>.Wi=a,<span class="hljs-keyword">this</span>.Gi=c,<span class="hljs-keyword">this</span>.zi=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.Hi=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.Ji=<span class="hljs-built_in">Date</span>.now(),<span class="hljs-keyword">this</span>.reset()}reset(){<span class="hljs-keyword">this</span>.zi=<span class="hljs-number">0</span>}Yi(){<span class="hljs-keyword">this</span>.zi=<span class="hljs-keyword">this</span>.Gi}Xi(i){<span class="hljs-keyword">this</span>.cancel();<span class="hljs-keyword">const</span> s=<span class="hljs-built_in">Math</span>.floor(<span class="hljs-keyword">this</span>.zi+<span class="hljs-keyword">this</span>.Zi()),o=<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,<span class="hljs-built_in">Date</span>.now()-<span class="hljs-keyword">this</span>.Ji),a=<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">0</span>,s-o);a&gt;<span class="hljs-number">0</span>&amp;&amp;k(<span class="hljs-string">"ExponentialBackoff"</span>,<span class="hljs-string">`Backing off for <span class="hljs-subst">${a}</span> ms (base delay: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.zi}</span> ms, delay with jitter: <span class="hljs-subst">${s}</span> ms, last attempt: <span class="hljs-subst">${o}</span> ms ago)`</span>),<span class="hljs-keyword">this</span>.Hi=<span class="hljs-keyword">this</span>.Oe.enqueueAfterDelay(<span class="hljs-keyword">this</span>.timerId,a,()=&gt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.Ji=<span class="hljs-built_in">Date</span>.now(</span>),<span class="hljs-params">i</span><span class="hljs-params">()</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">zi</span>*=<span class="hljs-params">this</span>.<span class="hljs-params">Wi</span>,<span class="hljs-params">this</span>.<span class="hljs-params">zi</span>&lt;<span class="hljs-params">this</span>.<span class="hljs-params">Qi</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.zi=<span class="hljs-keyword">this</span>.Qi</span>),<span class="hljs-params">this</span>.<span class="hljs-params">zi</span>&gt;<span class="hljs-params">this</span>.<span class="hljs-params">Gi</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.zi=<span class="hljs-keyword">this</span>.Gi</span>)}<span class="hljs-params">tr</span><span class="hljs-params">()</span>{<span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">Hi</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.Hi.skipDelay(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Hi</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">cancel</span><span class="hljs-params">()</span>{<span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">Hi</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.Hi.cancel(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Hi</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">Zi</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-built_in">Math</span>.random(</span>)-.5)*<span class="hljs-params">this</span>.<span class="hljs-params">zi</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Mh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c,u</span>){<span class="hljs-params">this</span>.<span class="hljs-params">Oe</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">er</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">nr</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">credentialsProvider</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">listener</span>=<span class="hljs-params">u</span>,<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">sr</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">ir</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">stream</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Za</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">ar</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 1===<span class="hljs-params">this</span>.<span class="hljs-params">state</span>||2===<span class="hljs-params">this</span>.<span class="hljs-params">state</span>||4===<span class="hljs-params">this</span>.<span class="hljs-params">state</span>}<span class="hljs-params">cr</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 2===<span class="hljs-params">this</span>.<span class="hljs-params">state</span>}<span class="hljs-params">start</span><span class="hljs-params">()</span>{3!==<span class="hljs-params">this</span>.<span class="hljs-params">state</span>?<span class="hljs-params">this</span>.<span class="hljs-params">auth</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">ur</span><span class="hljs-params">()</span>}<span class="hljs-params">stop</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">i</span>.<span class="hljs-params">ar</span><span class="hljs-params">()</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> i.close(<span class="hljs-number">0</span></span>))})<span class="hljs-params">()</span>}<span class="hljs-params">hr</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>}<span class="hljs-params">lr</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">cr</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">null</span>===<span class="hljs-params">this</span>.<span class="hljs-params">ir</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.ir=<span class="hljs-keyword">this</span>.Oe.enqueueAfterDelay(<span class="hljs-keyword">this</span>.er,<span class="hljs-number">6e4</span>,(</span>)=&gt;</span><span class="hljs-keyword">this</span>.dr()))}wr(i){<span class="hljs-keyword">this</span>._r(),<span class="hljs-keyword">this</span>.stream.send(i)}dr(){<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.cr(</span>))<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">close</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>)})<span class="hljs-params">()</span>}<span class="hljs-params">_r</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">ir</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.ir.cancel(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">ir</span>=<span class="hljs-params">null</span>)}<span class="hljs-params">close</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">o</span>.<span class="hljs-params">_r</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">sr</span>++,3!==<span class="hljs-params">i</span>?<span class="hljs-params">o</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>:<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">code</span>===<span class="hljs-params">I</span>.<span class="hljs-params">RESOURCE_EXHAUSTED</span>?(<span class="hljs-params">ye(s.toString(</span>)),<span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">"Using maximum backoff delay to prevent overloading the backend."</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">Yi</span><span class="hljs-params">()</span>):<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">code</span>===<span class="hljs-params">I</span>.<span class="hljs-params">UNAUTHENTICATED</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">credentialsProvider</span>.<span class="hljs-params">invalidateToken</span><span class="hljs-params">()</span>,<span class="hljs-params">null</span>!==<span class="hljs-params">o</span>.<span class="hljs-params">stream</span>&amp;&amp;(<span class="hljs-params">o.mr(</span>),<span class="hljs-params">o</span>.<span class="hljs-params">stream</span>.<span class="hljs-params">close</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">stream</span>=<span class="hljs-params">null</span>),<span class="hljs-params">o</span>.<span class="hljs-params">state</span>=<span class="hljs-params">i</span>,<span class="hljs-params">yield</span> <span class="hljs-params">o</span>.<span class="hljs-params">listener</span>.<span class="hljs-params">Ci</span>(<span class="hljs-params">s</span>)})<span class="hljs-params">()</span>}<span class="hljs-params">mr</span><span class="hljs-params">()</span>{}<span class="hljs-params">auth</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">state</span>=1;<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">gr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.sr</span>),<span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">sr</span>;<span class="hljs-params">this</span>.<span class="hljs-params">credentialsProvider</span>.<span class="hljs-params">getToken</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">this</span>.sr===s&amp;&amp;<span class="hljs-keyword">this</span>.yr(o</span>)},<span class="hljs-params">o</span>=&gt;</span>{i(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">new</span> A(I.UNKNOWN,<span class="hljs-string">"Fetching auth token failed: "</span>+o.message);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.pr(a)})})}yr(i){<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">this</span>.gr(<span class="hljs-keyword">this</span>.sr);<span class="hljs-keyword">this</span>.stream=<span class="hljs-keyword">this</span>.Er(i),<span class="hljs-keyword">this</span>.stream.Si(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{s(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.state=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.listener.Si(</span>)))}),<span class="hljs-params">this</span>.<span class="hljs-params">stream</span>.<span class="hljs-params">Ci</span>(<span class="hljs-params">o=&gt;{s((</span>)=&gt;</span><span class="hljs-keyword">this</span>.pr(o))}),<span class="hljs-keyword">this</span>.stream.onMessage(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{s(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.onMessage(o))})}ur(){<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">this</span>.state=<span class="hljs-number">4</span>,<span class="hljs-keyword">this</span>.rr.Xi(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">i</span>.<span class="hljs-params">state</span>=0,<span class="hljs-params">i</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>}))}<span class="hljs-params">pr</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"PersistentStream"</span>,<span class="hljs-string">`close with error: <span class="hljs-subst">${i}</span>`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">stream</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">close</span>(<span class="hljs-params"><span class="hljs-number">3</span>,i</span>)}<span class="hljs-params">gr</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">this</span>.Oe.enqueueAndForget(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.sr===i?s():<span class="hljs-function">(<span class="hljs-params">k(<span class="hljs-string">"PersistentStream"</span>,<span class="hljs-string">"stream callback skipped by getCloseGuardedDispatcher."</span></span>),<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>))}}}<span class="hljs-params">class</span> <span class="hljs-params">Jp</span> <span class="hljs-params">extends</span> <span class="hljs-params">Mh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"listen_stream_connection_backoff"</span>,<span class="hljs-string">"listen_stream_idle"</span>,s,o,c</span>),<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">a</span>}<span class="hljs-params">Er</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">nr</span>.<span class="hljs-params">ji</span>(<span class="hljs-params"><span class="hljs-string">"Listen"</span>,i</span>)}<span class="hljs-params">onMessage</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"targetChange"</span><span class="hljs-keyword">in</span> i</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>="<span class="hljs-params">NO_CHANGE</span>"===(<span class="hljs-params">f=i.targetChange.targetChangeType||<span class="hljs-string">"NO_CHANGE"</span></span>)?0:"<span class="hljs-params">ADD</span>"===<span class="hljs-params">f</span>?1:"<span class="hljs-params">REMOVE</span>"===<span class="hljs-params">f</span>?2:"<span class="hljs-params">CURRENT</span>"===<span class="hljs-params">f</span>?3:"<span class="hljs-params">RESET</span>"===<span class="hljs-params">f</span>?4:<span class="hljs-params">V</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">i</span>.<span class="hljs-params">targetChange</span>.<span class="hljs-params">targetIds</span>||[],<span class="hljs-params">c</span>=<span class="hljs-params">function</span>(<span class="hljs-params">f,v</span>){<span class="hljs-params">return</span> <span class="hljs-params">f</span>.<span class="hljs-params">D</span>?(<span class="hljs-params">z(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===v||<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> v</span>),<span class="hljs-params">Ae</span>.<span class="hljs-params">fromBase64String</span>(<span class="hljs-params">v||<span class="hljs-string">""</span></span>)):(<span class="hljs-params">z(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===v||v <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Uint8Array</span></span>),<span class="hljs-params">Ae</span>.<span class="hljs-params">fromUint8Array</span>(<span class="hljs-params">v||<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span></span>))}(<span class="hljs-params">r,i.targetChange.resumeToken</span>),<span class="hljs-params">u</span>=<span class="hljs-params">i</span>.<span class="hljs-params">targetChange</span>.<span class="hljs-params">cause</span>,<span class="hljs-params">h</span>=<span class="hljs-params">u</span>&amp;&amp;<span class="hljs-params">function</span>(<span class="hljs-params">f</span>){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">void</span> 0===<span class="hljs-params">f</span>.<span class="hljs-params">code</span>?<span class="hljs-params">I</span>.<span class="hljs-params">UNKNOWN</span>:<span class="hljs-params">Nl</span>(<span class="hljs-params">f.code</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">v,f.message||<span class="hljs-string">""</span></span>)}(<span class="hljs-params">u</span>);<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Fl</span>(<span class="hljs-params">o,a,c,h||<span class="hljs-literal">null</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"documentChange"</span><span class="hljs-keyword">in</span> i</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">documentChange</span>,<span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,o.<span class="hljs-built_in">document</span>.name</span>),<span class="hljs-params">c</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">o.<span class="hljs-built_in">document</span>.updateTime</span>),<span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">qe</span>(<span class="hljs-params">{mapValue:{fields:o.<span class="hljs-built_in">document</span>.fields}}</span>),<span class="hljs-params">h</span>=<span class="hljs-params">ae</span>.<span class="hljs-params">newFoundDocument</span>(<span class="hljs-params">a,c,u</span>);<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">lo</span>(<span class="hljs-params">o.targetIds||[],o.removedTargetIds||[],h.key,h</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"documentDelete"</span><span class="hljs-keyword">in</span> i</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">documentDelete</span>,<span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,o.<span class="hljs-built_in">document</span></span>),<span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">readTime</span>?<span class="hljs-params">ke</span>(<span class="hljs-params">o.readTime</span>):<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>,<span class="hljs-params">u</span>=<span class="hljs-params">ae</span>.<span class="hljs-params">newNoDocument</span>(<span class="hljs-params">a,c</span>);<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">lo</span>(<span class="hljs-params">[],o.removedTargetIds||[],u.key,u</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"documentRemove"</span><span class="hljs-keyword">in</span> i</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">documentRemove</span>,<span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">r,o.<span class="hljs-built_in">document</span></span>);<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">lo</span>(<span class="hljs-params">[],o.removedTargetIds||[],a,<span class="hljs-literal">null</span></span>)}<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!(<span class="hljs-string">"filter"</span><span class="hljs-keyword">in</span> i</span>))<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;{<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">filter</span>,<span class="hljs-params">c</span>=<span class="hljs-params">new</span> <span class="hljs-params">Qf</span>(<span class="hljs-params">o.count||<span class="hljs-number">0</span></span>);<span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ol</span>(<span class="hljs-params">o.targetId,c</span>)}}<span class="hljs-params">var</span> <span class="hljs-params">f</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>}(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">a</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!(<span class="hljs-string">"targetChange"</span><span class="hljs-keyword">in</span> a</span>))<span class="hljs-params">return</span> <span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">targetChange</span>;<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">targetIds</span>&amp;&amp;<span class="hljs-params">c</span>.<span class="hljs-params">targetIds</span>.<span class="hljs-params">length</span>?<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>:<span class="hljs-params">c</span>.<span class="hljs-params">readTime</span>?<span class="hljs-params">ke</span>(<span class="hljs-params">c.readTime</span>):<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>}(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">listener</span>.<span class="hljs-params">Tr</span>(<span class="hljs-params">s,o</span>)}<span class="hljs-params">Ir</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>={};<span class="hljs-params">s</span>.<span class="hljs-params">database</span>=<span class="hljs-params">qs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N</span>),<span class="hljs-params">s</span>.<span class="hljs-params">addTarget</span>=<span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">let</span> <span class="hljs-params">u</span>;<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">c</span>.<span class="hljs-params">target</span>;<span class="hljs-params">return</span> <span class="hljs-params">u</span>=<span class="hljs-params">to</span>(<span class="hljs-params">h</span>)?{<span class="hljs-params">documents</span>:<span class="hljs-params">Zl</span>(<span class="hljs-params">a,h</span>)}:{<span class="hljs-params">query</span>:<span class="hljs-params">Ql</span>(<span class="hljs-params">a,h</span>)},<span class="hljs-params">u</span>.<span class="hljs-params">targetId</span>=<span class="hljs-params">c</span>.<span class="hljs-params">targetId</span>,<span class="hljs-params">c</span>.<span class="hljs-params">resumeToken</span>.<span class="hljs-params">approximateByteSize</span><span class="hljs-params">()</span>&gt;0?<span class="hljs-params">u</span>.<span class="hljs-params">resumeToken</span>=<span class="hljs-params">ql</span>(<span class="hljs-params">a,c.resumeToken</span>):<span class="hljs-params">c</span>.<span class="hljs-params">snapshotVersion</span>.<span class="hljs-params">compareTo</span>(<span class="hljs-params">H.min(</span>))&gt;0&amp;&amp;(<span class="hljs-params">u.readTime=Vs(a,c.snapshotVersion.toTimestamp(</span>))),<span class="hljs-params">u</span>}(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,i</span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">o,a</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">case</span> 0:<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">case</span> 1:<span class="hljs-params">return</span>"<span class="hljs-params">existence</span>-<span class="hljs-params">filter</span>-<span class="hljs-params">mismatch</span>";<span class="hljs-params">case</span> 2:<span class="hljs-params">return</span>"<span class="hljs-params">limbo</span>-<span class="hljs-params">document</span>";<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}(<span class="hljs-params"><span class="hljs-number">0</span>,i.purpose</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>==<span class="hljs-params">s</span>?<span class="hljs-params">null</span>:{"<span class="hljs-params">goog</span>-<span class="hljs-params">listen</span>-<span class="hljs-params">tags</span>":<span class="hljs-params">s</span>}}(<span class="hljs-params"><span class="hljs-number">0</span>,i</span>);<span class="hljs-params">o</span>&amp;&amp;(<span class="hljs-params">s.labels=o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">wr</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">Ar</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>={};<span class="hljs-params">s</span>.<span class="hljs-params">database</span>=<span class="hljs-params">qs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N</span>),<span class="hljs-params">s</span>.<span class="hljs-params">removeTarget</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">wr</span>(<span class="hljs-params">s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Xp</span> <span class="hljs-params">extends</span> <span class="hljs-params">Mh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,<span class="hljs-string">"write_stream_connection_backoff"</span>,<span class="hljs-string">"write_stream_idle"</span>,s,o,c</span>),<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>=!1}<span class="hljs-params">get</span> <span class="hljs-params">Pr</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>}<span class="hljs-params">start</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">lastStreamToken</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">super</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>}<span class="hljs-params">mr</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">br</span>(<span class="hljs-params">[]</span>)}<span class="hljs-params">Er</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">nr</span>.<span class="hljs-params">ji</span>(<span class="hljs-params"><span class="hljs-string">"Write"</span>,i</span>)}<span class="hljs-params">onMessage</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">z(!!i.streamToken</span>),<span class="hljs-params">this</span>.<span class="hljs-params">lastStreamToken</span>=<span class="hljs-params">i</span>.<span class="hljs-params">streamToken</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>){<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">reset</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">length</span>&gt;0?(<span class="hljs-params">z(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">map</span>(<span class="hljs-params">s=&gt;<span class="hljs-keyword">function</span>(o,a</span>){<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">o.updateTime?o.updateTime:a</span>);<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">H.min(</span>))&amp;&amp;(<span class="hljs-params">c=ke(a</span>)),<span class="hljs-params">new</span> <span class="hljs-params">Kf</span>(<span class="hljs-params">c,o.transformResults||[]</span>)}(<span class="hljs-params">s,i</span>))):[]}(<span class="hljs-params">i.writeResults,i.commitTime</span>),<span class="hljs-params">o</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">i.commitTime</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">listener</span>.<span class="hljs-params">vr</span>(<span class="hljs-params">o,s</span>)}<span class="hljs-params">return</span> <span class="hljs-params">z</span>(<span class="hljs-params">!i.writeResults||<span class="hljs-number">0</span>===i.writeResults.length</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Rr</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">listener</span>.<span class="hljs-params">Vr</span><span class="hljs-params">()</span>}<span class="hljs-params">Sr</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>={};<span class="hljs-params">i</span>.<span class="hljs-params">database</span>=<span class="hljs-params">qs</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N</span>),<span class="hljs-params">this</span>.<span class="hljs-params">wr</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">br</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>={<span class="hljs-params">streamToken</span>:<span class="hljs-params">this</span>.<span class="hljs-params">lastStreamToken</span>,<span class="hljs-params">writes</span>:<span class="hljs-params">i</span>.<span class="hljs-params">map</span>(<span class="hljs-params">o=&gt;ho(<span class="hljs-keyword">this</span>.N,o</span>))};<span class="hljs-params">this</span>.<span class="hljs-params">wr</span>(<span class="hljs-params">s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">em</span> <span class="hljs-params">extends</span> <span class="hljs-params">class</span>{}{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">credentials</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">nr</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Dr</span>=!1}<span class="hljs-params">Cr</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.Dr</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.FAILED_PRECONDITION,<span class="hljs-string">"The client has already been terminated."</span></span>)}<span class="hljs-params">Li</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Cr</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">credentials</span>.<span class="hljs-params">getToken</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">this</span>.nr.Li(i,s,o,a</span>)).<span class="hljs-params">catch</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">throw</span><span class="hljs-string">"FirebaseError"</span>===a.name?(a.code===I.UNAUTHENTICATED&amp;&amp;<span class="hljs-keyword">this</span>.credentials.invalidateToken(</span>),<span class="hljs-params">a</span>):<span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.UNKNOWN,a.toString(</span>))})}<span class="hljs-params">Ki</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Cr</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">credentials</span>.<span class="hljs-params">getToken</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">this</span>.nr.Ki(i,s,o,a</span>)).<span class="hljs-params">catch</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">throw</span><span class="hljs-string">"FirebaseError"</span>===a.name?(a.code===I.UNAUTHENTICATED&amp;&amp;<span class="hljs-keyword">this</span>.credentials.invalidateToken(</span>),<span class="hljs-params">a</span>):<span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.UNKNOWN,a.toString(</span>))})}<span class="hljs-params">terminate</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Dr</span>=!0}}<span class="hljs-params">class</span> <span class="hljs-params">tm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">onlineStateHandler</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">state</span>="<span class="hljs-params">Unknown</span>",<span class="hljs-params">this</span>.<span class="hljs-params">Nr</span>=0,<span class="hljs-params">this</span>.<span class="hljs-params">kr</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">$r</span>=!0}<span class="hljs-params">Or</span><span class="hljs-params">()</span>{0===<span class="hljs-params">this</span>.<span class="hljs-params">Nr</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.Fr(<span class="hljs-string">"Unknown"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">kr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAfterDelay</span>(<span class="hljs-params"><span class="hljs-string">"online_state_timeout"</span>,<span class="hljs-number">1e4</span>,(</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.kr=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.Mr(<span class="hljs-string">"Backend didn't respond within 10 seconds."</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Fr</span>(<span class="hljs-params"><span class="hljs-string">"Offline"</span></span>),<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>)))}<span class="hljs-params">Lr</span>(<span class="hljs-params">i</span>){"<span class="hljs-params">Online</span>"===<span class="hljs-params">this</span>.<span class="hljs-params">state</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Fr</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>):(<span class="hljs-params"><span class="hljs-keyword">this</span>.Nr++,<span class="hljs-keyword">this</span>.Nr&gt;=<span class="hljs-number">1</span>&amp;&amp;(<span class="hljs-keyword">this</span>.Br(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Mr</span>(<span class="hljs-params"><span class="hljs-string">`Connection failed 1 times. Most recent error: <span class="hljs-subst">${i.toString()}</span>`</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Fr</span>(<span class="hljs-params"><span class="hljs-string">"Offline"</span></span>)))}<span class="hljs-params">set</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">Br</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Nr</span>=0,"<span class="hljs-params">Online</span>"===<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.$r=!<span class="hljs-number">1</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Fr</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">Fr</span>(<span class="hljs-params">i</span>){<span class="hljs-params">i</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">state</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.state=i,<span class="hljs-keyword">this</span>.onlineStateHandler(i</span>))}<span class="hljs-params">Mr</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=`<span class="hljs-params">Could</span> <span class="hljs-params">not</span> <span class="hljs-params">reach</span> <span class="hljs-params">Cloud</span> <span class="hljs-params">Firestore</span> <span class="hljs-params">backend</span>. <span class="hljs-params">$</span>{<span class="hljs-params">i</span>}\<span class="hljs-params">nThis</span> <span class="hljs-params">typically</span> <span class="hljs-params">indicates</span> <span class="hljs-params">that</span> <span class="hljs-params">your</span> <span class="hljs-params">device</span> <span class="hljs-params">does</span> <span class="hljs-params">not</span> <span class="hljs-params">have</span> <span class="hljs-params">a</span> <span class="hljs-params">healthy</span> <span class="hljs-params">Internet</span> <span class="hljs-params">connection</span> <span class="hljs-params">at</span> <span class="hljs-params">the</span> <span class="hljs-params">moment</span>. <span class="hljs-params">The</span> <span class="hljs-params">client</span> <span class="hljs-params">will</span> <span class="hljs-params">operate</span> <span class="hljs-params">in</span> <span class="hljs-params">offline</span> <span class="hljs-params">mode</span> <span class="hljs-params">until</span> <span class="hljs-params">it</span> <span class="hljs-params">is</span> <span class="hljs-params">able</span> <span class="hljs-params">to</span> <span class="hljs-params">successfully</span> <span class="hljs-params">connect</span> <span class="hljs-params">to</span> <span class="hljs-params">the</span> <span class="hljs-params">backend</span>.`;<span class="hljs-params">this</span>.<span class="hljs-params">$r</span>?(<span class="hljs-params">ye(s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">$r</span>=!1):<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"OnlineStateTracker"</span>,s</span>)}<span class="hljs-params">Br</span><span class="hljs-params">()</span>{<span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">kr</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.kr.cancel(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">kr</span>=<span class="hljs-params">null</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">nm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">var</span> <span class="hljs-params">u</span>=<span class="hljs-params">this</span>;<span class="hljs-params">this</span>.<span class="hljs-params">localStore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">datastore</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">remoteSyncer</span>={},<span class="hljs-params">this</span>.<span class="hljs-params">Ur</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">qr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Kr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>,<span class="hljs-params">this</span>.<span class="hljs-params">jr</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">Qr</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Qr</span>.<span class="hljs-params">Ei</span>(<span class="hljs-params">h=&gt;{o.enqueueAndForget((<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">var</span> <span class="hljs-params">f</span>;<span class="hljs-params">Jt</span>(<span class="hljs-params">u</span>)&amp;&amp;(<span class="hljs-params">k(<span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"Restarting streams for network reachability change."</span></span>),<span class="hljs-params">yield</span>(<span class="hljs-params">f=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(v</span>){<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">M</span>(<span class="hljs-params">v</span>);<span class="hljs-params">w</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-number">4</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">w</span>),<span class="hljs-params">w</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>),<span class="hljs-params">w</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params"><span class="hljs-number">4</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">$s</span>(<span class="hljs-params">w</span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">v</span>){<span class="hljs-params">return</span> <span class="hljs-params">f</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">u</span>))}))}),<span class="hljs-params">this</span>.<span class="hljs-params">Wr</span>=<span class="hljs-params">new</span> <span class="hljs-params">tm</span>(<span class="hljs-params">o,a</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">$s</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Qa</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Qa</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Qa=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">Jt(r</span>))<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> r.jr</span>)<span class="hljs-params">yield</span> <span class="hljs-params">i</span>(<span class="hljs-params">!<span class="hljs-number">0</span></span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ya</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ya</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Ya=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> r.jr</span>)<span class="hljs-params">yield</span> <span class="hljs-params">i</span>(<span class="hljs-params">!<span class="hljs-number">1</span></span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">To</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">s</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i.targetId</span>)||(<span class="hljs-params">s.qr.set(i.targetId,i</span>),<span class="hljs-params">Xa</span>(<span class="hljs-params">s</span>)?<span class="hljs-params">Ja</span>(<span class="hljs-params">s</span>):<span class="hljs-params">Pi</span>(<span class="hljs-params">s</span>).<span class="hljs-params">cr</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">Wa</span>(<span class="hljs-params">s,i</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Zs</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Pi</span>(<span class="hljs-params">s</span>);<span class="hljs-params">s</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>.<span class="hljs-params">cr</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">Oh</span>(<span class="hljs-params">s,i</span>),0===<span class="hljs-params">s</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">size</span>&amp;&amp;(<span class="hljs-params">o.cr(</span>)?<span class="hljs-params">o</span>.<span class="hljs-params">lr</span><span class="hljs-params">()</span>:<span class="hljs-params">Jt</span>(<span class="hljs-params">s</span>)&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>))}<span class="hljs-params">function</span> <span class="hljs-params">Wa</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">Y</span>(<span class="hljs-params">i.targetId</span>),<span class="hljs-params">Pi</span>(<span class="hljs-params">r</span>).<span class="hljs-params">Ir</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Oh</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">Y</span>(<span class="hljs-params">i</span>),<span class="hljs-params">Pi</span>(<span class="hljs-params">r</span>).<span class="hljs-params">Ar</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ja</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Gr</span>=<span class="hljs-params">new</span> <span class="hljs-params">tp</span>(<span class="hljs-params">{getRemoteKeysForTarget:i=&gt;r.remoteSyncer.getRemoteKeysForTarget(i</span>),<span class="hljs-params">Et</span>:<span class="hljs-params">i</span>=&gt;</span>r.qr.get(i)||<span class="hljs-literal">null</span>}),Pi(r).start(),r.Wr.Or()}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Xa</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> Jt(r)&amp;&amp;!Pi(r).ar()&amp;&amp;r.qr.size&gt;<span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Jt</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===M(r).Kr.size}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Fh</span>(<span class="hljs-params">r</span>)</span>{r.Gr=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">im</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> ec.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ec</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">ec=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(i,s</span>)=&gt;</span>{Wa(r,i)})})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sm</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> tc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">tc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">Fh</span>(<span class="hljs-params">r</span>),<span class="hljs-params">Xa</span>(<span class="hljs-params">r</span>)?(<span class="hljs-params">r.Wr.Lr(i</span>),<span class="hljs-params">Ja</span>(<span class="hljs-params">r</span>)):<span class="hljs-params">r</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">rm</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">nc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">nc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">nc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r.Wr.set(<span class="hljs-string">"Online"</span></span>),<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Fl</span>&amp;&amp;2===<span class="hljs-params">i</span>.<span class="hljs-params">state</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">cause</span>)<span class="hljs-params">try</span>{<span class="hljs-params">yield</span>(<span class="hljs-params">o=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>.<span class="hljs-params">cause</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> h <span class="hljs-keyword">of</span> c.targetIds</span>)<span class="hljs-params">a</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">has</span>(<span class="hljs-params">h</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> a.remoteSyncer.rejectListen(h,u</span>),<span class="hljs-params">a</span>.<span class="hljs-params">qr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">h</span>),<span class="hljs-params">a</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">removeTarget</span>(<span class="hljs-params">h</span>))}),<span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">r,i</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"Failed to remove targets %s: %s "</span>,i.targetIds.join(<span class="hljs-string">","</span></span>),<span class="hljs-params">o</span>),<span class="hljs-params">yield</span> <span class="hljs-params">Eo</span>(<span class="hljs-params">r,o</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">i <span class="hljs-keyword">instanceof</span> lo?r.Gr.rt(i</span>):<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Ol</span>?<span class="hljs-params">r</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">ft</span>(<span class="hljs-params">i</span>):<span class="hljs-params">r</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">ct</span>(<span class="hljs-params">i</span>),!<span class="hljs-params">s</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">H.min(</span>)))<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">xh</span>(<span class="hljs-params">r.localStore</span>);<span class="hljs-params">s</span>.<span class="hljs-params">compareTo</span>(<span class="hljs-params">o</span>)&gt;=0&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">function</span>(a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">Gr</span>.<span class="hljs-params">_t</span>(<span class="hljs-params">c</span>);<span class="hljs-params">return</span> <span class="hljs-params">u</span>.<span class="hljs-params">targetChanges</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(h,f</span>)=&gt;</span>{<span class="hljs-keyword">if</span>(h.resumeToken.approximateByteSize()&gt;<span class="hljs-number">0</span>){<span class="hljs-keyword">const</span> v=a.qr.get(f);v&amp;&amp;a.qr.set(f,v.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach(<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>{<span class="hljs-keyword">const</span> f=a.qr.get(h);<span class="hljs-keyword">if</span>(!f)<span class="hljs-keyword">return</span>;a.qr.set(h,f.withResumeToken(Ae.EMPTY_BYTE_STRING,f.snapshotVersion)),Oh(a,h);<span class="hljs-keyword">const</span> v=<span class="hljs-keyword">new</span> Zt(f.target,h,<span class="hljs-number">1</span>,f.sequenceNumber);Wa(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(r,s))}<span class="hljs-keyword">catch</span>(o){k(<span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"Failed to raise snapshot:"</span>,o),<span class="hljs-keyword">yield</span> Eo(r,o)}<span class="hljs-keyword">var</span> o})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Eo</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">return</span> ic.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ic</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">ic=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!Cn(i</span>))<span class="hljs-params">throw</span> <span class="hljs-params">i</span>;<span class="hljs-params">r</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">r</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Offline"</span></span>),<span class="hljs-params">s</span>||(<span class="hljs-params">s=(</span>)=&gt;</span>xh(r.localStore)),r.asyncQueue.enqueueRetryable(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"Retrying IndexedDB access"</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">s</span><span class="hljs-params">()</span>,<span class="hljs-params">r</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">$s</span>(<span class="hljs-params">r</span>)}))})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Uh</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span><span class="hljs-params">()</span>.<span class="hljs-params">catch</span>(<span class="hljs-params">s=&gt;Eo(r,s,i</span>))}<span class="hljs-params">function</span> <span class="hljs-params">ki</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">sc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">sc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">sc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">s</span>=<span class="hljs-params">Xt</span>(<span class="hljs-params">i</span>);<span class="hljs-params">let</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>&gt;0?<span class="hljs-params">i</span>.<span class="hljs-params">Ur</span>[<span class="hljs-params">i</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>-1].<span class="hljs-params">batchId</span>:-1;<span class="hljs-params">for</span>(<span class="hljs-params">;om(i</span>);)<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Fp</span>(<span class="hljs-params">i.localStore,o</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===a</span>){0===<span class="hljs-params">i</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">lr</span><span class="hljs-params">()</span>;<span class="hljs-params">break</span>}<span class="hljs-params">o</span>=<span class="hljs-params">a</span>.<span class="hljs-params">batchId</span>,<span class="hljs-params">am</span>(<span class="hljs-params">i,a</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">yield</span> <span class="hljs-params">Eo</span>(<span class="hljs-params">i,a</span>)}<span class="hljs-params">Vh</span>(<span class="hljs-params">i</span>)&amp;&amp;<span class="hljs-params">Bh</span>(<span class="hljs-params">i</span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">om</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Jt</span>(<span class="hljs-params">r</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>&lt;10}<span class="hljs-params">function</span> <span class="hljs-params">am</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>);<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>);<span class="hljs-params">s</span>.<span class="hljs-params">cr</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">Pr</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">br</span>(<span class="hljs-params">i.mutations</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Vh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Jt</span>(<span class="hljs-params">r</span>)&amp;&amp;!<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>).<span class="hljs-params">ar</span><span class="hljs-params">()</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>&gt;0}<span class="hljs-params">function</span> <span class="hljs-params">Bh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>).<span class="hljs-params">start</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">cm</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">rc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">rc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">rc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>).<span class="hljs-params">Sr</span><span class="hljs-params">()</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">um</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">oc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">oc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">oc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> r.Ur</span>)<span class="hljs-params">i</span>.<span class="hljs-params">br</span>(<span class="hljs-params">s.mutations</span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">lm</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">ac</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">ac</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">ac=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">shift</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">xa</span>.<span class="hljs-params">from</span>(<span class="hljs-params">o,i,s</span>);<span class="hljs-params">yield</span> <span class="hljs-params">Uh</span>(<span class="hljs-params">r,(</span>)=&gt;</span>r.remoteSyncer.applySuccessfulWrite(a)),<span class="hljs-keyword">yield</span> ki(r)})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hm</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> cc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">cc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>;<span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>).<span class="hljs-params">Pr</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span>(s=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params">Pl(c=a.code</span>)&amp;&amp;<span class="hljs-params">c</span>!==<span class="hljs-params">I</span>.<span class="hljs-params">ABORTED</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">o</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">shift</span><span class="hljs-params">()</span>;<span class="hljs-params">Xt</span>(<span class="hljs-params">o</span>).<span class="hljs-params">hr</span><span class="hljs-params">()</span>,<span class="hljs-params">yield</span> <span class="hljs-params">Uh</span>(<span class="hljs-params">o,(</span>)=&gt;</span>o.remoteSyncer.rejectFailedWrite(u.batchId,a)),<span class="hljs-keyword">yield</span> ki(o)}<span class="hljs-keyword">var</span> c}),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,a</span>)</span>{<span class="hljs-keyword">return</span> s.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)})(r,i)),Vh(r)&amp;&amp;Bh(r)})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uc</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> lc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">lc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">i</span>?(<span class="hljs-params">s.Kr.<span class="hljs-keyword">delete</span>(<span class="hljs-number">2</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">$s</span>(<span class="hljs-params">s</span>)):<span class="hljs-params">i</span>||(<span class="hljs-params">s.Kr.add(<span class="hljs-number">2</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">s</span>),<span class="hljs-params">s</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>))})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Pi</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">zr</span>||(<span class="hljs-params">r.zr=<span class="hljs-keyword">function</span>(i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">Cr</span><span class="hljs-params">()</span>,<span class="hljs-params">new</span> <span class="hljs-params">Jp</span>(<span class="hljs-params">s,a.nr,a.credentials,a.N,o</span>)}(<span class="hljs-params">r.datastore,r.asyncQueue,{Si:im.bind(<span class="hljs-literal">null</span>,r</span>),<span class="hljs-params">Ci</span>:<span class="hljs-params">sm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,r</span>),<span class="hljs-params">Tr</span>:<span class="hljs-params">rm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,r</span>)}),<span class="hljs-params">r</span>.<span class="hljs-params">jr</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(s</span>){<span class="hljs-params">s</span>?(<span class="hljs-params">r.zr.hr(</span>),<span class="hljs-params">Xa</span>(<span class="hljs-params">r</span>)?<span class="hljs-params">Ja</span>(<span class="hljs-params">r</span>):<span class="hljs-params">r</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>)):(<span class="hljs-params"><span class="hljs-keyword">yield</span> r.zr.stop(</span>),<span class="hljs-params">Fh</span>(<span class="hljs-params">r</span>))});<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">()</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">zr</span>}<span class="hljs-params">function</span> <span class="hljs-params">Xt</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">Hr</span>||(<span class="hljs-params">r.Hr=<span class="hljs-keyword">function</span>(i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">Cr</span><span class="hljs-params">()</span>,<span class="hljs-params">new</span> <span class="hljs-params">Xp</span>(<span class="hljs-params">s,a.nr,a.credentials,a.N,o</span>)}(<span class="hljs-params">r.datastore,r.asyncQueue,{Si:cm.bind(<span class="hljs-literal">null</span>,r</span>),<span class="hljs-params">Ci</span>:<span class="hljs-params">hm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,r</span>),<span class="hljs-params">Vr</span>:<span class="hljs-params">um</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,r</span>),<span class="hljs-params">vr</span>:<span class="hljs-params">lm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,r</span>)}),<span class="hljs-params">r</span>.<span class="hljs-params">jr</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">var</span> <span class="hljs-params">i</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(s</span>){<span class="hljs-params">s</span>?(<span class="hljs-params">r.Hr.hr(</span>),<span class="hljs-params">yield</span> <span class="hljs-params">ki</span>(<span class="hljs-params">r</span>)):(<span class="hljs-params"><span class="hljs-keyword">yield</span> r.Hr.stop(</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;(<span class="hljs-params">k(<span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">`Stopping write stream with <span class="hljs-subst">${r.Ur.length}</span> pending writes`</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">Ur</span>=[]))});<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">()</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">Hr</span>}<span class="hljs-params">class</span> <span class="hljs-params">hc</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">timerId</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetTimeMs</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">op</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">removalCallback</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>,<span class="hljs-params">this</span>.<span class="hljs-params">then</span>=<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>.<span class="hljs-params">promise</span>.<span class="hljs-params">then</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.deferred.promise</span>),<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>.<span class="hljs-params">promise</span>.<span class="hljs-params">catch</span>(<span class="hljs-params">u=&gt;{}</span>)}<span class="hljs-params">static</span> <span class="hljs-params">createAndSchedule</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">Date</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>+<span class="hljs-params">o</span>,<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">hc</span>(<span class="hljs-params">i,s,u,a,c</span>);<span class="hljs-params">return</span> <span class="hljs-params">h</span>.<span class="hljs-params">start</span>(<span class="hljs-params">o</span>),<span class="hljs-params">h</span>}<span class="hljs-params">start</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">timerHandle</span>=<span class="hljs-params">setTimeout</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-keyword">this</span>.handleDelayElapsed(),i)}skipDelay(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleDelayElapsed()}cancel(i){<span class="hljs-literal">null</span>!==<span class="hljs-keyword">this</span>.timerHandle&amp;&amp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.clearTimeout(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>.<span class="hljs-params">reject</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> A(I.CANCELLED,<span class="hljs-string">"Operation cancelled"</span>+(i?<span class="hljs-string">": "</span>+i:<span class="hljs-string">""</span></span>))))}<span class="hljs-params">handleDelayElapsed</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-literal">null</span>!==<span class="hljs-keyword">this</span>.timerHandle?<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.clearTimeout(</span>),<span class="hljs-params">this</span>.<span class="hljs-params">op</span><span class="hljs-params">()</span>.<span class="hljs-params">then</span>(<span class="hljs-params">i=&gt;<span class="hljs-keyword">this</span>.deferred.resolve(i</span>))):<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>)}<span class="hljs-params">clearTimeout</span><span class="hljs-params">()</span>{<span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">timerHandle</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.removalCallback(<span class="hljs-keyword">this</span></span>),<span class="hljs-params">clearTimeout</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.timerHandle</span>),<span class="hljs-params">this</span>.<span class="hljs-params">timerHandle</span>=<span class="hljs-params">null</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Ni</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">ye(<span class="hljs-string">"AsyncQueue"</span>,<span class="hljs-string">`<span class="hljs-subst">${i}</span>: <span class="hljs-subst">${r}</span>`</span></span>),<span class="hljs-params">Cn</span>(<span class="hljs-params">r</span>))<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.UNAVAILABLE,<span class="hljs-string">`<span class="hljs-subst">${i}</span>: <span class="hljs-subst">${r}</span>`</span></span>);<span class="hljs-params">throw</span> <span class="hljs-params">r</span>}<span class="hljs-params">class</span> <span class="hljs-params">Li</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>=<span class="hljs-params">i</span>?(<span class="hljs-params">s,o</span>)=&gt;</span>i(s,o)||U.comparator(s.key,o.key):<span class="hljs-function">(<span class="hljs-params">s,o</span>)=&gt;</span>U.comparator(s.key,o.key),<span class="hljs-keyword">this</span>.keyedMap=ba(),<span class="hljs-keyword">this</span>.sortedSet=<span class="hljs-keyword">new</span> Ie(<span class="hljs-keyword">this</span>.comparator)}<span class="hljs-keyword">static</span> emptySet(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Li(i.comparator)}has(i){<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=<span class="hljs-keyword">this</span>.keyedMap.get(i)}<span class="hljs-keyword">get</span>(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.keyedMap.get(i)}first(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortedSet.minKey()}last(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortedSet.maxKey()}isEmpty(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortedSet.isEmpty()}indexOf(i){<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">this</span>.keyedMap.get(i);<span class="hljs-keyword">return</span> s?<span class="hljs-keyword">this</span>.sortedSet.indexOf(s):<span class="hljs-number">-1</span>}<span class="hljs-keyword">get</span> size(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortedSet.size}forEach(i){<span class="hljs-keyword">this</span>.sortedSet.inorderTraversal(<span class="hljs-function">(<span class="hljs-params">s,o</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params">i(s</span>),!1))}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i.key</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">copy</span>(<span class="hljs-params">s.keyedMap.insert(i.key,i</span>),<span class="hljs-params">s</span>.<span class="hljs-params">sortedSet</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">i,<span class="hljs-literal">null</span></span>))}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">copy</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.keyedMap.remove(i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">sortedSet</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">s</span>)):<span class="hljs-params">this</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!(i <span class="hljs-keyword">instanceof</span> Li</span>)||<span class="hljs-params">this</span>.<span class="hljs-params">size</span>!==<span class="hljs-params">i</span>.<span class="hljs-params">size</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">sortedSet</span>.<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">sortedSet</span>.<span class="hljs-params">getIterator</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params">;s.hasNext(</span>);){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>,<span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">getNext</span><span class="hljs-params">()</span>.<span class="hljs-params">key</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!a.isEqual(c</span>))<span class="hljs-params">return</span>!1}<span class="hljs-params">return</span>!0}<span class="hljs-params">toString</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{i.push(s.toString(</span>))}),0===<span class="hljs-params">i</span>.<span class="hljs-params">length</span>?"<span class="hljs-params">DocumentSet</span> <span class="hljs-params">()</span>":"<span class="hljs-params">DocumentSet</span> (<span class="hljs-params">\n  <span class="hljs-string">"+i.join("</span>  \n<span class="hljs-string">")+"</span>\n</span>)"}<span class="hljs-params">copy</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Li</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">comparator</span>=<span class="hljs-params">this</span>.<span class="hljs-params">comparator</span>,<span class="hljs-params">o</span>.<span class="hljs-params">keyedMap</span>=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>.<span class="hljs-params">sortedSet</span>=<span class="hljs-params">s</span>,<span class="hljs-params">o</span>}}<span class="hljs-params">class</span> <span class="hljs-params">qh</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>)}<span class="hljs-params">track</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">doc</span>.<span class="hljs-params">key</span>,<span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>);<span class="hljs-params">o</span>?0!==<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;3===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,i</span>):3===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;1!==<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,{type:o.type,doc:i.doc}</span>):2===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;2===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,{type:<span class="hljs-number">2</span>,doc:i.doc}</span>):2===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;0===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,{type:<span class="hljs-number">0</span>,doc:i.doc}</span>):1===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;0===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">s</span>):1===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;2===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,{type:<span class="hljs-number">1</span>,doc:o.doc}</span>):0===<span class="hljs-params">i</span>.<span class="hljs-params">type</span>&amp;&amp;1===<span class="hljs-params">o</span>.<span class="hljs-params">type</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,{type:<span class="hljs-number">2</span>,doc:i.doc}</span>):<span class="hljs-params">V</span><span class="hljs-params">()</span>:<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,i</span>)}<span class="hljs-params">Yr</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">Jr</span>.<span class="hljs-params">inorderTraversal</span>(<span class="hljs-params">(s,o</span>)=&gt;</span>{i.push(o)}),i}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mi</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a,c,u,h,f){<span class="hljs-keyword">this</span>.query=i,<span class="hljs-keyword">this</span>.docs=s,<span class="hljs-keyword">this</span>.oldDocs=o,<span class="hljs-keyword">this</span>.docChanges=a,<span class="hljs-keyword">this</span>.mutatedKeys=c,<span class="hljs-keyword">this</span>.fromCache=u,<span class="hljs-keyword">this</span>.syncStateChanged=h,<span class="hljs-keyword">this</span>.excludesMetadataChanges=f}<span class="hljs-keyword">static</span> fromInitialDocuments(i,s,o,a){<span class="hljs-keyword">const</span> c=[];<span class="hljs-keyword">return</span> s.forEach(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span>{c.push({<span class="hljs-attr">type</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">doc</span>:u})}),<span class="hljs-keyword">new</span> Mi(i,s,Li.emptySet(s),c,o,a,!<span class="hljs-number">0</span>,!<span class="hljs-number">1</span>)}<span class="hljs-keyword">get</span> hasPendingWrites(){<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.mutatedKeys.isEmpty()}isEqual(i){<span class="hljs-keyword">if</span>(!<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.fromCache===i.fromCache&amp;&amp;<span class="hljs-keyword">this</span>.syncStateChanged===i.syncStateChanged&amp;&amp;<span class="hljs-keyword">this</span>.mutatedKeys.isEqual(i.mutatedKeys</span>)&amp;&amp;<span class="hljs-params">Ps</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query,i.query</span>)&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.docs</span>)&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">oldDocs</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.oldDocs</span>)))<span class="hljs-params">return</span>!1;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">docChanges</span>,<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">docChanges</span>;<span class="hljs-params">if</span>(<span class="hljs-params">s.length!==o.length</span>)<span class="hljs-params">return</span>!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>;a&lt;s.length;a++</span>)<span class="hljs-params">if</span>(<span class="hljs-params">s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc</span>))<span class="hljs-params">return</span>!1;<span class="hljs-params">return</span>!0}}<span class="hljs-params">class</span> <span class="hljs-params">dm</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">Xr</span>=<span class="hljs-params">void</span> 0,<span class="hljs-params">this</span>.<span class="hljs-params">listeners</span>=[]}}<span class="hljs-params">class</span> <span class="hljs-params">fm</span>{<span class="hljs-params">constructor</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">queries</span>=<span class="hljs-params">new</span> <span class="hljs-params">Di</span>(<span class="hljs-params">i=&gt;yl(i</span>),<span class="hljs-params">Ps</span>),<span class="hljs-params">this</span>.<span class="hljs-params">onlineState</span>="<span class="hljs-params">Unknown</span>",<span class="hljs-params">this</span>.<span class="hljs-params">Zr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>}}<span class="hljs-params">function</span> <span class="hljs-params">dc</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">fc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">fc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">fc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">query</span>;<span class="hljs-params">let</span> <span class="hljs-params">a</span>=!1,<span class="hljs-params">c</span>=<span class="hljs-params">s</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o</span>);<span class="hljs-params">if</span>(<span class="hljs-params">c||(a=!<span class="hljs-number">0</span>,c=<span class="hljs-keyword">new</span> dm</span>),<span class="hljs-params">a</span>)<span class="hljs-params">try</span>{<span class="hljs-params">c</span>.<span class="hljs-params">Xr</span>=<span class="hljs-params">yield</span> <span class="hljs-params">s</span>.<span class="hljs-params">onListen</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">u</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">u,<span class="hljs-string">`Initialization of query '<span class="hljs-subst">${_a(i.query)}</span>' failed`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">void</span> <span class="hljs-params">i</span>.<span class="hljs-params">onError</span>(<span class="hljs-params">h</span>)}<span class="hljs-params">s</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o,c</span>),<span class="hljs-params">c</span>.<span class="hljs-params">listeners</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">i</span>.<span class="hljs-params">eo</span>(<span class="hljs-params">s.onlineState</span>),<span class="hljs-params">c</span>.<span class="hljs-params">Xr</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">no</span>(<span class="hljs-params">c.Xr</span>)&amp;&amp;<span class="hljs-params">gc</span>(<span class="hljs-params">s</span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">pc</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">mc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">mc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">mc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">query</span>;<span class="hljs-params">let</span> <span class="hljs-params">a</span>=!1;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">s</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o</span>);<span class="hljs-params">if</span>(<span class="hljs-params">c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">c</span>.<span class="hljs-params">listeners</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">i</span>);<span class="hljs-params">u</span>&gt;=0&amp;&amp;(<span class="hljs-params">c.listeners.splice(u,<span class="hljs-number">1</span></span>),<span class="hljs-params">a</span>=0===<span class="hljs-params">c</span>.<span class="hljs-params">listeners</span>.<span class="hljs-params">length</span>)}<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">o</span>),<span class="hljs-params">s</span>.<span class="hljs-params">onUnlisten</span>(<span class="hljs-params">o</span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">pm</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">let</span> <span class="hljs-params">o</span>=!1;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">s</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">get</span>(<span class="hljs-params">a.query</span>);<span class="hljs-params">if</span>(<span class="hljs-params">u</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> h <span class="hljs-keyword">of</span> u.listeners</span>)<span class="hljs-params">h</span>.<span class="hljs-params">no</span>(<span class="hljs-params">a</span>)&amp;&amp;(<span class="hljs-params">o=!<span class="hljs-number">0</span></span>);<span class="hljs-params">u</span>.<span class="hljs-params">Xr</span>=<span class="hljs-params">a</span>}}<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">gc</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">function</span> <span class="hljs-params">mm</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a</span>)<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> a.listeners</span>)<span class="hljs-params">c</span>.<span class="hljs-params">onError</span>(<span class="hljs-params">s</span>);<span class="hljs-params">o</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">gc</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Zr</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">i=&gt;{i.next(</span>)})}<span class="hljs-params">class</span> <span class="hljs-params">yc</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">so</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">io</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">ro</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">onlineState</span>="<span class="hljs-params">Unknown</span>",<span class="hljs-params">this</span>.<span class="hljs-params">options</span>=<span class="hljs-params">o</span>||{}}<span class="hljs-params">no</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.options.includeMetadataChanges</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i.docChanges</span>)3!==<span class="hljs-params">a</span>.<span class="hljs-params">type</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">push</span>(<span class="hljs-params">a</span>);<span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">Mi</span>(<span class="hljs-params">i.query,i.docs,i.oldDocs,o,i.mutatedKeys,i.fromCache,i.syncStateChanged,!<span class="hljs-number">0</span></span>)}<span class="hljs-params">let</span> <span class="hljs-params">s</span>=!1;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">io</span>?<span class="hljs-params">this</span>.<span class="hljs-params">oo</span>(<span class="hljs-params">i</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.so.next(i</span>),<span class="hljs-params">s</span>=!0):<span class="hljs-params">this</span>.<span class="hljs-params">ao</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.onlineState</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.co(i</span>),<span class="hljs-params">s</span>=!0),<span class="hljs-params">this</span>.<span class="hljs-params">ro</span>=<span class="hljs-params">i</span>,<span class="hljs-params">s</span>}<span class="hljs-params">onError</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">so</span>.<span class="hljs-params">error</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">eo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">onlineState</span>=<span class="hljs-params">i</span>;<span class="hljs-params">let</span> <span class="hljs-params">s</span>=!1;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ro</span>&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">io</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">ao</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.ro,i</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.co(<span class="hljs-keyword">this</span>.ro</span>),<span class="hljs-params">s</span>=!0),<span class="hljs-params">s</span>}<span class="hljs-params">ao</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span>!<span class="hljs-params">i</span>.<span class="hljs-params">fromCache</span>||!(<span class="hljs-params"><span class="hljs-keyword">this</span>.options.uo&amp;&amp;<span class="hljs-string">"Offline"</span>!==s||i.docs.isEmpty(</span>)&amp;&amp;"<span class="hljs-params">Offline</span>"!==<span class="hljs-params">s</span>)}<span class="hljs-params">oo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">docChanges</span>.<span class="hljs-params">length</span>&gt;0||!!(<span class="hljs-params">i.syncStateChanged||<span class="hljs-keyword">this</span>.ro&amp;&amp;<span class="hljs-keyword">this</span>.ro.hasPendingWrites!==i.hasPendingWrites</span>)&amp;&amp;!0===<span class="hljs-params">this</span>.<span class="hljs-params">options</span>.<span class="hljs-params">includeMetadataChanges</span>}<span class="hljs-params">co</span>(<span class="hljs-params">i</span>){<span class="hljs-params">i</span>=<span class="hljs-params">Mi</span>.<span class="hljs-params">fromInitialDocuments</span>(<span class="hljs-params">i.query,i.docs,i.mutatedKeys,i.fromCache</span>),<span class="hljs-params">this</span>.<span class="hljs-params">io</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">so</span>.<span class="hljs-params">next</span>(<span class="hljs-params">i</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">gm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">payload</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">byteLength</span>=<span class="hljs-params">s</span>}<span class="hljs-params">ho</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>"<span class="hljs-params">metadata</span>"<span class="hljs-params">in</span> <span class="hljs-params">this</span>.<span class="hljs-params">payload</span>}}<span class="hljs-params">class</span> <span class="hljs-params">zh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">i</span>}<span class="hljs-params">zn</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">vt</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,i</span>)}<span class="hljs-params">Hn</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">metadata</span>.<span class="hljs-params">exists</span>?<span class="hljs-params">Kl</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N,i.<span class="hljs-built_in">document</span>,!<span class="hljs-number">1</span></span>):<span class="hljs-params">ae</span>.<span class="hljs-params">newNoDocument</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.zn(i.metadata.name</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Jn</span>(<span class="hljs-params">i.metadata.readTime</span>))}<span class="hljs-params">Jn</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">ke</span>(<span class="hljs-params">i</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">ym</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">lo</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">localStore</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">N</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">queries</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">documents</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">progress</span>=<span class="hljs-params">Gh</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">fo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">progress</span>.<span class="hljs-params">bytesLoaded</span>+=<span class="hljs-params">i</span>.<span class="hljs-params">byteLength</span>;<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">progress</span>.<span class="hljs-params">documentsLoaded</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">namedQuery</span>?<span class="hljs-params">this</span>.<span class="hljs-params">queries</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i.payload.namedQuery</span>):<span class="hljs-params">i</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">documentMetadata</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>.documents.push({metadata:i.payload.documentMetadata}</span>),<span class="hljs-params">i</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">documentMetadata</span>.<span class="hljs-params">exists</span>||++<span class="hljs-params">s</span>):<span class="hljs-params">i</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">document</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.documents[<span class="hljs-keyword">this</span>.documents.length<span class="hljs-number">-1</span>].<span class="hljs-built_in">document</span>=i.payload.<span class="hljs-built_in">document</span>,++s</span>),<span class="hljs-params">s</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">progress</span>.<span class="hljs-params">documentsLoaded</span>?(<span class="hljs-params"><span class="hljs-keyword">this</span>.progress.documentsLoaded=s,<span class="hljs-built_in">Object</span>.assign({},<span class="hljs-keyword">this</span>.progress</span>)):<span class="hljs-params">null</span>}<span class="hljs-params">wo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">zh</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.N</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i</span>)<span class="hljs-params">if</span>(<span class="hljs-params">a.metadata.queries</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">zn</span>(<span class="hljs-params">a.metadata.name</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> a.metadata.queries</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=(<span class="hljs-params">s.get(u</span>)||<span class="hljs-params">te</span><span class="hljs-params">()</span>).<span class="hljs-params">add</span>(<span class="hljs-params">c</span>);<span class="hljs-params">s</span>.<span class="hljs-params">set</span>(<span class="hljs-params">u,h</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">s</span>}<span class="hljs-params">complete</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ba</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}(<span class="hljs-params">i.localStore,<span class="hljs-keyword">new</span> zh(i.N</span>),<span class="hljs-params">i</span>.<span class="hljs-params">documents</span>,<span class="hljs-params">i</span>.<span class="hljs-params">lo</span>.<span class="hljs-params">id</span>),<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">wo</span>(<span class="hljs-params">i.documents</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i.queries</span>)<span class="hljs-params">yield</span> <span class="hljs-params">Bp</span>(<span class="hljs-params">i.localStore,a,o.get(a.name</span>));<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">progress</span>.<span class="hljs-params">taskState</span>="<span class="hljs-params">Success</span>",<span class="hljs-params">new</span> <span class="hljs-params">Np</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span>.assign({},i.progress</span>),<span class="hljs-params">s</span>)})<span class="hljs-params">()</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Gh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>{<span class="hljs-params">taskState</span>:"<span class="hljs-params">Running</span>",<span class="hljs-params">documentsLoaded</span>:0,<span class="hljs-params">bytesLoaded</span>:0,<span class="hljs-params">totalDocuments</span>:<span class="hljs-params">r</span>.<span class="hljs-params">totalDocuments</span>,<span class="hljs-params">totalBytes</span>:<span class="hljs-params">r</span>.<span class="hljs-params">totalBytes</span>}}<span class="hljs-params">class</span> <span class="hljs-params">jh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Hh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Kh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_o</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mo</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">current</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">yo</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mutatedKeys</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">po</span>=<span class="hljs-params">_l</span>(<span class="hljs-params">i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>=<span class="hljs-params">new</span> <span class="hljs-params">Li</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.po</span>)}<span class="hljs-params">get</span> <span class="hljs-params">To</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_o</span>}<span class="hljs-params">Io</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>.<span class="hljs-params">Ao</span>:<span class="hljs-params">new</span> <span class="hljs-params">qh</span>,<span class="hljs-params">a</span>=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>.<span class="hljs-params">Eo</span>:<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>;<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>.<span class="hljs-params">mutatedKeys</span>:<span class="hljs-params">this</span>.<span class="hljs-params">mutatedKeys</span>,<span class="hljs-params">u</span>=<span class="hljs-params">a</span>,<span class="hljs-params">h</span>=!1;<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">io</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query</span>)&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">size</span>===<span class="hljs-params">this</span>.<span class="hljs-params">query</span>.<span class="hljs-params">limit</span>?<span class="hljs-params">a</span>.<span class="hljs-params">last</span><span class="hljs-params">()</span>:<span class="hljs-params">null</span>,<span class="hljs-params">v</span>=<span class="hljs-params">so</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query</span>)&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">size</span>===<span class="hljs-params">this</span>.<span class="hljs-params">query</span>.<span class="hljs-params">limit</span>?<span class="hljs-params">a</span>.<span class="hljs-params">first</span><span class="hljs-params">()</span>:<span class="hljs-params">null</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i.inorderTraversal((w,T</span>)=&gt;</span>{<span class="hljs-keyword">const</span> S=a.get(w),C=Ns(<span class="hljs-keyword">this</span>.query,T)?T:<span class="hljs-literal">null</span>,P=!!S&amp;&amp;<span class="hljs-keyword">this</span>.mutatedKeys.has(S.key),B=!!C&amp;&amp;<span class="hljs-function">(<span class="hljs-params">C.hasLocalMutations||<span class="hljs-keyword">this</span>.mutatedKeys.has(C.key</span>)&amp;&amp;<span class="hljs-params">C</span>.<span class="hljs-params">hasCommittedMutations</span>);<span class="hljs-params">let</span> <span class="hljs-params">j</span>=!1;<span class="hljs-params">S</span>&amp;&amp;<span class="hljs-params">C</span>?<span class="hljs-params">S</span>.<span class="hljs-params">data</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">C.data</span>)?<span class="hljs-params">P</span>!==<span class="hljs-params">B</span>&amp;&amp;(<span class="hljs-params">o.track({type:<span class="hljs-number">3</span>,doc:C}</span>),<span class="hljs-params">j</span>=!0):<span class="hljs-params">this</span>.<span class="hljs-params">Ro</span>(<span class="hljs-params">S,C</span>)||(<span class="hljs-params">o.track({type:<span class="hljs-number">2</span>,doc:C}</span>),<span class="hljs-params">j</span>=!0,(<span class="hljs-params">f&amp;&amp;<span class="hljs-keyword">this</span>.po(C,f</span>)&gt;0||<span class="hljs-params">v</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">po</span>(<span class="hljs-params">C,v</span>)&lt;0)&amp;&amp;(<span class="hljs-params">h=!<span class="hljs-number">0</span></span>)):!<span class="hljs-params">S</span>&amp;&amp;<span class="hljs-params">C</span>?(<span class="hljs-params">o.track({type:<span class="hljs-number">0</span>,doc:C}</span>),<span class="hljs-params">j</span>=!0):<span class="hljs-params">S</span>&amp;&amp;!<span class="hljs-params">C</span>&amp;&amp;(<span class="hljs-params">o.track({type:<span class="hljs-number">1</span>,doc:S}</span>),<span class="hljs-params">j</span>=!0,(<span class="hljs-params">f||v</span>)&amp;&amp;(<span class="hljs-params">h=!<span class="hljs-number">0</span></span>)),<span class="hljs-params">j</span>&amp;&amp;(<span class="hljs-params">C?(u=u.add(C</span>),<span class="hljs-params">c</span>=<span class="hljs-params">B</span>?<span class="hljs-params">c</span>.<span class="hljs-params">add</span>(<span class="hljs-params">w</span>):<span class="hljs-params">c</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">w</span>)):(<span class="hljs-params">u=u.<span class="hljs-keyword">delete</span>(w</span>),<span class="hljs-params">c</span>=<span class="hljs-params">c</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">w</span>)))}),<span class="hljs-params">io</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query</span>)||<span class="hljs-params">so</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query</span>))<span class="hljs-params">for</span>(<span class="hljs-params">;u.size&gt;<span class="hljs-keyword">this</span>.query.limit;</span>){<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">io</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query</span>)?<span class="hljs-params">u</span>.<span class="hljs-params">last</span><span class="hljs-params">()</span>:<span class="hljs-params">u</span>.<span class="hljs-params">first</span><span class="hljs-params">()</span>;<span class="hljs-params">u</span>=<span class="hljs-params">u</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">w.key</span>),<span class="hljs-params">c</span>=<span class="hljs-params">c</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">w.key</span>),<span class="hljs-params">o</span>.<span class="hljs-params">track</span>(<span class="hljs-params">{type:<span class="hljs-number">1</span>,doc:w}</span>)}<span class="hljs-params">return</span>{<span class="hljs-params">Eo</span>:<span class="hljs-params">u</span>,<span class="hljs-params">Ao</span>:<span class="hljs-params">o</span>,<span class="hljs-params">Ln</span>:<span class="hljs-params">h</span>,<span class="hljs-params">mutatedKeys</span>:<span class="hljs-params">c</span>}}<span class="hljs-params">Ro</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">hasLocalMutations</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">hasCommittedMutations</span>&amp;&amp;!<span class="hljs-params">s</span>.<span class="hljs-params">hasLocalMutations</span>}<span class="hljs-params">applyChanges</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>;<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>=<span class="hljs-params">i</span>.<span class="hljs-params">Eo</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mutatedKeys</span>=<span class="hljs-params">i</span>.<span class="hljs-params">mutatedKeys</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">i</span>.<span class="hljs-params">Ao</span>.<span class="hljs-params">Yr</span><span class="hljs-params">()</span>;<span class="hljs-params">c</span>.<span class="hljs-params">sort</span>(<span class="hljs-params">(v,w</span>)=&gt;</span><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">T,S</span>)</span>{<span class="hljs-keyword">const</span> C=<span class="hljs-function"><span class="hljs-params">P</span>=&gt;</span>{<span class="hljs-keyword">switch</span>(P){<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span> V()}};<span class="hljs-keyword">return</span> C(T)-C(S)}(v.type,w.type)||<span class="hljs-keyword">this</span>.po(v.doc,w.doc)),<span class="hljs-keyword">this</span>.Po(o);<span class="hljs-keyword">const</span> u=s?<span class="hljs-keyword">this</span>.bo():[],h=<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.yo.size&amp;&amp;<span class="hljs-keyword">this</span>.current?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>,f=h!==<span class="hljs-keyword">this</span>.mo;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mo=h,<span class="hljs-number">0</span>!==c.length||f?{<span class="hljs-attr">snapshot</span>:<span class="hljs-keyword">new</span> Mi(<span class="hljs-keyword">this</span>.query,i.Eo,a,c,i.mutatedKeys,<span class="hljs-number">0</span>===h,f,!<span class="hljs-number">1</span>),<span class="hljs-attr">vo</span>:u}:{<span class="hljs-attr">vo</span>:u}}eo(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.current&amp;&amp;<span class="hljs-string">"Offline"</span>===i?<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.current=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.applyChanges({Eo:<span class="hljs-keyword">this</span>.Eo,Ao:<span class="hljs-keyword">new</span> qh,mutatedKeys:<span class="hljs-keyword">this</span>.mutatedKeys,Ln:!<span class="hljs-number">1</span>},!<span class="hljs-number">1</span></span>)):{<span class="hljs-params">vo</span>:[]}}<span class="hljs-params">Vo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>!<span class="hljs-params">this</span>.<span class="hljs-params">_o</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)&amp;&amp;!!<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i</span>)&amp;&amp;!<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>).<span class="hljs-params">hasLocalMutations</span>}<span class="hljs-params">Po</span>(<span class="hljs-params">i</span>){<span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">i.addedDocuments.forEach(s=&gt;<span class="hljs-keyword">this</span>._o=<span class="hljs-keyword">this</span>._o.add(s</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">modifiedDocuments</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{}</span>),<span class="hljs-params">i</span>.<span class="hljs-params">removedDocuments</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;<span class="hljs-keyword">this</span>._o=<span class="hljs-keyword">this</span>._o.<span class="hljs-keyword">delete</span>(s</span>)),<span class="hljs-params">this</span>.<span class="hljs-params">current</span>=<span class="hljs-params">i</span>.<span class="hljs-params">current</span>)}<span class="hljs-params">bo</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.current</span>)<span class="hljs-params">return</span>[];<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">yo</span>;<span class="hljs-params">this</span>.<span class="hljs-params">yo</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Eo</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">this</span>.Vo(o.key</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>.yo=<span class="hljs-keyword">this</span>.yo.add(o.key</span>))});<span class="hljs-params">const</span> <span class="hljs-params">s</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{<span class="hljs-keyword">this</span>.yo.has(o</span>)||<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Hh(o</span>))}),<span class="hljs-params">this</span>.<span class="hljs-params">yo</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{i.has(o</span>)||<span class="hljs-params">s</span>.<span class="hljs-params">push</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> jh(o</span>))}),<span class="hljs-params">s</span>}<span class="hljs-params">So</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">Gn</span>,<span class="hljs-params">this</span>.<span class="hljs-params">yo</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">Io</span>(<span class="hljs-params">i.documents</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">applyChanges</span>(<span class="hljs-params">s,!<span class="hljs-number">0</span></span>)}<span class="hljs-params">Do</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">Mi</span>.<span class="hljs-params">fromInitialDocuments</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.Eo,<span class="hljs-keyword">this</span>.mutatedKeys,<span class="hljs-number">0</span>===<span class="hljs-keyword">this</span>.mo</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">_m</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">targetId</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">view</span>=<span class="hljs-params">o</span>}}<span class="hljs-params">class</span> <span class="hljs-params">vm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">key</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Co</span>=!1}}<span class="hljs-params">class</span> <span class="hljs-params">wm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c,u</span>){<span class="hljs-params">this</span>.<span class="hljs-params">localStore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">remoteStore</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">eventManager</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">sharedClientState</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">currentUser</span>=<span class="hljs-params">c</span>,<span class="hljs-params">this</span>.<span class="hljs-params">maxConcurrentLimboResolutions</span>=<span class="hljs-params">u</span>,<span class="hljs-params">this</span>.<span class="hljs-params">No</span>={},<span class="hljs-params">this</span>.<span class="hljs-params">xo</span>=<span class="hljs-params">new</span> <span class="hljs-params">Di</span>(<span class="hljs-params">h=&gt;yl(h</span>),<span class="hljs-params">Ps</span>),<span class="hljs-params">this</span>.<span class="hljs-params">ko</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">this</span>.<span class="hljs-params">$o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Oo</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>),<span class="hljs-params">this</span>.<span class="hljs-params">Fo</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Mo</span>=<span class="hljs-params">new</span> <span class="hljs-params">za</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Lo</span>={},<span class="hljs-params">this</span>.<span class="hljs-params">Bo</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Uo</span>=<span class="hljs-params">An</span>.<span class="hljs-params">ie</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">onlineState</span>="<span class="hljs-params">Unknown</span>",<span class="hljs-params">this</span>.<span class="hljs-params">qo</span>=<span class="hljs-params">void</span> 0}<span class="hljs-params">get</span> <span class="hljs-params">isPrimaryClient</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>!0===<span class="hljs-params">this</span>.<span class="hljs-params">qo</span>}}<span class="hljs-params">function</span> <span class="hljs-params">bm</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">_c</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">_c</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">_c=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">qc</span>(<span class="hljs-params">r</span>);<span class="hljs-params">let</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">s</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">c</span>)<span class="hljs-params">o</span>=<span class="hljs-params">c</span>.<span class="hljs-params">targetId</span>,<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">addLocalQueryTarget</span>(<span class="hljs-params">o</span>),<span class="hljs-params">a</span>=<span class="hljs-params">c</span>.<span class="hljs-params">view</span>.<span class="hljs-params">Do</span><span class="hljs-params">()</span>;<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ci</span>(<span class="hljs-params">s.localStore,at(i</span>)),<span class="hljs-params">h</span>=<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">addLocalQueryTarget</span>(<span class="hljs-params">u.targetId</span>);<span class="hljs-params">o</span>=<span class="hljs-params">u</span>.<span class="hljs-params">targetId</span>,<span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">vc</span>(<span class="hljs-params">s,i,o,<span class="hljs-string">"current"</span>===h</span>),<span class="hljs-params">s</span>.<span class="hljs-params">isPrimaryClient</span>&amp;&amp;<span class="hljs-params">To</span>(<span class="hljs-params">s.remoteStore,u</span>)}<span class="hljs-params">return</span> <span class="hljs-params">a</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">vc</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">wc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">wc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">wc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s,o</span>){<span class="hljs-params">r</span>.<span class="hljs-params">Ko</span>=(<span class="hljs-params">w,T,S</span>)=&gt;</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">C=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(P,B,j,de</span>){<span class="hljs-params">let</span> <span class="hljs-params">Ze</span>=<span class="hljs-params">B</span>.<span class="hljs-params">view</span>.<span class="hljs-params">Io</span>(<span class="hljs-params">j</span>);<span class="hljs-params">Ze</span>.<span class="hljs-params">Ln</span>&amp;&amp;(<span class="hljs-params">Ze=<span class="hljs-keyword">yield</span> _o(P.localStore,B.query,!<span class="hljs-number">1</span></span>).<span class="hljs-params">then</span>(<span class="hljs-params">({documents:ir}</span>)=&gt;</span>B.view.Io(ir,Ze)));<span class="hljs-keyword">const</span> Mt=de&amp;&amp;de.targetChanges.get(B.targetId),pt=B.view.applyChanges(Ze,P.isPrimaryClient,Mt);<span class="hljs-keyword">return</span> Ac(P,B.targetId,pt.vo),pt.snapshot}),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">P,B,j,de</span>)</span>{<span class="hljs-keyword">return</span> C.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)})(r,w,T,S);<span class="hljs-keyword">var</span> C};<span class="hljs-keyword">const</span> a=<span class="hljs-keyword">yield</span> _o(r.localStore,i,!<span class="hljs-number">0</span>),c=<span class="hljs-keyword">new</span> Kh(i,a.Gn),u=c.Io(a.documents),h=Us.createSynthesizedTargetChangeForCurrentChange(s,o&amp;&amp;<span class="hljs-string">"Offline"</span>!==r.onlineState),f=c.applyChanges(u,r.isPrimaryClient,h);Ac(r,s,f.vo);<span class="hljs-keyword">const</span> v=<span class="hljs-keyword">new</span> _m(i,s,c);<span class="hljs-keyword">return</span> r.xo.set(i,v),r.ko.has(s)?r.ko.get(s).push(i):r.ko.set(s,[i]),f.snapshot})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Tm</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> bc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">bc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>),<span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o.targetId</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a.length&gt;<span class="hljs-number">1</span></span>)<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o.targetId,a.filter(c=&gt;!Ps(c,i</span>))),<span class="hljs-params">void</span> <span class="hljs-params">s</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>);<span class="hljs-params">s</span>.<span class="hljs-params">isPrimaryClient</span>?(<span class="hljs-params">s.sharedClientState.removeLocalQueryTarget(o.targetId</span>),<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">isActiveQueryTarget</span>(<span class="hljs-params">o.targetId</span>)||(<span class="hljs-params"><span class="hljs-keyword">yield</span> Ri(s.localStore,o.targetId,!<span class="hljs-number">1</span></span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>{s.sharedClientState.clearQueryState(o.targetId),Zs(s.remoteStore,o.targetId),Oi(s,o.targetId)}).catch(kn))):<span class="hljs-function">(<span class="hljs-params">Oi(s,o.targetId</span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ri</span>(<span class="hljs-params">s.localStore,o.targetId,!<span class="hljs-number">0</span></span>))})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Tc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Tc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">zc</span>(<span class="hljs-params">r</span>);<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">c,u</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">M</span>(<span class="hljs-params">c</span>),<span class="hljs-params">f</span>=<span class="hljs-params">Re</span>.<span class="hljs-params">now</span><span class="hljs-params">()</span>,<span class="hljs-params">v</span>=<span class="hljs-params">u</span>.<span class="hljs-params">reduce</span>(<span class="hljs-params">(T,S</span>)=&gt;</span>T.add(S.key),te());<span class="hljs-keyword">let</span> w;<span class="hljs-keyword">return</span> h.persistence.runTransaction(<span class="hljs-string">"Locally write mutations"</span>,<span class="hljs-string">"readwrite"</span>,T=&gt;h.Qn.bn(T,v).next(<span class="hljs-function"><span class="hljs-params">S</span>=&gt;</span>{w=S;<span class="hljs-keyword">const</span> C=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> P <span class="hljs-keyword">of</span> u){<span class="hljs-keyword">const</span> B=Zf(P,w.get(P.key));<span class="hljs-literal">null</span>!=B&amp;&amp;C.push(<span class="hljs-keyword">new</span> Kt(P.key,B,ll(B.value.mapValue),ve.exists(!<span class="hljs-number">0</span>)))}<span class="hljs-keyword">return</span> h.In.addMutationBatch(T,f,C,u)})).then(<span class="hljs-function"><span class="hljs-params">T</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">T.applyToLocalDocumentSet(w</span>),{<span class="hljs-params">batchId</span>:<span class="hljs-params">T</span>.<span class="hljs-params">batchId</span>,<span class="hljs-params">changes</span>:<span class="hljs-params">w</span>}))}(<span class="hljs-params">o.localStore,i</span>);<span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">addPendingMutation</span>(<span class="hljs-params">a.batchId</span>),<span class="hljs-params">function</span>(<span class="hljs-params">c,u,h</span>){<span class="hljs-params">let</span> <span class="hljs-params">f</span>=<span class="hljs-params">c</span>.<span class="hljs-params">Lo</span>[<span class="hljs-params">c</span>.<span class="hljs-params">currentUser</span>.<span class="hljs-params">toKey</span><span class="hljs-params">()</span>];<span class="hljs-params">f</span>||(<span class="hljs-params">f=<span class="hljs-keyword">new</span> Ie($</span>)),<span class="hljs-params">f</span>=<span class="hljs-params">f</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">u,h</span>),<span class="hljs-params">c</span>.<span class="hljs-params">Lo</span>[<span class="hljs-params">c</span>.<span class="hljs-params">currentUser</span>.<span class="hljs-params">toKey</span><span class="hljs-params">()</span>]=<span class="hljs-params">f</span>}(<span class="hljs-params">o,a.batchId,s</span>),<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">o,a.changes</span>),<span class="hljs-params">yield</span> <span class="hljs-params">ki</span>(<span class="hljs-params">o.remoteStore</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">a,<span class="hljs-string">"Failed to persist write"</span></span>);<span class="hljs-params">s</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">c</span>)}})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">$h</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ec</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ec</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Ec=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Op</span>(<span class="hljs-params">s.localStore,i</span>);<span class="hljs-params">i</span>.<span class="hljs-params">targetChanges</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(a,c</span>)=&gt;</span>{<span class="hljs-keyword">const</span> u=s.Fo.get(c);u&amp;&amp;<span class="hljs-function">(<span class="hljs-params">z(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size&lt;=<span class="hljs-number">1</span></span>),<span class="hljs-params">a</span>.<span class="hljs-params">addedDocuments</span>.<span class="hljs-params">size</span>&gt;0?<span class="hljs-params">u</span>.<span class="hljs-params">Co</span>=!0:<span class="hljs-params">a</span>.<span class="hljs-params">modifiedDocuments</span>.<span class="hljs-params">size</span>&gt;0?<span class="hljs-params">z</span>(<span class="hljs-params">u.Co</span>):<span class="hljs-params">a</span>.<span class="hljs-params">removedDocuments</span>.<span class="hljs-params">size</span>&gt;0&amp;&amp;(<span class="hljs-params">z(u.Co</span>),<span class="hljs-params">u</span>.<span class="hljs-params">Co</span>=!1))}),<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">s,o,i</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">yield</span> <span class="hljs-params">kn</span>(<span class="hljs-params">o</span>)}})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Zh</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">o.isPrimaryClient&amp;&amp;<span class="hljs-number">0</span>===s||!o.isPrimaryClient&amp;&amp;<span class="hljs-number">1</span>===s</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=[];<span class="hljs-params">o</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(c,u</span>)=&gt;</span>{<span class="hljs-keyword">const</span> h=u.view.eo(i);h.snapshot&amp;&amp;a.push(h.snapshot)}),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c,u</span>)</span>{<span class="hljs-keyword">const</span> h=M(c);h.onlineState=u;<span class="hljs-keyword">let</span> f=!<span class="hljs-number">1</span>;h.queries.forEach(<span class="hljs-function">(<span class="hljs-params">v,w</span>)=&gt;</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> T <span class="hljs-keyword">of</span> w.listeners)T.eo(u)&amp;&amp;<span class="hljs-function">(<span class="hljs-params">f=!<span class="hljs-number">0</span></span>)}),<span class="hljs-params">f</span>&amp;&amp;<span class="hljs-params">gc</span>(<span class="hljs-params">h</span>)}(<span class="hljs-params">o.eventManager,i</span>),<span class="hljs-params">a</span>.<span class="hljs-params">length</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">No</span>.<span class="hljs-params">Tr</span>(<span class="hljs-params">a</span>),<span class="hljs-params">o</span>.<span class="hljs-params">onlineState</span>=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>.<span class="hljs-params">isPrimaryClient</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">setOnlineState</span>(<span class="hljs-params">i</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Im</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ic</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ic</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Ic=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">updateQueryState</span>(<span class="hljs-params">i,<span class="hljs-string">"rejected"</span>,s</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>),<span class="hljs-params">c</span>=<span class="hljs-params">a</span>&amp;&amp;<span class="hljs-params">a</span>.<span class="hljs-params">key</span>;<span class="hljs-params">if</span>(<span class="hljs-params">c</span>){<span class="hljs-params">let</span> <span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ie</span>(<span class="hljs-params">U.comparator</span>);<span class="hljs-params">u</span>=<span class="hljs-params">u</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">c,ae.newNoDocument(c,H.min(</span>)));<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>.<span class="hljs-params">add</span>(<span class="hljs-params">c</span>),<span class="hljs-params">f</span>=<span class="hljs-params">new</span> <span class="hljs-params">Fs</span>(<span class="hljs-params">H.min(</span>),<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">new</span> <span class="hljs-params">ue</span>(<span class="hljs-params">$</span>),<span class="hljs-params">u</span>,<span class="hljs-params">h</span>);<span class="hljs-params">yield</span> <span class="hljs-params">$h</span>(<span class="hljs-params">o,f</span>),<span class="hljs-params">o</span>.<span class="hljs-params">Oo</span>=<span class="hljs-params">o</span>.<span class="hljs-params">Oo</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">c</span>),<span class="hljs-params">o</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>),<span class="hljs-params">kc</span>(<span class="hljs-params">o</span>)}<span class="hljs-params">else</span> <span class="hljs-params">yield</span> <span class="hljs-params">Ri</span>(<span class="hljs-params">o.localStore,i,!<span class="hljs-number">1</span></span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>Oi(o,i,s)).catch(kn)})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sm</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> Sc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Sc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">batch</span>.<span class="hljs-params">batchId</span>;<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Mp</span>(<span class="hljs-params">s.localStore,i</span>);<span class="hljs-params">Rc</span>(<span class="hljs-params">s,o,<span class="hljs-literal">null</span></span>),<span class="hljs-params">Cc</span>(<span class="hljs-params">s,o</span>),<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">updateMutationState</span>(<span class="hljs-params">o,<span class="hljs-string">"acknowledged"</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">s,a</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">yield</span> <span class="hljs-params">kn</span>(<span class="hljs-params">a</span>)}})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">xm</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">xc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">xc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">xc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">c,u</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">M</span>(<span class="hljs-params">c</span>);<span class="hljs-params">return</span> <span class="hljs-params">h</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"Reject batch"</span>,<span class="hljs-string">"readwrite-primary"</span>,f=&gt;{<span class="hljs-keyword">let</span> v;<span class="hljs-keyword">return</span> h.In.lookupMutationBatch(f,u</span>).<span class="hljs-params">next</span>(<span class="hljs-params">w=&gt;(z(<span class="hljs-literal">null</span>!==w</span>),<span class="hljs-params">v</span>=<span class="hljs-params">w</span>.<span class="hljs-params">keys</span><span class="hljs-params">()</span>,<span class="hljs-params">h</span>.<span class="hljs-params">In</span>.<span class="hljs-params">removeMutationBatch</span>(<span class="hljs-params">f,w</span>))).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>h.In.performConsistencyCheck(f)).next(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>h.Qn.bn(f,v))})}(o.localStore,i);Rc(o,i,s),Cc(o,i),o.sharedClientState.updateMutationState(i,<span class="hljs-string">"rejected"</span>,s),<span class="hljs-keyword">yield</span> Pt(o,a)}<span class="hljs-keyword">catch</span>(a){<span class="hljs-keyword">yield</span> kn(a)}})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Dc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Dc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">Jt</span>(<span class="hljs-params">s.remoteStore</span>)||<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."</span></span>);<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">M</span>(<span class="hljs-params">c</span>);<span class="hljs-params">return</span> <span class="hljs-params">u</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"Get highest unacknowledged batch id"</span>,<span class="hljs-string">"readonly"</span>,h=&gt;u.In.getHighestUnacknowledgedBatchId(h</span>))}(<span class="hljs-params">s.localStore</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">-1</span>===o</span>)<span class="hljs-params">return</span> <span class="hljs-params">void</span> <span class="hljs-params">i</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Bo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">o</span>)||[];<span class="hljs-params">a</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>),<span class="hljs-params">s</span>.<span class="hljs-params">Bo</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o,a</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">o,<span class="hljs-string">"Initialization of waitForPendingWrites() operation failed"</span></span>);<span class="hljs-params">i</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">a</span>)}})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Cc</span>(<span class="hljs-params">r,i</span>){(<span class="hljs-params">r.Bo.get(i</span>)||[]).<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;{s.resolve(</span>)}),<span class="hljs-params">r</span>.<span class="hljs-params">Bo</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Rc</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">Lo</span>[<span class="hljs-params">o</span>.<span class="hljs-params">currentUser</span>.<span class="hljs-params">toKey</span><span class="hljs-params">()</span>];<span class="hljs-params">if</span>(<span class="hljs-params">a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">c</span>&amp;&amp;(<span class="hljs-params">s?c.reject(s</span>):<span class="hljs-params">c</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">a</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">i</span>)),<span class="hljs-params">o</span>.<span class="hljs-params">Lo</span>[<span class="hljs-params">o</span>.<span class="hljs-params">currentUser</span>.<span class="hljs-params">toKey</span><span class="hljs-params">()</span>]=<span class="hljs-params">a</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Oi</span>(<span class="hljs-params">r,i,s=<span class="hljs-literal">null</span></span>){<span class="hljs-params">r</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">removeLocalQueryTarget</span>(<span class="hljs-params">i</span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> r.ko.get(i</span>))<span class="hljs-params">r</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">o</span>),<span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">No</span>.<span class="hljs-params">jo</span>(<span class="hljs-params">o,s</span>);<span class="hljs-params">r</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">isPrimaryClient</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">Mo</span>.<span class="hljs-params">cs</span>(<span class="hljs-params">i</span>).<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{r.Mo.containsKey(o</span>)||<span class="hljs-params">Qh</span>(<span class="hljs-params">r,o</span>)})}<span class="hljs-params">function</span> <span class="hljs-params">Qh</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">$o</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i.path.canonicalString(</span>));<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">null</span>!==<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">Zs(r.remoteStore,s</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>.<span class="hljs-params">remove</span>(<span class="hljs-params">i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">s</span>),<span class="hljs-params">kc</span>(<span class="hljs-params">r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">Ac</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span> s</span>)<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">jh</span>?(<span class="hljs-params">r.Mo.addReference(o.key,i</span>),<span class="hljs-params">Cm</span>(<span class="hljs-params">r,o</span>)):<span class="hljs-params">o</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Hh</span>?(<span class="hljs-params">k(<span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"Document no longer in limbo: "</span>+o.key</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Mo</span>.<span class="hljs-params">removeReference</span>(<span class="hljs-params">o.key,i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">Mo</span>.<span class="hljs-params">containsKey</span>(<span class="hljs-params">o.key</span>)||<span class="hljs-params">Qh</span>(<span class="hljs-params">r,o.key</span>)):<span class="hljs-params">V</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">Cm</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">key</span>,<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">path</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>;<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>)||<span class="hljs-params">r</span>.<span class="hljs-params">$o</span>.<span class="hljs-params">has</span>(<span class="hljs-params">o</span>)||(<span class="hljs-params">k(<span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"New document in limbo: "</span>+s</span>),<span class="hljs-params">r</span>.<span class="hljs-params">$o</span>.<span class="hljs-params">add</span>(<span class="hljs-params">o</span>),<span class="hljs-params">kc</span>(<span class="hljs-params">r</span>))}<span class="hljs-params">function</span> <span class="hljs-params">kc</span>(<span class="hljs-params">r</span>){<span class="hljs-params">for</span>(<span class="hljs-params">;r.$o.size&gt;<span class="hljs-number">0</span>&amp;&amp;r.Oo.size&lt;r.maxConcurrentLimboResolutions;</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">r</span>.<span class="hljs-params">$o</span>.<span class="hljs-params">values</span><span class="hljs-params">()</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>.<span class="hljs-params">value</span>;<span class="hljs-params">r</span>.<span class="hljs-params">$o</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>);<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">X.fromString(i</span>)),<span class="hljs-params">o</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Uo</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;<span class="hljs-params">r</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">set</span>(<span class="hljs-params">o,<span class="hljs-keyword">new</span> vm(s</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>=<span class="hljs-params">r</span>.<span class="hljs-params">Oo</span>.<span class="hljs-params">insert</span>(<span class="hljs-params">s,o</span>),<span class="hljs-params">To</span>(<span class="hljs-params">r.remoteStore,<span class="hljs-keyword">new</span> Zt(at(pi(s.path</span>)),<span class="hljs-params">o</span>,2,<span class="hljs-params">nt</span>.<span class="hljs-params">T</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">Pc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Pc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Pc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=[],<span class="hljs-params">c</span>=[],<span class="hljs-params">u</span>=[];<span class="hljs-params">var</span> <span class="hljs-params">h</span>;<span class="hljs-params">o</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>||(<span class="hljs-params">o.xo.forEach((h,f</span>)=&gt;</span>{u.push(o.Ko(f,i,s).then(<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>{<span class="hljs-keyword">if</span>(v){o.isPrimaryClient&amp;&amp;o.sharedClientState.updateQueryState(f.targetId,v.fromCache?<span class="hljs-string">"not-current"</span>:<span class="hljs-string">"current"</span>),a.push(v);<span class="hljs-keyword">const</span> w=Oa.kn(f.targetId,v);c.push(w)}}))}),<span class="hljs-keyword">yield</span> <span class="hljs-built_in">Promise</span>.all(u),o.No.Tr(a),<span class="hljs-keyword">yield</span>(h=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(f,v</span>){<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">M</span>(<span class="hljs-params">f</span>);<span class="hljs-params">try</span>{<span class="hljs-params">yield</span> <span class="hljs-params">w</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"notifyLocalViewChanges"</span>,<span class="hljs-string">"readwrite"</span>,T=&gt;R.forEach(v,S=&gt;R.forEach(S.Nn,C=&gt;w.persistence.referenceDelegate.addReference(T,S.targetId,C</span>)).<span class="hljs-params">next</span>(<span class="hljs-params">(</span>)=&gt;</span>R.forEach(S.xn,C=&gt;w.persistence.referenceDelegate.removeReference(T,S.targetId,C)))))}<span class="hljs-keyword">catch</span>(T){<span class="hljs-keyword">if</span>(!Cn(T))<span class="hljs-keyword">throw</span> T;k(<span class="hljs-string">"LocalStore"</span>,<span class="hljs-string">"Failed to update sequence numbers: "</span>+T)}<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> T <span class="hljs-keyword">of</span> v){<span class="hljs-keyword">const</span> S=T.targetId;<span class="hljs-keyword">if</span>(!T.fromCache){<span class="hljs-keyword">const</span> C=w.Un.get(S),B=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);w.Un=w.Un.insert(S,B)}}}),<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f,v</span>)</span>{<span class="hljs-keyword">return</span> h.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)})(o.localStore,c))})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Rm</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> Nc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Nc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Nc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!s.currentUser.isEqual(i</span>)){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"User change. New user:"</span>,i.toKey(</span>));<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Sh</span>(<span class="hljs-params">s.localStore,i</span>);<span class="hljs-params">s</span>.<span class="hljs-params">currentUser</span>=<span class="hljs-params">i</span>,(<span class="hljs-params">a=s</span>).<span class="hljs-params">Bo</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">u=&gt;{u.forEach(h=&gt;{h.reject(<span class="hljs-keyword">new</span> A(I.CANCELLED,<span class="hljs-string">"'waitForPendingWrites' promise is rejected due to a user change."</span></span>))})}),<span class="hljs-params">a</span>.<span class="hljs-params">Bo</span>.<span class="hljs-params">clear</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">handleUserChange</span>(<span class="hljs-params">i,o.removedBatchIds,o.addedBatchIds</span>),<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">s,o.Wn</span>)}<span class="hljs-params">var</span> <span class="hljs-params">a</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Am</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">o&amp;&amp;o.Co</span>)<span class="hljs-params">return</span> <span class="hljs-params">te</span><span class="hljs-params">()</span>.<span class="hljs-params">add</span>(<span class="hljs-params">o.key</span>);{<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">te</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">s</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">if</span>(<span class="hljs-params">!c</span>)<span class="hljs-params">return</span> <span class="hljs-params">a</span>;<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> c</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">s</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">u</span>);<span class="hljs-params">a</span>=<span class="hljs-params">a</span>.<span class="hljs-params">unionWith</span>(<span class="hljs-params">h.view.To</span>)}<span class="hljs-params">return</span> <span class="hljs-params">a</span>}}<span class="hljs-params">function</span> <span class="hljs-params">km</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Lc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Lc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Lc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">_o</span>(<span class="hljs-params">s.localStore,i.query,!<span class="hljs-number">0</span></span>),<span class="hljs-params">a</span>=<span class="hljs-params">i</span>.<span class="hljs-params">view</span>.<span class="hljs-params">So</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">isPrimaryClient</span>&amp;&amp;<span class="hljs-params">Ac</span>(<span class="hljs-params">s,i.targetId,a.vo</span>),<span class="hljs-params">a</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Pm</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Mc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Mc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Mc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">Rh</span>(<span class="hljs-params">i.localStore</span>).<span class="hljs-params">then</span>(<span class="hljs-params">s=&gt;Pt(i,s</span>))})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Nm</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">Oc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Oc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Oc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">c</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">u,h</span>){<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">M</span>(<span class="hljs-params">u</span>),<span class="hljs-params">v</span>=<span class="hljs-params">M</span>(<span class="hljs-params">f.In</span>);<span class="hljs-params">return</span> <span class="hljs-params">f</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"Lookup mutation documents"</span>,<span class="hljs-string">"readonly"</span>,w=&gt;v.Xt(w,h</span>).<span class="hljs-params">next</span>(<span class="hljs-params">T=&gt;T?f.Qn.bn(w,T</span>):<span class="hljs-params">R</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-literal">null</span></span>)))}(<span class="hljs-params">a.localStore,i</span>);<span class="hljs-params">var</span> <span class="hljs-params">h</span>;<span class="hljs-params">null</span>!==<span class="hljs-params">c</span>?(<span class="hljs-params"><span class="hljs-string">"pending"</span>===s?<span class="hljs-keyword">yield</span> ki(a.remoteStore</span>):"<span class="hljs-params">acknowledged</span>"===<span class="hljs-params">s</span>||"<span class="hljs-params">rejected</span>"===<span class="hljs-params">s</span>?(<span class="hljs-params">Rc(a,i,o||<span class="hljs-literal">null</span></span>),<span class="hljs-params">Cc</span>(<span class="hljs-params">a,i</span>),<span class="hljs-params">h</span>=<span class="hljs-params">i</span>,<span class="hljs-params">M</span>(<span class="hljs-params">M(a.localStore</span>).<span class="hljs-params">In</span>).<span class="hljs-params">te</span>(<span class="hljs-params">h</span>)):<span class="hljs-params">V</span><span class="hljs-params">()</span>,<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">a,c</span>)):<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"Cannot apply mutation batch with id: "</span>+i</span>)})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Fc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Fc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">qc(s</span>),<span class="hljs-params">zc</span>(<span class="hljs-params">s</span>),!0===<span class="hljs-params">i</span>&amp;&amp;!0!==<span class="hljs-params">s</span>.<span class="hljs-params">qo</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">getAllActiveQueryTargets</span><span class="hljs-params">()</span>,<span class="hljs-params">a</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Yh</span>(<span class="hljs-params">s,o.toArray(</span>));<span class="hljs-params">s</span>.<span class="hljs-params">qo</span>=!0,<span class="hljs-params">yield</span> <span class="hljs-params">uc</span>(<span class="hljs-params">s.remoteStore,!<span class="hljs-number">0</span></span>);<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> c <span class="hljs-keyword">of</span> a</span>)<span class="hljs-params">To</span>(<span class="hljs-params">s.remoteStore,c</span>)}<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-number">1</span>===i&amp;&amp;!<span class="hljs-number">1</span>!==s.qo</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=[];<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>;<span class="hljs-params">s</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(c,u</span>)=&gt;</span>{s.sharedClientState.isLocalQueryTarget(u)?o.push(u):a=a.then(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">Oi(s,u</span>),<span class="hljs-params">Ri</span>(<span class="hljs-params">s.localStore,u,!<span class="hljs-number">0</span></span>))),<span class="hljs-params">Zs</span>(<span class="hljs-params">s.remoteStore,u</span>)}),<span class="hljs-params">yield</span> <span class="hljs-params">a</span>,<span class="hljs-params">yield</span> <span class="hljs-params">Yh</span>(<span class="hljs-params">s,o</span>),<span class="hljs-params">function</span>(<span class="hljs-params">c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">M</span>(<span class="hljs-params">c</span>);<span class="hljs-params">u</span>.<span class="hljs-params">Fo</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(h,f</span>)=&gt;</span>{Zs(u.remoteStore,f)}),u.Mo.us(),u.Fo=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>,u.Oo=<span class="hljs-keyword">new</span> Ie(U.comparator)}(s),s.qo=!<span class="hljs-number">1</span>,<span class="hljs-keyword">yield</span> uc(s.remoteStore,!<span class="hljs-number">1</span>)}})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Yh</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">return</span> Uc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Uc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Uc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=[],<span class="hljs-params">c</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> u <span class="hljs-keyword">of</span> i</span>){<span class="hljs-params">let</span> <span class="hljs-params">h</span>;<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">o</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">get</span>(<span class="hljs-params">u</span>);<span class="hljs-params">if</span>(<span class="hljs-params">f&amp;&amp;<span class="hljs-number">0</span>!==f.length</span>){<span class="hljs-params">h</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ci</span>(<span class="hljs-params">o.localStore,at(f[<span class="hljs-number">0</span>]</span>));<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> v <span class="hljs-keyword">of</span> f</span>){<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">o</span>.<span class="hljs-params">xo</span>.<span class="hljs-params">get</span>(<span class="hljs-params">v</span>),<span class="hljs-params">T</span>=<span class="hljs-params">yield</span> <span class="hljs-params">km</span>(<span class="hljs-params">o,w</span>);<span class="hljs-params">T</span>.<span class="hljs-params">snapshot</span>&amp;&amp;<span class="hljs-params">c</span>.<span class="hljs-params">push</span>(<span class="hljs-params">T.snapshot</span>)}}<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ch</span>(<span class="hljs-params">o.localStore,u</span>);<span class="hljs-params">h</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ci</span>(<span class="hljs-params">o.localStore,v</span>),<span class="hljs-params">yield</span> <span class="hljs-params">vc</span>(<span class="hljs-params">o,Wh(v</span>),<span class="hljs-params">u</span>,!1)}<span class="hljs-params">a</span>.<span class="hljs-params">push</span>(<span class="hljs-params">h</span>)}<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">No</span>.<span class="hljs-params">Tr</span>(<span class="hljs-params">c</span>),<span class="hljs-params">a</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Wh</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">ml</span>(<span class="hljs-params">r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,<span class="hljs-string">"F"</span>,r.startAt,r.endAt</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Mm</span>(<span class="hljs-params">r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">M</span>(<span class="hljs-params">M(i.localStore</span>).<span class="hljs-params">persistence</span>).<span class="hljs-params">pn</span><span class="hljs-params">()</span>}<span class="hljs-params">function</span> <span class="hljs-params">Om</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">Vc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Vc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Vc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">a.qo</span>)<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"Ignoring unexpected query state notification."</span></span>);<span class="hljs-params">else</span> <span class="hljs-params">if</span>(<span class="hljs-params">a.ko.has(i</span>))<span class="hljs-params">switch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">case</span>"<span class="hljs-params">current</span>":<span class="hljs-params">case</span>"<span class="hljs-params">not</span>-<span class="hljs-params">current</span>":{<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Rh</span>(<span class="hljs-params">a.localStore</span>),<span class="hljs-params">u</span>=<span class="hljs-params">Fs</span>.<span class="hljs-params">createSynthesizedRemoteEventForCurrentChange</span>(<span class="hljs-params">i,<span class="hljs-string">"current"</span>===s</span>);<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">a,c,u</span>);<span class="hljs-params">break</span>}<span class="hljs-params">case</span>"<span class="hljs-params">rejected</span>":<span class="hljs-params">yield</span> <span class="hljs-params">Ri</span>(<span class="hljs-params">a.localStore,i,!<span class="hljs-number">0</span></span>),<span class="hljs-params">Oi</span>(<span class="hljs-params">a,i,o</span>);<span class="hljs-params">break</span>;<span class="hljs-params">default</span>:<span class="hljs-params">V</span><span class="hljs-params">()</span>}})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Fm</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">Bc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Bc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Bc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">qc</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params">o.qo</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">o.ko.has(a</span>)){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">"Adding an already active target "</span>+a</span>);<span class="hljs-params">continue</span>}<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ch</span>(<span class="hljs-params">o.localStore,a</span>),<span class="hljs-params">u</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Ci</span>(<span class="hljs-params">o.localStore,c</span>);<span class="hljs-params">yield</span> <span class="hljs-params">vc</span>(<span class="hljs-params">o,Wh(c</span>),<span class="hljs-params">u</span>.<span class="hljs-params">targetId</span>,!1),<span class="hljs-params">To</span>(<span class="hljs-params">o.remoteStore,u</span>)}<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> a <span class="hljs-keyword">of</span> s</span>)<span class="hljs-params">o</span>.<span class="hljs-params">ko</span>.<span class="hljs-params">has</span>(<span class="hljs-params">a</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> Ri(o.localStore,a,!<span class="hljs-number">1</span></span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>{Zs(o.remoteStore,a),Oi(o,a)}).catch(kn))}})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">qc</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=M(r);<span class="hljs-keyword">return</span> i.remoteStore.remoteSyncer.applyRemoteEvent=$h.bind(<span class="hljs-literal">null</span>,i),i.remoteStore.remoteSyncer.getRemoteKeysForTarget=Am.bind(<span class="hljs-literal">null</span>,i),i.remoteStore.remoteSyncer.rejectListen=Im.bind(<span class="hljs-literal">null</span>,i),i.No.Tr=pm.bind(<span class="hljs-literal">null</span>,i.eventManager),i.No.jo=mm.bind(<span class="hljs-literal">null</span>,i.eventManager),i}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">zc</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">const</span> i=M(r);<span class="hljs-keyword">return</span> i.remoteStore.remoteSyncer.applySuccessfulWrite=Sm.bind(<span class="hljs-literal">null</span>,i),i.remoteStore.remoteSyncer.rejectFailedWrite=xm.bind(<span class="hljs-literal">null</span>,i),i}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jh</span></span>{<span class="hljs-keyword">constructor</span>(){<span class="hljs-keyword">this</span>.synchronizeTabs=!<span class="hljs-number">1</span>}initialize(i){<span class="hljs-keyword">var</span> s=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">s</span>.<span class="hljs-params">N</span>=<span class="hljs-params">Ks</span>(<span class="hljs-params">i.databaseInfo.databaseId</span>),<span class="hljs-params">s</span>.<span class="hljs-params">sharedClientState</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Wo</span>(<span class="hljs-params">i</span>),<span class="hljs-params">s</span>.<span class="hljs-params">persistence</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Go</span>(<span class="hljs-params">i</span>),<span class="hljs-params">yield</span> <span class="hljs-params">s</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>.<span class="hljs-params">gcScheduler</span>=<span class="hljs-params">s</span>.<span class="hljs-params">zo</span>(<span class="hljs-params">i</span>),<span class="hljs-params">s</span>.<span class="hljs-params">localStore</span>=<span class="hljs-params">s</span>.<span class="hljs-params">Ho</span>(<span class="hljs-params">i</span>)})<span class="hljs-params">()</span>}<span class="hljs-params">zo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">null</span>}<span class="hljs-params">Ho</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ih</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistence,<span class="hljs-keyword">new</span> Eh,i.initialUser,<span class="hljs-keyword">this</span>.N</span>)}<span class="hljs-params">Go</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Kp</span>(<span class="hljs-params">Ga.Ns,<span class="hljs-keyword">this</span>.N</span>)}<span class="hljs-params">Wo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ph</span>}<span class="hljs-params">terminate</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">i</span>.<span class="hljs-params">gcScheduler</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">gcScheduler</span>.<span class="hljs-params">stop</span><span class="hljs-params">()</span>,<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>,<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>})<span class="hljs-params">()</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Xh</span> <span class="hljs-params">extends</span> <span class="hljs-params">Jh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Jo</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">cacheSizeBytes</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">forceOwnership</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">synchronizeTabs</span>=!1}<span class="hljs-params">initialize</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">super</span>.initialize,o=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">yield</span> <span class="hljs-params">s</span><span class="hljs-params">()</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,i</span>),<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Va</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}(<span class="hljs-params">o.localStore</span>),<span class="hljs-params">yield</span> <span class="hljs-params">o</span>.<span class="hljs-params">Jo</span>.<span class="hljs-params">initialize</span>(<span class="hljs-params">o,i</span>),<span class="hljs-params">yield</span> <span class="hljs-params">zc</span>(<span class="hljs-params">o.Jo.syncEngine</span>),<span class="hljs-params">yield</span> <span class="hljs-params">ki</span>(<span class="hljs-params">o.Jo.remoteStore</span>),<span class="hljs-params">yield</span> <span class="hljs-params">o</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">nn</span>(<span class="hljs-params">(</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params">o.gcScheduler&amp;&amp;!o.gcScheduler.started&amp;&amp;o.gcScheduler.start(o.localStore</span>),<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>))})<span class="hljs-params">()</span>}<span class="hljs-params">Ho</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Ih</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistence,<span class="hljs-keyword">new</span> Eh,i.initialUser,<span class="hljs-keyword">this</span>.N</span>)}<span class="hljs-params">zo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Dp</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.persistence.referenceDelegate.garbageCollector,i.asyncQueue</span>)}<span class="hljs-params">Go</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Ma</span>(<span class="hljs-params">i.databaseInfo.databaseId,i.databaseInfo.persistenceKey</span>),<span class="hljs-params">o</span>=<span class="hljs-params">void</span> 0!==<span class="hljs-params">this</span>.<span class="hljs-params">cacheSizeBytes</span>?<span class="hljs-params">Je</span>.<span class="hljs-params">withCacheSize</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.cacheSizeBytes</span>):<span class="hljs-params">Je</span>.<span class="hljs-params">DEFAULT</span>;<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">La</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.synchronizeTabs,s,i.clientId,o,i.asyncQueue,Lh(</span>),<span class="hljs-params">bo</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">N</span>,<span class="hljs-params">this</span>.<span class="hljs-params">sharedClientState</span>,!!<span class="hljs-params">this</span>.<span class="hljs-params">forceOwnership</span>)}<span class="hljs-params">Wo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ph</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Vm</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xh</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,s,!<span class="hljs-number">1</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">Jo</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">cacheSizeBytes</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">synchronizeTabs</span>=!0}<span class="hljs-params">initialize</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">super</span>.initialize,o=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">yield</span> <span class="hljs-params">s</span><span class="hljs-params">()</span>.<span class="hljs-params">call</span>(<span class="hljs-params">o,i</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">Jo</span>.<span class="hljs-params">syncEngine</span>;<span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">$a</span>&amp;&amp;(<span class="hljs-params">o.sharedClientState.syncEngine={_i:Nm.bind(<span class="hljs-literal">null</span>,a</span>),<span class="hljs-params">mi</span>:<span class="hljs-params">Om</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,a</span>),<span class="hljs-params">gi</span>:<span class="hljs-params">Fm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,a</span>),<span class="hljs-params">pn</span>:<span class="hljs-params">Mm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,a</span>),<span class="hljs-params">wi</span>:<span class="hljs-params">Pm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,a</span>)},<span class="hljs-params">yield</span> <span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">start</span><span class="hljs-params">()</span>),<span class="hljs-params">yield</span> <span class="hljs-params">o</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">nn</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">var</span> <span class="hljs-params">c</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(u</span>){<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Fc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}(<span class="hljs-params">o.Jo.syncEngine,u</span>),<span class="hljs-params">o</span>.<span class="hljs-params">gcScheduler</span>&amp;&amp;(<span class="hljs-params">u&amp;&amp;!o.gcScheduler.started?o.gcScheduler.start(o.localStore</span>):<span class="hljs-params">u</span>||<span class="hljs-params">o</span>.<span class="hljs-params">gcScheduler</span>.<span class="hljs-params">stop</span><span class="hljs-params">()</span>)});<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">u</span>){<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">()</span>)})<span class="hljs-params">()</span>}<span class="hljs-params">Wo</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Lh</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!$a.Pt(s</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.UNIMPLEMENTED,<span class="hljs-string">"IndexedDB persistence is only available on platforms that support LocalStorage."</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">Ma</span>(<span class="hljs-params">i.databaseInfo.databaseId,i.databaseInfo.persistenceKey</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$a</span>(<span class="hljs-params">s,i.asyncQueue,o,i.clientId,i.initialUser</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Gc</span>{<span class="hljs-params">initialize</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">var</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">o</span>.<span class="hljs-params">localStore</span>||(<span class="hljs-params">o.localStore=i.localStore,o.sharedClientState=i.sharedClientState,o.datastore=o.createDatastore(s</span>),<span class="hljs-params">o</span>.<span class="hljs-params">remoteStore</span>=<span class="hljs-params">o</span>.<span class="hljs-params">createRemoteStore</span>(<span class="hljs-params">s</span>),<span class="hljs-params">o</span>.<span class="hljs-params">eventManager</span>=<span class="hljs-params">o</span>.<span class="hljs-params">createEventManager</span>(<span class="hljs-params">s</span>),<span class="hljs-params">o</span>.<span class="hljs-params">syncEngine</span>=<span class="hljs-params">o</span>.<span class="hljs-params">createSyncEngine</span>(<span class="hljs-params">s,!i.synchronizeTabs</span>),<span class="hljs-params">o</span>.<span class="hljs-params">sharedClientState</span>.<span class="hljs-params">onlineStateHandler</span>=<span class="hljs-params">a</span>=&gt;</span>Zh(o.syncEngine,a,<span class="hljs-number">1</span>),o.remoteStore.remoteSyncer.handleCredentialChange=Rm.bind(<span class="hljs-literal">null</span>,o.syncEngine),<span class="hljs-keyword">yield</span> uc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> fm}createDatastore(i){<span class="hljs-keyword">const</span> s=Ks(i.databaseInfo.databaseId),o=<span class="hljs-keyword">new</span> Wp(i.databaseInfo);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> em(i.credentials,o,s)}createRemoteStore(i){<span class="hljs-keyword">return</span> s=<span class="hljs-keyword">this</span>.localStore,o=<span class="hljs-keyword">this</span>.datastore,a=i.asyncQueue,c=<span class="hljs-function"><span class="hljs-params">h</span>=&gt;</span>Zh(<span class="hljs-keyword">this</span>.syncEngine,h,<span class="hljs-number">0</span>),u=Nh.Pt()?<span class="hljs-keyword">new</span> Nh:<span class="hljs-keyword">new</span> Zp,<span class="hljs-keyword">new</span> nm(s,o,a,c,u);<span class="hljs-keyword">var</span> s,o,a,c,u}createSyncEngine(i,s){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o,a,c,u,h,f,v</span>)</span>{<span class="hljs-keyword">const</span> w=<span class="hljs-keyword">new</span> wm(o,a,c,u,h,f);<span class="hljs-keyword">return</span> v&amp;&amp;<span class="hljs-function">(<span class="hljs-params">w.qo=!<span class="hljs-number">0</span></span>),<span class="hljs-params">w</span>}(<span class="hljs-params"><span class="hljs-keyword">this</span>.localStore,<span class="hljs-keyword">this</span>.remoteStore,<span class="hljs-keyword">this</span>.eventManager,<span class="hljs-keyword">this</span>.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,s</span>)}<span class="hljs-params">terminate</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">i=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">s</span>);<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"RemoteStore shutting down."</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-number">5</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">o</span>),<span class="hljs-params">o</span>.<span class="hljs-params">Qr</span>.<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params"><span class="hljs-keyword">this</span>.remoteStore</span>);<span class="hljs-params">var</span> <span class="hljs-params">i</span>}}<span class="hljs-params">function</span> <span class="hljs-params">ed</span>(<span class="hljs-params">r,i=<span class="hljs-number">10240</span></span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=0;<span class="hljs-params">return</span>{<span class="hljs-params">read</span>:<span class="hljs-params">()</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s&lt;r.byteLength</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>={<span class="hljs-params">value</span>:<span class="hljs-params">r</span>.<span class="hljs-params">slice</span>(<span class="hljs-params">s,s+i</span>),<span class="hljs-params">done</span>:!1};<span class="hljs-params">return</span> <span class="hljs-params">s</span>+=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>}<span class="hljs-params">return</span>{<span class="hljs-params">done</span>:!0}})<span class="hljs-params">()</span>,<span class="hljs-params">cancel</span>:<span class="hljs-params">()</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){})<span class="hljs-params">()</span>,<span class="hljs-params">releaseLock</span><span class="hljs-params">()</span>{},<span class="hljs-params">closed</span>:<span class="hljs-params">Promise</span>.<span class="hljs-params">reject</span>(<span class="hljs-params"><span class="hljs-string">"unimplemented"</span></span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Io</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">observer</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">muted</span>=!1}<span class="hljs-params">next</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">observer</span>.<span class="hljs-params">next</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">Yo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.observer.next,i</span>)}<span class="hljs-params">error</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">observer</span>.<span class="hljs-params">error</span>?<span class="hljs-params">this</span>.<span class="hljs-params">Yo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.observer.error,i</span>):<span class="hljs-params">console</span>.<span class="hljs-params">error</span>(<span class="hljs-params"><span class="hljs-string">"Uncaught Error in snapshot listener:"</span>,i</span>)}<span class="hljs-params">Xo</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">muted</span>=!0}<span class="hljs-params">Yo</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">muted</span>||<span class="hljs-params">setTimeout</span>(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-keyword">this</span>.muted||i(s)},<span class="hljs-number">0</span>)}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bm</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.Zo=i,<span class="hljs-keyword">this</span>.N=s,<span class="hljs-keyword">this</span>.metadata=<span class="hljs-keyword">new</span> Ce,<span class="hljs-keyword">this</span>.buffer=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>,<span class="hljs-keyword">this</span>.ta=<span class="hljs-keyword">new</span> TextDecoder(<span class="hljs-string">"utf-8"</span>),<span class="hljs-keyword">this</span>.ea().then(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{o&amp;&amp;o.ho()?<span class="hljs-keyword">this</span>.metadata.resolve(o.payload.metadata):<span class="hljs-keyword">this</span>.metadata.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`The first element of the bundle is not a metadata, it is\n             <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-literal">null</span>==o?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:o.payload)}</span>`</span>))},o=&gt;<span class="hljs-keyword">this</span>.metadata.reject(o))}close(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Zo.cancel()}getMetadata(){<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">metadata</span>.<span class="hljs-params">promise</span>})<span class="hljs-params">()</span>}<span class="hljs-params">Qo</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">getMetadata</span><span class="hljs-params">()</span>,<span class="hljs-params">i</span>.<span class="hljs-params">ea</span><span class="hljs-params">()</span>})<span class="hljs-params">()</span>}<span class="hljs-params">ea</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">na</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===s</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">ta</span>.<span class="hljs-params">decode</span>(<span class="hljs-params">s</span>),<span class="hljs-params">a</span>=<span class="hljs-params">Number</span>(<span class="hljs-params">o</span>);<span class="hljs-params">isNaN</span>(<span class="hljs-params">a</span>)&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-string">`length string (<span class="hljs-subst">${o}</span>) is not valid number`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">ia</span>(<span class="hljs-params">a</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">gm</span>(<span class="hljs-params"><span class="hljs-built_in">JSON</span>.parse(c</span>),<span class="hljs-params">s</span>.<span class="hljs-params">length</span>+<span class="hljs-params">a</span>)})<span class="hljs-params">()</span>}<span class="hljs-params">ra</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">findIndex</span>(<span class="hljs-params">i=&gt;i===<span class="hljs-string">"{"</span>.charCodeAt(<span class="hljs-number">0</span></span>))}<span class="hljs-params">na</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">for</span>(<span class="hljs-params">;i.ra(</span>)&lt;0&amp;&amp;!(<span class="hljs-params"><span class="hljs-keyword">yield</span> i.oa(</span>)););<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-number">0</span>===i.buffer.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">ra</span><span class="hljs-params">()</span>;<span class="hljs-params">s</span>&lt;0&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-string">"Reached the end of bundle when a length string is expected."</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">slice</span>(<span class="hljs-params"><span class="hljs-number">0</span>,s</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">buffer</span>=<span class="hljs-params">i</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">slice</span>(<span class="hljs-params">s</span>),<span class="hljs-params">o</span>})<span class="hljs-params">()</span>}<span class="hljs-params">ia</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">for</span>(<span class="hljs-params">;s.buffer.length&lt;i;</span>)(<span class="hljs-params"><span class="hljs-keyword">yield</span> s.oa(</span>))&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">sa</span>(<span class="hljs-params"><span class="hljs-string">"Reached the end of bundle when more is expected."</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">ta</span>.<span class="hljs-params">decode</span>(<span class="hljs-params">s.buffer.slice(<span class="hljs-number">0</span>,i</span>));<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">buffer</span>=<span class="hljs-params">s</span>.<span class="hljs-params">buffer</span>.<span class="hljs-params">slice</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>})<span class="hljs-params">()</span>}<span class="hljs-params">sa</span>(<span class="hljs-params">i</span>){<span class="hljs-params">throw</span> <span class="hljs-params">this</span>.<span class="hljs-params">Zo</span>.<span class="hljs-params">cancel</span><span class="hljs-params">()</span>,<span class="hljs-params">new</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">`Invalid bundle format: <span class="hljs-subst">${i}</span>`</span></span>)}<span class="hljs-params">oa</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">Zo</span>.<span class="hljs-params">read</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!s.done</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Uint8Array</span>(<span class="hljs-params">i.buffer.length+s.value.length</span>);<span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i.buffer</span>),<span class="hljs-params">o</span>.<span class="hljs-params">set</span>(<span class="hljs-params">s.value,i.buffer.length</span>),<span class="hljs-params">i</span>.<span class="hljs-params">buffer</span>=<span class="hljs-params">o</span>}<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">done</span>})<span class="hljs-params">()</span>}}<span class="hljs-params">class</span> <span class="hljs-params">qm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">datastore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">readVersions</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mutations</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">committed</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">lastWriteError</span>=<span class="hljs-params">null</span>,<span class="hljs-params">this</span>.<span class="hljs-params">writtenDocs</span>=<span class="hljs-params">new</span> <span class="hljs-params">Set</span>}<span class="hljs-params">lookup</span>(<span class="hljs-params">i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s.ensureCommitNotCalled(</span>),<span class="hljs-params">s</span>.<span class="hljs-params">mutations</span>.<span class="hljs-params">length</span>&gt;0)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Firestore transactions require all reads to be executed before all writes."</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span>(<span class="hljs-params">a=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(c,u</span>){<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">M</span>(<span class="hljs-params">c</span>),<span class="hljs-params">f</span>=<span class="hljs-params">qs</span>(<span class="hljs-params">h.N</span>)+"/<span class="hljs-params">documents</span>",<span class="hljs-params">v</span>={<span class="hljs-params">documents</span>:<span class="hljs-params">u</span>.<span class="hljs-params">map</span>(<span class="hljs-params">C=&gt;Bs(h.N,C</span>))},<span class="hljs-params">w</span>=<span class="hljs-params">yield</span> <span class="hljs-params">h</span>.<span class="hljs-params">Ki</span>(<span class="hljs-params"><span class="hljs-string">"BatchGetDocuments"</span>,f,v</span>),<span class="hljs-params">T</span>=<span class="hljs-params">new</span> <span class="hljs-params">Map</span>;<span class="hljs-params">w</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">C=&gt;{<span class="hljs-keyword">const</span> P=<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">return</span>"<span class="hljs-params">found</span>"<span class="hljs-params">in</span> <span class="hljs-params">i</span>?<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">z</span>(<span class="hljs-params">!!o.found</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">s,o.found.name</span>),<span class="hljs-params">c</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">o.found.updateTime</span>),<span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">qe</span>(<span class="hljs-params">{mapValue:{fields:o.found.fields}}</span>);<span class="hljs-params">return</span> <span class="hljs-params">ae</span>.<span class="hljs-params">newFoundDocument</span>(<span class="hljs-params">a,c,u</span>)}(<span class="hljs-params">r,i</span>):"<span class="hljs-params">missing</span>"<span class="hljs-params">in</span> <span class="hljs-params">i</span>?<span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">z</span>(<span class="hljs-params">!!o.missing</span>),<span class="hljs-params">z</span>(<span class="hljs-params">!!o.readTime</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">vt</span>(<span class="hljs-params">s,o.missing</span>),<span class="hljs-params">c</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">o.readTime</span>);<span class="hljs-params">return</span> <span class="hljs-params">ae</span>.<span class="hljs-params">newNoDocument</span>(<span class="hljs-params">a,c</span>)}(<span class="hljs-params">r,i</span>):<span class="hljs-params">V</span><span class="hljs-params">()</span>}(<span class="hljs-params">h.N,C</span>);<span class="hljs-params">T</span>.<span class="hljs-params">set</span>(<span class="hljs-params">P.key.toString(</span>),<span class="hljs-params">P</span>)});<span class="hljs-params">const</span> <span class="hljs-params">S</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">u</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">C=&gt;{<span class="hljs-keyword">const</span> P=T.get(C.toString(</span>));<span class="hljs-params">z</span>(<span class="hljs-params">!!P</span>),<span class="hljs-params">S</span>.<span class="hljs-params">push</span>(<span class="hljs-params">P</span>)}),<span class="hljs-params">S</span>}),<span class="hljs-params">function</span>(<span class="hljs-params">c,u</span>){<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">s.datastore,i</span>);<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">a=&gt;s.recordVersion(a</span>)),<span class="hljs-params">o</span>})<span class="hljs-params">()</span>}<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">write</span>(<span class="hljs-params">s.toMutation(i,<span class="hljs-keyword">this</span>.precondition(i</span>))),<span class="hljs-params">this</span>.<span class="hljs-params">writtenDocs</span>.<span class="hljs-params">add</span>(<span class="hljs-params">i.toString(</span>))}<span class="hljs-params">update</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">try</span>{<span class="hljs-params">this</span>.<span class="hljs-params">write</span>(<span class="hljs-params">s.toMutation(i,<span class="hljs-keyword">this</span>.preconditionForUpdate(i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">lastWriteError</span>=<span class="hljs-params">o</span>}<span class="hljs-params">this</span>.<span class="hljs-params">writtenDocs</span>.<span class="hljs-params">add</span>(<span class="hljs-params">i.toString(</span>))}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">write</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Os(i,<span class="hljs-keyword">this</span>.precondition(i</span>))),<span class="hljs-params">this</span>.<span class="hljs-params">writtenDocs</span>.<span class="hljs-params">add</span>(<span class="hljs-params">i.toString(</span>))}<span class="hljs-params">commit</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.ensureCommitNotCalled(</span>),<span class="hljs-params">i</span>.<span class="hljs-params">lastWriteError</span>)<span class="hljs-params">throw</span> <span class="hljs-params">i</span>.<span class="hljs-params">lastWriteError</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">readVersions</span>;<span class="hljs-params">var</span> <span class="hljs-params">o</span>;<span class="hljs-params">i</span>.<span class="hljs-params">mutations</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{s.<span class="hljs-keyword">delete</span>(o.key.toString(</span>))}),<span class="hljs-params">s</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(o,a</span>)=&gt;</span>{<span class="hljs-keyword">const</span> c=U.fromPath(a);i.mutations.push(<span class="hljs-keyword">new</span> wa(c,i.precondition(c)))}),<span class="hljs-keyword">yield</span>(o=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">M</span>(<span class="hljs-params">a</span>),<span class="hljs-params">h</span>=<span class="hljs-params">qs</span>(<span class="hljs-params">u.N</span>)+"/<span class="hljs-params">documents</span>",<span class="hljs-params">f</span>={<span class="hljs-params">writes</span>:<span class="hljs-params">c</span>.<span class="hljs-params">map</span>(<span class="hljs-params">v=&gt;ho(u.N,v</span>))};<span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">Li</span>(<span class="hljs-params"><span class="hljs-string">"Commit"</span>,h,f</span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">a,c</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">i.datastore,i.mutations</span>),<span class="hljs-params">i</span>.<span class="hljs-params">committed</span>=!0})<span class="hljs-params">()</span>}<span class="hljs-params">recordVersion</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>;<span class="hljs-params">if</span>(<span class="hljs-params">i.isFoundDocument(</span>))<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">version</span>;<span class="hljs-params">else</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!i.isNoDocument(</span>))<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">s</span>=<span class="hljs-params">H</span>.<span class="hljs-params">min</span><span class="hljs-params">()</span>}<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">readVersions</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i.key.toString(</span>));<span class="hljs-params">if</span>(<span class="hljs-params">o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!s.isEqual(o</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.ABORTED,<span class="hljs-string">"Document version changed between two reads."</span></span>)}<span class="hljs-params">else</span> <span class="hljs-params">this</span>.<span class="hljs-params">readVersions</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i.key.toString(</span>),<span class="hljs-params">s</span>)}<span class="hljs-params">precondition</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">readVersions</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i.toString(</span>));<span class="hljs-params">return</span>!<span class="hljs-params">this</span>.<span class="hljs-params">writtenDocs</span>.<span class="hljs-params">has</span>(<span class="hljs-params">i.toString(</span>))&amp;&amp;<span class="hljs-params">s</span>?<span class="hljs-params">ve</span>.<span class="hljs-params">updateTime</span>(<span class="hljs-params">s</span>):<span class="hljs-params">ve</span>.<span class="hljs-params">none</span><span class="hljs-params">()</span>}<span class="hljs-params">preconditionForUpdate</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">readVersions</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i.toString(</span>));<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>.writtenDocs.has(i.toString(</span>))&amp;&amp;<span class="hljs-params">s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s.isEqual(H.min(</span>)))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Can't update a document that doesn't exist."</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">ve</span>.<span class="hljs-params">updateTime</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">return</span> <span class="hljs-params">ve</span>.<span class="hljs-params">exists</span>(<span class="hljs-params">!<span class="hljs-number">0</span></span>)}<span class="hljs-params">write</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ensureCommitNotCalled</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">mutations</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">ensureCommitNotCalled</span><span class="hljs-params">()</span>{}}<span class="hljs-params">class</span> <span class="hljs-params">zm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">datastore</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">updateFunction</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">aa</span>=5,<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>=<span class="hljs-params">new</span> <span class="hljs-params">Za</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.asyncQueue,<span class="hljs-string">"transaction_retry"</span></span>)}<span class="hljs-params">run</span><span class="hljs-params">()</span>{<span class="hljs-params">this</span>.<span class="hljs-params">aa</span>-=1,<span class="hljs-params">this</span>.<span class="hljs-params">ca</span><span class="hljs-params">()</span>}<span class="hljs-params">ca</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">this</span>.<span class="hljs-params">rr</span>.<span class="hljs-params">Xi</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">qm</span>(<span class="hljs-params">i.datastore</span>),<span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">ua</span>(<span class="hljs-params">s</span>);<span class="hljs-params">o</span>&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;{i.asyncQueue.enqueueAndForget((</span>)=&gt;</span>s.commit().then(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{i.deferred.resolve(a)}).catch(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>{i.ha(c)}))}).catch(<span class="hljs-function"><span class="hljs-params">a</span>=&gt;</span>{i.ha(a)})}))}ua(i){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">const</span> s=<span class="hljs-keyword">this</span>.updateFunction(i);<span class="hljs-keyword">return</span>!En(s)&amp;&amp;s.catch&amp;&amp;s.then?s:<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.deferred.reject(<span class="hljs-built_in">Error</span>(<span class="hljs-string">"Transaction callback must return a Promise"</span></span>)),<span class="hljs-params">null</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">s</span>),<span class="hljs-params">null</span>}}<span class="hljs-params">ha</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">aa</span>&gt;0&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">la</span>(<span class="hljs-params">i</span>)?(<span class="hljs-params"><span class="hljs-keyword">this</span>.aa-=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.asyncQueue.enqueueAndForget((</span>)=&gt;</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>.ca(</span>),<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>))):<span class="hljs-params">this</span>.<span class="hljs-params">deferred</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">la</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"FirebaseError"</span>===i.name</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">code</span>;<span class="hljs-params">return</span>"<span class="hljs-params">aborted</span>"===<span class="hljs-params">s</span>||"<span class="hljs-params">failed</span>-<span class="hljs-params">precondition</span>"===<span class="hljs-params">s</span>||!<span class="hljs-params">Pl</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">return</span>!1}}<span class="hljs-params">class</span> <span class="hljs-params">Gm</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>;<span class="hljs-params">this</span>.<span class="hljs-params">credentials</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">databaseInfo</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">user</span>=<span class="hljs-params">Me</span>.<span class="hljs-params">UNAUTHENTICATED</span>,<span class="hljs-params">this</span>.<span class="hljs-params">clientId</span>=<span class="hljs-params">tl</span>.<span class="hljs-params">I</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">credentialListener</span>=<span class="hljs-params">()</span>=&gt;</span><span class="hljs-built_in">Promise</span>.resolve(),<span class="hljs-keyword">this</span>.credentials.start(s,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> c=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(u</span>){<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"FirestoreClient"</span>,<span class="hljs-string">"Received user="</span>,u.uid</span>),<span class="hljs-params">yield</span> <span class="hljs-params">a</span>.<span class="hljs-params">credentialListener</span>(<span class="hljs-params">u</span>),<span class="hljs-params">a</span>.<span class="hljs-params">user</span>=<span class="hljs-params">u</span>});<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">u</span>){<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">()</span>)}<span class="hljs-params">getConfiguration</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span>{<span class="hljs-params">asyncQueue</span>:<span class="hljs-params">i</span>.<span class="hljs-params">asyncQueue</span>,<span class="hljs-params">databaseInfo</span>:<span class="hljs-params">i</span>.<span class="hljs-params">databaseInfo</span>,<span class="hljs-params">clientId</span>:<span class="hljs-params">i</span>.<span class="hljs-params">clientId</span>,<span class="hljs-params">credentials</span>:<span class="hljs-params">i</span>.<span class="hljs-params">credentials</span>,<span class="hljs-params">initialUser</span>:<span class="hljs-params">i</span>.<span class="hljs-params">user</span>,<span class="hljs-params">maxConcurrentLimboResolutions</span>:100}})<span class="hljs-params">()</span>}<span class="hljs-params">setCredentialChangeListener</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">credentialListener</span>=<span class="hljs-params">i</span>}<span class="hljs-params">verifyNotTerminated</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.asyncQueue.isShuttingDown</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.FAILED_PRECONDITION,<span class="hljs-string">"The client has already been terminated."</span></span>)}<span class="hljs-params">terminate</span><span class="hljs-params">()</span>{<span class="hljs-params">var</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>;<span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enterRestrictedMode</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForgetEvenWhileRestricted</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">try</span>{<span class="hljs-params">i</span>.<span class="hljs-params">onlineComponents</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> i.onlineComponents.terminate(</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">offlineComponents</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">yield</span> i.offlineComponents.terminate(</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">credentials</span>.<span class="hljs-params">shutdown</span><span class="hljs-params">()</span>,<span class="hljs-params">s</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">o,<span class="hljs-string">"Failed to shutdown persistence"</span></span>);<span class="hljs-params">s</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">a</span>)}})),<span class="hljs-params">s</span>.<span class="hljs-params">promise</span>}}<span class="hljs-params">function</span> <span class="hljs-params">td</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">jc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">jc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">jc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">verifyOperationInProgress</span><span class="hljs-params">()</span>,<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"FirestoreClient"</span>,<span class="hljs-string">"Initializing OfflineComponentProvider"</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">r</span>.<span class="hljs-params">getConfiguration</span><span class="hljs-params">()</span>;<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">initialize</span>(<span class="hljs-params">s</span>);<span class="hljs-params">let</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">initialUser</span>;<span class="hljs-params">r</span>.<span class="hljs-params">setCredentialChangeListener</span>(<span class="hljs-params"><span class="hljs-keyword">function</span>(</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(c</span>){<span class="hljs-params">o</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">c</span>)||(<span class="hljs-params"><span class="hljs-keyword">yield</span> Sh(i.localStore,c</span>),<span class="hljs-params">o</span>=<span class="hljs-params">c</span>)});<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">c</span>){<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}}<span class="hljs-params">()</span>),<span class="hljs-params">i</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">setDatabaseDeletedListener</span>(<span class="hljs-params">(</span>)=&gt;</span>r.terminate()),r.offlineComponents=i})).apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nd</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> Hc.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hc</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">Hc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">verifyOperationInProgress</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Kc</span>(<span class="hljs-params">r</span>);<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"FirestoreClient"</span>,<span class="hljs-string">"Initializing OnlineComponentProvider"</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">r</span>.<span class="hljs-params">getConfiguration</span><span class="hljs-params">()</span>;<span class="hljs-params">yield</span> <span class="hljs-params">i</span>.<span class="hljs-params">initialize</span>(<span class="hljs-params">s,o</span>),<span class="hljs-params">r</span>.<span class="hljs-params">setCredentialChangeListener</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">return</span>(c=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(u,h</span>){<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">M</span>(<span class="hljs-params">u</span>);<span class="hljs-params">f</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">verifyOperationInProgress</span><span class="hljs-params">()</span>,<span class="hljs-params">k</span>(<span class="hljs-params"><span class="hljs-string">"RemoteStore"</span>,<span class="hljs-string">"RemoteStore received new credentials"</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">Jt</span>(<span class="hljs-params">f</span>);<span class="hljs-params">f</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-number">3</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">f</span>),<span class="hljs-params">v</span>&amp;&amp;<span class="hljs-params">f</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Unknown"</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">f</span>.<span class="hljs-params">remoteSyncer</span>.<span class="hljs-params">handleCredentialChange</span>(<span class="hljs-params">h</span>),<span class="hljs-params">f</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params"><span class="hljs-number">3</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">$s</span>(<span class="hljs-params">f</span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">u,h</span>){<span class="hljs-params">return</span> <span class="hljs-params">c</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">i.remoteStore,a</span>);<span class="hljs-params">var</span> <span class="hljs-params">c</span>}),<span class="hljs-params">r</span>.<span class="hljs-params">onlineComponents</span>=<span class="hljs-params">i</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Kc</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">$c</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">$c</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">$c=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">offlineComponents</span>||(<span class="hljs-params">k(<span class="hljs-string">"FirestoreClient"</span>,<span class="hljs-string">"Using default OfflineComponentProvider"</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">td</span>(<span class="hljs-params">r,<span class="hljs-keyword">new</span> Jh</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">offlineComponents</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">So</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Zc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Zc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Zc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">onlineComponents</span>||(<span class="hljs-params">k(<span class="hljs-string">"FirestoreClient"</span>,<span class="hljs-string">"Using default OnlineComponentProvider"</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">nd</span>(<span class="hljs-params">r,<span class="hljs-keyword">new</span> Gc</span>)),<span class="hljs-params">r</span>.<span class="hljs-params">onlineComponents</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">id</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Kc</span>(<span class="hljs-params">r</span>).<span class="hljs-params">then</span>(<span class="hljs-params">i=&gt;i.persistence</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Qc</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Kc</span>(<span class="hljs-params">r</span>).<span class="hljs-params">then</span>(<span class="hljs-params">i=&gt;i.localStore</span>)}<span class="hljs-params">function</span> <span class="hljs-params">sd</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">So</span>(<span class="hljs-params">r</span>).<span class="hljs-params">then</span>(<span class="hljs-params">i=&gt;i.remoteStore</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Yc</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">So</span>(<span class="hljs-params">r</span>).<span class="hljs-params">then</span>(<span class="hljs-params">i=&gt;i.syncEngine</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Fi</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Wc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Wc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span>(<span class="hljs-params">Wc=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(r</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">yield</span> <span class="hljs-params">So</span>(<span class="hljs-params">r</span>),<span class="hljs-params">s</span>=<span class="hljs-params">i</span>.<span class="hljs-params">eventManager</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">onListen</span>=<span class="hljs-params">bm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,i.syncEngine</span>),<span class="hljs-params">s</span>.<span class="hljs-params">onUnlisten</span>=<span class="hljs-params">Tm</span>.<span class="hljs-params">bind</span>(<span class="hljs-params"><span class="hljs-literal">null</span>,i.syncEngine</span>),<span class="hljs-params">s</span>})).<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">rd</span>(<span class="hljs-params">r,i,s={}</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c,u,h,f</span>){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">new</span> <span class="hljs-params">Io</span>(<span class="hljs-params">{next:T=&gt;{c.enqueueAndForget((</span>)=&gt;</span>pc(a,w));<span class="hljs-keyword">const</span> S=T.docs.has(u);!S&amp;&amp;T.fromCache?f.reject(<span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">"Failed to get document because the client is offline."</span>)):S&amp;&amp;T.fromCache&amp;&amp;h&amp;&amp;<span class="hljs-string">"server"</span>===h.source?f.reject(<span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'</span>)):f.resolve(T)},<span class="hljs-attr">error</span>:<span class="hljs-function"><span class="hljs-params">T</span>=&gt;</span>f.reject(T)}),w=<span class="hljs-keyword">new</span> yc(pi(u.path),v,{<span class="hljs-attr">includeMetadataChanges</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">uo</span>:!<span class="hljs-number">0</span>});<span class="hljs-keyword">return</span> dc(a,w)}(<span class="hljs-keyword">yield</span> Fi(r),r.asyncQueue,i,s,o)})),o.promise}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">od</span>(<span class="hljs-params">r,i,s={}</span>)</span>{<span class="hljs-keyword">const</span> o=<span class="hljs-keyword">new</span> Ce;<span class="hljs-keyword">return</span> r.asyncQueue.enqueueAndForget(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c,u,h,f</span>){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">new</span> <span class="hljs-params">Io</span>(<span class="hljs-params">{next:T=&gt;{c.enqueueAndForget((</span>)=&gt;</span>pc(a,w)),T.fromCache&amp;&amp;<span class="hljs-string">"server"</span>===h.source?f.reject(<span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'</span>)):f.resolve(T)},<span class="hljs-attr">error</span>:<span class="hljs-function"><span class="hljs-params">T</span>=&gt;</span>f.reject(T)}),w=<span class="hljs-keyword">new</span> yc(u,v,{<span class="hljs-attr">includeMetadataChanges</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">uo</span>:!<span class="hljs-number">0</span>});<span class="hljs-keyword">return</span> dc(a,w)}(<span class="hljs-keyword">yield</span> Fi(r),r.asyncQueue,i,s,o)})),o.promise}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jm</span></span>{<span class="hljs-keyword">constructor</span>(i,s,o,a,c,u,h,f){<span class="hljs-keyword">this</span>.databaseId=i,<span class="hljs-keyword">this</span>.appId=s,<span class="hljs-keyword">this</span>.persistenceKey=o,<span class="hljs-keyword">this</span>.host=a,<span class="hljs-keyword">this</span>.ssl=c,<span class="hljs-keyword">this</span>.forceLongPolling=u,<span class="hljs-keyword">this</span>.autoDetectLongPolling=h,<span class="hljs-keyword">this</span>.useFetchStreams=f}}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ui</span></span>{<span class="hljs-keyword">constructor</span>(i,s){<span class="hljs-keyword">this</span>.projectId=i,<span class="hljs-keyword">this</span>.database=s||<span class="hljs-string">"(default)"</span>}<span class="hljs-keyword">get</span> isDefaultDatabase(){<span class="hljs-keyword">return</span><span class="hljs-string">"(default)"</span>===<span class="hljs-keyword">this</span>.database}isEqual(i){<span class="hljs-keyword">return</span> i <span class="hljs-keyword">instanceof</span> Ui&amp;&amp;i.projectId===<span class="hljs-keyword">this</span>.projectId&amp;&amp;i.database===<span class="hljs-keyword">this</span>.database}}<span class="hljs-keyword">const</span> ad=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Jc</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">`Function <span class="hljs-subst">${r}</span>() cannot be called with an empty <span class="hljs-subst">${i}</span>.`</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cd</span>(<span class="hljs-params">r,i,s,o</span>)</span>{<span class="hljs-keyword">if</span>(!<span class="hljs-number">0</span>===i&amp;&amp;!<span class="hljs-number">0</span>===o)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">`<span class="hljs-subst">${r}</span> and <span class="hljs-subst">${s}</span> cannot be used together.`</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ud</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(!U.isDocumentKey(r))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid document reference. Document references must have an even number of segments, but <span class="hljs-subst">${r}</span> has <span class="hljs-subst">${r.length}</span>.`</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ld</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(U.isDocumentKey(r))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid collection reference. Collection references must have an odd number of segments, but <span class="hljs-subst">${r}</span> has <span class="hljs-subst">${r.length}</span>.`</span>)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xo</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===r)<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===r)<span class="hljs-keyword">return</span><span class="hljs-string">"null"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> r)<span class="hljs-keyword">return</span> r.length&gt;<span class="hljs-number">20</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params">r=<span class="hljs-string">`<span class="hljs-subst">${r.substring(<span class="hljs-number">0</span>,<span class="hljs-number">20</span>)}</span>...`</span></span>),<span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>(<span class="hljs-params">r</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> r||<span class="hljs-string">"boolean"</span>==<span class="hljs-keyword">typeof</span> r</span>)<span class="hljs-params">return</span>""+<span class="hljs-params">r</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span></span>)<span class="hljs-params">return</span>"<span class="hljs-params">an</span> <span class="hljs-params">array</span>";{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">function</span>(<span class="hljs-params">s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s.constructor</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=/<span class="hljs-params">function</span>\<span class="hljs-params">s</span>+(<span class="hljs-params">[^\s(]+</span>)\<span class="hljs-params">s</span>*\(<span class="hljs-params"><span class="hljs-regexp">/.exec(s.constructor.toString());if(o&amp;&amp;o.length&gt;1)return o[1]}return null}(r);return i?`a custom ${i} object`:"an object"}}return"function"==typeof r?"a function":V()}function W(r,i){if("_delegate"in r&amp;&amp;(r=r._delegate),!(r instanceof i)){if(i.name===r.constructor.name)throw new A(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=xo(r);throw new A(I.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${s}`)}}return r}function hd(r,i){if(i&lt;=0)throw new A(I.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${i}.`)}class dd{constructor(i){var s;if(void 0===i.host){if(void 0!==i.ssl)throw new A(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=i.host,this.ssl=null===(s=i.ssl)||void 0===s||s;if(this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,void 0===i.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==i.cacheSizeBytes&amp;&amp;i.cacheSizeBytes&lt;1048576)throw new A(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.useFetchStreams=!!i.useFetchStreams,cd("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling)}isEqual(i){return this.host===i.host&amp;&amp;this.ssl===i.ssl&amp;&amp;this.credentials===i.credentials&amp;&amp;this.cacheSizeBytes===i.cacheSizeBytes&amp;&amp;this.experimentalForceLongPolling===i.experimentalForceLongPolling&amp;&amp;this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&amp;&amp;this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&amp;&amp;this.useFetchStreams===i.useFetchStreams}}class Qs{constructor(i,s){this._credentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dd({}),this._settingsFrozen=!1,i instanceof Ui?this._databaseId=i:(this._app=i,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new A(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(o.options.projectId)}(i))}get app(){if(!this._app)throw new A(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(i){if(this._settingsFrozen)throw new A(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dd(i),void 0!==i.credentials&amp;&amp;(this._credentials=function(s){if(!s)return new Tf;switch(s.type){case"gapi":const o=s.client;return z(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new xf(o,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new A(I.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(i.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=ad.get(i);s&amp;&amp;(k("ComponentProvider","Removing Datastore"),ad.delete(i),s.terminate())}(this),Promise.resolve()}}class re{constructor(i,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=i}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bt(this.firestore,this.converter,this._key.path.popLast())}withConverter(i){return new re(this.firestore,i,this._key)}}class Ge{constructor(i,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=i}withConverter(i){return new Ge(this.firestore,i,this._query)}}class bt extends Ge{constructor(i,s,o){super(i,s,pi(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const i=this._path.popLast();return i.isEmpty()?null:new re(this.firestore,null,new U(i))}withConverter(i){return new bt(this.firestore,i,this._path)}}function fd(r,i,...s){if(r=(0,Y.m9)(r),Jc("collection","path",i),r instanceof Qs){const o=X.fromString(i,...s);return ld(o),new bt(r,null,o)}{if(!(r instanceof re||r instanceof bt))throw new A(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=X.fromString(r.path,...s).child(X.fromString(i));return ld(o),new bt(r.firestore,null,o)}}function Do(r,i,...s){if(r=(0,Y.m9)(r),1===arguments.length&amp;&amp;(i=tl.I()),Jc("doc","path",i),r instanceof Qs){const o=X.fromString(i,...s);return ud(o),new re(r,null,new U(o))}{if(!(r instanceof re||r instanceof bt))throw new A(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(X.fromString(i,...s));return ud(o),new re(r.firestore,r instanceof bt?r.converter:null,new U(o))}}function pd(r,i){return r=(0,Y.m9)(r),i=(0,Y.m9)(i),(r instanceof re||r instanceof bt)&amp;&amp;(i instanceof re||i instanceof bt)&amp;&amp;r.firestore===i.firestore&amp;&amp;r.path===i.path&amp;&amp;r.converter===i.converter}function md(r,i){return r=(0,Y.m9)(r),i=(0,Y.m9)(i),r instanceof Ge&amp;&amp;i instanceof Ge&amp;&amp;r.firestore===i.firestore&amp;&amp;Ps(r._query,i._query)&amp;&amp;r.converter===i.converter}class tg{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Za(this,"async_queue_retry"),this.Ea=()=&gt;{const s=bo();s&amp;&amp;k("AsyncQueue","Visibility state changed to "+s.visibilityState),this.rr.tr()};const i=bo();i&amp;&amp;"function"==typeof i.addEventListener&amp;&amp;i.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(i){this.enqueue(i)}enqueueAndForgetEvenWhileRestricted(i){this.Ta(),this.Ia(i)}enterRestrictedMode(i){if(!this.wa){this.wa=!0,this.ya=i||!1;const s=bo();s&amp;&amp;"function"==typeof s.removeEventListener&amp;&amp;s.removeEventListener("visibilitychange",this.Ea)}}enqueue(i){if(this.Ta(),this.wa)return new Promise(()=&gt;{});const s=new Ce;return this.Ia(()=&gt;this.wa&amp;&amp;this.ya?Promise.resolve():(i().then(s.resolve,s.reject),s.promise)).then(()=&gt;s.promise)}enqueueRetryable(i){this.enqueueAndForget(()=&gt;(this.da.push(i),this.Aa()))}Aa(){var i=this;return(0,D.Z)(function*(){if(0!==i.da.length){try{yield i.da[0](),i.da.shift(),i.rr.reset()}catch(s){if(!Cn(s))throw s;k("AsyncQueue","Operation failed with retryable error: "+s)}i.da.length&gt;0&amp;&amp;i.rr.Xi(()=&gt;i.Aa())}})()}Ia(i){const s=this.fa.then(()=&gt;(this.ga=!0,i().catch(o=&gt;{throw this.ma=o,this.ga=!1,ye("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&amp;&amp;(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(o)),o}).then(o=&gt;(this.ga=!1,o))));return this.fa=s,s}enqueueAfterDelay(i,s,o){this.Ta(),this.pa.indexOf(i)&gt;-1&amp;&amp;(s=0);const a=hc.createAndSchedule(this,i,s,o,c=&gt;this.Ra(c));return this._a.push(a),a}Ta(){this.ma&amp;&amp;V()}verifyOperationInProgress(){}Pa(){var i=this;return(0,D.Z)(function*(){let s;do{s=i.fa,yield s}while(s!==i.fa)})()}ba(i){for(const s of this._a)if(s.timerId===i)return!0;return!1}va(i){return this.Pa().then(()=&gt;{this._a.sort((s,o)=&gt;s.targetTimeMs-o.targetTimeMs);for(const s of this._a)if(s.skipDelay(),"all"!==i&amp;&amp;s.timerId===i)break;return this.Pa()})}Va(i){this.pa.push(i)}Ra(i){const s=this._a.indexOf(i);this._a.splice(s,1)}}function Xc(r){return function(i,s){if("object"!=typeof i||null===i)return!1;const o=i;for(const a of["next","error","complete"])if(a in o&amp;&amp;"function"==typeof o[a])return!0;return!1}(r)}class ng{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ce,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(i,s,o){this._progressObserver={next:i,error:s,complete:o}}catch(i){return this._taskCompletionResolver.promise.catch(i)}then(i,s){return this._taskCompletionResolver.promise.then(i,s)}_completeWith(i){this._updateProgress(i),this._progressObserver.complete&amp;&amp;this._progressObserver.complete(),this._taskCompletionResolver.resolve(i)}_failWith(i){this._lastProgress.taskState="Error",this._progressObserver.next&amp;&amp;this._progressObserver.next(this._lastProgress),this._progressObserver.error&amp;&amp;this._progressObserver.error(i),this._taskCompletionResolver.reject(i)}_updateProgress(i){this._lastProgress=i,this._progressObserver.next&amp;&amp;this._progressObserver.next(i)}}class he extends Qs{constructor(i,s){super(i,s),this.type="firestore",this._queue=new tg,this._persistenceKey="name"in i?i.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||gd(this),this._firestoreClient.terminate()}}function Se(r){return r._firestoreClient||gd(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function gd(r){var i;const s=r._freezeSettings(),o=(c=(null===(i=r._app)||void 0===i?void 0:i.options.appId)||"",new Jm(r._databaseId,c,r._persistenceKey,(h=s).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var c,h;r._firestoreClient=new Gm(r._credentials,r._queue,o)}function yd(r,i,s){const o=new Ce;return r.asyncQueue.enqueue((0,D.Z)(function*(){try{yield td(r,s),yield nd(r,i),o.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===I.FAILED_PRECONDITION||c.code===I.UNIMPLEMENTED:!("undefined"!=typeof DOMException&amp;&amp;c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),o.reject(a)}var c})).then(()=&gt;o.promise)}function _d(r){if(r._initialized||r._terminated)throw new A(I.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nt{constructor(...i){for(let s=0;s&lt;i.length;++s)if(0===i[s].length)throw new A(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oe(i)}isEqual(i){return this._internalPath.isEqual(i._internalPath)}}class Tt{constructor(i){this._byteString=i}static fromBase64String(i){try{return new Tt(Ae.fromBase64String(i))}catch(s){throw new A(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(i){return new Tt(Ae.fromUint8Array(i))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(i){return this._byteString.isEqual(i._byteString)}}class Pn{constructor(i){this._methodName=i}}class Co{constructor(i,s){if(!isFinite(i)||i&lt;-90||i&gt;90)throw new A(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(s)||s&lt;-180||s&gt;180)throw new A(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=i,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(i){return this._lat===i._lat&amp;&amp;this._long===i._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(i){return $(this._lat,i._lat)||$(this._long,i._long)}}const dg=/</span>^__.*__$<span class="hljs-regexp">/;class fg{constructor(i,s,o){this.data=i,this.fieldMask=s,this.fieldTransforms=o}toMutation(i,s){return null!==this.fieldMask?new Kt(i,this.data,this.fieldMask,s,this.fieldTransforms):new Ms(i,this.data,s,this.fieldTransforms)}}class vd{constructor(i,s,o){this.data=i,this.fieldMask=s,this.fieldTransforms=o}toMutation(i,s){return new Kt(i,this.data,this.fieldMask,s,this.fieldTransforms)}}function wd(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class Ro{constructor(i,s,o,a,c,u){this.settings=i,this.databaseId=s,this.N=o,this.ignoreUndefinedProperties=a,void 0===c&amp;&amp;this.Sa(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(i){return new Ro(Object.assign(Object.assign({},this.settings),i),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(i){var s;const o=null===(s=this.path)||void 0===s?void 0:s.child(i),a=this.Ca({path:o,xa:!1});return a.ka(i),a}$a(i){var s;const o=null===(s=this.path)||void 0===s?void 0:s.child(i),a=this.Ca({path:o,xa:!1});return a.Sa(),a}Oa(i){return this.Ca({path:void 0,xa:!0})}Fa(i){return ko(i,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(i){return void 0!==this.fieldMask.find(s=&gt;i.isPrefixOf(s))||void 0!==this.fieldTransforms.find(s=&gt;i.isPrefixOf(s.field))}Sa(){if(this.path)for(let i=0;i&lt;this.path.length;i++)this.ka(this.path.get(i))}ka(i){if(0===i.length)throw this.Fa("Document fields must not be empty");if(wd(this.Da)&amp;&amp;dg.test(i))throw this.Fa('Document fields cannot begin and end with "__"')}}class pg{constructor(i,s,o){this.databaseId=i,this.ignoreUndefinedProperties=s,this.N=o||Ks(i)}Ba(i,s,o,a=!1){return new Ro({Da:i,methodName:s,La:o,path:Oe.emptyPath(),xa:!1,Ma:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Nn(r){const i=r._freezeSettings(),s=Ks(r._databaseId);return new pg(r._databaseId,!!i.ignoreUndefinedProperties,s)}function Ao(r,i,s,o,a,c={}){const u=r.Ba(c.merge||c.mergeFields?2:0,i,s,a);iu("Data must be an object, but it was:",u,o);const h=Ed(o,u);let f,v;if(c.merge)f=new li(u.fieldMask),v=u.fieldTransforms;else if(c.mergeFields){const w=[];for(const T of c.mergeFields){const S=su(i,T,s);if(!u.contains(S))throw new A(I.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Sd(w,S)||w.push(S)}f=new li(w),v=u.fieldTransforms.filter(T=&gt;f.covers(T.field))}else f=null,v=u.fieldTransforms;return new fg(new qe(h),f,v)}class Ys extends Pn{_toFieldTransform(i){if(2!==i.Da)throw i.Fa(1===i.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return i.fieldMask.push(i.path),null}isEqual(i){return i instanceof Ys}}function bd(r,i,s){return new Ro({Da:3,La:i.settings.La,methodName:r._methodName,xa:s},i.databaseId,i.N,i.ignoreUndefinedProperties)}class eu extends Pn{_toFieldTransform(i){return new Ls(i.path,new gi)}isEqual(i){return i instanceof eu}}class mg extends Pn{constructor(i,s){super(i),this.Ua=s}_toFieldTransform(i){const s=bd(this,i,!0),o=this.Ua.map(c=&gt;Ln(c,s)),a=new Sn(o);return new Ls(i.path,a)}isEqual(i){return this===i}}class gg extends Pn{constructor(i,s){super(i),this.Ua=s}_toFieldTransform(i){const s=bd(this,i,!0),o=this.Ua.map(c=&gt;Ln(c,s)),a=new xn(o);return new Ls(i.path,a)}isEqual(i){return this===i}}class yg extends Pn{constructor(i,s){super(i),this.qa=s}_toFieldTransform(i){const s=new yi(i.N,bl(i.N,this.qa));return new Ls(i.path,s)}isEqual(i){return this===i}}function tu(r,i,s,o){const a=r.Ba(1,i,s);iu("Data must be an object, but it was:",a,o);const c=[],u=qe.empty();Tn(o,(f,v)=&gt;{const w=ru(i,f,s);v=(0,Y.m9)(v);const T=a.$a(w);if(v instanceof Ys)c.push(w);else{const S=Ln(v,T);null!=S&amp;&amp;(c.push(w),u.set(w,S))}});const h=new li(c);return new vd(u,h,a.fieldTransforms)}function nu(r,i,s,o,a,c){const u=r.Ba(1,i,s),h=[su(i,o,s)],f=[a];if(c.length%2!=0)throw new A(I.INVALID_ARGUMENT,`Function ${i}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S&lt;c.length;S+=2)h.push(su(i,c[S])),f.push(c[S+1]);const v=[],w=qe.empty();for(let S=h.length-1;S&gt;=0;--S)if(!Sd(v,h[S])){const C=h[S];let P=f[S];P=(0,Y.m9)(P);const B=u.$a(C);if(P instanceof Ys)v.push(C);else{const j=Ln(P,B);null!=j&amp;&amp;(v.push(C),w.set(C,j))}}const T=new li(v);return new vd(w,T,u.fieldTransforms)}function Td(r,i,s,o=!1){return Ln(s,r.Ba(o?4:3,i))}function Ln(r,i){if(Id(r=(0,Y.m9)(r)))return iu("Unsupported field value:",i,r),Ed(r,i);if(r instanceof Pn)return function(s,o){if(!wd(o.Da))throw o.Fa(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Fa(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&amp;&amp;o.fieldTransforms.push(a)}(r,i),null;if(void 0===r&amp;&amp;i.ignoreUndefinedProperties)return null;if(i.path&amp;&amp;i.fieldMask.push(i.path),r instanceof Array){if(i.settings.xa&amp;&amp;4!==i.Da)throw i.Fa("Nested arrays are not supported");return function(s,o){const a=[];let c=0;for(const u of s){let h=Ln(u,o.Oa(c));null==h&amp;&amp;(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(r,i)}return function(s,o){if(null===(s=(0,Y.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return bl(o.N,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const a=Re.fromDate(s);return{timestampValue:Vs(o.N,a)}}if(s instanceof Re){const a=new Re(s.seconds,1e3*Math.floor(s.nanoseconds/</span><span class="hljs-number">1e3</span></span>));<span class="hljs-params">return</span>{<span class="hljs-params">timestampValue</span>:<span class="hljs-params">Vs</span>(<span class="hljs-params">o.N,a</span>)}}<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">instanceof</span> Co</span>)<span class="hljs-params">return</span>{<span class="hljs-params">geoPointValue</span>:{<span class="hljs-params">latitude</span>:<span class="hljs-params">s</span>.<span class="hljs-params">latitude</span>,<span class="hljs-params">longitude</span>:<span class="hljs-params">s</span>.<span class="hljs-params">longitude</span>}};<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">instanceof</span> Tt</span>)<span class="hljs-params">return</span>{<span class="hljs-params">bytesValue</span>:<span class="hljs-params">ql</span>(<span class="hljs-params">o.N,s._byteString</span>)};<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">instanceof</span> re</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">databaseId</span>,<span class="hljs-params">c</span>=<span class="hljs-params">s</span>.<span class="hljs-params">firestore</span>.<span class="hljs-params">_databaseId</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!c.isEqual(a</span>))<span class="hljs-params">throw</span> <span class="hljs-params">o</span>.<span class="hljs-params">Fa</span>(<span class="hljs-params"><span class="hljs-string">`Document reference is for database <span class="hljs-subst">${c.projectId}</span>/<span class="hljs-subst">${c.database}</span> but should be for database <span class="hljs-subst">${a.projectId}</span>/<span class="hljs-subst">${a.database}</span>`</span></span>);<span class="hljs-params">return</span>{<span class="hljs-params">referenceValue</span>:<span class="hljs-params">Ta</span>(<span class="hljs-params">s.firestore._databaseId||o.databaseId,s._key.path</span>)}}<span class="hljs-params">throw</span> <span class="hljs-params">o</span>.<span class="hljs-params">Fa</span>(<span class="hljs-params"><span class="hljs-string">`Unsupported field value: <span class="hljs-subst">${xo(s)}</span>`</span></span>)}(<span class="hljs-params">r,i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ed</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>={};<span class="hljs-params">return</span> <span class="hljs-params">sl</span>(<span class="hljs-params">r</span>)?<span class="hljs-params">i</span>.<span class="hljs-params">path</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">path</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">fieldMask</span>.<span class="hljs-params">push</span>(<span class="hljs-params">i.path</span>):<span class="hljs-params">Tn</span>(<span class="hljs-params">r,(o,a</span>)=&gt;</span>{<span class="hljs-keyword">const</span> c=Ln(a,i.Na(o));<span class="hljs-literal">null</span>!=c&amp;&amp;<span class="hljs-function">(<span class="hljs-params">s[o]=c</span>)}),{<span class="hljs-params">mapValue</span>:{<span class="hljs-params">fields</span>:<span class="hljs-params">s</span>}}}<span class="hljs-params">function</span> <span class="hljs-params">Id</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>!(<span class="hljs-params"><span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> r||<span class="hljs-literal">null</span>===r||r <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>||r <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>||r <span class="hljs-keyword">instanceof</span> Re||r <span class="hljs-keyword">instanceof</span> Co||r <span class="hljs-keyword">instanceof</span> Tt||r <span class="hljs-keyword">instanceof</span> re||r <span class="hljs-keyword">instanceof</span> Pn</span>)}<span class="hljs-params">function</span> <span class="hljs-params">iu</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!Id(s</span>)||"<span class="hljs-params">object</span>"!=<span class="hljs-params">typeof</span>(<span class="hljs-params">o=s</span>)||<span class="hljs-params">null</span>===<span class="hljs-params">o</span>||<span class="hljs-params">Object</span>.<span class="hljs-params">getPrototypeOf</span>(<span class="hljs-params">o</span>)!==<span class="hljs-params">Object</span>.<span class="hljs-params">prototype</span>&amp;&amp;<span class="hljs-params">null</span>!==<span class="hljs-params">Object</span>.<span class="hljs-params">getPrototypeOf</span>(<span class="hljs-params">o</span>)){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">xo</span>(<span class="hljs-params">s</span>);<span class="hljs-params">throw</span> <span class="hljs-params">i</span>.<span class="hljs-params">Fa</span>(<span class="hljs-params"><span class="hljs-string">"an object"</span>===o?r+<span class="hljs-string">" a custom object"</span>:r+<span class="hljs-string">" "</span>+o</span>)}<span class="hljs-params">var</span> <span class="hljs-params">o</span>}<span class="hljs-params">function</span> <span class="hljs-params">su</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">(i=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">i</span>))<span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>)<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">_internalPath</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> i</span>)<span class="hljs-params">return</span> <span class="hljs-params">ru</span>(<span class="hljs-params">r,i</span>);<span class="hljs-params">throw</span> <span class="hljs-params">ko</span>(<span class="hljs-params"><span class="hljs-string">"Field path arguments must be of type string or FieldPath."</span>,r,!<span class="hljs-number">1</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,s</span>)}<span class="hljs-params">const</span> <span class="hljs-params">_g</span>=<span class="hljs-params">new</span> <span class="hljs-params">RegExp</span>(<span class="hljs-params"><span class="hljs-string">"[~\\*/\\[\\]]"</span></span>);<span class="hljs-params">function</span> <span class="hljs-params">ru</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.search(_g</span>)&gt;=0)<span class="hljs-params">throw</span> <span class="hljs-params">ko</span>(<span class="hljs-params"><span class="hljs-string">`Invalid field path (<span class="hljs-subst">${i}</span>). Paths must not contain '~', '*', '/', '[', or ']'`</span>,r,!<span class="hljs-number">1</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,s</span>);<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Nt</span>(<span class="hljs-params">...i.split(<span class="hljs-string">"."</span></span>)).<span class="hljs-params">_internalPath</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">throw</span> <span class="hljs-params">ko</span>(<span class="hljs-params"><span class="hljs-string">`Invalid field path (<span class="hljs-subst">${i}</span>). Paths must not be empty, begin with '.', end with '.', or contain '..'`</span>,r,!<span class="hljs-number">1</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">ko</span>(<span class="hljs-params">r,i,s,o,a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>&amp;&amp;!<span class="hljs-params">o</span>.<span class="hljs-params">isEmpty</span><span class="hljs-params">()</span>,<span class="hljs-params">u</span>=<span class="hljs-params">void</span> 0!==<span class="hljs-params">a</span>;<span class="hljs-params">let</span> <span class="hljs-params">h</span>=`<span class="hljs-params">Function</span> <span class="hljs-params">$</span>{<span class="hljs-params">i</span>}<span class="hljs-params">()</span> <span class="hljs-params">called</span> <span class="hljs-params">with</span> <span class="hljs-params">invalid</span> <span class="hljs-params">data</span>`;<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">h+=<span class="hljs-string">" (via `toFirestore()`)"</span></span>),<span class="hljs-params">h</span>+=". ";<span class="hljs-params">let</span> <span class="hljs-params">f</span>="";<span class="hljs-params">return</span>(<span class="hljs-params">c||u</span>)&amp;&amp;(<span class="hljs-params">f+=<span class="hljs-string">" (found"</span>,c&amp;&amp;(f+=<span class="hljs-string">` in field <span class="hljs-subst">${o}</span>`</span></span>),<span class="hljs-params">u</span>&amp;&amp;(<span class="hljs-params">f+=<span class="hljs-string">` in document <span class="hljs-subst">${a}</span>`</span></span>),<span class="hljs-params">f</span>+=")"),<span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,h+r+f</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Sd</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">some</span>(<span class="hljs-params">s=&gt;s.isEqual(i</span>))}<span class="hljs-params">class</span> <span class="hljs-params">Ws</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_key</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_converter</span>=<span class="hljs-params">c</span>}<span class="hljs-params">get</span> <span class="hljs-params">id</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_key</span>.<span class="hljs-params">path</span>.<span class="hljs-params">lastSegment</span><span class="hljs-params">()</span>}<span class="hljs-params">get</span> <span class="hljs-params">ref</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">re</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._converter,<span class="hljs-keyword">this</span>._key</span>)}<span class="hljs-params">exists</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">null</span>!==<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>}<span class="hljs-params">data</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._converter</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">vg</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._userDataWriter,<span class="hljs-keyword">this</span>._key,<span class="hljs-keyword">this</span>._document,<span class="hljs-literal">null</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_converter</span>.<span class="hljs-params">fromFirestore</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>.<span class="hljs-params">convertValue</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document.data.value</span>)}}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">Po(<span class="hljs-string">"DocumentSnapshot.get"</span>,i</span>));<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==s</span>)<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>.<span class="hljs-params">convertValue</span>(<span class="hljs-params">s</span>)}}}<span class="hljs-params">class</span> <span class="hljs-params">vg</span> <span class="hljs-params">extends</span> <span class="hljs-params">Ws</span>{<span class="hljs-params">data</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">super</span>.<span class="hljs-params">data</span><span class="hljs-params">()</span>}}<span class="hljs-params">function</span> <span class="hljs-params">Po</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span>"<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">i</span>?<span class="hljs-params">ru</span>(<span class="hljs-params">r,i</span>):<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>?<span class="hljs-params">i</span>.<span class="hljs-params">_internalPath</span>:<span class="hljs-params">i</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_internalPath</span>}<span class="hljs-params">class</span> <span class="hljs-params">Mn</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">hasPendingWrites</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">fromCache</span>=<span class="hljs-params">s</span>}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">hasPendingWrites</span>===<span class="hljs-params">i</span>.<span class="hljs-params">hasPendingWrites</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">fromCache</span>===<span class="hljs-params">i</span>.<span class="hljs-params">fromCache</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Lt</span> <span class="hljs-params">extends</span> <span class="hljs-params">Ws</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a,c,u</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,s,o,a,u</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_firestoreImpl</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">metadata</span>=<span class="hljs-params">c</span>}<span class="hljs-params">exists</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">super</span>.<span class="hljs-params">exists</span><span class="hljs-params">()</span>}<span class="hljs-params">data</span>(<span class="hljs-params">i={}</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._converter</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Js</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._userDataWriter,<span class="hljs-keyword">this</span>._key,<span class="hljs-keyword">this</span>._document,<span class="hljs-keyword">this</span>.metadata,<span class="hljs-literal">null</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_converter</span>.<span class="hljs-params">fromFirestore</span>(<span class="hljs-params">s,i</span>)}<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>.<span class="hljs-params">convertValue</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document.data.value,i.serverTimestamps</span>)}}<span class="hljs-params">get</span>(<span class="hljs-params">i,s={}</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._document</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_document</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">Po(<span class="hljs-string">"DocumentSnapshot.get"</span>,i</span>));<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o</span>)<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>.<span class="hljs-params">convertValue</span>(<span class="hljs-params">o,s.serverTimestamps</span>)}}}<span class="hljs-params">class</span> <span class="hljs-params">Js</span> <span class="hljs-params">extends</span> <span class="hljs-params">Lt</span>{<span class="hljs-params">data</span>(<span class="hljs-params">i={}</span>){<span class="hljs-params">return</span> <span class="hljs-params">super</span>.<span class="hljs-params">data</span>(<span class="hljs-params">i</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">en</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o,a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_snapshot</span>=<span class="hljs-params">a</span>,<span class="hljs-params">this</span>.<span class="hljs-params">metadata</span>=<span class="hljs-params">new</span> <span class="hljs-params">Mn</span>(<span class="hljs-params">a.hasPendingWrites,a.fromCache</span>),<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">o</span>}<span class="hljs-params">get</span> <span class="hljs-params">docs</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=[];<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">s=&gt;i.push(s</span>)),<span class="hljs-params">i</span>}<span class="hljs-params">get</span> <span class="hljs-params">size</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">size</span>}<span class="hljs-params">get</span> <span class="hljs-params">empty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> 0===<span class="hljs-params">this</span>.<span class="hljs-params">size</span>}<span class="hljs-params">forEach</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{i.call(s,<span class="hljs-keyword">new</span> Js(<span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._userDataWriter,o.key,o,<span class="hljs-keyword">new</span> Mn(<span class="hljs-keyword">this</span>._snapshot.mutatedKeys.has(o.key</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">fromCache</span>),<span class="hljs-params">this</span>.<span class="hljs-params">query</span>.<span class="hljs-params">converter</span>))})}<span class="hljs-params">docChanges</span>(<span class="hljs-params">i={}</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=!!<span class="hljs-params">i</span>.<span class="hljs-params">includeMetadataChanges</span>;<span class="hljs-params">if</span>(<span class="hljs-params">s&amp;&amp;<span class="hljs-keyword">this</span>._snapshot.excludesMetadataChanges</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot()."</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_cachedChanges</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_cachedChangesIncludeMetadataChanges</span>===<span class="hljs-params">s</span>||(<span class="hljs-params"><span class="hljs-keyword">this</span>._cachedChanges=<span class="hljs-keyword">function</span>(o,a</span>){<span class="hljs-params">if</span>(<span class="hljs-params">o._snapshot.oldDocs.isEmpty(</span>)){<span class="hljs-params">let</span> <span class="hljs-params">c</span>=0;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">docChanges</span>.<span class="hljs-params">map</span>(<span class="hljs-params">u=&gt;({type:<span class="hljs-string">"added"</span>,doc:<span class="hljs-keyword">new</span> Js(o._firestore,o._userDataWriter,u.doc.key,u.doc,<span class="hljs-keyword">new</span> Mn(o._snapshot.mutatedKeys.has(u.doc.key</span>),<span class="hljs-params">o</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">fromCache</span>),<span class="hljs-params">o</span>.<span class="hljs-params">query</span>.<span class="hljs-params">converter</span>),<span class="hljs-params">oldIndex</span>:-1,<span class="hljs-params">newIndex</span>:<span class="hljs-params">c</span>++}))}{<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">oldDocs</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">docChanges</span>.<span class="hljs-params">filter</span>(<span class="hljs-params">u=&gt;a||<span class="hljs-number">3</span>!==u.type</span>).<span class="hljs-params">map</span>(<span class="hljs-params">u=&gt;{<span class="hljs-keyword">const</span> h=<span class="hljs-keyword">new</span> Js(o._firestore,o._userDataWriter,u.doc.key,u.doc,<span class="hljs-keyword">new</span> Mn(o._snapshot.mutatedKeys.has(u.doc.key</span>),<span class="hljs-params">o</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">fromCache</span>),<span class="hljs-params">o</span>.<span class="hljs-params">query</span>.<span class="hljs-params">converter</span>);<span class="hljs-params">let</span> <span class="hljs-params">f</span>=-1,<span class="hljs-params">v</span>=-1;<span class="hljs-params">return</span> 0!==<span class="hljs-params">u</span>.<span class="hljs-params">type</span>&amp;&amp;(<span class="hljs-params">f=c.indexOf(u.doc.key</span>),<span class="hljs-params">c</span>=<span class="hljs-params">c</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">u.doc.key</span>)),1!==<span class="hljs-params">u</span>.<span class="hljs-params">type</span>&amp;&amp;(<span class="hljs-params">c=c.add(u.doc</span>),<span class="hljs-params">v</span>=<span class="hljs-params">c</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params">u.doc.key</span>)),{<span class="hljs-params">type</span>:<span class="hljs-params">wg</span>(<span class="hljs-params">u.type</span>),<span class="hljs-params">doc</span>:<span class="hljs-params">h</span>,<span class="hljs-params">oldIndex</span>:<span class="hljs-params">f</span>,<span class="hljs-params">newIndex</span>:<span class="hljs-params">v</span>}})}}(<span class="hljs-params"><span class="hljs-keyword">this</span>,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_cachedChangesIncludeMetadataChanges</span>=<span class="hljs-params">s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_cachedChanges</span>}}<span class="hljs-params">function</span> <span class="hljs-params">wg</span>(<span class="hljs-params">r</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">r</span>){<span class="hljs-params">case</span> 0:<span class="hljs-params">return</span>"<span class="hljs-params">added</span>";<span class="hljs-params">case</span> 2:<span class="hljs-params">case</span> 3:<span class="hljs-params">return</span>"<span class="hljs-params">modified</span>";<span class="hljs-params">case</span> 1:<span class="hljs-params">return</span>"<span class="hljs-params">removed</span>";<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}<span class="hljs-params">function</span> <span class="hljs-params">xd</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Lt</span>&amp;&amp;<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Lt</span>?<span class="hljs-params">r</span>.<span class="hljs-params">_firestore</span>===<span class="hljs-params">i</span>.<span class="hljs-params">_firestore</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">_key</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i._key</span>)&amp;&amp;(<span class="hljs-params"><span class="hljs-literal">null</span>===r._document?<span class="hljs-literal">null</span>===i._document:r._document.isEqual(i._document</span>))&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">_converter</span>===<span class="hljs-params">i</span>.<span class="hljs-params">_converter</span>:<span class="hljs-params">r</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">en</span>&amp;&amp;<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">en</span>&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">_firestore</span>===<span class="hljs-params">i</span>.<span class="hljs-params">_firestore</span>&amp;&amp;<span class="hljs-params">md</span>(<span class="hljs-params">r.query,i.query</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">metadata</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i.metadata</span>)&amp;&amp;<span class="hljs-params">r</span>.<span class="hljs-params">_snapshot</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i._snapshot</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Dd</span>(<span class="hljs-params">r</span>){<span class="hljs-params">if</span>(<span class="hljs-params">so(r</span>)&amp;&amp;0===<span class="hljs-params">r</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">length</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.UNIMPLEMENTED,<span class="hljs-string">"limitToLast() queries require specifying at least one orderBy() clause"</span></span>)}<span class="hljs-params">class</span> <span class="hljs-params">Xs</span>{}<span class="hljs-params">function</span> <span class="hljs-params">tn</span>(<span class="hljs-params">r,...i</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> s <span class="hljs-keyword">of</span> i</span>)<span class="hljs-params">r</span>=<span class="hljs-params">s</span>.<span class="hljs-params">_apply</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>}<span class="hljs-params">class</span> <span class="hljs-params">bg</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ka</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">ja</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Qa</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>="<span class="hljs-params">where</span>"}<span class="hljs-params">_apply</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Nn</span>(<span class="hljs-params">i.firestore</span>),<span class="hljs-params">o</span>=<span class="hljs-params">function</span>(<span class="hljs-params">a,c,u,h,f,v,w</span>){<span class="hljs-params">let</span> <span class="hljs-params">T</span>;<span class="hljs-params">if</span>(<span class="hljs-params">f.isKeyField(</span>)){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"array-contains"</span>===v||<span class="hljs-string">"array-contains-any"</span>===v</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid Query. You can't perform '<span class="hljs-subst">${v}</span>' queries on FieldPath.documentId().`</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"in"</span>===v||<span class="hljs-string">"not-in"</span>===v</span>){<span class="hljs-params">Nd</span>(<span class="hljs-params">w,v</span>);<span class="hljs-params">const</span> <span class="hljs-params">C</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> P <span class="hljs-keyword">of</span> w</span>)<span class="hljs-params">C</span>.<span class="hljs-params">push</span>(<span class="hljs-params">Pd(h,a,P</span>));<span class="hljs-params">T</span>={<span class="hljs-params">arrayValue</span>:{<span class="hljs-params">values</span>:<span class="hljs-params">C</span>}}}<span class="hljs-params">else</span> <span class="hljs-params">T</span>=<span class="hljs-params">Pd</span>(<span class="hljs-params">h,a,w</span>)}<span class="hljs-params">else</span>"<span class="hljs-params">in</span>"!==<span class="hljs-params">v</span>&amp;&amp;"<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"!==<span class="hljs-params">v</span>&amp;&amp;"<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>"!==<span class="hljs-params">v</span>||<span class="hljs-params">Nd</span>(<span class="hljs-params">w,v</span>),<span class="hljs-params">T</span>=<span class="hljs-params">Td</span>(<span class="hljs-params">u,<span class="hljs-string">"where"</span>,w,<span class="hljs-string">"in"</span>===v||<span class="hljs-string">"not-in"</span>===v</span>);<span class="hljs-params">const</span> <span class="hljs-params">S</span>=<span class="hljs-params">He</span>.<span class="hljs-params">create</span>(<span class="hljs-params">f,v,T</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">C,P</span>){<span class="hljs-params">if</span>(<span class="hljs-params">P.v(</span>)){<span class="hljs-params">const</span> <span class="hljs-params">j</span>=<span class="hljs-params">ga</span>(<span class="hljs-params">C</span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==j&amp;&amp;!j.isEqual(P.field</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. All where filters with an inequality (&lt;, &lt;=, !=, not-in, &gt;, or &gt;=) must be on the same field. But you have inequality filters on '<span class="hljs-subst">${j.toString()}</span>' and '<span class="hljs-subst">${P.field.toString()}</span>'`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">de</span>=<span class="hljs-params">ma</span>(<span class="hljs-params">C</span>);<span class="hljs-params">null</span>!==<span class="hljs-params">de</span>&amp;&amp;<span class="hljs-params">Ld</span>(<span class="hljs-params"><span class="hljs-number">0</span>,P.field,de</span>)}<span class="hljs-params">const</span> <span class="hljs-params">B</span>=<span class="hljs-params">function</span>(<span class="hljs-params">j,de</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> Ze <span class="hljs-keyword">of</span> j.filters</span>)<span class="hljs-params">if</span>(<span class="hljs-params">de.indexOf(Ze.op</span>)&gt;=0)<span class="hljs-params">return</span> <span class="hljs-params">Ze</span>.<span class="hljs-params">op</span>;<span class="hljs-params">return</span> <span class="hljs-params">null</span>}(<span class="hljs-params">C,<span class="hljs-keyword">function</span>(j</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">j</span>){<span class="hljs-params">case</span>"!=":<span class="hljs-params">return</span>["!=","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"];<span class="hljs-params">case</span>"<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>":<span class="hljs-params">return</span>["<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>","<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"];<span class="hljs-params">case</span>"<span class="hljs-params">in</span>":<span class="hljs-params">return</span>["<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>","<span class="hljs-params">in</span>","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"];<span class="hljs-params">case</span>"<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>":<span class="hljs-params">return</span>["<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>","<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>","<span class="hljs-params">in</span>","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>"];<span class="hljs-params">case</span>"<span class="hljs-params">not</span>-<span class="hljs-params">in</span>":<span class="hljs-params">return</span>["<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>","<span class="hljs-params">array</span>-<span class="hljs-params">contains</span>-<span class="hljs-params">any</span>","<span class="hljs-params">in</span>","<span class="hljs-params">not</span>-<span class="hljs-params">in</span>","!="];<span class="hljs-params">default</span>:<span class="hljs-params">return</span>[]}}(<span class="hljs-params">P.op</span>));<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==B</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,B===P.op?<span class="hljs-string">`Invalid query. You cannot use more than one '<span class="hljs-subst">${P.op.toString()}</span>' filter.`</span>:<span class="hljs-string">`Invalid query. You cannot use '<span class="hljs-subst">${P.op.toString()}</span>' filters with '<span class="hljs-subst">${B.toString()}</span>' filters.`</span></span>)}(<span class="hljs-params">a,S</span>),<span class="hljs-params">S</span>}(<span class="hljs-params">i._query,<span class="hljs-number">0</span>,s,i.firestore._databaseId,<span class="hljs-keyword">this</span>.Ka,<span class="hljs-keyword">this</span>.ja,<span class="hljs-keyword">this</span>.Qa</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">i.firestore,i.converter,<span class="hljs-keyword">function</span>(a,c</span>){<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">a</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">concat</span>(<span class="hljs-params">[c]</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">a.path,a.collectionGroup,a.explicitOrderBy.slice(</span>),<span class="hljs-params">u</span>,<span class="hljs-params">a</span>.<span class="hljs-params">limit</span>,<span class="hljs-params">a</span>.<span class="hljs-params">limitType</span>,<span class="hljs-params">a</span>.<span class="hljs-params">startAt</span>,<span class="hljs-params">a</span>.<span class="hljs-params">endAt</span>)}(<span class="hljs-params">i._query,o</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">Eg</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ka</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Wa</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>="<span class="hljs-params">orderBy</span>"}<span class="hljs-params">_apply</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">o,a,c</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.startAt</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Invalid query. You must not call startAt() or startAfter() before calling orderBy()."</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>!==o.endAt</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Invalid query. You must not call endAt() or endBefore() before calling orderBy()."</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">u</span>=<span class="hljs-params">new</span> <span class="hljs-params">fi</span>(<span class="hljs-params">a,c</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">h,f</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===ma(h</span>)){<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">ga</span>(<span class="hljs-params">h</span>);<span class="hljs-params">null</span>!==<span class="hljs-params">v</span>&amp;&amp;<span class="hljs-params">Ld</span>(<span class="hljs-params"><span class="hljs-number">0</span>,v,f.field</span>)}}(<span class="hljs-params">o,u</span>),<span class="hljs-params">u</span>}(<span class="hljs-params">i._query,<span class="hljs-keyword">this</span>.Ka,<span class="hljs-keyword">this</span>.Wa</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">i.firestore,i.converter,<span class="hljs-keyword">function</span>(o,a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">o</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">concat</span>(<span class="hljs-params">[a]</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rt</span>(<span class="hljs-params">o.path,o.collectionGroup,c,o.filters.slice(</span>),<span class="hljs-params">o</span>.<span class="hljs-params">limit</span>,<span class="hljs-params">o</span>.<span class="hljs-params">limitType</span>,<span class="hljs-params">o</span>.<span class="hljs-params">startAt</span>,<span class="hljs-params">o</span>.<span class="hljs-params">endAt</span>)}(<span class="hljs-params">i._query,s</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">Cd</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ga</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">za</span>=<span class="hljs-params">o</span>}<span class="hljs-params">_apply</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">i.firestore,i.converter,gl(i._query,<span class="hljs-keyword">this</span>.Ga,<span class="hljs-keyword">this</span>.za</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">Rd</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ha</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ja</span>=<span class="hljs-params">o</span>}<span class="hljs-params">_apply</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">kd</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.type,<span class="hljs-keyword">this</span>.Ha,<span class="hljs-keyword">this</span>.Ja</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">i.firestore,i.converter,(a=s,<span class="hljs-keyword">new</span> Rt((o=i._query</span>).<span class="hljs-params">path</span>,<span class="hljs-params">o</span>.<span class="hljs-params">collectionGroup</span>,<span class="hljs-params">o</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">limit</span>,<span class="hljs-params">o</span>.<span class="hljs-params">limitType</span>,<span class="hljs-params">a</span>,<span class="hljs-params">o</span>.<span class="hljs-params">endAt</span>)));<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Ad</span> <span class="hljs-params">extends</span> <span class="hljs-params">Xs</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">type</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ha</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">Ja</span>=<span class="hljs-params">o</span>}<span class="hljs-params">_apply</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">kd</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.type,<span class="hljs-keyword">this</span>.Ha,<span class="hljs-keyword">this</span>.Ja</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">i.firestore,i.converter,(a=s,<span class="hljs-keyword">new</span> Rt((o=i._query</span>).<span class="hljs-params">path</span>,<span class="hljs-params">o</span>.<span class="hljs-params">collectionGroup</span>,<span class="hljs-params">o</span>.<span class="hljs-params">explicitOrderBy</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">filters</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>,<span class="hljs-params">o</span>.<span class="hljs-params">limit</span>,<span class="hljs-params">o</span>.<span class="hljs-params">limitType</span>,<span class="hljs-params">o</span>.<span class="hljs-params">startAt</span>,<span class="hljs-params">a</span>)));<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>}}<span class="hljs-params">function</span> <span class="hljs-params">kd</span>(<span class="hljs-params">r,i,s,o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">s[<span class="hljs-number">0</span>]=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">s[<span class="hljs-number">0</span>]</span>),<span class="hljs-params">s</span>[0]<span class="hljs-params">instanceof</span> <span class="hljs-params">Ws</span>)<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">a,c,u,h,f</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!h</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.NOT_FOUND,<span class="hljs-string">`Can't use a DocumentSnapshot that doesn't exist for <span class="hljs-subst">${u}</span>().`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">v</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> w <span class="hljs-keyword">of</span> mi(a</span>))<span class="hljs-params">if</span>(<span class="hljs-params">w.field.isKeyField(</span>))<span class="hljs-params">v</span>.<span class="hljs-params">push</span>(<span class="hljs-params">Jr(c,h.key</span>));<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">h</span>.<span class="hljs-params">data</span>.<span class="hljs-params">field</span>(<span class="hljs-params">w.field</span>);<span class="hljs-params">if</span>(<span class="hljs-params">la(T</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">'Invalid query. You are trying to start or end a query using a document for which the field "'</span>+w.field+<span class="hljs-string">'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)'</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>===T</span>){<span class="hljs-params">const</span> <span class="hljs-params">S</span>=<span class="hljs-params">w</span>.<span class="hljs-params">field</span>.<span class="hljs-params">canonicalString</span><span class="hljs-params">()</span>;<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. You are trying to start or end a query using a document for which the field '<span class="hljs-subst">${S}</span>' (used as the orderBy) does not exist.`</span></span>)}<span class="hljs-params">v</span>.<span class="hljs-params">push</span>(<span class="hljs-params">T</span>)}<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ks</span>(<span class="hljs-params">v,f</span>)}(<span class="hljs-params">r._query,r.firestore._databaseId,i,s[<span class="hljs-number">0</span>]._document,o</span>);{<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Nn</span>(<span class="hljs-params">r.firestore</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">c,u,h,f,v,w</span>){<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">c</span>.<span class="hljs-params">explicitOrderBy</span>;<span class="hljs-params">if</span>(<span class="hljs-params">v.length&gt;T.length</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Too many arguments provided to <span class="hljs-subst">${f}</span>(). The number of arguments must be less than or equal to the number of orderBy() clauses`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">S</span>=[];<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> C=<span class="hljs-number">0</span>;C&lt;v.length;C++</span>){<span class="hljs-params">const</span> <span class="hljs-params">P</span>=<span class="hljs-params">v</span>[<span class="hljs-params">C</span>];<span class="hljs-params">if</span>(<span class="hljs-params">T[C].field.isKeyField(</span>)){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>!=<span class="hljs-keyword">typeof</span> P</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. Expected a string for document ID in <span class="hljs-subst">${f}</span>(), but got a <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> P}</span>`</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">!ya(c</span>)&amp;&amp;-1!==<span class="hljs-params">P</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to <span class="hljs-subst">${f}</span>() must be a plain document ID, but '<span class="hljs-subst">${P}</span>' contains a slash.`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">B</span>=<span class="hljs-params">c</span>.<span class="hljs-params">path</span>.<span class="hljs-params">child</span>(<span class="hljs-params">X.fromString(P</span>));<span class="hljs-params">if</span>(<span class="hljs-params">!U.isDocumentKey(B</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to <span class="hljs-subst">${f}</span>() must result in a valid document path, but '<span class="hljs-subst">${B}</span>' is not because it contains an odd number of segments.`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">j</span>=<span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">B</span>);<span class="hljs-params">S</span>.<span class="hljs-params">push</span>(<span class="hljs-params">Jr(u,j</span>))}<span class="hljs-params">else</span>{<span class="hljs-params">const</span> <span class="hljs-params">B</span>=<span class="hljs-params">Td</span>(<span class="hljs-params">h,f,P</span>);<span class="hljs-params">S</span>.<span class="hljs-params">push</span>(<span class="hljs-params">B</span>)}}<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ks</span>(<span class="hljs-params">S,w</span>)}(<span class="hljs-params">r._query,r.firestore._databaseId,a,i,s,o</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Pd</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span>(s=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">s</span>))){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">""</span>===s</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string."</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">!ya(i</span>)&amp;&amp;-1!==<span class="hljs-params">s</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '<span class="hljs-subst">${s}</span>' contains a '/' character.`</span></span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>.<span class="hljs-params">path</span>.<span class="hljs-params">child</span>(<span class="hljs-params">X.fromString(s</span>));<span class="hljs-params">if</span>(<span class="hljs-params">!U.isDocumentKey(o</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '<span class="hljs-subst">${o}</span>' is not because it has an odd number of segments (<span class="hljs-subst">${o.length}</span>).`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">Jr</span>(<span class="hljs-params">r,<span class="hljs-keyword">new</span> U(o</span>))}<span class="hljs-params">if</span>(<span class="hljs-params">s <span class="hljs-keyword">instanceof</span> re</span>)<span class="hljs-params">return</span> <span class="hljs-params">Jr</span>(<span class="hljs-params">r,s._key</span>);<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: <span class="hljs-subst">${xo(s)}</span>.`</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Nd</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-built_in">Array</span>.isArray(r</span>)||0===<span class="hljs-params">r</span>.<span class="hljs-params">length</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid Query. A non-empty array is required for '<span class="hljs-subst">${i.toString()}</span>' filters.`</span></span>);<span class="hljs-params">if</span>(<span class="hljs-params">r.length&gt;<span class="hljs-number">10</span></span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid Query. '<span class="hljs-subst">${i.toString()}</span>' filters support a maximum of 10 elements in the value array.`</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Ld</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!s.isEqual(i</span>))<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid query. You have a where filter with an inequality (&lt;, &lt;=, !=, not-in, &gt;, or &gt;=) on field '<span class="hljs-subst">${i.toString()}</span>' and so you must also use '<span class="hljs-subst">${i.toString()}</span>' as your first argument to orderBy(), but your first orderBy() is on field '<span class="hljs-subst">${s.toString()}</span>' instead.`</span></span>)}<span class="hljs-params">class</span> <span class="hljs-params">ou</span>{<span class="hljs-params">convertValue</span>(<span class="hljs-params">i,s=<span class="hljs-string">"none"</span></span>){<span class="hljs-params">switch</span>(<span class="hljs-params">In(i</span>)){<span class="hljs-params">case</span> 0:<span class="hljs-params">return</span> <span class="hljs-params">null</span>;<span class="hljs-params">case</span> 1:<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">booleanValue</span>;<span class="hljs-params">case</span> 2:<span class="hljs-params">return</span> <span class="hljs-params">_e</span>(<span class="hljs-params">i.integerValue||i.doubleValue</span>);<span class="hljs-params">case</span> 3:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertTimestamp</span>(<span class="hljs-params">i.timestampValue</span>);<span class="hljs-params">case</span> 4:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertServerTimestamp</span>(<span class="hljs-params">i,s</span>);<span class="hljs-params">case</span> 5:<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">stringValue</span>;<span class="hljs-params">case</span> 6:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertBytes</span>(<span class="hljs-params">hi(i.bytesValue</span>));<span class="hljs-params">case</span> 7:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertReference</span>(<span class="hljs-params">i.referenceValue</span>);<span class="hljs-params">case</span> 8:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertGeoPoint</span>(<span class="hljs-params">i.geoPointValue</span>);<span class="hljs-params">case</span> 9:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertArray</span>(<span class="hljs-params">i.arrayValue,s</span>);<span class="hljs-params">case</span> 10:<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertObject</span>(<span class="hljs-params">i.mapValue,s</span>);<span class="hljs-params">default</span>:<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>}}<span class="hljs-params">convertObject</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>={};<span class="hljs-params">return</span> <span class="hljs-params">Tn</span>(<span class="hljs-params">i.fields,(a,c</span>)=&gt;</span>{o[a]=<span class="hljs-keyword">this</span>.convertValue(c,s)}),o}convertGeoPoint(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Co(_e(i.latitude),_e(i.longitude))}convertArray(i,s){<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">i.values||[]</span>).<span class="hljs-params">map</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">this</span>.convertValue(o,s</span>))}<span class="hljs-params">convertServerTimestamp</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">case</span>"<span class="hljs-params">previous</span>":<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">rl</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">null</span>==<span class="hljs-params">o</span>?<span class="hljs-params">null</span>:<span class="hljs-params">this</span>.<span class="hljs-params">convertValue</span>(<span class="hljs-params">o,s</span>);<span class="hljs-params">case</span>"<span class="hljs-params">estimate</span>":<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">convertTimestamp</span>(<span class="hljs-params">Ds(i</span>));<span class="hljs-params">default</span>:<span class="hljs-params">return</span> <span class="hljs-params">null</span>}}<span class="hljs-params">convertTimestamp</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Ht</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Re</span>(<span class="hljs-params">s.seconds,s.nanos</span>)}<span class="hljs-params">convertDocumentKey</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">X</span>.<span class="hljs-params">fromString</span>(<span class="hljs-params">i</span>);<span class="hljs-params">z</span>(<span class="hljs-params">eh(o</span>));<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ui</span>(<span class="hljs-params">o.get(<span class="hljs-number">1</span></span>),<span class="hljs-params">o</span>.<span class="hljs-params">get</span>(<span class="hljs-params"><span class="hljs-number">3</span></span>)),<span class="hljs-params">c</span>=<span class="hljs-params">new</span> <span class="hljs-params">U</span>(<span class="hljs-params">o.popFirst(<span class="hljs-number">5</span></span>));<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">s</span>)||<span class="hljs-params">ye</span>(<span class="hljs-params"><span class="hljs-string">`Document <span class="hljs-subst">${c}</span> contains a document reference within a different database (<span class="hljs-subst">${a.projectId}</span>/<span class="hljs-subst">${a.database}</span>) which is not supported. It will be treated as a reference in the current database (<span class="hljs-subst">${s.projectId}</span>/<span class="hljs-subst">${s.database}</span>) instead.`</span></span>),<span class="hljs-params">c</span>}}<span class="hljs-params">function</span> <span class="hljs-params">No</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>;<span class="hljs-params">return</span> <span class="hljs-params">o</span>=<span class="hljs-params">r</span>?<span class="hljs-params">s</span>&amp;&amp;(<span class="hljs-params">s.merge||s.mergeFields</span>)?<span class="hljs-params">r</span>.<span class="hljs-params">toFirestore</span>(<span class="hljs-params">i,s</span>):<span class="hljs-params">r</span>.<span class="hljs-params">toFirestore</span>(<span class="hljs-params">i</span>):<span class="hljs-params">i</span>,<span class="hljs-params">o</span>}<span class="hljs-params">class</span> <span class="hljs-params">kg</span> <span class="hljs-params">extends</span> <span class="hljs-params">ou</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>}<span class="hljs-params">convertBytes</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Tt</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">convertReference</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">convertDocumentKey</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.firestore._databaseId</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">re</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-literal">null</span>,s</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Md</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_commitHandler</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>=[],<span class="hljs-params">this</span>.<span class="hljs-params">_committed</span>=!1,<span class="hljs-params">this</span>.<span class="hljs-params">_dataReader</span>=<span class="hljs-params">Nn</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">set</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_verifyNotCommitted</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>),<span class="hljs-params">c</span>=<span class="hljs-params">No</span>(<span class="hljs-params">a.converter,s,o</span>),<span class="hljs-params">u</span>=<span class="hljs-params">Ao</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"WriteBatch.set"</span>,a._key,c,<span class="hljs-literal">null</span>!==a.converter,o</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>.<span class="hljs-params">push</span>(<span class="hljs-params">u.toMutation(a._key,ve.none(</span>))),<span class="hljs-params">this</span>}<span class="hljs-params">update</span>(<span class="hljs-params">i,s,o,...a</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_verifyNotCommitted</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">let</span> <span class="hljs-params">u</span>;<span class="hljs-params">return</span> <span class="hljs-params">u</span>="<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span>(<span class="hljs-params">s=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">s</span>))||<span class="hljs-params">s</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>?<span class="hljs-params">nu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"WriteBatch.update"</span>,c._key,s,o,a</span>):<span class="hljs-params">tu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"WriteBatch.update"</span>,c._key,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>.<span class="hljs-params">push</span>(<span class="hljs-params">u.toMutation(c._key,ve.exists(!<span class="hljs-number">0</span></span>))),<span class="hljs-params">this</span>}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_verifyNotCommitted</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>.<span class="hljs-params">concat</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Os(s._key,ve.none(</span>))),<span class="hljs-params">this</span>}<span class="hljs-params">commit</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_verifyNotCommitted</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_committed</span>=!0,<span class="hljs-params">this</span>.<span class="hljs-params">_mutations</span>.<span class="hljs-params">length</span>&gt;0?<span class="hljs-params">this</span>.<span class="hljs-params">_commitHandler</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._mutations</span>):<span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>}<span class="hljs-params">_verifyNotCommitted</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._committed</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.FAILED_PRECONDITION,<span class="hljs-string">"A write batch can no longer be used after commit() has been called."</span></span>)}}<span class="hljs-params">function</span> <span class="hljs-params">nn</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">(r=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">r</span>)).<span class="hljs-params">firestore</span>!==<span class="hljs-params">i</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"Provided document reference is from a different Firestore instance."</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>}<span class="hljs-params">class</span> <span class="hljs-params">On</span> <span class="hljs-params">extends</span> <span class="hljs-params">ou</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>}<span class="hljs-params">convertBytes</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Tt</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">convertReference</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">convertDocumentKey</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.firestore._databaseId</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">re</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-literal">null</span>,s</span>)}}<span class="hljs-params">function</span> <span class="hljs-params">Od</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,re</span>);<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">a</span>=<span class="hljs-params">No</span>(<span class="hljs-params">r.converter,i,s</span>);<span class="hljs-params">return</span> <span class="hljs-params">Vi</span>(<span class="hljs-params">o,[Ao(Nn(o</span>),"<span class="hljs-params">setDoc</span>",<span class="hljs-params">r</span>.<span class="hljs-params">_key</span>,<span class="hljs-params">a</span>,<span class="hljs-params">null</span>!==<span class="hljs-params">r</span>.<span class="hljs-params">converter</span>,<span class="hljs-params">s</span>).<span class="hljs-params">toMutation</span>(<span class="hljs-params">r._key,ve.none(</span>))])}<span class="hljs-params">function</span> <span class="hljs-params">Fd</span>(<span class="hljs-params">r,i,s,...o</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,re</span>);<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">c</span>=<span class="hljs-params">Nn</span>(<span class="hljs-params">a</span>);<span class="hljs-params">let</span> <span class="hljs-params">u</span>;<span class="hljs-params">return</span> <span class="hljs-params">u</span>="<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span>(<span class="hljs-params">i=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">i</span>))||<span class="hljs-params">i</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>?<span class="hljs-params">nu</span>(<span class="hljs-params">c,<span class="hljs-string">"updateDoc"</span>,r._key,i,s,o</span>):<span class="hljs-params">tu</span>(<span class="hljs-params">c,<span class="hljs-string">"updateDoc"</span>,r._key,i</span>),<span class="hljs-params">Vi</span>(<span class="hljs-params">a,[u.toMutation(r._key,ve.exists(!<span class="hljs-number">0</span></span>))])}<span class="hljs-params">function</span> <span class="hljs-params">Ud</span>(<span class="hljs-params">r,...i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>,<span class="hljs-params">a</span>;<span class="hljs-params">r</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">r</span>);<span class="hljs-params">let</span> <span class="hljs-params">c</span>={<span class="hljs-params">includeMetadataChanges</span>:!1},<span class="hljs-params">u</span>=0;"<span class="hljs-params">object</span>"!=<span class="hljs-params">typeof</span> <span class="hljs-params">i</span>[<span class="hljs-params">u</span>]||<span class="hljs-params">Xc</span>(<span class="hljs-params">i[u]</span>)||(<span class="hljs-params">c=i[u],u++</span>);<span class="hljs-params">const</span> <span class="hljs-params">h</span>={<span class="hljs-params">includeMetadataChanges</span>:<span class="hljs-params">c</span>.<span class="hljs-params">includeMetadataChanges</span>};<span class="hljs-params">if</span>(<span class="hljs-params">Xc(i[u]</span>)){<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">i</span>[<span class="hljs-params">u</span>];<span class="hljs-params">i</span>[<span class="hljs-params">u</span>]=<span class="hljs-params">null</span>===(<span class="hljs-params">s=T.next</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">s</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">s</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">T</span>),<span class="hljs-params">i</span>[<span class="hljs-params">u</span>+1]=<span class="hljs-params">null</span>===(<span class="hljs-params">o=T.error</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">o</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">o</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">T</span>),<span class="hljs-params">i</span>[<span class="hljs-params">u</span>+2]=<span class="hljs-params">null</span>===(<span class="hljs-params">a=T.complete</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">a</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">a</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">T</span>)}<span class="hljs-params">let</span> <span class="hljs-params">f</span>,<span class="hljs-params">v</span>,<span class="hljs-params">w</span>;<span class="hljs-params">if</span>(<span class="hljs-params">r <span class="hljs-keyword">instanceof</span> re</span>)<span class="hljs-params">v</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">w</span>=<span class="hljs-params">pi</span>(<span class="hljs-params">r._key.path</span>),<span class="hljs-params">f</span>={<span class="hljs-params">next</span>:<span class="hljs-params">T</span>=&gt;</span>{i[u]&amp;&amp;i[u](au(v,r,T))},<span class="hljs-attr">error</span>:i[u+<span class="hljs-number">1</span>],<span class="hljs-attr">complete</span>:i[u+<span class="hljs-number">2</span>]};<span class="hljs-keyword">else</span>{<span class="hljs-keyword">const</span> T=W(r,Ge);v=W(T.firestore,he),w=T._query;<span class="hljs-keyword">const</span> S=<span class="hljs-keyword">new</span> On(v);f={<span class="hljs-attr">next</span>:<span class="hljs-function"><span class="hljs-params">C</span>=&gt;</span>{i[u]&amp;&amp;i[u](<span class="hljs-keyword">new</span> en(v,S,T,C))},<span class="hljs-attr">error</span>:i[u+<span class="hljs-number">1</span>],<span class="hljs-attr">complete</span>:i[u+<span class="hljs-number">2</span>]},Dd(r._query)}<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">T,S,C,P</span>)</span>{<span class="hljs-keyword">const</span> B=<span class="hljs-keyword">new</span> Io(P),j=<span class="hljs-keyword">new</span> yc(S,B,C);<span class="hljs-keyword">return</span> T.asyncQueue.enqueueAndForget(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">dc</span>(<span class="hljs-params"><span class="hljs-keyword">yield</span> Fi(T</span>),<span class="hljs-params">j</span>)})),<span class="hljs-params">()</span>=&gt;</span>{B.Xo(),T.asyncQueue.enqueueAndForget(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">pc</span>(<span class="hljs-params"><span class="hljs-keyword">yield</span> Fi(T</span>),<span class="hljs-params">j</span>)}))}}(<span class="hljs-params">Se(v</span>),<span class="hljs-params">w</span>,<span class="hljs-params">h</span>,<span class="hljs-params">f</span>)}<span class="hljs-params">function</span> <span class="hljs-params">Vi</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">Tc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}(<span class="hljs-params"><span class="hljs-keyword">yield</span> Yc(s</span>),<span class="hljs-params">o</span>,<span class="hljs-params">a</span>)})),<span class="hljs-params">a</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">Se(r</span>),<span class="hljs-params">i</span>)}<span class="hljs-params">function</span> <span class="hljs-params">au</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">s</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i._key</span>),<span class="hljs-params">a</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Lt</span>(<span class="hljs-params">r,a,i._key,o,<span class="hljs-keyword">new</span> Mn(s.hasPendingWrites,s.fromCache</span>),<span class="hljs-params">i</span>.<span class="hljs-params">converter</span>)}<span class="hljs-params">class</span> <span class="hljs-params">qg</span> <span class="hljs-params">extends</span> <span class="hljs-params">class</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_transaction</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_dataReader</span>=<span class="hljs-params">Nn</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">kg</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_transaction</span>.<span class="hljs-params">lookup</span>(<span class="hljs-params">[s._key]</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;{<span class="hljs-keyword">if</span>(!a||<span class="hljs-number">1</span>!==a.length</span>)<span class="hljs-params">return</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>[0];<span class="hljs-params">if</span>(<span class="hljs-params">c.isFoundDocument(</span>))<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ws</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,o,c.key,c,s.converter</span>);<span class="hljs-params">if</span>(<span class="hljs-params">c.isNoDocument(</span>))<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ws</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,o,s._key,<span class="hljs-literal">null</span>,s.converter</span>);<span class="hljs-params">throw</span> <span class="hljs-params">V</span><span class="hljs-params">()</span>})}<span class="hljs-params">set</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>),<span class="hljs-params">c</span>=<span class="hljs-params">No</span>(<span class="hljs-params">a.converter,s,o</span>),<span class="hljs-params">u</span>=<span class="hljs-params">Ao</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"Transaction.set"</span>,a._key,c,<span class="hljs-literal">null</span>!==a.converter,o</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_transaction</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a._key,u</span>),<span class="hljs-params">this</span>}<span class="hljs-params">update</span>(<span class="hljs-params">i,s,o,...a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">let</span> <span class="hljs-params">u</span>;<span class="hljs-params">return</span> <span class="hljs-params">u</span>="<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span>(<span class="hljs-params">s=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">s</span>))||<span class="hljs-params">s</span> <span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>?<span class="hljs-params">nu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"Transaction.update"</span>,c._key,s,o,a</span>):<span class="hljs-params">tu</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._dataReader,<span class="hljs-string">"Transaction.update"</span>,c._key,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_transaction</span>.<span class="hljs-params">update</span>(<span class="hljs-params">c._key,u</span>),<span class="hljs-params">this</span>}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_transaction</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">s._key</span>),<span class="hljs-params">this</span>}}{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">nn</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>._firestore</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore</span>);<span class="hljs-params">return</span> <span class="hljs-params">super</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">new</span> Lt(<span class="hljs-keyword">this</span>._firestore,o,s._key,a._document,<span class="hljs-keyword">new</span> Mn(!<span class="hljs-number">1</span>,!<span class="hljs-number">1</span></span>),<span class="hljs-params">s</span>.<span class="hljs-params">converter</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">cu</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===i</span>)<span class="hljs-params">return</span>{<span class="hljs-params">merge</span>:!1};<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==i.mergeFields&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==i.merge</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"invalid-argument"</span>,<span class="hljs-string">`Invalid options passed to function <span class="hljs-subst">${r}</span>(): You cannot specify both "merge" and "mergeFields".`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>}<span class="hljs-params">function</span> <span class="hljs-params">Vd</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Uint8Array</span></span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"unimplemented"</span>,<span class="hljs-string">"Uint8Arrays are not available in this environment."</span></span>)}<span class="hljs-params">function</span> <span class="hljs-params">Bd</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> atob</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"unimplemented"</span>,<span class="hljs-string">"Blobs are unavailable in Firestore in this environment."</span></span>)}(<span class="hljs-params"><span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">ci</span>=<span class="hljs-params">r</span>})(<span class="hljs-params">qn.SDK_VERSION</span>),(<span class="hljs-params"><span class="hljs-number">0</span>,qn._registerComponent</span>)(<span class="hljs-params"><span class="hljs-keyword">new</span> Gi.wA(<span class="hljs-string">"firestore"</span>,(r,{options:i}</span>)=&gt;</span>{<span class="hljs-keyword">const</span> s=r.getProvider(<span class="hljs-string">"app"</span>).getImmediate(),o=<span class="hljs-keyword">new</span> he(s,<span class="hljs-keyword">new</span> If(r.getProvider(<span class="hljs-string">"auth-internal"</span>)));<span class="hljs-keyword">return</span> i=<span class="hljs-built_in">Object</span>.assign({<span class="hljs-attr">useFetchStreams</span>:!<span class="hljs-number">0</span>},i),o._setSettings(i),o},<span class="hljs-string">"PUBLIC"</span>)),(<span class="hljs-number">0</span>,qn.registerVersion)(<span class="hljs-string">"@firebase/firestore"</span>,<span class="hljs-string">"3.0.1"</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">er</span></span>{<span class="hljs-keyword">constructor</span>(i){<span class="hljs-keyword">this</span>._delegate=i}<span class="hljs-keyword">static</span> fromBase64String(i){<span class="hljs-keyword">return</span> Bd(),<span class="hljs-keyword">new</span> er(Tt.fromBase64String(i))}<span class="hljs-keyword">static</span> fromUint8Array(i){<span class="hljs-keyword">return</span> Vd(),<span class="hljs-keyword">new</span> er(Tt.fromUint8Array(i))}toBase64(){<span class="hljs-keyword">return</span> Bd(),<span class="hljs-keyword">this</span>._delegate.toBase64()}toUint8Array(){<span class="hljs-keyword">return</span> Vd(),<span class="hljs-keyword">this</span>._delegate.toUint8Array()}isEqual(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._delegate.isEqual(i._delegate)}toString(){<span class="hljs-keyword">return</span><span class="hljs-string">"Blob(base64: "</span>+<span class="hljs-keyword">this</span>.toBase64()+<span class="hljs-string">")"</span>}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uu</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">"object"</span>!=<span class="hljs-keyword">typeof</span> r||<span class="hljs-literal">null</span>===r)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">const</span> s=r;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> o <span class="hljs-keyword">of</span>[<span class="hljs-string">"next"</span>,<span class="hljs-string">"error"</span>,<span class="hljs-string">"complete"</span>])<span class="hljs-keyword">if</span>(o <span class="hljs-keyword">in</span> s&amp;&amp;<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> s[o])<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}(r)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jg</span></span>{enableIndexedDbPersistence(i,s){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{_d(r=W(r,he));<span class="hljs-keyword">const</span> s=Se(r),o=r._freezeSettings(),a=<span class="hljs-keyword">new</span> Gc;<span class="hljs-keyword">return</span> yd(s,a,<span class="hljs-keyword">new</span> Xh(a,o.cacheSizeBytes,<span class="hljs-literal">null</span>==i?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.forceOwnership))}(i._delegate,{<span class="hljs-attr">forceOwnership</span>:s})}enableMultiTabIndexedDbPersistence(i){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>)</span>{_d(r=W(r,he));<span class="hljs-keyword">const</span> i=Se(r),s=r._freezeSettings(),o=<span class="hljs-keyword">new</span> Gc;<span class="hljs-keyword">return</span> yd(i,o,<span class="hljs-keyword">new</span> Vm(o,s.cacheSizeBytes))}(i._delegate)}clearIndexedDbPersistence(i){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">if</span>(r._initialized&amp;&amp;!r._terminated)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> A(I.FAILED_PRECONDITION,<span class="hljs-string">"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated."</span>);<span class="hljs-keyword">const</span> i=<span class="hljs-keyword">new</span> Ce;<span class="hljs-keyword">return</span> r._queue.enqueueAndForgetEvenWhileRestricted(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">try</span>{<span class="hljs-params">yield</span>(<span class="hljs-params">s=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">!ft.Pt(</span>))<span class="hljs-params">return</span> <span class="hljs-params">Promise</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>;<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>+"<span class="hljs-params">main</span>";<span class="hljs-params">yield</span> <span class="hljs-params">ft</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">a</span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">o</span>){<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">Ma(r._databaseId,r._persistenceKey</span>)),<span class="hljs-params">i</span>.<span class="hljs-params">resolve</span><span class="hljs-params">()</span>}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">i</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">var</span> <span class="hljs-params">s</span>})),<span class="hljs-params">i</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">i._delegate</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">qd</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_persistenceProvider</span>=<span class="hljs-params">o</span>,<span class="hljs-params">this</span>.<span class="hljs-params">INTERNAL</span>={<span class="hljs-params">delete</span>:<span class="hljs-params">()</span>=&gt;</span><span class="hljs-keyword">this</span>.terminate()},i <span class="hljs-keyword">instanceof</span> Ui||<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">this</span>._appCompat=i</span>)}<span class="hljs-params">get</span> <span class="hljs-params">_databaseId</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_databaseId</span>}<span class="hljs-params">settings</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_getSettings</span><span class="hljs-params">()</span>;!<span class="hljs-params">i</span>.<span class="hljs-params">merge</span>&amp;&amp;<span class="hljs-params">s</span>.<span class="hljs-params">host</span>!==<span class="hljs-params">i</span>.<span class="hljs-params">host</span>&amp;&amp;<span class="hljs-params">Ss</span>(<span class="hljs-params"><span class="hljs-string">"You are overriding the original host. If you did not intend to override your settings, use {merge: true}."</span></span>),<span class="hljs-params">i</span>.<span class="hljs-params">merge</span>&amp;&amp;<span class="hljs-params">delete</span>(<span class="hljs-params">i=<span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.assign({},s</span>),<span class="hljs-params">i</span>)).<span class="hljs-params">merge</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_setSettings</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">useEmulator</span>(<span class="hljs-params">i,s,o={}</span>){!<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s,o={}</span>){<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">const</span> <span class="hljs-params">c</span>=(<span class="hljs-params">r=W(r,Qs</span>)).<span class="hljs-params">_getSettings</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"firestore.googleapis.com"</span>!==c.host&amp;&amp;c.host!==i&amp;&amp;Ss(<span class="hljs-string">"Host has been set in both settings() and useEmulator(), emulator host will be used"</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">_setSettings</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.assign({},c</span>),{<span class="hljs-params">host</span>:`<span class="hljs-params">$</span>{<span class="hljs-params">i</span>}:<span class="hljs-params">$</span>{<span class="hljs-params">s</span>}`,<span class="hljs-params">ssl</span>:!1})),<span class="hljs-params">o</span>.<span class="hljs-params">mockUserToken</span>){<span class="hljs-params">let</span> <span class="hljs-params">u</span>,<span class="hljs-params">h</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> o.mockUserToken</span>)<span class="hljs-params">u</span>=<span class="hljs-params">o</span>.<span class="hljs-params">mockUserToken</span>,<span class="hljs-params">h</span>=<span class="hljs-params">Me</span>.<span class="hljs-params">MOCK_USER</span>;<span class="hljs-params">else</span>{<span class="hljs-params">u</span>=(<span class="hljs-params"><span class="hljs-number">0</span>,Y.Sg</span>)(<span class="hljs-params">o.mockUserToken,<span class="hljs-literal">null</span>===(a=r._app</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">a</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">a</span>.<span class="hljs-params">options</span>.<span class="hljs-params">projectId</span>);<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">o</span>.<span class="hljs-params">mockUserToken</span>.<span class="hljs-params">sub</span>||<span class="hljs-params">o</span>.<span class="hljs-params">mockUserToken</span>.<span class="hljs-params">user_id</span>;<span class="hljs-params">if</span>(<span class="hljs-params">!f</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">"mockUserToken must contain 'sub' or 'user_id' field!"</span></span>);<span class="hljs-params">h</span>=<span class="hljs-params">new</span> <span class="hljs-params">Me</span>(<span class="hljs-params">f</span>)}<span class="hljs-params">r</span>.<span class="hljs-params">_credentials</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ef</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> el(u,h</span>))}}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i,s,o</span>)}<span class="hljs-params">enableNetwork</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueue</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">yield</span> <span class="hljs-params">id</span>(<span class="hljs-params">r</span>),<span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">sd</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">setNetworkEnabled</span>(<span class="hljs-params">!<span class="hljs-number">0</span></span>),<span class="hljs-params">function</span>(<span class="hljs-params">o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">o</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>),<span class="hljs-params">$s</span>(<span class="hljs-params">a</span>)}(<span class="hljs-params">s</span>)}))}(<span class="hljs-params">Se(r=W(r,he</span>)))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>)}<span class="hljs-params">disableNetwork</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueue</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">yield</span> <span class="hljs-params">id</span>(<span class="hljs-params">r</span>),<span class="hljs-params">s</span>=<span class="hljs-params">yield</span> <span class="hljs-params">sd</span>(<span class="hljs-params">r</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">setNetworkEnabled</span>(<span class="hljs-params">!<span class="hljs-number">1</span></span>),(<span class="hljs-params">o=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">M</span>(<span class="hljs-params">a</span>);<span class="hljs-params">c</span>.<span class="hljs-params">Kr</span>.<span class="hljs-params">add</span>(<span class="hljs-params"><span class="hljs-number">0</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">Ai</span>(<span class="hljs-params">c</span>),<span class="hljs-params">c</span>.<span class="hljs-params">Wr</span>.<span class="hljs-params">set</span>(<span class="hljs-params"><span class="hljs-string">"Offline"</span></span>)}),<span class="hljs-params">function</span>(<span class="hljs-params">a</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">s</span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>}))}(<span class="hljs-params">Se(r=W(r,he</span>)))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>)}<span class="hljs-params">enablePersistence</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=!1,<span class="hljs-params">o</span>=!1;<span class="hljs-params">return</span> <span class="hljs-params">i</span>&amp;&amp;(<span class="hljs-params">s=!!i.synchronizeTabs,o=!!i.experimentalForceOwningTab,cd(<span class="hljs-string">"synchronizeTabs"</span>,s,<span class="hljs-string">"experimentalForceOwningTab"</span>,o</span>)),<span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_persistenceProvider</span>.<span class="hljs-params">enableMultiTabIndexedDbPersistence</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>):<span class="hljs-params">this</span>.<span class="hljs-params">_persistenceProvider</span>.<span class="hljs-params">enableIndexedDbPersistence</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,o</span>)}<span class="hljs-params">clearPersistence</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_persistenceProvider</span>.<span class="hljs-params">clearIndexedDbPersistence</span>(<span class="hljs-params"><span class="hljs-keyword">this</span></span>)}<span class="hljs-params">terminate</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_appCompat</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-keyword">this</span>._appCompat._removeServiceInstance(<span class="hljs-string">"firestore-compat"</span></span>),<span class="hljs-params">this</span>.<span class="hljs-params">_appCompat</span>.<span class="hljs-params">_removeServiceInstance</span>(<span class="hljs-params"><span class="hljs-string">"firestore"</span></span>)),<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_delete</span><span class="hljs-params">()</span>}<span class="hljs-params">waitForPendingWrites</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Dc</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)}(<span class="hljs-params"><span class="hljs-keyword">yield</span> Yc(i</span>),<span class="hljs-params">s</span>)})),<span class="hljs-params">s</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">Se(r=W(r,he</span>)))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>)}<span class="hljs-params">onSnapshotsInSync</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Io</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Fi</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=<span class="hljs-params">s</span>,<span class="hljs-params">M</span>(<span class="hljs-params">o</span>).<span class="hljs-params">Zr</span>.<span class="hljs-params">add</span>(<span class="hljs-params">a</span>),<span class="hljs-params">void</span> <span class="hljs-params">a</span>.<span class="hljs-params">next</span><span class="hljs-params">()</span>;<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>})),<span class="hljs-params">()</span>=&gt;</span>{s.Xo(),r.asyncQueue.enqueueAndForget(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span> <span class="hljs-params">Fi</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=<span class="hljs-params">s</span>,<span class="hljs-params">void</span> <span class="hljs-params">M</span>(<span class="hljs-params">o</span>).<span class="hljs-params">Zr</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">a</span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>,<span class="hljs-params">a</span>}))}}(<span class="hljs-params">Se(r=W(r,he</span>)),<span class="hljs-params">Xc</span>(<span class="hljs-params">i</span>)?<span class="hljs-params">i</span>:{<span class="hljs-params">next</span>:<span class="hljs-params">i</span>})}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>)}<span class="hljs-params">get</span> <span class="hljs-params">app</span><span class="hljs-params">()</span>{<span class="hljs-params">if</span>(<span class="hljs-params">!<span class="hljs-keyword">this</span>._appCompat</span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"failed-precondition"</span>,<span class="hljs-string">"Firestore was not initialized using the Firebase SDK. 'app' is not available"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_appCompat</span>}<span class="hljs-params">collection</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Bi</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,fd(<span class="hljs-keyword">this</span>._delegate,i</span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"collection()"</span>,<span class="hljs-string">"Firestore.collection()"</span></span>)}}<span class="hljs-params">doc</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,Do(<span class="hljs-keyword">this</span>._delegate,i</span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"doc()"</span>,<span class="hljs-string">"Firestore.doc()"</span></span>)}}<span class="hljs-params">collectionGroup</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">if</span>(<span class="hljs-params">r=W(r,Qs</span>),<span class="hljs-params">Jc</span>(<span class="hljs-params"><span class="hljs-string">"collectionGroup"</span>,<span class="hljs-string">"collection id"</span>,i</span>),<span class="hljs-params">i</span>.<span class="hljs-params">indexOf</span>(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)&gt;=0)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params">I.INVALID_ARGUMENT,<span class="hljs-string">`Invalid collection ID '<span class="hljs-subst">${i}</span>' passed to function collectionGroup(). Collection IDs must not contain '/'.`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ge</span>(<span class="hljs-params">r,<span class="hljs-literal">null</span>,(s=i,<span class="hljs-keyword">new</span> Rt(X.emptyPath(</span>),<span class="hljs-params">s</span>)));<span class="hljs-params">var</span> <span class="hljs-params">s</span>}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"collectionGroup()"</span>,<span class="hljs-string">"Firestore.collectionGroup()"</span></span>)}}<span class="hljs-params">runTransaction</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">yield</span>(<span class="hljs-params">a=r,So(a</span>).<span class="hljs-params">then</span>(<span class="hljs-params">c=&gt;c.datastore</span>));<span class="hljs-params">var</span> <span class="hljs-params">a</span>;<span class="hljs-params">new</span> <span class="hljs-params">zm</span>(<span class="hljs-params">r.asyncQueue,o,i,s</span>).<span class="hljs-params">run</span><span class="hljs-params">()</span>})),<span class="hljs-params">s</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">Se(r</span>),<span class="hljs-params">s</span>=&gt;</span>i(<span class="hljs-keyword">new</span> qg(r,s)))}(<span class="hljs-keyword">this</span>._delegate,s=&gt;i(<span class="hljs-keyword">new</span> zd(<span class="hljs-keyword">this</span>,s)))}batch(){<span class="hljs-keyword">return</span> Se(<span class="hljs-keyword">this</span>._delegate),<span class="hljs-keyword">new</span> Gd(<span class="hljs-keyword">new</span> Md(<span class="hljs-keyword">this</span>._delegate,i=&gt;Vi(<span class="hljs-keyword">this</span>._delegate,i)))}loadBundle(i){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">const</span> s=Se(r=W(r,he)),o=<span class="hljs-keyword">new</span> ng;<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i,s,o</span>)</span>{<span class="hljs-keyword">const</span> a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c,u</span>)</span>{<span class="hljs-keyword">let</span> h;<span class="hljs-keyword">return</span> h=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> c?<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">new</span> TextEncoder</span>).<span class="hljs-params">encode</span>(<span class="hljs-params">c</span>):<span class="hljs-params">c</span>,<span class="hljs-params">f</span>=<span class="hljs-params">function</span>(<span class="hljs-params">f,v</span>){<span class="hljs-params">if</span>(<span class="hljs-params">f <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Uint8Array</span></span>)<span class="hljs-params">return</span> <span class="hljs-params">ed</span>(<span class="hljs-params">f,v</span>);<span class="hljs-params">if</span>(<span class="hljs-params">f <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span></span>)<span class="hljs-params">return</span> <span class="hljs-params">ed</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(f</span>),<span class="hljs-params">v</span>);<span class="hljs-params">if</span>(<span class="hljs-params">f <span class="hljs-keyword">instanceof</span> ReadableStream</span>)<span class="hljs-params">return</span> <span class="hljs-params">f</span>.<span class="hljs-params">getReader</span><span class="hljs-params">()</span>;<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">Error</span>(<span class="hljs-params"><span class="hljs-string">"Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream"</span></span>)}(<span class="hljs-params">h</span>),<span class="hljs-params">new</span> <span class="hljs-params">Bm</span>(<span class="hljs-params">f,u</span>);<span class="hljs-params">var</span> <span class="hljs-params">f</span>}(<span class="hljs-params">s,Ks(i</span>));<span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){!<span class="hljs-params">function</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">M</span>(<span class="hljs-params">r</span>);<span class="hljs-params">var</span> <span class="hljs-params">a</span>;(<span class="hljs-params">a=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(c,u,h</span>){<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">getMetadata</span><span class="hljs-params">()</span>;<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-keyword">yield</span> <span class="hljs-keyword">function</span>(S,C</span>){<span class="hljs-params">const</span> <span class="hljs-params">P</span>=<span class="hljs-params">M</span>(<span class="hljs-params">S</span>),<span class="hljs-params">B</span>=<span class="hljs-params">ke</span>(<span class="hljs-params">C.createTime</span>);<span class="hljs-params">return</span> <span class="hljs-params">P</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"hasNewerBundle"</span>,<span class="hljs-string">"readonly"</span>,j=&gt;P.Je.getBundleMetadata(j,C.id</span>)).<span class="hljs-params">then</span>(<span class="hljs-params">j=&gt;!!j&amp;&amp;j.createTime.compareTo(B</span>)&gt;=0)}(<span class="hljs-params">c.localStore,f</span>))<span class="hljs-params">return</span> <span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">close</span><span class="hljs-params">()</span>,<span class="hljs-params">void</span> <span class="hljs-params">h</span>.<span class="hljs-params">_completeWith</span>(<span class="hljs-params">(S=f,{taskState:<span class="hljs-string">"Success"</span>,documentsLoaded:S.totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}</span>));<span class="hljs-params">h</span>.<span class="hljs-params">_updateProgress</span>(<span class="hljs-params">Gh(f</span>));<span class="hljs-params">const</span> <span class="hljs-params">v</span>=<span class="hljs-params">new</span> <span class="hljs-params">ym</span>(<span class="hljs-params">f,c.localStore,u.N</span>);<span class="hljs-params">let</span> <span class="hljs-params">w</span>=<span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">Qo</span><span class="hljs-params">()</span>;<span class="hljs-params">for</span>(<span class="hljs-params">;w;</span>){<span class="hljs-params">const</span> <span class="hljs-params">S</span>=<span class="hljs-params">yield</span> <span class="hljs-params">v</span>.<span class="hljs-params">fo</span>(<span class="hljs-params">w</span>);<span class="hljs-params">S</span>&amp;&amp;<span class="hljs-params">h</span>.<span class="hljs-params">_updateProgress</span>(<span class="hljs-params">S</span>),<span class="hljs-params">w</span>=<span class="hljs-params">yield</span> <span class="hljs-params">u</span>.<span class="hljs-params">Qo</span><span class="hljs-params">()</span>}<span class="hljs-params">const</span> <span class="hljs-params">T</span>=<span class="hljs-params">yield</span> <span class="hljs-params">v</span>.<span class="hljs-params">complete</span><span class="hljs-params">()</span>;<span class="hljs-params">yield</span> <span class="hljs-params">Pt</span>(<span class="hljs-params">c,T.Tn,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">S,C</span>){<span class="hljs-params">const</span> <span class="hljs-params">P</span>=<span class="hljs-params">M</span>(<span class="hljs-params">S</span>);<span class="hljs-params">return</span> <span class="hljs-params">P</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"Save bundle"</span>,<span class="hljs-string">"readwrite"</span>,B=&gt;P.Je.saveBundleMetadata(B,C</span>))}(<span class="hljs-params">c.localStore,f</span>),<span class="hljs-params">h</span>.<span class="hljs-params">_completeWith</span>(<span class="hljs-params">T.progress</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">f</span>){<span class="hljs-params">Ss</span>(<span class="hljs-params"><span class="hljs-string">"SyncEngine"</span>,<span class="hljs-string">`Loading bundle failed with <span class="hljs-subst">${f}</span>`</span></span>),<span class="hljs-params">h</span>.<span class="hljs-params">_failWith</span>(<span class="hljs-params">f</span>)}<span class="hljs-params">var</span> <span class="hljs-params">S</span>}),<span class="hljs-params">function</span>(<span class="hljs-params">c,u,h</span>){<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params">o,i,s</span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>{o.sharedClientState.notifyBundleLoaded()})}(<span class="hljs-keyword">yield</span> Yc(r),a,o)}))}(s,r._databaseId,i,o),o}(<span class="hljs-keyword">this</span>._delegate,i)}namedQuery(i){<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> r.asyncQueue.enqueue(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">M</span>(<span class="hljs-params">s</span>);<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"Get named query"</span>,<span class="hljs-string">"readonly"</span>,c=&gt;a.Je.getNamedQuery(c,o</span>))}(<span class="hljs-params"><span class="hljs-keyword">yield</span> Qc(r</span>),<span class="hljs-params">i</span>)}))}(<span class="hljs-params">Se(r=W(r,he</span>)),<span class="hljs-params">i</span>).<span class="hljs-params">then</span>(<span class="hljs-params">s=&gt;s?<span class="hljs-keyword">new</span> Ge(r,<span class="hljs-literal">null</span>,s.query</span>):<span class="hljs-params">null</span>)}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>).<span class="hljs-params">then</span>(<span class="hljs-params">s=&gt;s?<span class="hljs-keyword">new</span> $e(<span class="hljs-keyword">this</span>,s</span>):<span class="hljs-params">null</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Lo</span> <span class="hljs-params">extends</span> <span class="hljs-params">ou</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">super</span><span class="hljs-params">()</span>,<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>}<span class="hljs-params">convertBytes</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">er</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Tt(i</span>))}<span class="hljs-params">convertReference</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">convertDocumentKey</span>(<span class="hljs-params">i,<span class="hljs-keyword">this</span>.firestore._databaseId</span>);<span class="hljs-params">return</span> <span class="hljs-params">ut</span>.<span class="hljs-params">forKey</span>(<span class="hljs-params">s,<span class="hljs-keyword">this</span>.firestore,<span class="hljs-literal">null</span></span>)}}<span class="hljs-params">class</span> <span class="hljs-params">zd</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">new</span> <span class="hljs-params">Lo</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>).<span class="hljs-params">then</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">new</span> tr(<span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">new</span> Lt(<span class="hljs-keyword">this</span>._firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,o._key,o._document,o.metadata,s.converter</span>)))}<span class="hljs-params">set</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">o</span>?(<span class="hljs-params">cu(<span class="hljs-string">"Transaction.set"</span>,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a,s,o</span>)):<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a,s</span>),<span class="hljs-params">this</span>}<span class="hljs-params">update</span>(<span class="hljs-params">i,s,o,...a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> 2===<span class="hljs-params">arguments</span>.<span class="hljs-params">length</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">update</span>(<span class="hljs-params">c,s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">update</span>(<span class="hljs-params">c,s,o,...a</span>),<span class="hljs-params">this</span>}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">s</span>),<span class="hljs-params">this</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Gd</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">i</span>}<span class="hljs-params">set</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">o</span>?(<span class="hljs-params">cu(<span class="hljs-string">"WriteBatch.set"</span>,o</span>),<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a,s,o</span>)):<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">set</span>(<span class="hljs-params">a,s</span>),<span class="hljs-params">this</span>}<span class="hljs-params">update</span>(<span class="hljs-params">i,s,o,...a</span>){<span class="hljs-params">const</span> <span class="hljs-params">c</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> 2===<span class="hljs-params">arguments</span>.<span class="hljs-params">length</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">update</span>(<span class="hljs-params">c,s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">update</span>(<span class="hljs-params">c,s,o,...a</span>),<span class="hljs-params">this</span>}<span class="hljs-params">delete</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">Un</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">delete</span>(<span class="hljs-params">s</span>),<span class="hljs-params">this</span>}<span class="hljs-params">commit</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">commit</span><span class="hljs-params">()</span>}}<span class="hljs-params">class</span> <span class="hljs-params">Fn</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">o</span>}<span class="hljs-params">fromFirestore</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">Js</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,i._key,i._document,i.metadata,<span class="hljs-literal">null</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">fromFirestore</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> nr(<span class="hljs-keyword">this</span>._firestore,o</span>),<span class="hljs-params">null</span>!=<span class="hljs-params">s</span>?<span class="hljs-params">s</span>:{})}<span class="hljs-params">toFirestore</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">toFirestore</span>(<span class="hljs-params">i,s</span>):<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">toFirestore</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">getInstance</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">Fn</span>.<span class="hljs-params">INSTANCES</span>;<span class="hljs-params">let</span> <span class="hljs-params">a</span>=<span class="hljs-params">o</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i</span>);<span class="hljs-params">a</span>||(<span class="hljs-params">a=<span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>,o.set(i,a</span>));<span class="hljs-params">let</span> <span class="hljs-params">c</span>=<span class="hljs-params">a</span>.<span class="hljs-params">get</span>(<span class="hljs-params">s</span>);<span class="hljs-params">return</span> <span class="hljs-params">c</span>||(<span class="hljs-params">c=<span class="hljs-keyword">new</span> Fn(i,<span class="hljs-keyword">new</span> Lo(i</span>),<span class="hljs-params">s</span>),<span class="hljs-params">a</span>.<span class="hljs-params">set</span>(<span class="hljs-params">s,c</span>)),<span class="hljs-params">c</span>}}<span class="hljs-params">Fn</span>.<span class="hljs-params">INSTANCES</span>=<span class="hljs-params">new</span> <span class="hljs-params">WeakMap</span>;<span class="hljs-params">class</span> <span class="hljs-params">ut</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">new</span> <span class="hljs-params">Lo</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">forPath</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">if</span>(<span class="hljs-params">i.length%<span class="hljs-number">2</span>!=<span class="hljs-number">0</span></span>)<span class="hljs-params">throw</span> <span class="hljs-params">new</span> <span class="hljs-params">A</span>(<span class="hljs-params"><span class="hljs-string">"invalid-argument"</span>,<span class="hljs-string">`Invalid document reference. Document references must have an even number of segments, but <span class="hljs-subst">${i.canonicalString()}</span> has <span class="hljs-subst">${i.length}</span>`</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params">s,<span class="hljs-keyword">new</span> re(s._delegate,o,<span class="hljs-keyword">new</span> U(i</span>)))}<span class="hljs-params">static</span> <span class="hljs-params">forKey</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params">s,<span class="hljs-keyword">new</span> re(s._delegate,o,i</span>))}<span class="hljs-params">get</span> <span class="hljs-params">id</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">id</span>}<span class="hljs-params">get</span> <span class="hljs-params">parent</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Bi</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">this</span>._delegate.parent</span>)}<span class="hljs-params">get</span> <span class="hljs-params">path</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">path</span>}<span class="hljs-params">collection</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Bi</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,fd(<span class="hljs-keyword">this</span>._delegate,i</span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"collection()"</span>,<span class="hljs-string">"DocumentReference.collection()"</span></span>)}}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>(<span class="hljs-params">i=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">i</span>))<span class="hljs-params">instanceof</span> <span class="hljs-params">re</span>&amp;&amp;<span class="hljs-params">pd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>)}<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">s</span>=<span class="hljs-params">cu</span>(<span class="hljs-params"><span class="hljs-string">"DocumentReference.set"</span>,s</span>);<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">s</span>?<span class="hljs-params">Od</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i,s</span>):<span class="hljs-params">Od</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">o,<span class="hljs-string">"setDoc()"</span>,<span class="hljs-string">"DocumentReference.set()"</span></span>)}}<span class="hljs-params">update</span>(<span class="hljs-params">i,s,...o</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> 1===<span class="hljs-params">arguments</span>.<span class="hljs-params">length</span>?<span class="hljs-params">Fd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>):<span class="hljs-params">Fd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i,s,...o</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">a,<span class="hljs-string">"updateDoc()"</span>,<span class="hljs-string">"DocumentReference.update()"</span></span>)}}<span class="hljs-params">delete</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">Vi</span>(<span class="hljs-params">W(r.firestore,he</span>),[<span class="hljs-params">new</span> <span class="hljs-params">Os</span>(<span class="hljs-params">r._key,ve.none(</span>))])}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>)}<span class="hljs-params">onSnapshot</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">jd</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Hd</span>(<span class="hljs-params">i,a=&gt;<span class="hljs-keyword">new</span> tr(<span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">new</span> Lt(<span class="hljs-keyword">this</span>.firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,a._key,a._document,a.metadata,<span class="hljs-keyword">this</span>._delegate.converter</span>)));<span class="hljs-params">return</span> <span class="hljs-params">Ud</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,s,o</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>="<span class="hljs-params">cache</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>==i?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.source</span>)?<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,re</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">s</span>=<span class="hljs-params">Se</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span>(<span class="hljs-params">o=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(a,c,u</span>){<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">yield</span> <span class="hljs-params">function</span>(<span class="hljs-params">f,v</span>){<span class="hljs-params">const</span> <span class="hljs-params">w</span>=<span class="hljs-params">M</span>(<span class="hljs-params">f</span>);<span class="hljs-params">return</span> <span class="hljs-params">w</span>.<span class="hljs-params">persistence</span>.<span class="hljs-params">runTransaction</span>(<span class="hljs-params"><span class="hljs-string">"read document"</span>,<span class="hljs-string">"readonly"</span>,T=&gt;w.Qn.An(T,v</span>))}(<span class="hljs-params">a,c</span>);<span class="hljs-params">h</span>.<span class="hljs-params">isFoundDocument</span><span class="hljs-params">()</span>?<span class="hljs-params">u</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params">h</span>):<span class="hljs-params">h</span>.<span class="hljs-params">isNoDocument</span><span class="hljs-params">()</span>?<span class="hljs-params">u</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params"><span class="hljs-literal">null</span></span>):<span class="hljs-params">u</span>.<span class="hljs-params">reject</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> A(I.UNAVAILABLE,<span class="hljs-string">"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"</span></span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">h</span>){<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">h,<span class="hljs-string">`Failed to get document '<span class="hljs-subst">${c}</span> from cache`</span></span>);<span class="hljs-params">u</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">f</span>)}}),<span class="hljs-params">function</span>(<span class="hljs-params">a,c,u</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params"><span class="hljs-keyword">yield</span> Qc(r</span>),<span class="hljs-params">i</span>,<span class="hljs-params">s</span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>})),<span class="hljs-params">s</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">s,r._key</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">new</span> Lt(i,o,r._key,a,<span class="hljs-keyword">new</span> Mn(<span class="hljs-literal">null</span>!==a&amp;&amp;a.hasLocalMutations,!<span class="hljs-number">0</span></span>),<span class="hljs-params">r</span>.<span class="hljs-params">converter</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>):"<span class="hljs-params">server</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>==i?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.source</span>)?<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,re</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>);<span class="hljs-params">return</span> <span class="hljs-params">rd</span>(<span class="hljs-params">Se(i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">_key</span>,{<span class="hljs-params">source</span>:"<span class="hljs-params">server</span>"}).<span class="hljs-params">then</span>(<span class="hljs-params">s=&gt;au(i,r,s</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>):<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,re</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>);<span class="hljs-params">return</span> <span class="hljs-params">rd</span>(<span class="hljs-params">Se(i</span>),<span class="hljs-params">r</span>.<span class="hljs-params">_key</span>).<span class="hljs-params">then</span>(<span class="hljs-params">s=&gt;au(i,r,s</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>),<span class="hljs-params">s</span>.<span class="hljs-params">then</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">new</span> tr(<span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">new</span> Lt(<span class="hljs-keyword">this</span>.firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,o._key,o._document,o.metadata,<span class="hljs-keyword">this</span>._delegate.converter</span>)))}<span class="hljs-params">withConverter</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">this</span>._delegate.withConverter(i?Fn.getInstance(<span class="hljs-keyword">this</span>.firestore,i</span>):<span class="hljs-params">null</span>))}}<span class="hljs-params">function</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">r,i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">message</span>=<span class="hljs-params">r</span>.<span class="hljs-params">message</span>.<span class="hljs-params">replace</span>(<span class="hljs-params">i,s</span>),<span class="hljs-params">r</span>}<span class="hljs-params">function</span> <span class="hljs-params">jd</span>(<span class="hljs-params">r</span>){<span class="hljs-params">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> r</span>)<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> i&amp;&amp;!uu(i</span>))<span class="hljs-params">return</span> <span class="hljs-params">i</span>;<span class="hljs-params">return</span>{}}<span class="hljs-params">function</span> <span class="hljs-params">Hd</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">var</span> <span class="hljs-params">s</span>,<span class="hljs-params">o</span>;<span class="hljs-params">let</span> <span class="hljs-params">a</span>;<span class="hljs-params">return</span> <span class="hljs-params">a</span>=<span class="hljs-params">uu</span>(<span class="hljs-params">r[<span class="hljs-number">0</span>]</span>)?<span class="hljs-params">r</span>[0]:<span class="hljs-params">uu</span>(<span class="hljs-params">r[<span class="hljs-number">1</span>]</span>)?<span class="hljs-params">r</span>[1]:"<span class="hljs-params">function</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">r</span>[0]?{<span class="hljs-params">next</span>:<span class="hljs-params">r</span>[0],<span class="hljs-params">error</span>:<span class="hljs-params">r</span>[1],<span class="hljs-params">complete</span>:<span class="hljs-params">r</span>[2]}:{<span class="hljs-params">next</span>:<span class="hljs-params">r</span>[1],<span class="hljs-params">error</span>:<span class="hljs-params">r</span>[2],<span class="hljs-params">complete</span>:<span class="hljs-params">r</span>[3]},{<span class="hljs-params">next</span>:<span class="hljs-params">c</span>=&gt;</span>{a.next&amp;&amp;a.next(i(c))},<span class="hljs-attr">error</span>:<span class="hljs-literal">null</span>===<span class="hljs-function">(<span class="hljs-params">s=a.error</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">s</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">s</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">a</span>),<span class="hljs-params">complete</span>:<span class="hljs-params">null</span>===(<span class="hljs-params">o=a.complete</span>)||<span class="hljs-params">void</span> 0===<span class="hljs-params">o</span>?<span class="hljs-params">void</span> 0:<span class="hljs-params">o</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">a</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">tr</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>}<span class="hljs-params">get</span> <span class="hljs-params">ref</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._delegate.ref</span>)}<span class="hljs-params">get</span> <span class="hljs-params">id</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">id</span>}<span class="hljs-params">get</span> <span class="hljs-params">metadata</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">metadata</span>}<span class="hljs-params">get</span> <span class="hljs-params">exists</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">exists</span><span class="hljs-params">()</span>}<span class="hljs-params">data</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">data</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">get</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">xd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i._delegate</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">nr</span> <span class="hljs-params">extends</span> <span class="hljs-params">tr</span>{<span class="hljs-params">data</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">data</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">r</span>||<span class="hljs-params">V</span><span class="hljs-params">()</span>}(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==s</span>),<span class="hljs-params">s</span>}}<span class="hljs-params">class</span> <span class="hljs-params">$e</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_userDataWriter</span>=<span class="hljs-params">new</span> <span class="hljs-params">Lo</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">where</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(r,i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">i</span>,<span class="hljs-params">a</span>=<span class="hljs-params">Po</span>(<span class="hljs-params"><span class="hljs-string">"where"</span>,r</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">bg</span>(<span class="hljs-params">a,o,s</span>)}(<span class="hljs-params">i,s,o</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">a</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">a,<span class="hljs-regexp">/(orderBy|where)\(\)/</span>,<span class="hljs-string">"Query.$1()"</span></span>)}}<span class="hljs-params">orderBy</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(r,i=<span class="hljs-string">"asc"</span></span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">i</span>,<span class="hljs-params">o</span>=<span class="hljs-params">Po</span>(<span class="hljs-params"><span class="hljs-string">"orderBy"</span>,r</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Eg</span>(<span class="hljs-params">o,s</span>)}(<span class="hljs-params">i,s</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">o</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">o,<span class="hljs-regexp">/(orderBy|where)\(\)/</span>,<span class="hljs-string">"Query.$1()"</span></span>)}}<span class="hljs-params">limit</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">hd</span>(<span class="hljs-params"><span class="hljs-string">"limit"</span>,r</span>),<span class="hljs-params">new</span> <span class="hljs-params">Cd</span>(<span class="hljs-params"><span class="hljs-string">"limit"</span>,r,<span class="hljs-string">"F"</span></span>)}(<span class="hljs-params">i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"limit()"</span>,<span class="hljs-string">"Query.limit()"</span></span>)}}<span class="hljs-params">limitToLast</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(r</span>){<span class="hljs-params">return</span> <span class="hljs-params">hd</span>(<span class="hljs-params"><span class="hljs-string">"limitToLast"</span>,r</span>),<span class="hljs-params">new</span> <span class="hljs-params">Cd</span>(<span class="hljs-params"><span class="hljs-string">"limitToLast"</span>,r,<span class="hljs-string">"L"</span></span>)}(<span class="hljs-params">i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"limitToLast()"</span>,<span class="hljs-string">"Query.limitToLast()"</span></span>)}}<span class="hljs-params">startAt</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rd</span>(<span class="hljs-params"><span class="hljs-string">"startAt"</span>,r,!<span class="hljs-number">0</span></span>)}(<span class="hljs-params">...i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"startAt()"</span>,<span class="hljs-string">"Query.startAt()"</span></span>)}}<span class="hljs-params">startAfter</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Rd</span>(<span class="hljs-params"><span class="hljs-string">"startAfter"</span>,r,!<span class="hljs-number">1</span></span>)}(<span class="hljs-params">...i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"startAfter()"</span>,<span class="hljs-string">"Query.startAfter()"</span></span>)}}<span class="hljs-params">endBefore</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ad</span>(<span class="hljs-params"><span class="hljs-string">"endBefore"</span>,r,!<span class="hljs-number">0</span></span>)}(<span class="hljs-params">...i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"endBefore()"</span>,<span class="hljs-string">"Query.endBefore()"</span></span>)}}<span class="hljs-params">endAt</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,tn(<span class="hljs-keyword">this</span>._delegate,<span class="hljs-keyword">function</span>(...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Ad</span>(<span class="hljs-params"><span class="hljs-string">"endAt"</span>,r,!<span class="hljs-number">1</span></span>)}(<span class="hljs-params">...i</span>)))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"endAt()"</span>,<span class="hljs-string">"Query.endAt()"</span></span>)}}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">md</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i._delegate</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>="<span class="hljs-params">cache</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>==i?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.source</span>)?<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,Ge</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">s</span>=<span class="hljs-params">Se</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ce</span>;<span class="hljs-params">return</span> <span class="hljs-params">r</span>.<span class="hljs-params">asyncQueue</span>.<span class="hljs-params">enqueueAndForget</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(</span>){<span class="hljs-params">return</span>(<span class="hljs-params">o=(<span class="hljs-number">0</span>,D.Z</span>)(<span class="hljs-params"><span class="hljs-keyword">function</span>*(a,c,u</span>){<span class="hljs-params">try</span>{<span class="hljs-params">const</span> <span class="hljs-params">h</span>=<span class="hljs-params">yield</span> <span class="hljs-params">_o</span>(<span class="hljs-params">a,c,!<span class="hljs-number">0</span></span>),<span class="hljs-params">f</span>=<span class="hljs-params">new</span> <span class="hljs-params">Kh</span>(<span class="hljs-params">c,h.Gn</span>),<span class="hljs-params">v</span>=<span class="hljs-params">f</span>.<span class="hljs-params">Io</span>(<span class="hljs-params">h.documents</span>),<span class="hljs-params">w</span>=<span class="hljs-params">f</span>.<span class="hljs-params">applyChanges</span>(<span class="hljs-params">v,!<span class="hljs-number">1</span></span>);<span class="hljs-params">u</span>.<span class="hljs-params">resolve</span>(<span class="hljs-params">w.snapshot</span>)}<span class="hljs-params">catch</span>(<span class="hljs-params">h</span>){<span class="hljs-params">const</span> <span class="hljs-params">f</span>=<span class="hljs-params">Ni</span>(<span class="hljs-params">h,<span class="hljs-string">`Failed to execute query '<span class="hljs-subst">${c}</span> against cache`</span></span>);<span class="hljs-params">u</span>.<span class="hljs-params">reject</span>(<span class="hljs-params">f</span>)}}),<span class="hljs-params">function</span>(<span class="hljs-params">a,c,u</span>){<span class="hljs-params">return</span> <span class="hljs-params">o</span>.<span class="hljs-params">apply</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span></span>)})(<span class="hljs-params"><span class="hljs-keyword">yield</span> Qc(r</span>),<span class="hljs-params">i</span>,<span class="hljs-params">s</span>);<span class="hljs-params">var</span> <span class="hljs-params">o</span>})),<span class="hljs-params">s</span>.<span class="hljs-params">promise</span>}(<span class="hljs-params">s,r._query</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">new</span> en(i,o,r,a</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>):"<span class="hljs-params">server</span>"===(<span class="hljs-params"><span class="hljs-literal">null</span>==i?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:i.source</span>)?<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,Ge</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">s</span>=<span class="hljs-params">Se</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">od</span>(<span class="hljs-params">s,r._query,{source:<span class="hljs-string">"server"</span>}</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">new</span> en(i,o,r,a</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>):<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">r</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r,Ge</span>);<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">s</span>=<span class="hljs-params">Se</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">new</span> <span class="hljs-params">On</span>(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">Dd</span>(<span class="hljs-params">r._query</span>),<span class="hljs-params">od</span>(<span class="hljs-params">s,r._query</span>).<span class="hljs-params">then</span>(<span class="hljs-params">a=&gt;<span class="hljs-keyword">new</span> en(i,o,r,a</span>))}(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate</span>),<span class="hljs-params">s</span>.<span class="hljs-params">then</span>(<span class="hljs-params">o=&gt;<span class="hljs-keyword">new</span> lu(<span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">new</span> en(<span class="hljs-keyword">this</span>.firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,<span class="hljs-keyword">this</span>._delegate,o._snapshot</span>)))}<span class="hljs-params">onSnapshot</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">jd</span>(<span class="hljs-params">i</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Hd</span>(<span class="hljs-params">i,a=&gt;<span class="hljs-keyword">new</span> lu(<span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">new</span> en(<span class="hljs-keyword">this</span>.firestore._delegate,<span class="hljs-keyword">this</span>._userDataWriter,<span class="hljs-keyword">this</span>._delegate,a._snapshot</span>)));<span class="hljs-params">return</span> <span class="hljs-params">Ud</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,s,o</span>)}<span class="hljs-params">withConverter</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">this</span>._delegate.withConverter(i?Fn.getInstance(<span class="hljs-keyword">this</span>.firestore,i</span>):<span class="hljs-params">null</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">ey</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>}<span class="hljs-params">get</span> <span class="hljs-params">type</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">type</span>}<span class="hljs-params">get</span> <span class="hljs-params">doc</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">nr</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._delegate.doc</span>)}<span class="hljs-params">get</span> <span class="hljs-params">oldIndex</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">oldIndex</span>}<span class="hljs-params">get</span> <span class="hljs-params">newIndex</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">newIndex</span>}}<span class="hljs-params">class</span> <span class="hljs-params">lu</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>}<span class="hljs-params">get</span> <span class="hljs-params">query</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">$e</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._firestore,<span class="hljs-keyword">this</span>._delegate.query</span>)}<span class="hljs-params">get</span> <span class="hljs-params">metadata</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">metadata</span>}<span class="hljs-params">get</span> <span class="hljs-params">size</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">size</span>}<span class="hljs-params">get</span> <span class="hljs-params">empty</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">empty</span>}<span class="hljs-params">get</span> <span class="hljs-params">docs</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">map</span>(<span class="hljs-params">i=&gt;<span class="hljs-keyword">new</span> nr(<span class="hljs-keyword">this</span>._firestore,i</span>))}<span class="hljs-params">docChanges</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">docChanges</span>(<span class="hljs-params">i</span>).<span class="hljs-params">map</span>(<span class="hljs-params">s=&gt;<span class="hljs-keyword">new</span> ey(<span class="hljs-keyword">this</span>._firestore,s</span>))}<span class="hljs-params">forEach</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">o=&gt;{i.call(s,<span class="hljs-keyword">new</span> nr(<span class="hljs-keyword">this</span>._firestore,o</span>))})}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">xd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i._delegate</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Bi</span> <span class="hljs-params">extends</span> <span class="hljs-params">$e</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">super</span>(<span class="hljs-params">i,s</span>),<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">s</span>}<span class="hljs-params">get</span> <span class="hljs-params">id</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">id</span>}<span class="hljs-params">get</span> <span class="hljs-params">path</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">path</span>}<span class="hljs-params">get</span> <span class="hljs-params">parent</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">parent</span>;<span class="hljs-params">return</span> <span class="hljs-params">i</span>?<span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,i</span>):<span class="hljs-params">null</span>}<span class="hljs-params">doc</span>(<span class="hljs-params">i</span>){<span class="hljs-params">try</span>{<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">ut</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===i?Do(<span class="hljs-keyword">this</span>._delegate</span>):<span class="hljs-params">Do</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>._delegate,i</span>))}<span class="hljs-params">catch</span>(<span class="hljs-params">s</span>){<span class="hljs-params">throw</span> <span class="hljs-params">Ke</span>(<span class="hljs-params">s,<span class="hljs-string">"doc()"</span>,<span class="hljs-string">"CollectionReference.doc()"</span></span>)}}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">W</span>(<span class="hljs-params">r.firestore,he</span>),<span class="hljs-params">o</span>=<span class="hljs-params">Do</span>(<span class="hljs-params">r</span>),<span class="hljs-params">a</span>=<span class="hljs-params">No</span>(<span class="hljs-params">r.converter,i</span>);<span class="hljs-params">return</span> <span class="hljs-params">Vi</span>(<span class="hljs-params">s,[Ao(Nn(r.firestore</span>),"<span class="hljs-params">addDoc</span>",<span class="hljs-params">o</span>.<span class="hljs-params">_key</span>,<span class="hljs-params">a</span>,<span class="hljs-params">null</span>!==<span class="hljs-params">r</span>.<span class="hljs-params">converter</span>,{}).<span class="hljs-params">toMutation</span>(<span class="hljs-params">o._key,ve.exists(!<span class="hljs-number">1</span></span>))]).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>o)}(<span class="hljs-keyword">this</span>._delegate,i).then(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span><span class="hljs-keyword">new</span> ut(<span class="hljs-keyword">this</span>.firestore,s))}isEqual(i){<span class="hljs-keyword">return</span> pd(<span class="hljs-keyword">this</span>._delegate,i._delegate)}withConverter(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Bi(<span class="hljs-keyword">this</span>.firestore,<span class="hljs-keyword">this</span>._delegate.withConverter(i?Fn.getInstance(<span class="hljs-keyword">this</span>.firestore,i):<span class="hljs-literal">null</span>))}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Un</span>(<span class="hljs-params">r</span>)</span>{<span class="hljs-keyword">return</span> W(r,re)}<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">hu</span></span>{<span class="hljs-keyword">constructor</span>(...i){<span class="hljs-keyword">this</span>._delegate=<span class="hljs-keyword">new</span> Nt(...i)}<span class="hljs-keyword">static</span> documentId(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> hu(Oe.keyField().canonicalString())}isEqual(i){<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params">i=(<span class="hljs-number">0</span>,Y.m9</span>)(<span class="hljs-params">i</span>))<span class="hljs-params">instanceof</span> <span class="hljs-params">Nt</span>&amp;&amp;<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">_internalPath</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i._internalPath</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Vn</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i</span>){<span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>=<span class="hljs-params">i</span>}<span class="hljs-params">static</span> <span class="hljs-params">serverTimestamp</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">eu</span>(<span class="hljs-params"><span class="hljs-string">"serverTimestamp"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">_methodName</span>="<span class="hljs-params">FieldValue</span>.<span class="hljs-params">serverTimestamp</span>",<span class="hljs-params">new</span> <span class="hljs-params">Vn</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">delete</span><span class="hljs-params">()</span>{<span class="hljs-params">const</span> <span class="hljs-params">i</span>=<span class="hljs-params">new</span> <span class="hljs-params">Ys</span>(<span class="hljs-params"><span class="hljs-string">"deleteField"</span></span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>.<span class="hljs-params">_methodName</span>="<span class="hljs-params">FieldValue</span>.<span class="hljs-params">delete</span>",<span class="hljs-params">new</span> <span class="hljs-params">Vn</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">static</span> <span class="hljs-params">arrayUnion</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">mg</span>(<span class="hljs-params"><span class="hljs-string">"arrayUnion"</span>,r</span>)}(<span class="hljs-params">...i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">_methodName</span>="<span class="hljs-params">FieldValue</span>.<span class="hljs-params">arrayUnion</span>",<span class="hljs-params">new</span> <span class="hljs-params">Vn</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">static</span> <span class="hljs-params">arrayRemove</span>(<span class="hljs-params">...i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">...r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">gg</span>(<span class="hljs-params"><span class="hljs-string">"arrayRemove"</span>,r</span>)}(<span class="hljs-params">...i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">_methodName</span>="<span class="hljs-params">FieldValue</span>.<span class="hljs-params">arrayRemove</span>",<span class="hljs-params">new</span> <span class="hljs-params">Vn</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">static</span> <span class="hljs-params">increment</span>(<span class="hljs-params">i</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">yg</span>(<span class="hljs-params"><span class="hljs-string">"increment"</span>,r</span>)}(<span class="hljs-params">i</span>);<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">_methodName</span>="<span class="hljs-params">FieldValue</span>.<span class="hljs-params">increment</span>",<span class="hljs-params">new</span> <span class="hljs-params">Vn</span>(<span class="hljs-params">s</span>)}<span class="hljs-params">isEqual</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">_delegate</span>.<span class="hljs-params">isEqual</span>(<span class="hljs-params">i._delegate</span>)}}<span class="hljs-params">const</span> <span class="hljs-params">ty</span>={<span class="hljs-params">Firestore</span>:<span class="hljs-params">qd</span>,<span class="hljs-params">GeoPoint</span>:<span class="hljs-params">Co</span>,<span class="hljs-params">Timestamp</span>:<span class="hljs-params">Re</span>,<span class="hljs-params">Blob</span>:<span class="hljs-params">er</span>,<span class="hljs-params">Transaction</span>:<span class="hljs-params">zd</span>,<span class="hljs-params">WriteBatch</span>:<span class="hljs-params">Gd</span>,<span class="hljs-params">DocumentReference</span>:<span class="hljs-params">ut</span>,<span class="hljs-params">DocumentSnapshot</span>:<span class="hljs-params">tr</span>,<span class="hljs-params">Query</span>:<span class="hljs-params">$e</span>,<span class="hljs-params">QueryDocumentSnapshot</span>:<span class="hljs-params">nr</span>,<span class="hljs-params">QuerySnapshot</span>:<span class="hljs-params">lu</span>,<span class="hljs-params">CollectionReference</span>:<span class="hljs-params">Bi</span>,<span class="hljs-params">FieldPath</span>:<span class="hljs-params">hu</span>,<span class="hljs-params">FieldValue</span>:<span class="hljs-params">Vn</span>,<span class="hljs-params">setLogLevel</span>:<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){!<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){<span class="hljs-params">jt</span>.<span class="hljs-params">setLogLevel</span>(<span class="hljs-params">r</span>)}(<span class="hljs-params">r</span>)},<span class="hljs-params">CACHE_SIZE_UNLIMITED</span>:-1};!<span class="hljs-params">function</span>(<span class="hljs-params">r</span>){(<span class="hljs-params"><span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">r</span>.<span class="hljs-params">INTERNAL</span>.<span class="hljs-params">registerComponent</span>(<span class="hljs-params"><span class="hljs-keyword">new</span> Gi.wA(<span class="hljs-string">"firestore-compat"</span>,s=&gt;((i,s</span>)=&gt;</span><span class="hljs-keyword">new</span> qd(i,s,<span class="hljs-keyword">new</span> Jg))(s.getProvider(<span class="hljs-string">"app-compat"</span>).getImmediate(),s.getProvider(<span class="hljs-string">"firestore"</span>).getImmediate()),<span class="hljs-string">"PUBLIC"</span>).setServiceProps(<span class="hljs-built_in">Object</span>.assign({},ty)))})(r),r.registerVersion(<span class="hljs-string">"@firebase/firestore-compat"</span>,<span class="hljs-string">"0.1.1"</span>)}(lt.Z);<span class="hljs-keyword">var</span> sn=L(<span class="hljs-number">3820</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Kd</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i=Bn.z</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> _.y(<span class="hljs-function"><span class="hljs-params">s</span>=&gt;</span>{<span class="hljs-keyword">let</span> o;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>!=i?i.schedule(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{o=r.onSnapshot({<span class="hljs-attr">includeMetadataChanges</span>:!<span class="hljs-number">0</span>},s)}):o=r.onSnapshot({<span class="hljs-attr">includeMetadataChanges</span>:!<span class="hljs-number">0</span>},s),()=&gt;{<span class="hljs-literal">null</span>!=o&amp;&amp;o()}})}(r,i)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">du</span>(<span class="hljs-params">r,i</span>)</span>{<span class="hljs-keyword">return</span> Kd(r,i).pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">s=&gt;({payload:s,type:<span class="hljs-string">"query"</span>}</span>)))}<span class="hljs-params">function</span> <span class="hljs-params">Mo</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">du</span>(<span class="hljs-params">r,i</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,qi.O</span>)(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,ie.G</span>)<span class="hljs-params">()</span>,(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">([s,o]</span>)=&gt;</span>{<span class="hljs-keyword">const</span> a=o.payload.docChanges(),c=a.map(<span class="hljs-function"><span class="hljs-params">u</span>=&gt;</span><span class="hljs-function">(<span class="hljs-params">{type:u.type,payload:u}</span>));<span class="hljs-params">return</span> <span class="hljs-params">s</span>&amp;&amp;<span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>(<span class="hljs-params">s.payload.metadata</span>)!==<span class="hljs-params">JSON</span>.<span class="hljs-params">stringify</span>(<span class="hljs-params">o.payload.metadata</span>)&amp;&amp;<span class="hljs-params">o</span>.<span class="hljs-params">payload</span>.<span class="hljs-params">docs</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">(u,h</span>)=&gt;</span>{<span class="hljs-keyword">const</span> f=a.find(<span class="hljs-function"><span class="hljs-params">w</span>=&gt;</span>w.doc.ref.isEqual(u.ref)),v=<span class="hljs-literal">null</span>==s?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.payload.docs.find(<span class="hljs-function"><span class="hljs-params">w</span>=&gt;</span>w.ref.isEqual(u.ref));f&amp;&amp;<span class="hljs-built_in">JSON</span>.stringify(f.doc.metadata)===<span class="hljs-built_in">JSON</span>.stringify(u.metadata)||!f&amp;&amp;v&amp;&amp;<span class="hljs-built_in">JSON</span>.stringify(v.metadata)===<span class="hljs-built_in">JSON</span>.stringify(u.metadata)||c.push({<span class="hljs-attr">type</span>:<span class="hljs-string">"modified"</span>,<span class="hljs-attr">payload</span>:{<span class="hljs-attr">oldIndex</span>:h,<span class="hljs-attr">newIndex</span>:h,<span class="hljs-attr">type</span>:<span class="hljs-string">"modified"</span>,<span class="hljs-attr">doc</span>:u}})}),c}))}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">$d</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">return</span> Mo(r,s).pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,rt.R</span>)(<span class="hljs-params">(o,a</span>)=&gt;</span><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">r,i,s</span>)</span>{<span class="hljs-keyword">return</span> i.forEach(<span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span>{s.indexOf(o.type)&gt;<span class="hljs-number">-1</span>&amp;&amp;<span class="hljs-function">(<span class="hljs-params">r=<span class="hljs-keyword">function</span>(r,i</span>){<span class="hljs-params">switch</span>(<span class="hljs-params">i.type</span>){<span class="hljs-params">case</span>"<span class="hljs-params">added</span>":<span class="hljs-params">if</span>(<span class="hljs-params">!r[i.newIndex]||!r[i.newIndex].doc.ref.isEqual(i.doc.ref</span>))<span class="hljs-params">return</span> <span class="hljs-params">fu</span>(<span class="hljs-params">r,i.newIndex,<span class="hljs-number">0</span>,i</span>);<span class="hljs-params">break</span>;<span class="hljs-params">case</span>"<span class="hljs-params">modified</span>":<span class="hljs-params">if</span>(<span class="hljs-params"><span class="hljs-literal">null</span>==r[i.oldIndex]||r[i.oldIndex].doc.ref.isEqual(i.doc.ref</span>)){<span class="hljs-params">if</span>(<span class="hljs-params">i.oldIndex!==i.newIndex</span>){<span class="hljs-params">const</span> <span class="hljs-params">s</span>=<span class="hljs-params">r</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">s</span>.<span class="hljs-params">splice</span>(<span class="hljs-params">i.oldIndex,<span class="hljs-number">1</span></span>),<span class="hljs-params">s</span>.<span class="hljs-params">splice</span>(<span class="hljs-params">i.newIndex,<span class="hljs-number">0</span>,i</span>),<span class="hljs-params">s</span>}<span class="hljs-params">return</span> <span class="hljs-params">fu</span>(<span class="hljs-params">r,i.newIndex,<span class="hljs-number">1</span>,i</span>)}<span class="hljs-params">break</span>;<span class="hljs-params">case</span>"<span class="hljs-params">removed</span>":<span class="hljs-params">if</span>(<span class="hljs-params">r[i.oldIndex]&amp;&amp;r[i.oldIndex].doc.ref.isEqual(i.doc.ref</span>))<span class="hljs-params">return</span> <span class="hljs-params">fu</span>(<span class="hljs-params">r,i.oldIndex,<span class="hljs-number">1</span></span>)}<span class="hljs-params">return</span> <span class="hljs-params">r</span>}(<span class="hljs-params">r,o</span>))}),<span class="hljs-params">r</span>}(<span class="hljs-params">o,a.map(c=&gt;c.payload</span>),<span class="hljs-params">i</span>),[]),(<span class="hljs-params"><span class="hljs-number">0</span>,rr.x</span>)<span class="hljs-params">()</span>,(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">o=&gt;o.map(a=&gt;({type:a.type,payload:a}</span>))))}<span class="hljs-params">function</span> <span class="hljs-params">fu</span>(<span class="hljs-params">r,i,s,...o</span>){<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">r</span>.<span class="hljs-params">slice</span><span class="hljs-params">()</span>;<span class="hljs-params">return</span> <span class="hljs-params">a</span>.<span class="hljs-params">splice</span>(<span class="hljs-params">i,s,...o</span>),<span class="hljs-params">a</span>}<span class="hljs-params">function</span> <span class="hljs-params">Zd</span>(<span class="hljs-params">r</span>){<span class="hljs-params">return</span>(<span class="hljs-params">!r||<span class="hljs-number">0</span>===r.length</span>)&amp;&amp;(<span class="hljs-params">r=[<span class="hljs-string">"added"</span>,<span class="hljs-string">"removed"</span>,<span class="hljs-string">"modified"</span>]</span>),<span class="hljs-params">r</span>}<span class="hljs-params">L</span>(<span class="hljs-params"><span class="hljs-number">7841</span></span>);<span class="hljs-params">class</span> <span class="hljs-params">Qd</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s,o</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ref</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">s</span>,<span class="hljs-params">this</span>.<span class="hljs-params">afs</span>=<span class="hljs-params">o</span>}<span class="hljs-params">stateChanges</span>(<span class="hljs-params">i</span>){<span class="hljs-params">let</span> <span class="hljs-params">s</span>=<span class="hljs-params">Mo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular</span>);<span class="hljs-params">return</span> <span class="hljs-params">i</span>&amp;&amp;<span class="hljs-params">i</span>.<span class="hljs-params">length</span>&gt;0&amp;&amp;(<span class="hljs-params">s=s.pipe((<span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">o=&gt;o.filter(a=&gt;i.indexOf(a.type</span>)&gt;-1)))),<span class="hljs-params">s</span>.<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,qi.O</span>)(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,ie.G</span>)<span class="hljs-params">()</span>,(<span class="hljs-params"><span class="hljs-number">0</span>,or.h</span>)(<span class="hljs-params">([o,a]</span>)=&gt;</span>a.length&gt;<span class="hljs-number">0</span>||!o),(<span class="hljs-number">0</span>,Xe.U)(<span class="hljs-function">(<span class="hljs-params">[o,a]</span>)=&gt;</span>a),Qe.iC)}auditTrail(i){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.stateChanges(i).pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,rt.R</span>)(<span class="hljs-params">(s,o</span>)=&gt;</span>[...s,...o],[]))}snapshotChanges(i){<span class="hljs-keyword">const</span> s=Zd(i);<span class="hljs-keyword">return</span> $d(<span class="hljs-keyword">this</span>.query,s,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular).pipe(Qe.iC)}valueChanges(i={}){<span class="hljs-keyword">return</span> du(<span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular).pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">s=&gt;s.payload.docs.map(o=&gt;i.idField?<span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.assign({},o.data(</span>)),{[<span class="hljs-params">i</span>.<span class="hljs-params">idField</span>]:<span class="hljs-params">o</span>.<span class="hljs-params">id</span>}):<span class="hljs-params">o</span>.<span class="hljs-params">data</span><span class="hljs-params">()</span>)),<span class="hljs-params">Qe</span>.<span class="hljs-params">iC</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,ne.D</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.query.get(i</span>)).<span class="hljs-params">pipe</span>(<span class="hljs-params">Qe.f6</span>)}<span class="hljs-params">add</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ref</span>.<span class="hljs-params">add</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">doc</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Yd</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.ref.doc(i</span>),<span class="hljs-params">this</span>.<span class="hljs-params">afs</span>)}}<span class="hljs-params">class</span> <span class="hljs-params">Yd</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">ref</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">afs</span>=<span class="hljs-params">s</span>}<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ref</span>.<span class="hljs-params">set</span>(<span class="hljs-params">i,s</span>)}<span class="hljs-params">update</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ref</span>.<span class="hljs-params">update</span>(<span class="hljs-params">i</span>)}<span class="hljs-params">delete</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">ref</span>.<span class="hljs-params">delete</span><span class="hljs-params">()</span>}<span class="hljs-params">collection</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">const</span> <span class="hljs-params">o</span>=<span class="hljs-params">this</span>.<span class="hljs-params">ref</span>.<span class="hljs-params">collection</span>(<span class="hljs-params">i</span>),{<span class="hljs-params">ref</span>:<span class="hljs-params">a</span>,<span class="hljs-params">query</span>:<span class="hljs-params">c</span>}=<span class="hljs-params">Wd</span>(<span class="hljs-params">o,s</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">Qd</span>(<span class="hljs-params">a,c,<span class="hljs-keyword">this</span>.afs</span>)}<span class="hljs-params">snapshotChanges</span><span class="hljs-params">()</span>{<span class="hljs-params">return</span> <span class="hljs-params">function</span>(<span class="hljs-params">r,i</span>){<span class="hljs-params">return</span> <span class="hljs-params">Kd</span>(<span class="hljs-params">r,i</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,qi.O</span>)(<span class="hljs-params"><span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>),(<span class="hljs-params"><span class="hljs-number">0</span>,ie.G</span>)<span class="hljs-params">()</span>,(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">([s,o]</span>)=&gt;</span>o.exists?<span class="hljs-function">(<span class="hljs-params"><span class="hljs-literal">null</span>==s?<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>:s.exists</span>)?{<span class="hljs-params">payload</span>:<span class="hljs-params">o</span>,<span class="hljs-params">type</span>:"<span class="hljs-params">modified</span>"}:{<span class="hljs-params">payload</span>:<span class="hljs-params">o</span>,<span class="hljs-params">type</span>:"<span class="hljs-params">added</span>"}:{<span class="hljs-params">payload</span>:<span class="hljs-params">o</span>,<span class="hljs-params">type</span>:"<span class="hljs-params">removed</span>"}))}(<span class="hljs-params"><span class="hljs-keyword">this</span>.ref,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">Qe.iC</span>)}<span class="hljs-params">valueChanges</span>(<span class="hljs-params">i={}</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">snapshotChanges</span><span class="hljs-params">()</span>.<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">({payload:s}</span>)=&gt;</span>i.idField?<span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">Object</span>.assign({},s.data()),{[i.idField]:s.id}):s.data()))}<span class="hljs-keyword">get</span>(i){<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,ne.D</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.ref.get(i</span>)).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,Fo.QV</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.afs.schedulers.insideAngular</span>))}}<span class="hljs-params">class</span> <span class="hljs-params">cy</span>{<span class="hljs-params">constructor</span>(<span class="hljs-params">i,s</span>){<span class="hljs-params">this</span>.<span class="hljs-params">query</span>=<span class="hljs-params">i</span>,<span class="hljs-params">this</span>.<span class="hljs-params">afs</span>=<span class="hljs-params">s</span>}<span class="hljs-params">stateChanges</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">i</span>&amp;&amp;0!==<span class="hljs-params">i</span>.<span class="hljs-params">length</span>?<span class="hljs-params">Mo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">s=&gt;s.filter(o=&gt;i.indexOf(o.type</span>)&gt;-1)),(<span class="hljs-params"><span class="hljs-number">0</span>,or.h</span>)(<span class="hljs-params">s=&gt;s.length&gt;<span class="hljs-number">0</span></span>),<span class="hljs-params">Qe</span>.<span class="hljs-params">iC</span>):<span class="hljs-params">Mo</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">Qe.iC</span>)}<span class="hljs-params">auditTrail</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span> <span class="hljs-params">this</span>.<span class="hljs-params">stateChanges</span>(<span class="hljs-params">i</span>).<span class="hljs-params">pipe</span>(<span class="hljs-params">(<span class="hljs-number">0</span>,rt.R</span>)(<span class="hljs-params">(s,o</span>)=&gt;</span>[...s,...o],[]))}snapshotChanges(i){<span class="hljs-keyword">const</span> s=Zd(i);<span class="hljs-keyword">return</span> $d(<span class="hljs-keyword">this</span>.query,s,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular).pipe(Qe.iC)}valueChanges(i={}){<span class="hljs-keyword">return</span> du(<span class="hljs-keyword">this</span>.query,<span class="hljs-keyword">this</span>.afs.schedulers.outsideAngular).pipe(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,Xe.U</span>)(<span class="hljs-params">o=&gt;o.payload.docs.map(a=&gt;i.idField?<span class="hljs-built_in">Object</span>.assign({[i.idField]:a.id},a.data(</span>)):<span class="hljs-params">a</span>.<span class="hljs-params">data</span><span class="hljs-params">()</span>)),<span class="hljs-params">Qe</span>.<span class="hljs-params">iC</span>)}<span class="hljs-params">get</span>(<span class="hljs-params">i</span>){<span class="hljs-params">return</span>(<span class="hljs-params"><span class="hljs-number">0</span>,ne.D</span>)(<span class="hljs-params"><span class="hljs-keyword">this</span>.query.get(i</span>)).<span class="hljs-params">pipe</span>(<span class="hljs-params">Qe.f6</span>)}}<span class="hljs-params">const</span> <span class="hljs-params">uy</span>=<span class="hljs-params">new</span> <span class="hljs-params">K</span>.<span class="hljs-params">OlP</span>(<span class="hljs-params"><span class="hljs-string">"angularfire2.enableFirestorePersistence"</span></span>),<span class="hljs-params">ly</span>=<span class="hljs-params">new</span> <span class="hljs-params">K</span>.<span class="hljs-params">OlP</span>(<span class="hljs-params"><span class="hljs-string">"angularfire2.firestore.persistenceSettings"</span></span>),<span class="hljs-params">hy</span>=<span class="hljs-params">new</span> <span class="hljs-params">K</span>.<span class="hljs-params">OlP</span>(<span class="hljs-params"><span class="hljs-string">"angularfire2.firestore.settings"</span></span>),<span class="hljs-params">dy</span>=<span class="hljs-params">new</span> <span class="hljs-params">K</span>.<span class="hljs-params">OlP</span>(<span class="hljs-params"><span class="hljs-string">"angularfire2.firestore.use-emulator"</span></span>);<span class="hljs-params">function</span> <span class="hljs-params">Wd</span>(<span class="hljs-params">r,i=(s=&gt;s</span>)){<span class="hljs-params">return</span>{<span class="hljs-params">query</span>:<span class="hljs-params">i</span>(<span class="hljs-params">r</span>),<span class="hljs-params">ref</span>:<span class="hljs-params">r</span>}}<span class="hljs-params">let</span> <span class="hljs-params">fy</span>=(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">r</span></span>{<span class="hljs-keyword">constructor</span>(s,o,a,c,u,h,f,v,w,T,S,C,P,B,j,de){<span class="hljs-keyword">this</span>.schedulers=f;<span class="hljs-keyword">const</span> Ze=<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,zi.on</span>)(<span class="hljs-params">s,h,o</span>),<span class="hljs-params">Mt</span>=<span class="hljs-params">w</span>;<span class="hljs-params">T</span>&amp;&amp;(<span class="hljs-params"><span class="hljs-number">0</span>,sn.nw</span>)(<span class="hljs-params">Ze,h,S,P,B,j,C,de</span>),[<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>,<span class="hljs-params">this</span>.<span class="hljs-params">persistenceEnabled$</span>]=(<span class="hljs-params"><span class="hljs-number">0</span>,Qe.cc</span>)(<span class="hljs-params"><span class="hljs-string">`<span class="hljs-subst">${Ze.name}</span>.firestore`</span>,<span class="hljs-string">"AngularFirestore"</span>,Ze.name,(</span>)=&gt;</span>{<span class="hljs-keyword">const</span> pt=h.runOutsideAngular(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>Ze.firestore());<span class="hljs-keyword">if</span>(c&amp;&amp;pt.settings(c),Mt&amp;&amp;pt.useEmulator(...Mt),a&amp;&amp;!<span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,et.PM</span>)(<span class="hljs-params">u</span>)){<span class="hljs-params">const</span> <span class="hljs-params">ir</span>=<span class="hljs-params">()</span>=&gt;</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">return</span><span class="hljs-function">(<span class="hljs-params"><span class="hljs-number">0</span>,ne.D</span>)(<span class="hljs-params">pt.enablePersistence(v||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span></span>).<span class="hljs-params">then</span>(<span class="hljs-params">(</span>)=&gt;</span>!<span class="hljs-number">0</span>,()=&gt;!<span class="hljs-number">1</span>))}<span class="hljs-keyword">catch</span>(Oo){<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span>&amp;&amp;<span class="hljs-built_in">console</span>.warn(Oo),(<span class="hljs-number">0</span>,rn.of)(!<span class="hljs-number">1</span>)}};<span class="hljs-keyword">return</span>[pt,h.runOutsideAngular(ir)]}<span class="hljs-keyword">return</span>[pt,(<span class="hljs-number">0</span>,rn.of)(!<span class="hljs-number">1</span>)]},[c,Mt,a])}collection(s,o){<span class="hljs-keyword">let</span> a;a=<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> s?<span class="hljs-keyword">this</span>.firestore.collection(s):s;<span class="hljs-keyword">const</span>{<span class="hljs-attr">ref</span>:c,<span class="hljs-attr">query</span>:u}=Wd(a,o),h=<span class="hljs-keyword">this</span>.schedulers.ngZone.run(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>c);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Qd(h,u,<span class="hljs-keyword">this</span>)}collectionGroup(s,o){<span class="hljs-keyword">const</span> a=o||<span class="hljs-function">(<span class="hljs-params">u=&gt;u</span>),<span class="hljs-params">c</span>=<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>.<span class="hljs-params">collectionGroup</span>(<span class="hljs-params">s</span>);<span class="hljs-params">return</span> <span class="hljs-params">new</span> <span class="hljs-params">cy</span>(<span class="hljs-params">a(c</span>),<span class="hljs-params">this</span>)}<span class="hljs-params">doc</span>(<span class="hljs-params">s</span>){<span class="hljs-params">let</span> <span class="hljs-params">o</span>;<span class="hljs-params">o</span>="<span class="hljs-params">string</span>"==<span class="hljs-params">typeof</span> <span class="hljs-params">s</span>?<span class="hljs-params">this</span>.<span class="hljs-params">firestore</span>.<span class="hljs-params">doc</span>(<span class="hljs-params">s</span>):<span class="hljs-params">s</span>;<span class="hljs-params">const</span> <span class="hljs-params">a</span>=<span class="hljs-params">this</span>.<span class="hljs-params">schedulers</span>.<span class="hljs-params">ngZone</span>.<span class="hljs-params">run</span>(<span class="hljs-params">(</span>)=&gt;</span>o);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Yd(a,<span class="hljs-keyword">this</span>)}createId(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.firestore.collection(<span class="hljs-string">"_"</span>).doc().id}}<span class="hljs-keyword">return</span> r.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(s||r)(K.LFG(zi.Dh),K.LFG(zi.xv,<span class="hljs-number">8</span>),K.LFG(uy,<span class="hljs-number">8</span>),K.LFG(hy,<span class="hljs-number">8</span>),K.LFG(K.Lbi),K.LFG(K.R0b),K.LFG(Qe.HU),K.LFG(ly,<span class="hljs-number">8</span>),K.LFG(dy,<span class="hljs-number">8</span>),K.LFG(sn.zQ,<span class="hljs-number">8</span>),K.LFG(sn.Qv,<span class="hljs-number">8</span>),K.LFG(sn.L6,<span class="hljs-number">8</span>),K.LFG(sn._Q,<span class="hljs-number">8</span>),K.LFG(sn.rT,<span class="hljs-number">8</span>),K.LFG(sn.lh,<span class="hljs-number">8</span>),K.LFG(sn.f7,<span class="hljs-number">8</span>))},r.\u0275prov=K.Yz7({<span class="hljs-attr">token</span>:r,<span class="hljs-attr">factory</span>:r.\u0275fac,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"any"</span>}),r})(),py=<span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">r</span></span>{<span class="hljs-keyword">constructor</span>(s){<span class="hljs-keyword">this</span>.db=s,<span class="hljs-keyword">this</span>._dbPath=<span class="hljs-string">"/repository"</span>,<span class="hljs-keyword">this</span>.repositoryRef=s.collection(<span class="hljs-keyword">this</span>._dbPath)}<span class="hljs-keyword">get</span> data(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.repositoryRef}setUrl(s){<span class="hljs-keyword">this</span>._dbPath=s}}<span class="hljs-keyword">return</span> r.\u0275fac=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>(s||r)(K.LFG(fy))},r.\u0275prov=K.Yz7({<span class="hljs-attr">token</span>:r,<span class="hljs-attr">factory</span>:r.\u0275fac,<span class="hljs-attr">providedIn</span>:<span class="hljs-string">"root"</span>}),r})()}}]);
</pre>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
